<!doctype html><head>
  <meta charset="UTF-8">
  <meta name="keywords" content="visualization,embeddings,machine learning,javascript">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Embedding projector - visualization of high-dimensional data">
  <meta property="og:description" content="Visualize high dimensional data.">
  <meta property="og:url" content="http://projector.tensorflow.org">
  <meta property="og:image" content="http://projector.tensorflow.org/preview.png">

  <meta name="twitter:card" value="summary_large_image">
  <meta name="twitter:title" content="Embedding projector - visualization of high-dimensional data">
  <meta name="twitter:description" content="Visualize high dimensional data.">
  <meta name="twitter:url" content="http://projector.tensorflow.org">
  <meta name="twitter:image" content="http://projector.tensorflow.org/preview.png">

  <meta http-equiv="cache-control" content="max-age=0">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
  <meta http-equiv="pragma" content="no-cache">

  <meta name="author" content="Daniel Smilkov, Nikhil Thorat, Charles Nicholson, Big Picture">

  <link rel="icon" type="image/png" href="../favicon.png">
  
  <script>/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
// @version 0.7.24
!function(){window.WebComponents=window.WebComponents||{flags:{}};var e="webcomponents-lite.js",t=document.querySelector('script[src*="'+e+'"]'),n={};if(!n.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var t,o=e.split("=");o[0]&&(t=o[0].match(/wc-(.+)/))&&(n[t[1]]=o[1]||!0)}),t)for(var o,r=0;o=t.attributes[r];r++)"src"!==o.name&&(n[o.name]=o.value||!0);if(n.log&&n.log.split){var i=n.log.split(",");n.log={},i.forEach(function(e){n.log[e]=!0})}else n.log={}}n.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=n.register),WebComponents.flags=n}(),function(e){"use strict";function t(e){return void 0!==h[e]}function n(){s.call(this),this._isInvalid=!0}function o(e){return""==e&&n.call(this),e.toLowerCase()}function r(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,63,96].indexOf(t)==-1?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,96].indexOf(t)==-1?e:encodeURIComponent(e)}function a(e,a,s){function c(e){g.push(e)}var d=a||"scheme start",l=0,u="",w=!1,_=!1,g=[];e:for(;(e[l-1]!=p||0==l)&&!this._isInvalid;){var b=e[l];switch(d){case"scheme start":if(!b||!m.test(b)){if(a){c("Invalid scheme.");break e}u="",d="no scheme";continue}u+=b.toLowerCase(),d="scheme";break;case"scheme":if(b&&v.test(b))u+=b.toLowerCase();else{if(":"!=b){if(a){if(p==b)break e;c("Code point not allowed in scheme: "+b);break e}u="",l=0,d="no scheme";continue}if(this._scheme=u,u="",a)break e;t(this._scheme)&&(this._isRelative=!0),d="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",d="query"):"#"==b?(this._fragment="#",d="fragment"):p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=r(b));break;case"no scheme":if(s&&t(s._scheme)){d="relative";continue}c("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=b||"/"!=e[l+1]){c("Expected /, got: "+b),d="relative";continue}d="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),p==b){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==b||"\\"==b)"\\"==b&&c("\\ is an invalid code point."),d="relative slash";else if("?"==b)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,d="query";else{if("#"!=b){var y=e[l+1],E=e[l+2];("file"!=this._scheme||!m.test(b)||":"!=y&&"|"!=y||p!=E&&"/"!=E&&"\\"!=E&&"?"!=E&&"#"!=E)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),d="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,d="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),d="relative path";continue}"\\"==b&&c("\\ is an invalid code point."),d="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){c("Expected '/', got: "+b),d="authority ignore slashes";continue}d="authority second slash";break;case"authority second slash":if(d="authority ignore slashes","/"!=b){c("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){d="authority";continue}c("Expected authority, got: "+b);break;case"authority":if("@"==b){w&&(c("@ already seen."),u+="%40"),w=!0;for(var L=0;L<u.length;L++){var N=u[L];if("\t"!=N&&"\n"!=N&&"\r"!=N)if(":"!=N||null!==this._password){var M=r(N);null!==this._password?this._password+=M:this._username+=M}else this._password="";else c("Invalid whitespace in authority.")}u=""}else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){l-=u.length,u="",d="host";continue}u+=b}break;case"file host":if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=u.length||!m.test(u[0])||":"!=u[1]&&"|"!=u[1]?0==u.length?d="relative path start":(this._host=o.call(this,u),u="",d="relative path start"):d="relative path";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid whitespace in file host."):u+=b;break;case"host":case"hostname":if(":"!=b||_){if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=o.call(this,u),u="",d="relative path start",a)break e;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?_=!0:"]"==b&&(_=!1),u+=b):c("Invalid code point in host/hostname: "+b)}else if(this._host=o.call(this,u),u="",d="port","hostname"==a)break e;break;case"port":if(/[0-9]/.test(b))u+=b;else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b||a){if(""!=u){var T=parseInt(u,10);T!=h[this._scheme]&&(this._port=T+""),u=""}if(a)break e;d="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid code point in port: "+b):n.call(this)}break;case"relative path start":if("\\"==b&&c("'\\' not allowed in path."),d="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":if(p!=b&&"/"!=b&&"\\"!=b&&(a||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(u+=r(b));else{"\\"==b&&c("\\ not allowed in relative path.");var O;(O=f[u.toLowerCase()])&&(u=O),".."==u?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==u&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=u&&("file"==this._scheme&&0==this._path.length&&2==u.length&&m.test(u[0])&&"|"==u[1]&&(u=u[0]+":"),this._path.push(u)),u="","?"==b?(this._query="?",d="query"):"#"==b&&(this._fragment="#",d="fragment")}break;case"query":a||"#"!=b?p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=i(b)):(this._fragment="#",d="fragment");break;case"fragment":p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}l++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");a.call(this,n,null,t)}var d=!1;if(!e.forceJURL)try{var l=new URL("b","http://a");l.pathname="c%20d",d="http://a/c%20d"===l.href}catch(u){}if(!d){var h=Object.create(null);h.ftp=21,h.file=0,h.gopher=70,h.http=80,h.https=443,h.ws=80,h.wss=443;var f=Object.create(null);f["%2e"]=".",f[".%2e"]="..",f["%2e."]="..",f["%2e%2e"]="..";var p=void 0,m=/[a-zA-Z]/,v=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),a.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||a.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],a.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),a.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),a.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var w=e.URL;w&&(c.createObjectURL=function(e){return w.createObjectURL.apply(w,arguments)},c.revokeObjectURL=function(e){w.revokeObjectURL(e)}),e.URL=c}}(self),"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var o=t[this.name];return o&&o[0]===t?o[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=n}(),function(e){function t(e){b.push(e),g||(g=!0,m(o))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function o(){g=!1;var e=b;b=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();r(e),n.length&&(e.callback_(n,e),t=!0)}),t&&o()}function r(e){e.nodes_.forEach(function(t){var n=v.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var o=v.get(n);if(o)for(var r=0;r<o.length;r++){var i=o[r],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++y}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function d(e,t){return E=new s(e,t)}function l(e){return L?L:(L=c(E),L.oldValue=e,L)}function u(){E=L=void 0}function h(e){return e===L||e===E}function f(e,t){return e===t?e:L&&h(e)?L:null}function p(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,v=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var w=[],_=String(Math.random());window.addEventListener("message",function(e){if(e.data===_){var t=w;w=[],t.forEach(function(e){e()})}}),m=function(e){w.push(e),window.postMessage(_,"*")}}var g=!1,b=[],y=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var o=v.get(e);o||v.set(e,o=[]);for(var r,i=0;i<o.length;i++)if(o[i].observer===this){r=o[i],r.removeListeners(),r.options=t;break}r||(r=new p(this,e,t),o.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=v.get(e),n=0;n<t.length;n++){var o=t[n];if(o.observer===this){o.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var E,L;p.prototype={enqueue:function(e){var n=this.observer.records_,o=n.length;if(n.length>0){var r=n[o-1],i=f(r,e);if(i)return void(n[o-1]=i)}else t(this.observer);n[o]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=v.get(e);t||v.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=v.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,o=e.target,r=new d("attributes",o);r.attributeName=t,r.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(o,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||e.attributeFilter.indexOf(t)!==-1||e.attributeFilter.indexOf(n)!==-1))return e.attributeOldValue?l(a):r});break;case"DOMCharacterDataModified":var o=e.target,r=d("characterData",o),a=e.prevValue;i(o,function(e){if(e.characterData)return e.characterDataOldValue?l(a):r});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,c,h=e.target;"DOMNodeInserted"===e.type?(s=[h],c=[]):(s=[],c=[h]);var f=h.previousSibling,p=h.nextSibling,r=d("childList",e.target.parentNode);r.addedNodes=s,r.removedNodes=c,r.previousSibling=f,r.nextSibling=p,i(e.relatedNode,function(e){if(e.childList)return r})}u()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(){function e(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}function t(t){return t.replace(u,e)}var n="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}();var o=function(){if(!n){var e=document.createElement("template"),t=document.createElement("template");t.content.appendChild(document.createElement("div")),e.content.appendChild(t);var o=e.cloneNode(!0);return 0===o.content.childNodes.length||0===o.content.firstChild.content.childNodes.length}}(),r="template",i=function(){};if(n){var a=document.implementation.createHTMLDocument("template"),s=!0,c=document.createElement("style");c.textContent=r+"{display:none;}";var d=document.head;d.insertBefore(c,d.firstElementChild),i.prototype=Object.create(HTMLElement.prototype),i.decorate=function(e){if(!e.content){e.content=a.createDocumentFragment();for(var n;n=e.firstChild;)e.content.appendChild(n);if(e.cloneNode=function(e){return i.cloneNode(this,e)},s)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",n=this.content.firstChild;n;n=n.nextSibling)e+=n.outerHTML||t(n.data);return e},set:function(e){for(a.body.innerHTML=e,i.bootstrap(a);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;a.body.firstChild;)this.content.appendChild(a.body.firstChild)},configurable:!0})}catch(o){s=!1}i.bootstrap(e.content)}},i.bootstrap=function(e){for(var t,n=e.querySelectorAll(r),o=0,a=n.length;o<a&&(t=n[o]);o++)i.decorate(t)},document.addEventListener("DOMContentLoaded",function(){i.bootstrap(document)});var l=document.createElement;document.createElement=function(){"use strict";var e=l.apply(document,arguments);return"template"===e.localName&&i.decorate(e),e};var u=/[&\u00A0<>]/g}if(n||o){var h=Node.prototype.cloneNode;i.cloneNode=function(e,t){var n=h.call(e,!1);return this.decorate&&this.decorate(n),t&&(n.content.appendChild(h.call(e.content,!0)),this.fixClonedDom(n.content,e.content)),n},i.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var n,o,i=t.querySelectorAll(r),a=e.querySelectorAll(r),s=0,c=a.length;s<c;s++)o=i[s],n=a[s],this.decorate&&this.decorate(o),n.parentNode.replaceChild(o.cloneNode(!0),n)};var f=document.importNode;Node.prototype.cloneNode=function(e){var t=h.call(this,e);return e&&i.fixClonedDom(t,this),t},document.importNode=function(e,t){if(e.localName===r)return i.cloneNode(e,t);var n=f.call(document,e,t);return t&&i.fixClonedDom(n,e),n},o&&(HTMLTemplateElement.prototype.cloneNode=function(e){return i.cloneNode(this,e)})}n&&(window.HTMLTemplateElement=i)}(),function(e){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var n=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!n){var o=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(o.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=i.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||p,o(function(){i(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===w}function o(e,t){if(n(t))e&&e();else{var r=function(){"complete"!==t.readyState&&t.readyState!==w||(t.removeEventListener(_,r),o(e,t))};t.addEventListener(_,r)}}function r(e){e.target.__loaded=!0}function i(e,t){function n(){c==d&&e&&e({allImports:s,loadedImports:l,errorImports:u})}function o(e){r(e),l.push(this),c++,n()}function i(e){u.push(this),c++,n()}var s=t.querySelectorAll("link[rel=import]"),c=0,d=s.length,l=[],u=[];if(d)for(var h,f=0;f<d&&(h=s[f]);f++)a(h)?(l.push(this),c++,n()):(h.addEventListener("load",o),h.addEventListener("error",i));else n()}function a(e){return u?e.__loaded||e["import"]&&"loading"!==e["import"].readyState:e.__importParsed}function s(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)c(t)&&d(t)}function c(e){return"link"===e.localName&&"import"===e.rel}function d(e){var t=e["import"];t?r({target:e}):(e.addEventListener("load",r),e.addEventListener("error",r))}var l="import",u=Boolean(l in document.createElement("link")),h=Boolean(window.ShadowDOMPolyfill),f=function(e){return h?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},p=f(document),m={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return f(e)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(p,"_currentScript",m);var v=/Trident/.test(navigator.userAgent),w=v?"complete":"interactive",_="readystatechange";u&&(new MutationObserver(function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.addedNodes&&s(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),n=0,o=t.length;n<o&&(e=t[n]);n++)d(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=p.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),p.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=l,e.useNative=u,e.rootDocument=p,e.whenReady=t,e.isIE=v}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},o=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=o}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,o={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,o=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,o),e},resolveUrlsInCssText:function(e,o,r){var i=this.replaceUrls(e,r,o,t);return i=this.replaceUrls(i,r,o,n)},replaceUrls:function(e,t,n,o){return e.replace(o,function(e,o,r,i){var a=r.replace(/["']/g,"");return n&&(a=new URL(a,n).href),t.href=a,a=t.href,o+"'"+a+"'"+i})}};e.path=o}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,o,r){var i=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),i.open("GET",n,t.async),i.addEventListener("readystatechange",function(e){if(4===i.readyState){var n=null;try{var a=i.getResponseHeader("Location");a&&(n="/"===a.substr(0,1)?location.origin+a:a)}catch(e){console.error(e.message)}o.call(r,!t.ok(i)&&i,i.response||i.responseText,n)}}),i.send(),i},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,o=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};o.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,o){if(n.load&&console.log("fetch",e,o),e)if(e.match(/^data:/)){var r=e.split(","),i=r[0],a=r[1];a=i.indexOf(";base64")>-1?atob(a):decodeURIComponent(a),setTimeout(function(){this.receive(e,o,null,a)}.bind(this),0)}else{var s=function(t,n,r){this.receive(e,o,t,n,r)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,o,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,o,r){this.cache[e]=o;for(var i,a=this.pending[e],s=0,c=a.length;s<c&&(i=a[s]);s++)this.onload(e,i,o,n,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=o}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===l}function n(e){var t=o(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function o(e){return e.textContent+r(e)}function r(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,o=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+o+".js\n"}function i(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,a.resolveUrlsInStyle(t),t}var a=e.path,s=e.rootDocument,c=e.flags,d=e.isIE,l=e.IMPORT_LINK_TYPE,u="link[rel="+l+"]",h={documentSelectors:u,importsSelectors:[u,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(c.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){c.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,c.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e["import"]=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e["import"]&&(e["import"].__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=i(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,o=function(r){e.removeEventListener("load",o),e.removeEventListener("error",o),t&&t(r),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",o),e.addEventListener("error",o),d&&"style"===e.localName){var r=!1;if(e.textContent.indexOf("@import")==-1)r=!0;else if(e.sheet){r=!0;for(var i,a=e.sheet.cssRules,s=a?a.length:0,c=0;c<s&&(i=a[c]);c++)i.type===CSSRule.IMPORT_RULE&&(r=r&&Boolean(i.styleSheet))}r&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var o=document.createElement("script");o.__importElement=t,o.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(o,function(t){o.parentNode&&o.parentNode.removeChild(o),e.currentScript=null}),this.addElementToDocument(o)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var o,r=e.querySelectorAll(this.parseSelectorsForNode(e)),i=0,a=r.length;i<a&&(o=r[i]);i++)if(!this.isParsed(o))return this.hasResource(o)?t(o)?this.nextToParseInDoc(o.__doc,o):o:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return!t(e)||void 0!==e.__doc}};e.parser=h,e.IMPORT_SELECTOR=u}),window.HTMLImports.addModule(function(e){function t(e){return n(e,a)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function o(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function r(e,t){var n=document.implementation.createHTMLDocument(a);n._URL=t;var r=n.createElement("base");r.setAttribute("href",t),n.baseURI||o(n)||Object.defineProperty(n,"baseURI",{value:t});var i=n.createElement("meta");return i.setAttribute("charset","utf-8"),n.head.appendChild(i),n.head.appendChild(r),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var i=e.flags,a=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,c=e.rootDocument,d=e.Loader,l=e.Observer,u=e.parser,h={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){f.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);f.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===c?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,o,a,s){if(i.load&&console.log("loaded",e,n),n.__resource=o,n.__error=a,t(n)){var c=this.documents[e];void 0===c&&(c=a?null:r(o,s||e),c&&(c.__importLink=n,this.bootDocument(c)),this.documents[e]=c),n.__doc=c}u.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),u.parseNext()},loadedAll:function(){u.parseNext()}},f=new d(h.loaded.bind(h),h.loadedAll.bind(h));if(h.observer=new l,!document.baseURI){var p={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",p),Object.defineProperty(c,"baseURI",p)}e.importer=h,e.importLoader=f}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,o={added:function(e){for(var o,r,i,a,s=0,c=e.length;s<c&&(a=e[s]);s++)o||(o=a.ownerDocument,r=t.isParsed(o)),i=this.shouldLoadNode(a),i&&n.loadNode(a),this.shouldParseNode(a)&&r&&t.parseDynamic(a,i)},shouldLoadNode:function(e){return 1===e.nodeType&&r.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&r.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=o.added.bind(o);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(o)}var n=e.initializeModules;e.isIE;if(!e.useNative){n();var o=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],o=function(e){n.push(e)},r=function(){n.forEach(function(t){t(e)})};e.addModule=o,e.initializeModules=r,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return!!t(e)||void o(e,t)}),o(e,t)}function n(e,t,o){var r=e.firstElementChild;if(!r)for(r=e.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)t(r,o)!==!0&&n(r,t,o),r=r.nextElementSibling;return null}function o(e,n){for(var o=e.shadowRoot;o;)t(o,n),o=o.olderShadowRoot}function r(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var o,r=e.querySelectorAll("link[rel="+a+"]"),s=0,c=r.length;s<c&&(o=r[s]);s++)o["import"]&&i(o["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=r,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||o(e,t)}function n(t,n){return!!e.upgrade(t,n)||void(n&&a(t))}function o(e,t){g(e,function(e){if(n(e,t))return!0})}function r(e){L.push(e),E||(E=!0,setTimeout(i))}function i(){E=!1;for(var e,t=L,n=0,o=t.length;n<o&&(e=t[n]);n++)e();L=[]}function a(e){y?r(function(){s(e);
}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){d(e),g(e,function(e){d(e)})}function d(e){y?r(function(){l(e)}):l(e)}function l(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function u(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function h(e){if(e.shadowRoot&&!e.shadowRoot.__watched){_.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function f(e,n){if(_.dom){var o=n[0];if(o&&"childList"===o.type&&o.addedNodes&&o.addedNodes){for(var r=o.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var i=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=u(e);n.forEach(function(e){"childList"===e.type&&(N(e.addedNodes,function(e){e.localName&&t(e,a)}),N(e.removedNodes,function(e){e.localName&&c(e)}))}),_.dom&&console.groupEnd()}function p(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(f(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(f.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function v(e){e=window.wrap(e),_.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),_.dom&&console.groupEnd()}function w(e){b(e,v)}var _=e.flags,g=e.forSubtree,b=e.forDocumentTree,y=window.MutationObserver._isPolyfilled&&_["throttle-attached"];e.hasPolyfillMutations=y,e.hasThrottledAttached=y;var E=!1,L=[],N=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=h,e.upgradeDocumentTree=w,e.upgradeDocument=v,e.upgradeSubtree=o,e.upgradeAll=t,e.attached=a,e.takeRecords=p}),window.CustomElements.addModule(function(e){function t(t,o){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var r=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(r);if(i&&(r&&i.tag==t.localName||!r&&!i["extends"]))return n(t,i,o)}}function n(t,n,r){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),o(t,n),t.__upgraded__=!0,i(t),r&&e.attached(t),e.upgradeSubtree(t,r),a.upgrade&&console.groupEnd(),t}function o(e,t){Object.__proto__?e.__proto__=t.prototype:(r(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function r(e,t,n){for(var o={},r=t;r!==n&&r!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(r),s=0;i=a[s];s++)o[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i)),o[i]=1);r=Object.getPrototypeOf(r)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=o}),window.CustomElements.addModule(function(e){function t(t,o){var c=o||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(r(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(d(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return c.prototype||(c.prototype=Object.create(HTMLElement.prototype)),c.__name=t.toLowerCase(),c["extends"]&&(c["extends"]=c["extends"].toLowerCase()),c.lifecycle=c.lifecycle||{},c.ancestry=i(c["extends"]),a(c),s(c),n(c.prototype),l(c.__name,c),c.ctor=u(c),c.ctor.prototype=c.prototype,c.prototype.constructor=c.ctor,e.ready&&v(document),c.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){o.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){o.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function o(e,t,n){e=e.toLowerCase();var o=this.getAttribute(e);n.apply(this,arguments);var r=this.getAttribute(e);this.attributeChangedCallback&&r!==o&&this.attributeChangedCallback(e,o,r)}function r(e){for(var t=0;t<y.length;t++)if(e===y[t])return!0}function i(e){var t=d(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],o=0;t=e.ancestry[o];o++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var o,r=e.prototype,i=!1;r;)r==t&&(i=!0),o=Object.getPrototypeOf(r),o&&(r.__proto__=o),r=o;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function c(e){return _(N(e.tag),e)}function d(e){if(e)return E[e.toLowerCase()]}function l(e,t){E[e]=t}function u(e){return function(){return c(e)}}function h(e,t,n){return e===L?f(t,n):M(e,t)}function f(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=d(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var o;return t?(o=f(e),o.setAttribute("is",t),o):(o=N(e),e.indexOf("-")>=0&&g(o,HTMLElement),o)}function p(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return w(e),e}}var m,v=(e.isIE,e.upgradeDocumentTree),w=e.upgradeAll,_=e.upgradeWithDefinition,g=e.implementPrototype,b=e.useNative,y=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],E={},L="http://www.w3.org/1999/xhtml",N=document.createElement.bind(document),M=document.createElementNS.bind(document);m=Object.__proto__||b?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},p(Node.prototype,"cloneNode"),p(document,"importNode"),document.registerElement=t,document.createElement=f,document.createElementNS=h,e.registry=E,e["instanceof"]=m,e.reservedTagList=y,e.getRegisteredDefinition=d,document.register=document.registerElement}),function(e){function t(){i(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,o=e.initializeModules;e.isIE;if(n){var r=function(){};e.watchShadow=r,e.upgrade=r,e.upgradeAll=r,e.upgradeDocumentTree=r,e.upgradeSubtree=r,e.takeRecords=r,e["instanceof"]=function(e,t){return e instanceof t}}else o();var i=e.upgradeDocumentTree,a=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&a(wrap(e["import"]))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents);</script>
  <!--
@license
Copyright 2016 The TensorFlow Authors. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
three.js
Copyright (c) 2010-2013 three.js authors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
d3
Copyright 2010-2017 Mike Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* Neither the name of the author nor the names of contributors may be used to
  endorse or promote products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

@license
Numeric Javascript
Copyright (C) 2011 by Sébastien Loisel
Copyright (c) 2011 Alberto Santini <albertosantini@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
umap-js
Copyright 2019 Google LLC All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

@license
weblas
Copyright (c) 2015 Waylon Flinn

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
--><script>/*

 Copyright 2014 Google Inc. All rights reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc. All rights reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
 limitations under the License.
*/
(function(){var G={},F={},M={};(function(x,v){function k(){this._endDelay=this._delay=0;this._fill="none";this._iterationStart=0;this._iterations=1;this._duration=0;this._playbackRate=1;this._direction="normal";this._easing="linear";this._easingFunction=n}function f(){return x.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function h(m,A,B){var C=new k;A&&(C.fill="both",C.duration="auto");"number"!=typeof m||isNaN(m)?void 0!==m&&Object.getOwnPropertyNames(m).forEach(function(w){if("auto"!=
m[w]){if("number"==typeof C[w]||"duration"==w)if("number"!=typeof m[w]||isNaN(m[w]))return;"fill"==w&&-1==d.indexOf(m[w])||"direction"==w&&-1==l.indexOf(m[w])||"playbackRate"==w&&1!==m[w]&&x.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(C[w]=m[w])}}):C.duration=m;return C}function e(m,A,B,C){return 0>m||1<m||0>B||1<B?n:function(w){if(0>=w){var D=0;0<m?D=A/m:!A&&0<B&&(D=C/B);return D*w}if(1<=w)return D=0,1>B?D=(C-1)/(B-1):1==B&&1>m&&(D=(A-1)/
(m-1)),1+D*(w-1);D=0;for(var H=1;D<H;){var E=(D+H)/2,I=3*m*(1-E)*(1-E)*E+3*B*(1-E)*E*E+E*E*E;if(1E-5>Math.abs(w-I))break;I<w?D=E:H=E}return 3*A*(1-E)*(1-E)*E+3*C*(1-E)*E*E+E*E*E}}function a(m,A){return function(B){if(1<=B)return 1;var C=1/m;B+=A*C;return B-B%C}}function c(m){u||(u=document.createElement("div").style);u.animationTimingFunction="";u.animationTimingFunction=m;var A=u.animationTimingFunction;if(""==A&&f())throw new TypeError(m+" is not a valid value for easing");return A}function b(m){if("linear"==
m)return n;var A=r.exec(m);return A?e.apply(this,A.slice(1).map(Number)):(A=y.exec(m))?a(Number(A[1]),{start:t,middle:p,end:q}[A[2]]):(m=z[m])?m:n}function g(m,A,B){if(null==A)return 0;var C=B.delay+m+B.endDelay;return A<Math.min(B.delay,C)?1:A>=Math.min(B.delay+m,C)?2:3}var d=["backwards","forwards","both","none"],l=["reverse","alternate","alternate-reverse"],n=function(m){return m};k.prototype={_setMember:function(m,A){this["_"+m]=A;this._effect&&(this._effect._timingInput[m]=A,this._effect._timing=
x.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=x.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(m){this._setMember("delay",m)},get delay(){return this._delay},set endDelay(m){this._setMember("endDelay",m)},get endDelay(){return this._endDelay},set fill(m){this._setMember("fill",m)},get fill(){return this._fill},set iterationStart(m){if((isNaN(m)||
0>m)&&f())throw new TypeError("iterationStart must be a non-negative number, received: "+m);this._setMember("iterationStart",m)},get iterationStart(){return this._iterationStart},set duration(m){if("auto"!=m&&(isNaN(m)||0>m)&&f())throw new TypeError("duration must be non-negative or auto, received: "+m);this._setMember("duration",m)},get duration(){return this._duration},set direction(m){this._setMember("direction",m)},get direction(){return this._direction},set easing(m){this._easingFunction=b(c(m));
this._setMember("easing",m)},get easing(){return this._easing},set iterations(m){if((isNaN(m)||0>m)&&f())throw new TypeError("iterations must be non-negative, received: "+m);this._setMember("iterations",m)},get iterations(){return this._iterations}};var t=1,p=.5,q=0,z={ease:e(.25,.1,.25,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1),"step-start":a(1,t),"step-middle":a(1,p),"step-end":a(1,q)},u=null,r=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,
y=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;x.cloneTimingInput=function(m){if("number"==typeof m)return m;var A={},B;for(B in m)A[B]=m[B];return A};x.makeTiming=h;x.numericTimingToObject=function(m){"number"==typeof m&&(m=isNaN(m)?{duration:0}:{duration:m});return m};x.normalizeTimingInput=function(m,A){m=x.numericTimingToObject(m);return h(m,A)};x.calculateActiveDuration=function(m){return Math.abs((0===m.duration||0===m.iterations?0:m.duration*m.iterations)/m.playbackRate)};x.calculateIterationProgress=
function(m,A,B){var C=g(m,A,B);a:{var w=B.fill;switch(C){case 1:m="backwards"==w||"both"==w?0:null;break a;case 3:m=A-B.delay;break a;case 2:m="forwards"==w||"both"==w?m:null;break a;case 0:m=null;break a}m=void 0}if(null===m)return null;A=B.duration;w=B.iterationStart;0===A?1!==C&&(w+=B.iterations):w+=m/A;A=w;w=Infinity===A?B.iterationStart%1:A%1;0!==w||2!==C||0===B.iterations||0===m&&0!==B.duration||(w=1);m=w;w=2===C&&Infinity===B.iterations?Infinity:1===m?Math.floor(A)-1:Math.floor(A);A=C=B.direction;
"normal"!==C&&"reverse"!==C&&("alternate-reverse"===C&&(w+=1),A="normal",Infinity!==w&&0!==w%2&&(A="reverse"));return B._easingFunction("normal"===A?m:1-m)};x.calculatePhase=g;x.normalizeEasing=c;x.parseEasingFunction=b})(G,null);(function(x,v){function k(a){var c=[],b;for(b in a)if(!(b in["easing","offset","composite"])){var g=a[b];Array.isArray(g)||(g=[g]);for(var d,l=g.length,n=0;n<l;n++)d={},d.offset="offset"in a?a.offset:1==l?1:n/(l-1),"easing"in a&&(d.easing=a.easing),"composite"in a&&(d.composite=
a.composite),d[b]=g[n],c.push(d)}c.sort(function(t,p){return t.offset-p.offset});return c}var f={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth",
"borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth",
"borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},h=document.createElementNS("http://www.w3.org/1999/xhtml","div");v={thin:"1px",medium:"3px",thick:"5px"};var e={borderBottomWidth:v,borderLeftWidth:v,borderRightWidth:v,borderTopWidth:v,
fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:v,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};x.convertToArrayForm=k;x.normalizeKeyframes=function(a){function c(){var n=b.length;null==b[n-1].offset&&(b[n-1].offset=1);1<n&&null==b[0].offset&&(b[0].offset=0);for(var t=0,p=b[0].offset,q=1;q<n;q++){var z=b[q].offset;if(null!=z){for(var u=
1;u<q-t;u++)b[t+u].offset=p+(z-p)*u/(q-t);t=q;p=z}}}if(null==a)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&a[Symbol.iterator]&&(a=Array.from(a));Array.isArray(a)||(a=k(a));var b=a.map(function(n){var t={},p;for(p in n){var q=n[p];if("offset"==p){if(null!=q){q=Number(q);if(!isFinite(q))throw new TypeError("Keyframe offsets must be numbers.");if(0>q||1<q)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==p){if("add"==q||"accumulate"==q)throw{type:DOMException.NOT_SUPPORTED_ERR,
name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=q)throw new TypeError("Invalid composite mode "+q+".");}else q="easing"==p?x.normalizeEasing(q):""+q;var z=void 0,u=p,r=q;q=t;var y=u;if("display"!==y&&0!==y.lastIndexOf("animation",0)&&0!==y.lastIndexOf("transition",0))if(y=f[u])for(z in h.style[u]=r,y)u=y[z],r=h.style[u],q[u]=u in e?e[u][r]||r:r;else q[u]=u in e?e[u][r]||r:r}void 0==t.offset&&(t.offset=null);void 0==t.easing&&(t.easing="linear");return t});a=!0;for(var g=
-Infinity,d=0;d<b.length;d++){var l=b[d].offset;if(null!=l){if(l<g)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");g=l}else a=!1}b=b.filter(function(n){return 0<=n.offset&&1>=n.offset});a||c();return b}})(G,null);(function(x){var v={};x.isDeprecated=function(k,f,h,e){e=e?"are":"is";var a=new Date;f=new Date(f);f.setMonth(f.getMonth()+3);return a<f?(k in v||console.warn("Web Animations: "+k+" "+e+" deprecated and will stop working on "+f.toDateString()+". "+
h),v[k]=!0,!1):!0};x.deprecated=function(k,f,h,e){var a=e?"are":"is";if(x.isDeprecated(k,f,h,e))throw Error(k+" "+a+" no longer supported. "+h);}})(G);(function(){if(document.documentElement.animate){var x=document.documentElement.animate([],0),v=!0;x&&(v=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(k){void 0===x[k]&&(v=!0)}));if(!v)return}(function(k,f,h){function e(c){for(var b={},g=0;g<c.length;g++)for(var d in c[g])if("offset"!=
d&&"easing"!=d&&"composite"!=d){var l={offset:c[g].offset,easing:c[g].easing,value:c[g][d]};b[d]=b[d]||[];b[d].push(l)}for(var n in b)if(c=b[n],0!=c[0].offset||1!=c[c.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"};return b}function a(c){var b=[],g;for(g in c)for(var d=c[g],l=0;l<d.length-1;l++){var n=l,t=l+1,p=d[n].offset,q=d[t].offset,z=p,u=q;0==l&&(z=-Infinity,0==q&&(t=n));l==d.length-2&&(u=Infinity,1==p&&(n=t));
b.push({applyFrom:z,applyTo:u,startOffset:d[n].offset,endOffset:d[t].offset,easingFunction:k.parseEasingFunction(d[n].easing),property:g,interpolation:f.propertyInterpolation(g,d[n].value,d[t].value)})}b.sort(function(r,y){return r.startOffset-y.startOffset});return b}f.convertEffectInput=function(c){c=k.normalizeKeyframes(c);var b=e(c),g=a(b);return function(d,l){if(null!=l)g.filter(function(t){return l>=t.applyFrom&&l<t.applyTo}).forEach(function(t){var p=l-t.startOffset,q=t.endOffset-t.startOffset;
p=0==q?0:t.easingFunction(p/q);f.apply(d,t.property,t.interpolation(p))});else for(var n in b)"offset"!=n&&"easing"!=n&&"composite"!=n&&f.clear(d,n)}}})(G,F,null);(function(k,f,h){function e(b){return b.replace(/-(.)/g,function(g,d){return d.toUpperCase()})}var a={};f.addPropertiesHandler=function(b,g,d){for(var l=0;l<d.length;l++){var n=b,t=g,p=e(d[l]);a[p]=a[p]||[];a[p].push([n,t])}};var c={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",
borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",
maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};f.propertyInterpolation=function(b,g,d){var l=b;/-/.test(b)&&
!k.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(l=e(b));if("initial"==g||"initial"==d)"initial"==g&&(g=c[l]),"initial"==d&&(d=c[l]);b=g==d?[]:a[l];for(l=0;b&&l<b.length;l++){var n=b[l][0](g),t=b[l][0](d);if(void 0!==n&&void 0!==t&&(n=b[l][1](n,t))){var p=f.Interpolation.apply(null,n);return function(q){return 0==q?g:1==q?d:p(q)}}}return f.Interpolation(!1,!0,function(q){return q?d:g})}})(G,F,null);(function(k,f,h){function e(a){var c=k.calculateActiveDuration(a),
b=function(g){return k.calculateIterationProgress(c,g,a)};b._totalDuration=a.delay+c+a.endDelay;return b}f.KeyframeEffect=function(a,c,b,g){var d=e(k.normalizeTimingInput(b)),l=f.convertEffectInput(c),n;c=function(){l(a,n)};c._update=function(t){n=d(t);return null!==n};c._clear=function(){l(a,null)};c._hasSameTarget=function(t){return a===t};c._target=a;c._totalDuration=d._totalDuration;c._id=g;return c}})(G,F,null);(function(k,f){k.apply=function(h,e,a){h.style[k.propertyName(e)]=a};k.clear=function(h,
e){h.style[k.propertyName(e)]=""}})(F,null);(function(k){window.Element.prototype.animate=function(f,h){var e="";h&&h.id&&(e=h.id);return k.timeline._play(k.KeyframeEffect(this,f,h,e))}})(F);(function(k,f){function h(e,a,c){if("number"==typeof e&&"number"==typeof a)return e*(1-c)+a*c;if("boolean"==typeof e&&"boolean"==typeof a)return.5>c?e:a;if(e.length==a.length){for(var b=[],g=0;g<e.length;g++)b.push(h(e[g],a[g],c));return b}throw"Mismatched interpolation arguments "+e+":"+a;}k.Interpolation=function(e,
a,c){return function(b){return c(h(e,a,b))}}})(F,null);(function(k,f,h){k.sequenceNumber=0;var e=function(a,c,b){this.target=a;this.currentTime=c;this.timelineTime=b;this.type="finish";this.cancelable=this.bubbles=!1;this.currentTarget=a;this.defaultPrevented=!1;this.eventPhase=Event.AT_TARGET;this.timeStamp=Date.now()};f.Animation=function(a){this.id="";a&&a._id&&(this.id=a._id);this._sequenceNumber=k.sequenceNumber++;this._currentTime=0;this._startTime=null;this._paused=!1;this._playbackRate=1;
this._finishedFlag=this._inTimeline=!0;this.onfinish=null;this._finishHandlers=[];this._effect=a;this._inEffect=this._effect._update(0);this._idle=!0;this._currentTimePending=!1};f.Animation.prototype={_ensureAlive:function(){this._inEffect=0>this.playbackRate&&0===this.currentTime?this._effect._update(-1):this._effect._update(this.currentTime);this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,f.timeline._animations.push(this))},_tickCurrentTime:function(a,c){a!=this._currentTime&&
(this._currentTime=a,this._isFinished&&!c&&(this._currentTime=0<this._playbackRate?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a;isNaN(a)||(f.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(a,!0),f.applyDirtiedAnimation(this)))},
get startTime(){return this._startTime},set startTime(a){a=+a;isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),f.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var c=this.currentTime;this._playbackRate=a;this._startTime=null;"paused"!=this.playState&&"idle"!=this.playState&&(this._idle=this._finishedFlag=!1,this._ensureAlive(),f.applyDirtiedAnimation(this));
null!=c&&(this.currentTime=c)}},get _isFinished(){return!this._idle&&(0<this._playbackRate&&this._currentTime>=this._totalDuration||0>this._playbackRate&&0>=this._currentTime)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(0<=this._playbackRate)this._currentTime=0;else if(Infinity>
this._totalDuration)this._currentTime=this._totalDuration;else throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");},play:function(){this._paused=!1;if(this._isFinished||this._idle)this._rewind(),this._startTime=null;this._idle=this._finishedFlag=!1;this._ensureAlive();f.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0;this._startTime=
null;this._paused=!0},finish:function(){this._idle||(this.currentTime=0<this._playbackRate?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,f.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),f.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1;this.play()},addEventListener:function(a,
c){"function"==typeof c&&"finish"==a&&this._finishHandlers.push(c)},removeEventListener:function(a,c){"finish"==a&&(a=this._finishHandlers.indexOf(c),0<=a&&this._finishHandlers.splice(a,1))},_fireEvents:function(a){if(this._isFinished){if(!this._finishedFlag){var c=new e(this,this._currentTime,a),b=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){b.forEach(function(g){g.call(c.target,c)})},0);this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(a,c){this._idle||
this._paused||(null==this._startTime?c&&(this.startTime=a-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate));c&&(this._currentTimePending=!1,this._fireEvents(a))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var a=this._effect._target;a._activeAnimations||(a._activeAnimations=[]);return a._activeAnimations},_markTarget:function(){var a=this._targetAnimations();-1===
a.indexOf(this)&&a.push(this)},_unmarkTarget:function(){var a=this._targetAnimations(),c=a.indexOf(this);-1!==c&&a.splice(c,1)}}})(G,F,null);(function(k,f,h){function e(r){var y=l;l=[];r<u.currentTime&&(r=u.currentTime);u._animations.sort(a);u._animations=g(r,!0,u._animations)[0];y.forEach(function(m){m[1](r)});b()}function a(r,y){return r._sequenceNumber-y._sequenceNumber}function c(){this._animations=[];this.currentTime=window.performance&&performance.now?performance.now():0}function b(){q.forEach(function(r){r()});
q.length=0}function g(r,y,m){z=!0;p=!1;f.timeline.currentTime=r;t=!1;var A=[],B=[],C=[],w=[];m.forEach(function(D){D._tick(r,y);D._inEffect?(B.push(D._effect),D._markTarget()):(A.push(D._effect),D._unmarkTarget());D._needsTick&&(t=!0);var H=D._inEffect||D._needsTick;(D._inTimeline=H)?C.push(D):w.push(D)});q.push.apply(q,A);q.push.apply(q,B);t&&requestAnimationFrame(function(){});z=!1;return[C,w]}var d=window.requestAnimationFrame,l=[],n=0;window.requestAnimationFrame=function(r){var y=n++;0!=l.length||
d(e);l.push([y,r]);return y};window.cancelAnimationFrame=function(r){l.forEach(function(y){y[0]==r&&(y[1]=function(){})})};c.prototype={_play:function(r){r._timing=k.normalizeTimingInput(r.timing);r=new f.Animation(r);r._idle=!1;r._timeline=this;this._animations.push(r);f.restart();f.applyDirtiedAnimation(r);return r}};var t=!1,p=!1;f.restart=function(){t||(t=!0,requestAnimationFrame(function(){}),p=!0);return p};f.applyDirtiedAnimation=function(r){z||(r._markTarget(),r=r._targetAnimations(),r.sort(a),
g(f.timeline.currentTime,!1,r.slice())[1].forEach(function(y){y=u._animations.indexOf(y);-1!==y&&u._animations.splice(y,1)}),b())};var q=[],z=!1,u=new c;f.timeline=u})(G,F,null);(function(k){function f(c,b){var g=c.exec(b);if(g)return g=c.ignoreCase?g[0].toLowerCase():g[0],[g,b.substr(g.length)]}function h(c,b){b=b.replace(/^\s*/,"");if(c=c(b))return[c[0],c[1].replace(/^\s*/,"")]}function e(c,b){for(var g=c,d=b;g&&d;)g>d?g%=d:d%=g;return c*b/(g+d)}function a(c,b,g,d,l){for(var n=[],t=[],p=[],q=e(d.length,
l.length),z=0;z<q;z++){var u=b(d[z%d.length],l[z%l.length]);if(!u)return;n.push(u[0]);t.push(u[1]);p.push(u[2])}return[n,t,function(r){r=r.map(function(y,m){return p[m](y)}).join(g);return c?c(r):r}]}k.consumeToken=f;k.consumeTrimmed=h;k.consumeRepeated=function(c,b,g){c=h.bind(null,c);for(var d=[];;){var l=c(g);if(!l)return[d,g];d.push(l[0]);g=l[1];l=f(b,g);if(!l||""==l[1])return[d,g];g=l[1]}};k.consumeParenthesised=function(c,b){for(var g=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=g);d++)if("("==
b[d])g++;else if(")"==b[d]&&(g--,0==g&&d++,0>=g))break;c=c(b.substr(0,d));return void 0==c?void 0:[c,b.substr(d)]};k.ignore=function(c){return function(b){(b=c(b))&&(b[0]=void 0);return b}};k.optional=function(c,b){return function(g){var d=c(g);return d?d:[b,g]}};k.consumeList=function(c,b){for(var g=[],d=0;d<c.length;d++){b=k.consumeTrimmed(c[d],b);if(!b||""==b[0])return;void 0!==b[0]&&g.push(b[0]);b=b[1]}if(""==b)return g};k.mergeNestedRepeated=a.bind(null,null);k.mergeWrappedNestedRepeated=a;k.mergeList=
function(c,b,g){for(var d=[],l=[],n=[],t=0,p=0;p<g.length;p++)if("function"==typeof g[p]){var q=g[p](c[t],b[t++]);d.push(q[0]);l.push(q[1]);n.push(q[2])}else(function(z){d.push(!1);l.push(!1);n.push(function(){return g[z]})})(p);return[d,l,function(z){for(var u="",r=0;r<z.length;r++)u+=n[r](z[r]);return u}]}})(F);(function(k){function f(e){var a={inset:!1,lengths:[],color:null};if((e=k.consumeRepeated(function(c){var b=k.consumeToken(/^inset/i,c);if(b)return a.inset=!0,b;if(b=k.consumeLengthOrPercent(c))return a.lengths.push(b[0]),
b;if(b=k.consumeColor(c))return a.color=b[0],b},/^/,e))&&e[0].length)return[a,e[1]]}var h=function(e,a,c,b){function g(q){return{inset:q,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var d=[],l=[],n=0;n<c.length||n<b.length;n++){var t=c[n]||g(b[n].inset),p=b[n]||g(c[n].inset);d.push(t);l.push(p)}return k.mergeNestedRepeated(e,a,d,l)}.bind(null,function(e,a){for(;e.lengths.length<Math.max(e.lengths.length,a.lengths.length);)e.lengths.push({px:0});for(;a.lengths.length<Math.max(e.lengths.length,
a.lengths.length);)a.lengths.push({px:0});if(e.inset==a.inset&&!!e.color==!!a.color){for(var c=[],b,g=[[],0],d=[[],0],l=0;l<e.lengths.length;l++){var n=k.mergeDimensions(e.lengths[l],a.lengths[l],2==l);g[0].push(n[0]);d[0].push(n[1]);c.push(n[2])}e.color&&a.color&&(a=k.mergeColors(e.color,a.color),g[1]=a[0],d[1]=a[1],b=a[2]);return[g,d,function(t){for(var p=e.inset?"inset ":" ",q=0;q<c.length;q++)p+=c[q](t[0][q])+" ";b&&(p+=b(t[1]));return p}]}},", ");k.addPropertiesHandler(function(e){if((e=k.consumeRepeated(f,
/^,/,e))&&""==e[1])return e[0]},h,["box-shadow","text-shadow"])})(F);(function(k,f){function h(g){return g.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function e(g,d,l){return Math.min(d,Math.max(g,l))}function a(g){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(g))return Number(g)}function c(g,d){return function(l,n){return[l,n,function(t){return h(e(g,d,t))}]}}function b(g){g=g.trim().split(/\s*[\s,]\s*/);if(0!==g.length){for(var d=[],l=0;l<g.length;l++){var n=a(g[l]);if(void 0===n)return;d.push(n)}return d}}
k.clamp=e;k.addPropertiesHandler(b,function(g,d){if(g.length==d.length)return[g,d,function(l){return l.map(h).join(" ")}]},["stroke-dasharray"]);k.addPropertiesHandler(a,c(0,Infinity),["border-image-width","line-height"]);k.addPropertiesHandler(a,c(0,1),["opacity","shape-image-threshold"]);k.addPropertiesHandler(a,function(g,d){if(0!=g)return c(0,Infinity)(g,d)},["flex-grow","flex-shrink"]);k.addPropertiesHandler(a,function(g,d){return[g,d,function(l){return Math.round(e(1,Infinity,l))}]},["orphans",
"widows"]);k.addPropertiesHandler(a,function(g,d){return[g,d,Math.round]},["z-index"]);k.parseNumber=a;k.parseNumberList=b;k.mergeNumbers=function(g,d){return[g,d,h]};k.numberToString=h})(F,null);(function(k,f){k.addPropertiesHandler(String,function(h,e){if("visible"==h||"visible"==e)return[0,1,function(a){return 0>=a?h:1<=a?e:"visible"}]},["visibility"])})(F);(function(k,f){function h(c){c=c.trim();a.fillStyle="#000";a.fillStyle=c;var b=a.fillStyle;a.fillStyle="#fff";a.fillStyle=c;if(b==a.fillStyle)return a.fillRect(0,
0,1,1),c=a.getImageData(0,0,1,1).data,a.clearRect(0,0,1,1),b=c[3]/255,[c[0]*b,c[1]*b,c[2]*b,b]}function e(c,b){return[c,b,function(g){if(g[3])for(var d=0;3>d;d++)g[d]=Math.round(Math.max(0,Math.min(255,g[d]/g[3])));g[3]=k.numberToString(k.clamp(0,1,g[3]));return"rgba("+g.join(",")+")"}]}f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");f.width=f.height=1;var a=f.getContext("2d");k.addPropertiesHandler(h,e,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
k.consumeColor=k.consumeParenthesised.bind(null,h);k.mergeColors=e})(F,null);(function(k,f){function h(l){function n(){var r=z.exec(l);u=r?r[0]:void 0}function t(){if("("!==u){var r=Number(u);n();return r}n();r=q();if(")"!==u)return NaN;n();return r}function p(){for(var r=t();"*"===u||"/"===u;){var y=u;n();var m=t();r="*"===y?r*m:r/m}return r}function q(){for(var r=p();"+"===u||"-"===u;){var y=u;n();var m=p();r="+"===y?r+m:r-m}return r}var z=/([\+\-\w\.]+|[\(\)\*\/])/g,u;n();return q()}function e(l,
n){n=n.trim().toLowerCase();if("0"==n&&0<="px".search(l))return{px:0};if(/^[^(]*$|^calc/.test(n)){n=n.replace(/calc\(/g,"(");var t={};n=n.replace(l,function(r){t[r]=null;return"U"+r});l="U("+l.source+")";for(var p=n.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+l,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),q=[/N\*(D)/g,/(N|D)[*/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],z=0;z<q.length;)q[z].test(p)?(p=p.replace(q[z],"$1"),z=0):z++;if("D"==p){for(var u in t){p=h(n.replace(new RegExp("U"+
u,"g"),"").replace(new RegExp(l,"g"),"*0"));if(!isFinite(p))return;t[u]=p}return t}}}function a(l,n){return c(l,n,!0)}function c(l,n,t){var p=[],q;for(q in l)p.push(q);for(q in n)0>p.indexOf(q)&&p.push(q);l=p.map(function(z){return l[z]||0});n=p.map(function(z){return n[z]||0});return[l,n,function(z){var u=z.map(function(r,y){1==z.length&&t&&(r=Math.max(r,0));return k.numberToString(r)+p[y]}).join(" + ");return 1<z.length?"calc("+u+")":u}]}var b=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
f=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var g=e.bind(null,/deg|rad|grad|turn/g);k.parseLength=b;k.parseLengthOrPercent=f;k.consumeLengthOrPercent=k.consumeParenthesised.bind(null,f);k.parseAngle=g;k.mergeDimensions=c;b=k.consumeParenthesised.bind(null,b);b=k.consumeRepeated.bind(void 0,b,/^/);var d=k.consumeRepeated.bind(void 0,b,/^,/);k.consumeSizePairList=d;b=k.mergeNestedRepeated.bind(void 0,a," ");g=k.mergeNestedRepeated.bind(void 0,b,",");k.mergeNonNegativeSizePair=
b;k.addPropertiesHandler(function(l){if((l=d(l))&&""==l[1])return l[0]},g,["background-size"]);k.addPropertiesHandler(f,a,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));k.addPropertiesHandler(f,c,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(F,
null);(function(k,f){function h(a){return k.consumeLengthOrPercent(a)||k.consumeToken(/^auto/,a)}function e(a){if((a=k.consumeList([k.ignore(k.consumeToken.bind(null,/^rect/)),k.ignore(k.consumeToken.bind(null,/^\(/)),k.consumeRepeated.bind(null,h,/^,/),k.ignore(k.consumeToken.bind(null,/^\)/))],a))&&4==a[0].length)return a[0]}f=k.mergeWrappedNestedRepeated.bind(null,function(a){return"rect("+a+")"},function(a,c){return"auto"==a||"auto"==c?[!0,!1,function(b){b=b?a:c;if("auto"==b)return"auto";b=k.mergeDimensions(b,
b);return b[2](b[0])}]:k.mergeDimensions(a,c)},", ");k.parseBox=e;k.mergeBoxes=f;k.addPropertiesHandler(e,f,["clip"])})(F,null);(function(k,f){function h(p){return function(q){var z=0;return p.map(function(u){return u===d?q[z++]:u})}}function e(p){return p}function a(p){p=p.toLowerCase().trim();if("none"==p)return[];for(var q=/\s*(\w+)\(([^)]*)\)/g,z=[],u,r=0;(u=q.exec(p))&&u.index==r;){r=u.index+u[0].length;var y=u[1],m=t[y];if(!m)break;u=u[2].split(",");m=m[0];if(m.length<u.length)break;for(var A=
[],B=0;B<m.length;B++){var C=u[B],w=m[B];C=C?{A:function(D){return"0"==D.trim()?n:k.parseAngle(D)},N:k.parseNumber,T:k.parseLengthOrPercent,L:k.parseLength}[w.toUpperCase()](C):{a:n,n:A[0],t:l}[w];if(void 0===C)return;A.push(C)}z.push({t:y,d:A});if(q.lastIndex==p.length)return z}}function c(p){return p.toFixed(6).replace(".000000","")}function b(p,q){if(p.decompositionPair!==q){p.decompositionPair=q;var z=k.makeMatrixDecomposition(p)}if(q.decompositionPair!==p){q.decompositionPair=p;var u=k.makeMatrixDecomposition(q)}if(null==
z[0]||null==u[0])return[[!1],[!0],function(r){return r?q[0].d:p[0].d}];z[0].push(0);u[0].push(1);return[z,u,function(r){var y=k.quat(z[0][3],u[0][3],r[5]);return k.composeMatrix(r[0],r[1],r[2],y,r[4]).map(c).join(",")}]}function g(p){return p.replace(/(x|y|z|3d)?$/,"3d")}var d=null,l={px:0},n={deg:0},t={matrix:["NNNNNN",[d,d,0,0,d,d,0,0,0,0,1,0,d,d,0,1],e],matrix3d:["NNNNNNNNNNNNNNNN",e],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",h([d,d,
1]),e],scalex:["N",h([d,1,1]),h([d,1])],scaley:["N",h([1,d,1]),h([1,d])],scalez:["N",h([1,1,d])],scale3d:["NNN",e],skew:["Aa",null,e],skewx:["A",null,h([d,n])],skewy:["A",null,h([n,d])],translate:["Tt",h([d,d,l]),e],translatex:["T",h([d,l,l]),h([d,l])],translatey:["T",h([l,d,l]),h([l,d])],translatez:["L",h([l,l,d])],translate3d:["TTL",e]};k.addPropertiesHandler(a,function(p,q){var z=k.makeMatrixDecomposition&&!0,u=!1;if(!p.length||!q.length){p.length||(u=!0,p=q,q=[]);for(var r=0;r<p.length;r++){var y=
p[r].t,m=p[r].d,A="scale"==y.substr(0,5)?1:0;q.push({t:y,d:m.map(function(N){if("number"==typeof N)return A;var J={},K;for(K in N)J[K]=A;return J})})}}m=[];var B=[],C=[];if(p.length!=q.length){if(!z)return;var w=b(p,q);m=[w[0]];B=[w[1]];C=[["matrix",[w[2]]]]}else for(r=0;r<p.length;r++){y=p[r].t;var D=q[r].t,H=p[r].d,E=q[r].d;w=t[y];var I=t[D];if("perspective"==y&&"perspective"==D||!("matrix"!=y&&"matrix3d"!=y||"matrix"!=D&&"matrix3d"!=D)){if(!z)return;w=b([p[r]],[q[r]]);m.push(w[0]);B.push(w[1]);
C.push(["matrix",[w[2]]])}else{if(y!=D)if(w[2]&&I[2]&&y.replace(/[xy]/,"")==D.replace(/[xy]/,""))y=y.replace(/[xy]/,""),H=w[2](H),E=I[2](E);else if(w[1]&&I[1]&&g(y)==g(D))y=g(y),H=w[1](H),E=I[1](E);else{if(!z)return;w=b(p,q);m=[w[0]];B=[w[1]];C=[["matrix",[w[2]]]];break}I=[];D=[];for(var O=[],L=0;L<H.length;L++)w=("number"==typeof H[L]?k.mergeNumbers:k.mergeDimensions)(H[L],E[L]),I[L]=w[0],D[L]=w[1],O.push(w[2]);m.push(I);B.push(D);C.push([y,O])}}u&&(p=m,m=B,B=p);return[m,B,function(N){return N.map(function(J,
K){J=J.map(function(P,Q){return C[K][1][Q](P)}).join(",");"matrix"==C[K][0]&&16==J.split(",").length&&(C[K][0]="matrix3d");return C[K][0]+"("+J+")"}).join(" ")}]},["transform"]);k.transformToSvgMatrix=function(p){p=k.transformListToMatrix(a(p));return"matrix("+c(p[0])+" "+c(p[1])+" "+c(p[4])+" "+c(p[5])+" "+c(p[12])+" "+c(p[13])+")"}})(F,null);(function(k,f){function h(c,b){b.concat([c]).forEach(function(g){g in document.documentElement.style&&(e[c]=g);a[g]=c})}var e={},a={};h("transform",["webkitTransform",
"msTransform"]);h("transformOrigin",["webkitTransformOrigin"]);h("perspective",["webkitPerspective"]);h("perspectiveOrigin",["webkitPerspectiveOrigin"]);k.propertyName=function(c){return e[c]||c};k.unprefixedPropertyName=function(c){return a[c]||c}})(F,null)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var x=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},v=function(f,h,e){this.target=f;this.currentTime=h;this.timelineTime=
e;this.type="cancel";this.cancelable=this.bubbles=!1;this.currentTarget=f;this.defaultPrevented=!1;this.eventPhase=Event.AT_TARGET;this.timeStamp=Date.now()},k=window.Element.prototype.animate;window.Element.prototype.animate=function(f,h){f=k.call(this,f,h);f._cancelHandlers=[];f.oncancel=null;var e=f.cancel;f.cancel=function(){e.call(this);var b=new v(this,null,x()),g=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){g.forEach(function(d){d.call(b.target,b)})},
0)};var a=f.addEventListener;f.addEventListener=function(b,g){"function"==typeof g&&"cancel"==b?this._cancelHandlers.push(g):a.call(this,b,g)};var c=f.removeEventListener;f.removeEventListener=function(b,g){"cancel"==b?(b=this._cancelHandlers.indexOf(g),0<=b&&this._cancelHandlers.splice(b,1)):c.call(this,b,g)};return f}}})();(function(x){var v=document.documentElement,k=null,f=!1;try{var h="0"==getComputedStyle(v).getPropertyValue("opacity")?"1":"0";k=v.animate({opacity:[h,h]},{duration:1});k.currentTime=
0;f=getComputedStyle(v).getPropertyValue("opacity")==h}catch(a){}finally{k&&k.cancel()}if(!f){var e=window.Element.prototype.animate;window.Element.prototype.animate=function(a,c){window.Symbol&&Symbol.iterator&&Array.prototype.from&&a[Symbol.iterator]&&(a=Array.from(a));Array.isArray(a)||null===a||(a=x.convertToArrayForm(a));return e.call(this,a,c)}}})(G);(function(x,v,k){function f(c){var b=v.timeline;b.currentTime=c;b._discardAnimations();0==b._animations.length?e=!1:requestAnimationFrame(f)}var h=
window.requestAnimationFrame;window.requestAnimationFrame=function(c){return h(function(b){v.timeline._updateAnimationsPromises();c(b);v.timeline._updateAnimationsPromises()})};v.AnimationTimeline=function(){this._animations=[];this.currentTime=void 0};v.AnimationTimeline.prototype={getAnimations:function(){this._discardAnimations();return this._animations.slice()},_updateAnimationsPromises:function(){v.animationsWithPromises=v.animationsWithPromises.filter(function(c){return c._updatePromises()})},
_discardAnimations:function(){this._updateAnimationsPromises();this._animations=this._animations.filter(function(c){return"finished"!=c.playState&&"idle"!=c.playState})},_play:function(c){c=new v.Animation(c,this);this._animations.push(c);v.restartWebAnimationsNextTick();c._updatePromises();c._animation.play();c._updatePromises();return c},play:function(c){c&&c.remove();return this._play(c)}};var e=!1;v.restartWebAnimationsNextTick=function(){e||(e=!0,requestAnimationFrame(f))};var a=new v.AnimationTimeline;
v.timeline=a;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return a}})}catch(c){}try{window.document.timeline=a}catch(c){}})(G,M,null);(function(x,v,k){v.animationsWithPromises=[];v.Animation=function(f,h){this.id="";f&&f._id&&(this.id=f._id);if(this.effect=f)f._animation=this;if(!h)throw Error("Animation with null timeline is not supported");this._timeline=h;this._sequenceNumber=x.sequenceNumber++;this._holdTime=0;this._isGroup=this._paused=!1;this._animation=
null;this._childAnimations=[];this._callback=null;this._oldPlayState="idle";this._rebuildUnderlyingAnimation();this._animation.cancel();this._updatePromises()};v.Animation.prototype={_updatePromises:function(){var f=this._oldPlayState,h=this.playState;this._readyPromise&&h!==f&&("idle"==h?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==f?this._resolveReadyPromise():"pending"==h&&(this._readyPromise=void 0));this._finishedPromise&&h!==f&&("idle"==h?(this._rejectFinishedPromise(),
this._finishedPromise=void 0):"finished"==h?this._resolveFinishedPromise():"finished"==f&&(this._finishedPromise=void 0));this._oldPlayState=this.playState;return this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var f=this._animation?!0:!1;if(f){var h=this.playbackRate;var e=this._paused;var a=this.startTime;var c=this.currentTime;this._animation.cancel();this._animation=this._animation._wrapper=null}if(!this.effect||this.effect instanceof window.KeyframeEffect)this._animation=
v.newUnderlyingAnimationForKeyframeEffect(this.effect),v.bindAnimationForKeyframeEffect(this);if(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)this._animation=v.newUnderlyingAnimationForGroup(this.effect),v.bindAnimationForGroup(this);this.effect&&this.effect._onsample&&v.bindAnimationForCustomEffect(this);f&&(1!=h&&(this.playbackRate=h),null!==a?this.startTime=a:null!==c?this.currentTime=c:null!==this._holdTime&&(this.currentTime=this._holdTime),e&&this.pause());
this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var f=this.effect._timing.delay;this._childAnimations.forEach(function(h){this._arrangeChildren(h,f);this.effect instanceof window.SequenceEffect&&(f+=v.groupChildDuration(h.effect))}.bind(this))}},_setExternalAnimation:function(f){if(this.effect&&this._isGroup)for(var h=0;h<this.effect.children.length;h++)this.effect.children[h]._animation=f,this._childAnimations[h]._setExternalAnimation(f)},_constructChildAnimations:function(){if(this.effect&&
this._isGroup){var f=this.effect._timing.delay;this._removeChildAnimations();this.effect.children.forEach(function(h){var e=v.timeline._play(h);this._childAnimations.push(e);e.playbackRate=this.playbackRate;this._paused&&e.pause();h._animation=this.effect._animation;this._arrangeChildren(e,f);this.effect instanceof window.SequenceEffect&&(f+=v.groupChildDuration(h))}.bind(this))}},_arrangeChildren:function(f,h){null===this.startTime?f.currentTime=this.currentTime-h/this.playbackRate:f.startTime!==
this.startTime+h/this.playbackRate&&(f.startTime=this.startTime+h/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){if(!window.Promise)return console.warn("Animation Promises require JavaScript Promise constructor"),null;this._finishedPromise||(-1==v.animationsWithPromises.indexOf(this)&&v.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(f,h){this._resolveFinishedPromise=function(){f(this)};
this._rejectFinishedPromise=function(){h({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise());return this._finishedPromise},get ready(){if(!window.Promise)return console.warn("Animation Promises require JavaScript Promise constructor"),null;this._readyPromise||(-1==v.animationsWithPromises.indexOf(this)&&v.animationsWithPromises.push(this),this._readyPromise=new Promise(function(f,h){this._resolveReadyPromise=function(){f(this)};
this._rejectReadyPromise=function(){h({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise());return this._readyPromise},get onfinish(){return this._animation.onfinish},set onfinish(f){this._animation.onfinish="function"==typeof f?function(h){h.target=this;f.call(this,h)}.bind(this):f},get oncancel(){return this._animation.oncancel},set oncancel(f){this._animation.oncancel="function"==typeof f?function(h){h.target=this;f.call(this,h)}.bind(this):
f},get currentTime(){this._updatePromises();var f=this._animation.currentTime;this._updatePromises();return f},set currentTime(f){this._updatePromises();this._animation.currentTime=isFinite(f)?f:Math.sign(f)*Number.MAX_VALUE;this._register();this._forEachChild(function(h,e){h.currentTime=f-e});this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(f){this._updatePromises();this._animation.startTime=isFinite(f)?f:Math.sign(f)*Number.MAX_VALUE;this._register();this._forEachChild(function(h,
e){h.startTime=f+e});this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(f){this._updatePromises();var h=this.currentTime;this._animation.playbackRate=f;this._forEachChild(function(e){e.playbackRate=f});null!==h&&(this.currentTime=h);this._updatePromises()},play:function(){this._updatePromises();this._paused=!1;this._animation.play();-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this);this._register();v.awaitStartTime(this);
this._forEachChild(function(f){var h=f.currentTime;f.play();f.currentTime=h});this._updatePromises()},pause:function(){this._updatePromises();this.currentTime&&(this._holdTime=this.currentTime);this._animation.pause();this._register();this._forEachChild(function(f){f.pause()});this._paused=!0;this._updatePromises()},finish:function(){this._updatePromises();this._animation.finish();this._register();this._updatePromises()},cancel:function(){this._updatePromises();this._animation.cancel();this._register();
this._removeChildAnimations();this._updatePromises()},reverse:function(){this._updatePromises();var f=this.currentTime;this._animation.reverse();this._forEachChild(function(h){h.reverse()});null!==f&&(this.currentTime=f);this._updatePromises()},addEventListener:function(f,h){var e=h;"function"==typeof h&&(e=function(a){a.target=this;h.call(this,a)}.bind(this),h._wrapper=e);this._animation.addEventListener(f,e)},removeEventListener:function(f,h){this._animation.removeEventListener(f,h&&h._wrapper||
h)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(f){var h=0;this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations();this._childAnimations.forEach(function(c){f.call(this,c,h);this.effect instanceof window.SequenceEffect&&(h+=c.effect.activeDuration)}.bind(this));if("pending"!=this.playState){var e=this.effect._timing,a=this.currentTime;null!==a&&(a=x.calculateIterationProgress(x.calculateActiveDuration(e),
a,e));(null==a||isNaN(a))&&this._removeChildAnimations()}}};window.Animation=v.Animation})(G,M,null);(function(x,v,k){function f(d){this._frames=x.normalizeKeyframes(d)}function h(){for(var d=!1;b.length;)b.shift()._updateChildren(),d=!0;return d}var e=function(d){d._animation=void 0;if(d instanceof window.SequenceEffect||d instanceof window.GroupEffect)for(var l=0;l<d.children.length;l++)e(d.children[l])};v.removeMulti=function(d){for(var l=[],n=0;n<d.length;n++){var t=d[n];t._parent?(-1==l.indexOf(t._parent)&&
l.push(t._parent),t._parent.children.splice(t._parent.children.indexOf(t),1),t._parent=null,e(t)):t._animation&&t._animation.effect==t&&(t._animation.cancel(),t._animation.effect=new KeyframeEffect(null,[]),t._animation._callback&&(t._animation._callback._animation=null),t._animation._rebuildUnderlyingAnimation(),e(t))}for(n=0;n<l.length;n++)l[n]._rebuild()};v.KeyframeEffect=function(d,l,n,t){this.target=d;this._parent=null;n=x.numericTimingToObject(n);this._timingInput=x.cloneTimingInput(n);this._timing=
x.normalizeTimingInput(n);this.timing=x.makeTiming(n,!1,this);this.timing._effect=this;"function"==typeof l?(x.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=l):this._normalizedKeyframes=new f(l);this._keyframes=l;this.activeDuration=x.calculateActiveDuration(this._timing);this._id=t;return this};v.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},
set onsample(d){if("function"==typeof this.getFrames())throw Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=d;this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw Error("Cloning custom effects is not supported.");var d=new KeyframeEffect(this.target,[],x.cloneTimingInput(this._timingInput),this._id);d._normalizedKeyframes=this._normalizedKeyframes;
d._keyframes=this._keyframes;return d},remove:function(){v.removeMulti([this])}};var a=Element.prototype.animate;Element.prototype.animate=function(d,l){var n="";l&&l.id&&(n=l.id);return v.timeline._play(new v.KeyframeEffect(this,d,l,n))};var c=document.createElementNS("http://www.w3.org/1999/xhtml","div");v.newUnderlyingAnimationForKeyframeEffect=function(d){if(d){var l=d.target||c,n=d._keyframes;"function"==typeof n&&(n=[]);var t=d._timingInput;t.id=d._id}else l=c,n=[],t=0;return a.apply(l,[n,t])};
v.bindAnimationForKeyframeEffect=function(d){d.effect&&"function"==typeof d.effect._normalizedKeyframes&&v.bindAnimationForCustomEffect(d)};var b=[];v.awaitStartTime=function(d){null===d.startTime&&d._isGroup&&(0==b.length&&requestAnimationFrame(h),b.push(d))};var g=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){v.timeline._updateAnimationsPromises();var d=g.apply(this,arguments);h()&&(d=g.apply(this,arguments));v.timeline._updateAnimationsPromises();
return d}});window.KeyframeEffect=v.KeyframeEffect;window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(d){return null!==d.effect&&d.effect.target==this}.bind(this))}})(G,M,null);(function(x,v,k){function f(b){b._registered||(b._registered=!0,a.push(b),c||(c=!0,requestAnimationFrame(h)))}function h(b){b=a;a=[];b.sort(function(g,d){return g._sequenceNumber-d._sequenceNumber});b=b.filter(function(g){g();var d=g._animation?g._animation.playState:
"idle";"running"!=d&&"pending"!=d&&(g._registered=!1);return g._registered});a.push.apply(a,b);a.length?(c=!0,requestAnimationFrame(h)):c=!1}document.createElementNS("http://www.w3.org/1999/xhtml","div");var e=0;v.bindAnimationForCustomEffect=function(b){var g=b.effect.target,d="function"==typeof b.effect.getFrames();var l=d?b.effect.getFrames():b.effect._onsample;var n=b.effect.timing,t=null;n=x.normalizeTimingInput(n);var p=function(){var q=p._animation?p._animation.currentTime:null;null!==q&&(q=
x.calculateIterationProgress(x.calculateActiveDuration(n),q,n),isNaN(q)&&(q=null));q!==t&&(d?l(q,g,b.effect):l(q,b.effect,b.effect._animation));t=q};p._animation=b;p._registered=!1;p._sequenceNumber=e++;b._callback=p;f(p)};var a=[],c=!1;v.Animation.prototype._register=function(){this._callback&&f(this._callback)}})(G,M,null);(function(x,v,k){function f(e){return e._timing.delay+e.activeDuration+e._timing.endDelay}function h(e,a,c){this._id=c;this._parent=null;this.children=e||[];this._reparent(this.children);
a=x.numericTimingToObject(a);this._timingInput=x.cloneTimingInput(a);this._timing=x.normalizeTimingInput(a,!0);this.timing=x.makeTiming(a,!0,this);this.timing._effect=this;"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){h.apply(this,arguments)};window.GroupEffect=function(){h.apply(this,arguments)};h.prototype={_isAncestor:function(e){for(var a=this;null!==a;){if(a==e)return!0;a=a._parent}return!1},_rebuild:function(){for(var e=this;e;)"auto"===
e.timing.duration&&(e._timing.duration=e.activeDuration),e=e._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(e){v.removeMulti(e);for(var a=0;a<e.length;a++)e[a]._parent=this},_putChild:function(e,a){for(var c=a?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",b=0;b<e.length;b++)if(this._isAncestor(e[b]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:c};for(b=0;b<e.length;b++)a?this.children.push(e[b]):
this.children.unshift(e[b]);this._reparent(e);this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var e=x.cloneTimingInput(this._timingInput),a=[],c=0;c<this.children.length;c++)a.push(this.children[c].clone());return this instanceof
GroupEffect?new GroupEffect(a,e):new SequenceEffect(a,e)},remove:function(){v.removeMulti([this])}};window.SequenceEffect.prototype=Object.create(h.prototype);Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var e=0;this.children.forEach(function(a){e+=f(a)});return Math.max(e,0)}});window.GroupEffect.prototype=Object.create(h.prototype);Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var e=0;this.children.forEach(function(a){e=
Math.max(e,f(a))});return e}});v.newUnderlyingAnimationForGroup=function(e){var a,c=null;e=new KeyframeEffect(null,[],e._timing,e._id);e.onsample=function(b){var g=a._wrapper;g&&"pending"!=g.playState&&g.effect&&(null==b?g._removeChildAnimations():0==b&&0>g.playbackRate&&(c||(c=x.normalizeTimingInput(g.effect.timing)),b=x.calculateIterationProgress(x.calculateActiveDuration(c),-1,c),isNaN(b)||null==b)&&(g._forEachChild(function(d){d.currentTime=-1}),g._removeChildAnimations()))};return a=v.timeline._play(e)};
v.bindAnimationForGroup=function(e){e._animation._wrapper=e;e._isGroup=!0;v.awaitStartTime(e);e._constructChildAnimations();e._setExternalAnimation(e)};v.groupChildDuration=f})(G,M,null)})();

</script><script>/*

Copyright 2010-2017 Mike Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

 Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

 Neither the name of the author nor the names of contributors may be used to
  endorse or promote products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var d3=d3||{};
(function(){function fi(a){return function(){return this.matches(a)}}function Mb(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Cf(a){1===a.length&&(a=En(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}}function En(a){return function(b,c){return Mb(a(b),c)}}function gi(a,b){return[a,b]}function Ab(a){return null===a?
NaN:+a}function hi(a,b){var c=a.length,d=0,e=-1,g=0,k,m=0;if(null==b)for(;++e<c;){if(!isNaN(k=Ab(a[e]))){var p=k-g;g+=p/++d;m+=p*(k-g)}}else for(;++e<c;)isNaN(k=Ab(b(a[e],e,a)))||(p=k-g,g+=p/++d,m+=p*(k-g));if(1<d)return m/(d-1)}function ii(a,b){return(a=hi(a,b))?Math.sqrt(a):a}function Df(a,b){var c=a.length,d=-1,e,g,k;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(g=k=e;++d<c;)null!=(e=a[d])&&(g>e&&(g=e),k<e&&(k=e))}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(g=k=e;++d<c;)null!=(e=
b(a[d],d,a))&&(g>e&&(g=e),k<e&&(k=e));return[g,k]}function Od(a){return function(){return a}}function Fn(a){return a}function Ta(a,b,c){a=+a;b=+b;c=2>(e=arguments.length)?(b=a,a=0,1):3>e?1:+c;for(var d=-1,e=Math.max(0,Math.ceil((b-a)/c))|0,g=Array(e);++d<e;)g[d]=a+d*c;return g}function Ef(a,b,c){var d,e=-1,g;b=+b;a=+a;c=+c;if(a===b&&0<c)return[a];if(d=b<a){var k=a;a=b;b=k}if(0===(g=Nc(a,b,c))||!isFinite(g))return[];if(0<g)for(a=Math.ceil(a/g),b=Math.floor(b/g),b=Array(k=Math.ceil(b-a+1));++e<k;)b[e]=
(a+e)*g;else for(a=Math.floor(a*g),b=Math.ceil(b*g),b=Array(k=Math.ceil(a-b+1));++e<k;)b[e]=(a-e)/g;d&&b.reverse();return b}function Nc(a,b,c){b=(b-a)/Math.max(0,c);a=Math.floor(Math.log(b)/Math.LN10);b/=Math.pow(10,a);return 0<=a?(b>=Ff?10:b>=Gf?5:b>=Hf?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(b>=Ff?10:b>=Gf?5:b>=Hf?2:1)}function Nb(a,b,c){var d=Math.abs(b-a)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));d/=c;d>=Ff?c*=10:d>=Gf?c*=5:d>=Hf&&(c*=2);return b<a?-c:c}function If(a){return Math.ceil(Math.log(a.length)/
Math.LN2)+1}function Oc(a,b,c){null==c&&(c=Ab);if(d=a.length){if(0>=(b=+b)||2>d)return+c(a[0],0,a);if(1<=b)return+c(a[d-1],d-1,a);var d;b*=d-1;d=Math.floor(b);var e=+c(a[d],d,a);a=+c(a[d+1],d+1,a);return e+(a-e)*(b-d)}}function ji(a,b){var c=a.length,d=-1,e,g;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(g=e;++d<c;)null!=(e=a[d])&&e>g&&(g=e)}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(g=e;++d<c;)null!=(e=b(a[d],d,a))&&e>g&&(g=e);return g}function Jf(a){var b=a.length;var c=-1;for(var d=
0,e,g;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(g=a[b],c=g.length;0<=--c;)e[--d]=g[c];return e}function ki(a,b){var c=a.length,d=-1,e,g;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(g=e;++d<c;)null!=(e=a[d])&&g>e&&(g=e)}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(g=e;++d<c;)null!=(e=b(a[d],d,a))&&g>e&&(g=e);return g}function li(a){if(!(g=a.length))return[];for(var b=-1,c=ki(a,Gn),d=Array(c);++b<c;)for(var e=-1,g,k=d[b]=Array(g);++e<g;)k[e]=a[e][b];return d}function Gn(a){return a.length}
function Hn(a){return a}function In(a){return"translate("+(a+.5)+",0)"}function Jn(a){return"translate(0,"+(a+.5)+")"}function Kn(a){return function(b){return+a(b)}}function Ln(a){var b=Math.max(0,a.bandwidth()-1)/2;a.round()&&(b=Math.round(b));return function(c){return+a(c)+b}}function Mn(){return!this.__axis}function Pd(a,b){function c(q){var w=null==e?b.ticks?b.ticks.apply(b,d):b.domain():e,B=null==g?b.tickFormat?b.tickFormat.apply(b,d):Hn:g,F=Math.max(k,0)+p,K=b.range(),P=+K[0]+.5;K=+K[K.length-
1]+.5;var x=(b.bandwidth?Ln:Kn)(b.copy()),y=q.selection?q.selection():q,I=y.selectAll(".domain").data([null]);w=y.selectAll(".tick").data(w,b).order();var Q=w.exit(),V=w.enter().append("g").attr("class","tick"),N=w.select("line"),U=w.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));w=w.merge(V);N=N.merge(V.append("line").attr("stroke","currentColor").attr(h+"2",v*k));U=U.merge(V.append("text").attr("fill","currentColor").attr(h,v*F).attr("dy",
1===a?"0em":3===a?"0.71em":"0.32em"));q!==y&&(I=I.transition(q),w=w.transition(q),N=N.transition(q),U=U.transition(q),Q=Q.transition(q).attr("opacity",1E-6).attr("transform",function(f){return isFinite(f=x(f))?l(f):this.getAttribute("transform")}),V.attr("opacity",1E-6).attr("transform",function(f){var n=this.parentNode.__axis;return l(n&&isFinite(n=n(f))?n:x(f))}));Q.remove();I.attr("d",4===a||2==a?m?"M"+v*m+","+P+"H0.5V"+K+"H"+v*m:"M0.5,"+P+"V"+K:m?"M"+P+","+v*m+"V0.5H"+K+"V"+v*m:"M"+P+",0.5H"+
K);w.attr("opacity",1).attr("transform",function(f){return l(x(f))});N.attr(h+"2",v*k);U.attr(h,v*F).text(B);y.filter(Mn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===a?"start":4===a?"end":"middle");y.each(function(){this.__axis=x})}var d=[],e=null,g=null,k=6,m=6,p=3,v=1===a||4===a?-1:1,h=4===a||2===a?"x":"y",l=1===a||3===a?In:Jn;c.scale=function(q){return arguments.length?(b=q,c):b};c.ticks=function(){return d=Kf.call(arguments),c};c.tickArguments=
function(q){return arguments.length?(d=null==q?[]:Kf.call(q),c):d.slice()};c.tickValues=function(q){return arguments.length?(e=null==q?null:Kf.call(q),c):e&&e.slice()};c.tickFormat=function(q){return arguments.length?(g=q,c):g};c.tickSize=function(q){return arguments.length?(k=m=+q,c):k};c.tickSizeInner=function(q){return arguments.length?(k=+q,c):k};c.tickSizeOuter=function(q){return arguments.length?(m=+q,c):m};c.tickPadding=function(q){return arguments.length?(p=+q,c):p};return c}function Ob(){for(var a=
0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new Qd(c)}function Qd(a){this._=a}function Nn(a,b){return a.trim().split(/^|\s+/).map(function(c){var d="",e=c.indexOf(".");0<=e&&(d=c.slice(e+1),c=c.slice(0,e));if(c&&!b.hasOwnProperty(c))throw Error("unknown type: "+c);return{type:c,name:d}})}function mi(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=On;a=a.slice(0,d).concat(a.slice(d+1));break}null!=c&&a.push({name:b,
value:c});return a}function Pc(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return Ua.hasOwnProperty(b)?{space:Ua[b],local:a}:a}function Pn(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function Qn(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function Rd(a){a=
Pc(a);return(a.local?Qn:Pn)(a)}function Rn(){}function Sd(a){return null==a?Rn:function(){return this.querySelector(a)}}function Sn(){return[]}function Lf(a){return null==a?Sn:function(){return this.querySelectorAll(a)}}function ni(a){return Array(a.length)}function Td(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function Tn(a){return function(){return a}}function Un(a,b,c,d,e,g){for(var k=0,m,p=b.length,v=g.length;k<v;++k)(m=
b[k])?(m.__data__=g[k],d[k]=m):c[k]=new Td(a,g[k]);for(;k<p;++k)if(m=b[k])e[k]=m}function Vn(a,b,c,d,e,g,k){var m,p,v={},h=b.length,l=g.length,q=Array(h),w;for(m=0;m<h;++m)if(p=b[m])q[m]=w="$"+k.call(p,p.__data__,m,b),w in v?e[m]=p:v[w]=p;for(m=0;m<l;++m)w="$"+k.call(a,g[m],m,g),(p=v[w])?(d[m]=p,p.__data__=g[m],v[w]=null):c[m]=new Td(a,g[m]);for(m=0;m<h;++m)(p=b[m])&&v[q[m]]===p&&(e[m]=p)}function Wn(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Xn(a){return function(){this.removeAttribute(a)}}function Yn(a){return function(){this.removeAttributeNS(a.space,
a.local)}}function Zn(a,b){return function(){this.setAttribute(a,b)}}function $n(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function ao(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function bo(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function Mf(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||
a.defaultView}function co(a){return function(){this.style.removeProperty(a)}}function eo(a,b,c){return function(){this.style.setProperty(a,b,c)}}function fo(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function Pb(a,b){return a.style.getPropertyValue(b)||Mf(a).getComputedStyle(a,null).getPropertyValue(b)}function go(a){return function(){delete this[a]}}function ho(a,b){return function(){this[a]=b}}function io(a,b){return function(){var c=
b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Nf(a){return a.classList||new oi(a)}function oi(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function pi(a,b){a=Nf(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function qi(a,b){a=Nf(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function jo(a){return function(){pi(this,a)}}function ko(a){return function(){qi(this,a)}}function lo(a,b){return function(){(b.apply(this,arguments)?pi:qi)(this,a)}}function mo(){this.textContent=
""}function no(a){return function(){this.textContent=a}}function oo(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function po(){this.innerHTML=""}function qo(a){return function(){this.innerHTML=a}}function ro(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function so(){this.nextSibling&&this.parentNode.appendChild(this)}function to(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uo(){return null}
function vo(){var a=this.parentNode;a&&a.removeChild(this)}function wo(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function xo(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function yo(a,b,c){a=ri(a,b,c);return function(d){var e=d.relatedTarget;e&&(e===this||e.compareDocumentPosition(this)&8)||a.call(this,d)}}function ri(a,b,c){return function(d){var e=d3.event;d3.event=d;try{a.call(this,this.__data__,b,c)}finally{d3.event=e}}}function zo(a){return a.trim().split(/^|\s+/).map(function(b){var c=
"",d=b.indexOf(".");0<=d&&(c=b.slice(d+1),b=b.slice(0,d));return{type:b,name:c}})}function Ao(a){return function(){var b=this.__on;if(b){for(var c=0,d=-1,e=b.length,g;c<e;++c)(g=b[c],a.type&&g.type!==a.type||g.name!==a.name)?b[++d]=g:this.removeEventListener(g.type,g.listener,g.capture);++d?b.length=d:delete this.__on}}}function Bo(a,b,c){var d=si.hasOwnProperty(a.type)?yo:ri;return function(e,g,k){e=this.__on;var m;g=d(b,g,k);if(e){k=0;for(var p=e.length;k<p;++k)if((m=e[k]).type===a.type&&m.name===
a.name){this.removeEventListener(m.type,m.listener,m.capture);this.addEventListener(m.type,m.listener=g,m.capture=c);m.value=b;return}}this.addEventListener(a.type,g,c);m={type:a.type,name:a.name,value:b,listener:g,capture:c};e?e.push(m):this.__on=[m]}}function Qc(a,b,c,d){var e=d3.event;a.sourceEvent=d3.event;d3.event=a;try{return b.apply(c,d)}finally{d3.event=e}}function ti(a,b,c){var d=Mf(a),e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,
c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1));a.dispatchEvent(e)}function Co(a,b){return function(){return ti(this,a,b)}}function Do(a,b){return function(){return ti(this,a,b.apply(this,arguments))}}function Ja(a,b){this._groups=a;this._parents=b}function Qb(){return new Ja([[document.documentElement]],Of)}function Ra(a){return"string"===typeof a?new Ja([[document.querySelector(a)]],[document.documentElement]):new Ja([[a]],Of)}function ui(){return new Pf}function Pf(){this._="@"+
(++Eo).toString(36)}function Qf(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function Ud(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Bb(a){var b=Qf();b.changedTouches&&(b=b.changedTouches[0]);return Ud(a,b)}function Vd(a,b,c){3>arguments.length&&(c=b,b=Qf().changedTouches);
for(var d=0,e=b?b.length:0,g;d<e;++d)if((g=b[d]).identifier===c)return Ud(a,g);return null}function fc(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Wd(a){var b=a.document.documentElement;a=Ra(a).on("dragstart.drag",fc,!0);if("onselectstart"in b)a.on("selectstart.drag",fc,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function Xd(a,b){var c=a.document.documentElement,d=Ra(a).on("dragstart.drag",null);b&&(d.on("click.drag",fc,!0),setTimeout(function(){d.on("click.drag",
null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function Yd(a){return function(){return a}}function Rf(a,b,c,d,e,g,k,m,p,v){this.target=a;this.type=b;this.subject=c;this.identifier=d;this.active=e;this.x=g;this.y=k;this.dx=m;this.dy=p;this._=v}function Fo(){return!d3.event.button}function Go(){return this.parentNode}function Ho(a){return null==a?{x:d3.event.x,y:d3.event.y}:a}function Io(){return"ontouchstart"in this}function gc(a,
b,c){a.prototype=b.prototype=c;c.constructor=a}function Rc(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function Cb(){}function Db(a){var b;a=(a+"").trim().toLowerCase();return(b=Jo.exec(a))?(b=parseInt(b[1],16),new Fa(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=Ko.exec(a))?vi(parseInt(b[1],16)):(b=Lo.exec(a))?new Fa(b[1],b[2],b[3],1):(b=Mo.exec(a))?new Fa(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=No.exec(a))?wi(b[1],b[2],b[3],b[4]):(b=Oo.exec(a))?wi(255*b[1]/100,
255*b[2]/100,255*b[3]/100,b[4]):(b=Po.exec(a))?xi(b[1],b[2]/100,b[3]/100,1):(b=Qo.exec(a))?xi(b[1],b[2]/100,b[3]/100,b[4]):yi.hasOwnProperty(a)?vi(yi[a]):"transparent"===a?new Fa(NaN,NaN,NaN,0):null}function vi(a){return new Fa(a>>16&255,a>>8&255,a&255,1)}function wi(a,b,c,d){0>=d&&(a=b=c=NaN);return new Fa(a,b,c,d)}function Sf(a){a instanceof Cb||(a=Db(a));if(!a)return new Fa;a=a.rgb();return new Fa(a.r,a.g,a.b,a.opacity)}function hc(a,b,c,d){return 1===arguments.length?Sf(a):new Fa(a,b,c,null==
d?1:d)}function Fa(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}function Tf(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function xi(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new ib(a,b,c,d)}function Ro(a){if(a instanceof ib)return new ib(a.h,a.s,a.l,a.opacity);a instanceof Cb||(a=Db(a));if(!a)return new ib;if(a instanceof ib)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),g=Math.max(b,c,d),k=NaN,m=g-e,p=
(g+e)/2;m?(k=b===g?(c-d)/m+6*(c<d):c===g?(d-b)/m+2:(b-c)/m+4,m/=.5>p?g+e:2-g-e,k*=60):m=0<p&&1>p?0:k;return new ib(k,m,p,a.opacity)}function Zd(a,b,c,d){return 1===arguments.length?Ro(a):new ib(a,b,c,null==d?1:d)}function ib(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Uf(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Vf(a){if(a instanceof cb)return new cb(a.l,a.a,a.b,a.opacity);if(a instanceof jb){if(isNaN(a.h))return new cb(a.l,0,0,a.opacity);
var b=a.h*zi;return new cb(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof Fa||(a=Sf(a));var c=Wf(a.r),d=Wf(a.g),e=Wf(a.b);b=Xf(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var g=c=b;else g=Xf((.4360747*c+.3850649*d+.1430804*e)/.96422),c=Xf((.0139322*c+.0971045*d+.7141733*e)/.82521);return new cb(116*b-16,500*(g-b),200*(b-c),a.opacity)}function $d(a,b,c,d){return 1===arguments.length?Vf(a):new cb(a,b,c,null==d?1:d)}function cb(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}
function Xf(a){return a>So?Math.pow(a,1/3):a/Ai+Bi}function Yf(a){return a>ic?a*a*a:Ai*(a-Bi)}function Zf(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Wf(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ci(a){if(a instanceof jb)return new jb(a.h,a.c,a.l,a.opacity);a instanceof cb||(a=Vf(a));if(0===a.a&&0===a.b)return new jb(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*Di;return new jb(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function ae(a,
b,c,d){return 1===arguments.length?Ci(a):new jb(a,b,c,null==d?1:d)}function jb(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function db(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof Rb)e=new Rb(e.h,e.s,e.l,e.opacity);else{e instanceof Fa||(e=Sf(e));var g=e.g/255,k=e.b/255,m=(Ei*k+e.r/255*-1.7884503806-3.5172982438*g)/(Ei+-1.7884503806-3.5172982438);k-=m;var p=(1.97294*(g-m)- -.29227*k)/-.90649;k=(g=Math.sqrt(p*p+k*k)/(1.97294*m*(1-m)))?Math.atan2(p,k)*Di-120:NaN;e=new Rb(0>k?
k+360:k,g,m,e.opacity)}}else e=new Rb(a,b,c,null==d?1:d);return e}function Rb(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Fi(a,b,c,d,e){var g=a*a,k=g*a;return((1-3*a+3*g-k)*b+(4-6*g+3*k)*c+(1+3*a+3*g-3*k)*d+k*e)/6}function Gi(a){var b=a.length-1;return function(c){var d=0>=c?c=0:1<=c?(c=1,b-1):Math.floor(c*b),e=a[d],g=a[d+1];return Fi((c-d/b)*b,0<d?a[d-1]:2*e-g,e,g,d<b-1?a[d+2]:2*g-e)}}function Hi(a){var b=a.length;return function(c){var d=Math.floor((0>(c%=1)?++c:c)*b);return Fi((c-
d/b)*b,a[(d+b-1)%b],a[d%b],a[(d+1)%b],a[(d+2)%b])}}function be(a){return function(){return a}}function Ii(a,b){return function(c){return a+c*b}}function To(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function ce(a,b){var c=b-a;return c?Ii(a,180<c||-180>c?c-360*Math.round(c/360):c):be(isNaN(a)?b:a)}function Uo(a){return 1===(a=+a)?Ea:function(b,c){return c-b?To(b,c,a):be(isNaN(b)?c:b)}}function Ea(a,b){var c=b-a;return c?Ii(a,c):be(isNaN(a)?b:a)}function Ji(a){return function(b){var c=
b.length,d=Array(c),e=Array(c),g=Array(c),k;for(k=0;k<c;++k){var m=hc(b[k]);d[k]=m.r||0;e[k]=m.g||0;g[k]=m.b||0}d=a(d);e=a(e);g=a(g);m.opacity=1;return function(p){m.r=d(p);m.g=e(p);m.b=g(p);return m+""}}}function Ki(a,b){var c=b?b.length:0,d=a?Math.min(c,a.length):0,e=Array(d),g=Array(c),k;for(k=0;k<d;++k)e[k]=Sc(a[k],b[k]);for(;k<c;++k)g[k]=b[k];return function(m){for(k=0;k<d;++k)g[k]=e[k](m);return g}}function Li(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}}function Va(a,
b){return a=+a,b-=a,function(c){return a+b*c}}function Mi(a,b){var c={},d={},e;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(e in b)e in a?c[e]=Sc(a[e],b[e]):d[e]=b[e];return function(g){for(e in c)d[e]=c[e](g);return d}}function Vo(a){return function(){return a}}function Wo(a){return function(b){return a(b)+""}}function $f(a,b){var c=ag.lastIndex=bg.lastIndex=0,d,e,g,k=-1,m=[],p=[];a+="";for(b+="";(d=ag.exec(a))&&(e=bg.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),m[k]?
m[k]+=g:m[++k]=g),(d=d[0])===(e=e[0])?m[k]?m[k]+=e:m[++k]=e:(m[++k]=null,p.push({i:k,x:Va(d,e)})),c=bg.lastIndex;c<b.length&&(g=b.slice(c),m[k]?m[k]+=g:m[++k]=g);return 2>m.length?p[0]?Wo(p[0].x):Vo(b):(b=p.length,function(v){for(var h=0,l;h<b;++h)m[(l=p[h]).i]=l.x(v);return m.join("")})}function Sc(a,b){var c=typeof b,d;return null==b||"boolean"===c?be(b):("number"===c?Va:"string"===c?(d=Db(b))?(b=d,Tc):$f:b instanceof Db?Tc:b instanceof Date?Li:Array.isArray(b)?Ki:"function"!==typeof b.valueOf&&
"function"!==typeof b.toString||isNaN(b)?Mi:Va)(a,b)}function Ni(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}}function Oi(a,b,c,d,e,g){var k,m,p;if(k=Math.sqrt(a*a+b*b))a/=k,b/=k;if(p=a*c+b*d)c-=a*p,d-=b*p;if(m=Math.sqrt(c*c+d*d))c/=m,d/=m,p/=m;a*d<b*c&&(a=-a,b=-b,p=-p,k=-k);return{translateX:e,translateY:g,rotate:Math.atan2(b,a)*Pi,skewX:Math.atan(p)*Pi,scaleX:k,scaleY:m}}function Qi(a,b,c,d){function e(v){return v.length?v.pop()+" ":""}function g(v,h,l,q,w,B){v!==l||h!==q?(w=w.push("translate(",
null,b,null,c),B.push({i:w-4,x:Va(v,l)},{i:w-2,x:Va(h,q)})):(l||q)&&w.push("translate("+l+b+q+c)}function k(v,h,l,q){v!==h?(180<v-h?h+=360:180<h-v&&(v+=360),q.push({i:l.push(e(l)+"rotate(",null,d)-2,x:Va(v,h)})):h&&l.push(e(l)+"rotate("+h+d)}function m(v,h,l,q){v!==h?q.push({i:l.push(e(l)+"skewX(",null,d)-2,x:Va(v,h)}):h&&l.push(e(l)+"skewX("+h+d)}function p(v,h,l,q,w,B){v!==l||h!==q?(w=w.push(e(w)+"scale(",null,",",null,")"),B.push({i:w-4,x:Va(v,l)},{i:w-2,x:Va(h,q)})):1===l&&1===q||w.push(e(w)+
"scale("+l+","+q+")")}return function(v,h){var l=[],q=[];v=a(v);h=a(h);g(v.translateX,v.translateY,h.translateX,h.translateY,l,q);k(v.rotate,h.rotate,l,q);m(v.skewX,h.skewX,l,q);p(v.scaleX,v.scaleY,h.scaleX,h.scaleY,l,q);v=h=null;return function(w){for(var B=-1,F=q.length,K;++B<F;)l[(K=q[B]).i]=K.x(w);return l.join("")}}}function Ri(a){return((a=Math.exp(a))+1/a)/2}function Si(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,k=b[1]-d,m=g*g+k*k;if(1E-12>m){var p=Math.log(a/e)/Uc;a=function(l){return[c+
l*g,d+l*k,e*Math.exp(Uc*l*p)]}}else{var v=Math.sqrt(m);b=(a*a-e*e+4*m)/(4*e*v);a=(a*a-e*e-4*m)/(4*a*v);var h=Math.log(Math.sqrt(b*b+1)-b);p=(Math.log(Math.sqrt(a*a+1)-a)-h)/Uc;a=function(l){l*=p;var q=Ri(h),w=Uc*l+h;var B=((w=Math.exp(2*w))-1)/(w+1);var F=h;w=((F=Math.exp(F))-1/F)/2;B=e/(2*v)*(q*B-w);return[c+B*g,d+B*k,e*q/Ri(Uc*l+h)]}}a.duration=1E3*p;return a}function Ti(a){return function(b,c){var d=a((b=Zd(b)).h,(c=Zd(c)).h),e=Ea(b.s,c.s),g=Ea(b.l,c.l),k=Ea(b.opacity,c.opacity);return function(m){b.h=
d(m);b.s=e(m);b.l=g(m);b.opacity=k(m);return b+""}}}function Ui(a){return function(b,c){var d=a((b=ae(b)).h,(c=ae(c)).h),e=Ea(b.c,c.c),g=Ea(b.l,c.l),k=Ea(b.opacity,c.opacity);return function(m){b.h=d(m);b.c=e(m);b.l=g(m);b.opacity=k(m);return b+""}}}function Vi(a){return function d(c){function e(g,k){var m=a((g=db(g)).h,(k=db(k)).h),p=Ea(g.s,k.s),v=Ea(g.l,k.l),h=Ea(g.opacity,k.opacity);return function(l){g.h=m(l);g.s=p(l);g.l=v(Math.pow(l,c));g.opacity=h(l);return g+""}}c=+c;e.gamma=d;return e}(1)}
function jc(){return Sb||(Wi(Xo),Sb=Vc.now()+de)}function Xo(){Sb=0}function Wc(){this._call=this._time=this._next=null}function ee(a,b,c){var d=new Wc;d.restart(a,b,c);return d}function Xi(){jc();++kc;for(var a=fe,b;a;)0<=(b=Sb-a._time)&&a._call.call(null,b),a=a._next;--kc}function Yi(){Sb=(ge=Vc.now())+de;kc=Xc=0;try{Xi()}finally{kc=0;for(var a,b=fe,c,d=Infinity;b;)b._call?(d>b._time&&(d=b._time),a=b,b=b._next):(c=b._next,b._next=null,b=a?a._next=c:fe=c);Yc=a;cg(d);Sb=0}}function Yo(){var a=Vc.now(),
b=a-ge;1E3<b&&(de-=b,ge=a)}function cg(a){kc||(Xc&&(Xc=clearTimeout(Xc)),24<a-Sb?(Infinity>a&&(Xc=setTimeout(Yi,a-Vc.now()-de)),Zc&&(Zc=clearInterval(Zc))):(Zc||(ge=Vc.now(),Zc=setInterval(Yo,1E3)),kc=1,Wi(Yi)))}function dg(a,b,c){var d=new Wc;b=null==b?0:+b;d.restart(function(e){d.stop();a(e+b)},b,c);return d}function he(a,b,c,d,e,g){var k=a.__transition;if(!k)a.__transition={};else if(c in k)return;Zo(a,c,{name:b,index:d,group:e,on:$o,tween:ap,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,
timer:null,state:0})}function eg(a,b){a=eb(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function Tb(a,b){a=eb(a,b);if(2<a.state)throw Error("too late; already started");return a}function eb(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function Zo(a,b,c){function d(p){var v,h;if(1!==c.state)return g();for(q in k){var l=k[q];if(l.name===c.name){if(3===l.state)return dg(d);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",a,a.__data__,
l.index,l.group),delete k[q]):+q<b&&(l.state=6,l.timer.stop(),delete k[q])}}dg(function(){3===c.state&&(c.state=4,c.timer.restart(e,c.delay,c.time),e(p))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;m=Array(h=c.tween.length);var q=0;for(v=-1;q<h;++q)if(l=c.tween[q].value.call(a,a.__data__,c.index,c.group))m[++v]=l;m.length=v+1}}function e(p){p=p<c.duration?c.ease.call(null,p/c.duration):(c.timer.restart(g),c.state=5,1);for(var v=-1,h=m.length;++v<h;)m[v].call(null,
p);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),g())}function g(){c.state=6;c.timer.stop();delete k[b];for(var p in k)return;delete a.__transition}var k=a.__transition,m;k[b]=c;c.timer=ee(function(p){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=p&&d(p-c.delay)},0,c.time)}function Ub(a,b){var c=a.__transition,d,e=!0,g;if(c){b=null==b?null:b+"";for(g in c)if((d=c[g]).name!==b)e=!1;else{var k=2<d.state&&5>d.state;d.state=6;d.timer.stop();k&&d.on.call("interrupt",a,a.__data__,d.index,
d.group);delete c[g]}e&&delete a.__transition}}function bp(a,b){var c,d;return function(){var e=Tb(this,a),g=e.tween;if(g!==c){d=c=g;g=0;for(var k=d.length;g<k;++g)if(d[g].name===b){d=d.slice();d.splice(g,1);break}}e.tween=d}}function cp(a,b,c){var d,e;if("function"!==typeof c)throw Error();return function(){var g=Tb(this,a),k=g.tween;if(k!==d){e=(d=k).slice();k={name:b,value:c};for(var m=0,p=e.length;m<p;++m)if(e[m].name===b){e[m]=k;break}m===p&&e.push(k)}g.tween=e}}function fg(a,b,c){var d=a._id;
a.each(function(){var e=Tb(this,d);(e.value||(e.value={}))[b]=c.apply(this,arguments)});return function(e){return eb(e,d).value[b]}}function Zi(a,b){var c;return("number"===typeof b?Va:b instanceof Db?Tc:(c=Db(b))?(b=c,Tc):$f)(a,b)}function dp(a){return function(){this.removeAttribute(a)}}function ep(a){return function(){this.removeAttributeNS(a.space,a.local)}}function fp(a,b,c){var d,e;return function(){var g=this.getAttribute(a);return g===c?null:g===d?e:e=b(d=g,c)}}function gp(a,b,c){var d,e;
return function(){var g=this.getAttributeNS(a.space,a.local);return g===c?null:g===d?e:e=b(d=g,c)}}function hp(a,b,c){var d,e,g;return function(){var k=c(this);if(null==k)return void this.removeAttribute(a);var m=this.getAttribute(a);return m===k?null:m===d&&k===e?g:g=b(d=m,e=k)}}function ip(a,b,c){var d,e,g;return function(){var k=c(this);if(null==k)return void this.removeAttributeNS(a.space,a.local);var m=this.getAttributeNS(a.space,a.local);return m===k?null:m===d&&k===e?g:g=b(d=m,e=k)}}function jp(a,
b){function c(){var d=this,e=b.apply(d,arguments);return e&&function(g){d.setAttributeNS(a.space,a.local,e(g))}}c._value=b;return c}function kp(a,b){function c(){var d=this,e=b.apply(d,arguments);return e&&function(g){d.setAttribute(a,e(g))}}c._value=b;return c}function lp(a,b){return function(){eg(this,a).delay=+b.apply(this,arguments)}}function mp(a,b){return b=+b,function(){eg(this,a).delay=b}}function np(a,b){return function(){Tb(this,a).duration=+b.apply(this,arguments)}}function op(a,b){return b=
+b,function(){Tb(this,a).duration=b}}function pp(a,b){if("function"!==typeof b)throw Error();return function(){Tb(this,a).ease=b}}function qp(a){return(a+"").trim().split(/^|\s+/).every(function(b){var c=b.indexOf(".");0<=c&&(b=b.slice(0,c));return!b||"start"===b})}function rp(a,b,c){var d,e,g=qp(b)?eg:Tb;return function(){var k=g(this,a),m=k.on;if(m!==d)(e=(d=m).copy()).on(b,c);k.on=e}}function sp(a){return function(){var b=this.parentNode,c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}
function tp(a,b){var c,d,e;return function(){var g=Pb(this,a),k=(this.style.removeProperty(a),Pb(this,a));return g===k?null:g===c&&k===d?e:e=b(c=g,d=k)}}function up(a){return function(){this.style.removeProperty(a)}}function vp(a,b,c){var d,e;return function(){var g=Pb(this,a);return g===c?null:g===d?e:e=b(d=g,c)}}function wp(a,b,c){var d,e,g;return function(){var k=Pb(this,a),m=c(this);null==m&&(m=(this.style.removeProperty(a),Pb(this,a)));return k===m?null:k===d&&m===e?g:g=b(d=k,e=m)}}function xp(a,
b,c){function d(){var e=this,g=b.apply(e,arguments);return g&&function(k){e.style.setProperty(a,g(k),c)}}d._value=b;return d}function yp(a){return function(){this.textContent=a}}function zp(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function kb(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function $i(a){return Qb().transition(a)}function aj(a){return(1>=(a*=2)?a*a:--a*(2-a)+1)/2}function gg(a){return(1>=(a*=2)?a*a*a:(a-=2)*a*a+2)/2}function bj(a){return(1-
Math.cos(cj*a))/2}function dj(a){return(1>=(a*=2)?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function ej(a){return(1>=(a*=2)?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function $c(a){return(a=+a)<hg?ie*a*a:a<Ap?ie*(a-=Bp)*a+.75:a<Cp?ie*(a-=Dp)*a+.9375:ie*(a-=Ep)*a+.984375}function fj(a){return function(){return a}}function Fp(a,b,c){this.target=a;this.type=b;this.selection=c}function je(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function ad(a){return{type:a}}function Gp(){return!d3.event.button}
function Hp(){var a=this.ownerSVGElement||this;return[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function ig(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function jg(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function kg(a){function b(q){var w=q.property("__brush",k).selectAll(".overlay").data([ad("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",qb.overlay).merge(w).each(function(){var B=ig(this).extent;Ra(this).attr("x",
B[0][0]).attr("y",B[0][1]).attr("width",B[1][0]-B[0][0]).attr("height",B[1][1]-B[0][1])});q.selectAll(".selection").data([ad("selection")]).enter().append("rect").attr("class","selection").attr("cursor",qb.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");w=q.selectAll(".handle").data(a.handles,function(B){return B.type});w.exit().remove();w.enter().append("rect").attr("class",function(B){return"handle handle--"+B.type}).attr("cursor",
function(B){return qb[B.type]});q.each(c).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",g)}function c(){var q=Ra(this),w=ig(this).selection;w?(q.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),q.selectAll(".handle").style("display",null).attr("x",function(B){return"e"===B.type[B.type.length-1]?w[1][0]-h/2:w[0][0]-
h/2}).attr("y",function(B){return"s"===B.type[0]?w[1][1]-h/2:w[0][1]-h/2}).attr("width",function(B){return"n"===B.type||"s"===B.type?w[1][0]-w[0][0]+h:h}).attr("height",function(B){return"e"===B.type||"w"===B.type?w[1][1]-w[0][1]+h:h})):q.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(q,w){return q.__brush.emitter||new e(q,w)}function e(q,w){this.that=q;this.args=w;this.state=q.__brush;this.active=0}function g(){function q(){var ea=
Bb(P);!S||E||J||(Math.abs(ea[0]-L[0])>Math.abs(ea[1]-L[1])?J=!0:E=!0);L=ea;O=!0;je();w()}function w(){C=L[0]-H[0];G=L[1]-H[1];switch(y){case lg:case gj:I&&(C=Math.max(f-n,Math.min(t-z,C)),M=n+C,Y=z+C);Q&&(G=Math.max(u-r,Math.min(D-A,G)),X=r+G,W=A+G);break;case lc:0>I?(C=Math.max(f-n,Math.min(t-n,C)),M=n+C,Y=z):0<I&&(C=Math.max(f-z,Math.min(t-z,C)),M=n,Y=z+C);0>Q?(G=Math.max(u-r,Math.min(D-r,G)),X=r+G,W=A):0<Q&&(G=Math.max(u-A,Math.min(D-A,G)),X=r,W=A+G);break;case mc:I&&(M=Math.max(f,Math.min(t,n-
C*I)),Y=Math.max(f,Math.min(t,z+C*I))),Q&&(X=Math.max(u,Math.min(D,r-G*Q)),W=Math.max(u,Math.min(D,A+G*Q)))}if(Y<M){I*=-1;var ea=n;n=z;z=ea;ea=M;M=Y;Y=ea;x in hj&&aa.attr("cursor",qb[x=hj[x]])}W<X&&(Q*=-1,ea=r,r=A,A=ea,ea=X,X=W,W=ea,x in ij&&aa.attr("cursor",qb[x=ij[x]]));V.selection&&(U=V.selection);E&&(M=U[0][0],Y=U[1][0]);J&&(X=U[0][1],W=U[1][1]);if(U[0][0]!==M||U[0][1]!==X||U[1][0]!==Y||U[1][1]!==W)V.selection=[[M,X],[Y,W]],c.call(P),T.brush()}function B(){d3.event.stopImmediatePropagation();
if(d3.event.touches){if(d3.event.touches.length)return;l&&clearTimeout(l);l=setTimeout(function(){l=null},500);ba.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Xd(d3.event.view,O),ha.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ba.attr("pointer-events","all");aa.attr("cursor",qb.overlay);V.selection&&(U=V.selection);jg(U)&&(V.selection=null,c.call(P));T.end()}function F(){switch(d3.event.keyCode){case 16:S=I&&Q;break;case 18:y===lc&&(I&&(z=Y-C*I,n=M+C*I),Q&&
(A=W-G*Q,r=X+G*Q),y=mc,w());break;case 32:if(y===lc||y===mc)0>I?z=Y-C:0<I&&(n=M-C),0>Q?A=W-G:0<Q&&(r=X-G),y=lg,aa.attr("cursor",qb.selection),w();break;default:return}je()}function K(){switch(d3.event.keyCode){case 16:S&&(E=J=S=!1,w());break;case 18:y===mc&&(0>I?z=Y:0<I&&(n=M),0>Q?A=W:0<Q&&(r=X),y=lc,w());break;case 32:y===lg&&(d3.event.altKey?(I&&(z=Y-C*I,n=M+C*I),Q&&(A=W-G*Q,r=X+G*Q),y=mc):(0>I?z=Y:0<I&&(n=M),0>Q?A=W:0<Q&&(r=X),y=lc),aa.attr("cursor",qb[x]),w());break;default:return}je()}if(d3.event.touches){if(d3.event.changedTouches.length<
d3.event.touches.length)return je()}else if(l)return;if(p.apply(this,arguments)){var P=this,x=d3.event.target.__data__.type,y="selection"===(d3.event.metaKey?x="overlay":x)?gj:d3.event.altKey?mc:lc,I=a===ke?null:Ip[x],Q=a===le?null:Jp[x],V=ig(P),N=V.extent,U=V.selection,f=N[0][0],n,u=N[0][1],r,t=N[1][0],z,D=N[1][1],A,C,G,O,S=I&&Q&&d3.event.shiftKey,E,J,H=Bb(P),L=H,T=d(P,arguments).beforestart();"overlay"===x?V.selection=U=[[n=a===ke?f:H[0],r=a===le?u:H[1]],[z=a===ke?t:n,A=a===le?D:r]]:(n=U[0][0],
r=U[0][1],z=U[1][0],A=U[1][1]);var M=n;var X=r;var Y=z;var W=A;var ba=Ra(P).attr("pointer-events","none"),aa=ba.selectAll(".overlay").attr("cursor",qb[x]);if(d3.event.touches)ba.on("touchmove.brush",q,!0).on("touchend.brush touchcancel.brush",B,!0);else{var ha=Ra(d3.event.view).on("keydown.brush",F,!0).on("keyup.brush",K,!0).on("mousemove.brush",q,!0).on("mouseup.brush",B,!0);Wd(d3.event.view)}d3.event.stopImmediatePropagation();Ub(P);c.call(P);T.start()}}function k(){var q=this.__brush||{selection:null};
q.extent=m.apply(this,arguments);q.dim=a;return q}var m=Hp,p=Gp,v=Ob(b,"start","brush","end"),h=6,l;b.move=function(q,w){q.selection?q.on("start.brush",function(){d(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){d(this,arguments).end()}).tween("brush",function(){function B(Q){K.selection=1===Q&&jg(y)?null:I(Q);c.call(F);P.brush()}var F=this,K=F.__brush,P=d(F,arguments),x=K.selection,y=a.input("function"===typeof w?w.apply(this,arguments):w,K.extent),I=Sc(x,y);return x&&
y?B:B(1)}):q.each(function(){var B=arguments,F=this.__brush,K=a.input("function"===typeof w?w.apply(this,B):w,F.extent);B=d(this,B).beforestart();Ub(this);F.selection=null==K||jg(K)?null:K;c.call(this);B.start().brush().end()})};e.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},start:function(){this.starting&&(this.starting=!1,this.emit("start"));return this},brush:function(){this.emit("brush");return this},end:function(){0===--this.active&&
(delete this.state.emitter,this.emit("end"));return this},emit:function(q){Qc(new Fp(b,q,a.output(this.state.selection)),v.apply,v,[q,this.that,this.args])}};b.extent=function(q){return arguments.length?(m="function"===typeof q?q:fj([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),b):m};b.filter=function(q){return arguments.length?(p="function"===typeof q?q:fj(!!q),b):p};b.handleSize=function(q){return arguments.length?(h=+q,b):h};b.on=function(){var q=v.on.apply(v,arguments);return q===v?b:q};return b}
function Kp(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}function mg(a){return function(){return a}}function ng(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function Eb(){return new ng}function Lp(a){return a.source}function Mp(a){return a.target}function Np(a){return a.radius}function Op(a){return a.startAngle}function Pp(a){return a.endAngle}function me(){}function rb(a,b){var c=new me;if(a instanceof me)a.each(function(k,m){c.set(m,k)});
else if(Array.isArray(a)){var d=-1,e=a.length,g;if(null==b)for(;++d<e;)c.set(d,a[d]);else for(;++d<e;)c.set(b(g=a[d],d,a),g)}else if(a)for(d in a)c.set(d,a[d]);return c}function Qp(){return{}}function Rp(a,b,c){a[b]=c}function jj(){return rb()}function kj(a,b,c){a.set(b,c)}function ne(){}function lj(a,b){var c=new ne;if(a instanceof ne)a.each(function(g){c.add(g)});else if(a){var d=-1,e=a.length;if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}function Sp(a,b){return a-
b}function Fb(a){return function(){return a}}function Tp(){}function mj(){function a(p){var v=k(p);if(Array.isArray(v))v=v.slice().sort(Sp);else{var h=Df(p),l=h[0];h=h[1];v=Nb(l,h,v);v=Ta(Math.floor(l/v)*v,Math.floor(h/v)*v,v)}return v.map(function(q){return b(p,q)})}function b(p,v){var h=[],l=[];c(p,v,function(q){m(q,p,v);for(var w=0,B=q.length,F=q[B-1][1]*q[0][0]-q[B-1][0]*q[0][1];++w<B;)F+=q[w-1][1]*q[w][0]-q[w-1][0]*q[w][1];0<F?h.push([q]):l.push(q)});l.forEach(function(q){for(var w=0,B=h.length,
F;w<B;++w){a:{var K=(F=h[w])[0];for(var P=q,x=-1,y=P.length;++x<y;){b:{var I=K;for(var Q=P[x],V=Q[0],N=Q[1],U=-1,f=0,n=I.length,u=n-1;f<n;u=f++){var r=I[f],t=r[0],z=r[1],D=I[u];u=D[0];var A=D[1],C,G=r;r=D;D=Q;if(C=(r[0]-G[0])*(D[1]-G[1])===(D[0]-G[0])*(r[1]-G[1]))G=G[C=+(G[0]===r[0])],D=D[C],r=r[C],C=G<=D&&D<=r||r<=D&&D<=G;if(C){I=0;break b}z>N!==A>N&&V<(u-t)*(N-z)/(A-z)+t&&(U=-U)}I=U}if(I){K=I;break a}}K=0}if(-1!==K){F.push(q);break}}});return{type:"MultiPolygon",value:v,coordinates:h}}function c(p,
v,h){function l(I){var Q=[I[0][0]+F,I[0][1]+B];I=[I[1][0]+F,I[1][1]+B];var V=2*Q[0]+Q[1]*(e+1)*4,N=2*I[0]+I[1]*(e+1)*4,U,f;(U=w[V])?(f=q[N])?(delete w[U.end],delete q[f.start],U===f?(U.ring.push(I),h(U.ring)):q[U.start]=w[f.end]={start:U.start,end:f.end,ring:U.ring.concat(f.ring)}):(delete w[U.end],U.ring.push(I),w[U.end=N]=U):(U=q[N])?(f=w[V])?(delete q[U.start],delete w[f.end],U===f?(U.ring.push(I),h(U.ring)):q[f.start]=w[U.end]={start:f.start,end:U.end,ring:f.ring.concat(U.ring)}):(delete q[U.start],
U.ring.unshift(Q),q[U.start=V]=U):q[V]=w[N]={start:V,end:N,ring:[Q,I]}}var q=[],w=[],B;var F=B=-1;var K=p[0]>=v;for(sb[K<<1].forEach(l);++F<e-1;){var P=K;K=p[F+1]>=v;sb[P|K<<1].forEach(l)}for(sb[K<<0].forEach(l);++B<g-1;){F=-1;K=p[B*e+e]>=v;var x=p[B*e]>=v;for(sb[K<<1|x<<2].forEach(l);++F<e-1;){P=K;K=p[B*e+e+F+1]>=v;var y=x;x=p[B*e+F+1]>=v;sb[P|K<<1|x<<2|y<<3].forEach(l)}sb[K|x<<3].forEach(l)}F=-1;x=p[B*e]>=v;for(sb[x<<2].forEach(l);++F<e-1;)y=x,x=p[B*e+F+1]>=v,sb[x<<2|y<<3].forEach(l);sb[x<<3].forEach(l)}
function d(p,v,h){p.forEach(function(l){var q=l[0],w=l[1],B=q|0,F=w|0,K=v[F*e+B];if(0<q&&q<e&&B===q){var P=v[F*e+B-1];l[0]=q+(h-P)/(K-P)-.5}0<w&&w<g&&F===w&&(P=v[(F-1)*e+B],l[1]=w+(h-P)/(K-P)-.5)})}var e=1,g=1,k=If,m=d;a.contour=b;a.size=function(p){if(!arguments.length)return[e,g];var v=Math.ceil(p[0]),h=Math.ceil(p[1]);if(!(0<v&&0<h))throw Error("invalid size");return e=v,g=h,a};a.thresholds=function(p){return arguments.length?(k="function"===typeof p?p:Array.isArray(p)?Fb(nj.call(p)):Fb(p),a):
k};a.smooth=function(p){return arguments.length?(m=p?d:Tp,a):m===d};return a}function og(a,b,c){for(var d=a.width,e=a.height,g=(c<<1)+1,k=0;k<e;++k)for(var m=0,p=0;m<d+c;++m)m<d&&(p+=a.data[m+k*d]),m>=c&&(m>=g&&(p-=a.data[m-g+k*d]),b.data[m-c+k*d]=p/Math.min(m+1,d-1+g-m,g))}function pg(a,b,c){for(var d=a.width,e=a.height,g=(c<<1)+1,k=0;k<d;++k)for(var m=0,p=0;m<e+c;++m)m<e&&(p+=a.data[k+m*d]),m>=c&&(m>=g&&(p-=a.data[k+(m-g)*d]),b.data[k+(m-c)*d]=p/Math.min(m+1,e-1+g-m,g))}function Up(a){return a[0]}
function Vp(a){return a[1]}function Wp(){return 1}function oj(a){return new Function("d","return {"+a.map(function(b,c){return JSON.stringify(b)+": d["+c+"]"}).join(",")+"}")}function Xp(a,b){var c=oj(a);return function(d,e){return b(c(d),e,a)}}function Yp(a){var b=Object.create(null),c=[];a.forEach(function(d){for(var e in d)e in b||c.push(b[e]=e)});return c}function oe(a){function b(k,m){function p(){if(B)return qg;if(F)return F=!1,pj;var P,x=l,y;if(34===k.charCodeAt(x)){for(;l++<h&&34!==k.charCodeAt(l)||
34===k.charCodeAt(++l););(P=l)>=h?B=!0:10===(y=k.charCodeAt(l++))?F=!0:13===y&&(F=!0,10===k.charCodeAt(l)&&++l);return k.slice(x+1,P-1).replace(/""/g,'"')}for(;l<h;){if(10===(y=k.charCodeAt(P=l++)))F=!0;else if(13===y)F=!0,10===k.charCodeAt(l)&&++l;else if(y!==g)continue;return k.slice(x,P)}return B=!0,k.slice(x,h)}var v=[],h=k.length,l=0,q=0,w,B=0>=h,F=!1;10===k.charCodeAt(h-1)&&--h;for(13===k.charCodeAt(h-1)&&--h;(w=p())!==qg;){for(var K=[];w!==pj&&w!==qg;)K.push(w),w=p();m&&null==(K=m(K,q++))||
v.push(K)}return v}function c(k){return k.map(d).join(a)}function d(k){return null==k?"":e.test(k+="")?'"'+k.replace(/"/g,'""')+'"':k}var e=new RegExp('["'+a+"\n\r]"),g=a.charCodeAt(0);return{parse:function(k,m){var p,v;k=b(k,function(h,l){if(p)return p(h,l-1);v=h;p=m?Xp(h,m):oj(h)});k.columns=v||[];return k},parseRows:b,format:function(k,m){null==m&&(m=Yp(k));return[m.map(d).join(a)].concat(k.map(function(p){return m.map(function(v){return d(p[v])}).join(a)})).join("\n")},formatRows:function(k){return k.map(c).join("\n")}}}
function Zp(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.blob()}function $p(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.arrayBuffer()}function aq(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.text()}function pe(a,b){return fetch(a,b).then(aq)}function qj(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=void 0);return pe(b,c).then(function(e){return a(e,d)})}}function bq(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.json()}
function rg(a){return function(b,c){return pe(b,c).then(function(d){return(new DOMParser).parseFromString(d,a)})}}function Ca(a){return function(){return a}}function Gb(){return 1E-6*(Math.random()-.5)}function rj(a,b,c,d){if(isNaN(b)||isNaN(c))return a;var e,g=a._root;d={data:d};var k=a._x0,m=a._y0,p=a._x1,v=a._y1,h,l,q,w;if(!g)return a._root=d,a;for(;g.length;)if((q=b>=(h=(k+p)/2))?k=h:p=h,(w=c>=(l=(m+v)/2))?m=l:v=l,e=g,!(g=g[q|=w<<1]))return e[q]=d,a;var B=+a._x.call(null,g.data);var F=+a._y.call(null,
g.data);if(b===B&&c===F)return d.next=g,e?e[q]=d:a._root=d,a;do e=e?e[q]=Array(4):a._root=Array(4),(q=b>=(h=(k+p)/2))?k=h:p=h,(w=c>=(l=(m+v)/2))?m=l:v=l;while((q|=w<<1)===(w=(F>=l)<<1|B>=h));return e[w]=g,e[q]=d,a}function Ka(a,b,c,d,e){this.node=a;this.x0=b;this.y0=c;this.x1=d;this.y1=e}function cq(a){return a[0]}function dq(a){return a[1]}function qe(a,b,c){b=new sg(null==b?cq:b,null==c?dq:c,NaN,NaN,NaN,NaN);return null==a?b:b.addAll(a)}function sg(a,b,c,d,e,g){this._x=a;this._y=b;this._x0=c;this._y0=
d;this._x1=e;this._y1=g;this._root=void 0}function sj(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}function eq(a){return a.x+a.vx}function fq(a){return a.y+a.vy}function gq(a){return a.index}function tj(a,b){a=a.get(b);if(!a)throw Error("missing: "+b);return a}function hq(a){return a.x}function iq(a){return a.y}function re(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+
1)]}function nc(a){return a=re(Math.abs(a)),a?a[1]:NaN}function jq(a,b){return function(c,d){for(var e=c.length,g=[],k=0,m=a[0],p=0;0<e&&0<m;){p+m+1>d&&(m=Math.max(1,d-p));g.push(c.substring(e-=m,e+m));if((p+=m+1)>d)break;m=a[k=(k+1)%a.length]}return g.reverse().join(b)}}function kq(a){return function(b){return b.replace(/[0-9]/g,function(c){return a[+c]})}}function bd(a){return new tg(a)}function tg(a){if(!(b=lq.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||
">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function uj(a,b){b=re(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function vj(a){return a}function wj(a){function b(m){function p(N){var U=y,f=I,n,u;if("c"===x)f=Q(N)+f,N="";else{N=+N;var r=0>N;N=Q(Math.abs(N),K);if(P){var t=
N.length,z=1,D=-1;a:for(;z<t;++z)switch(N[z]){case ".":D=n=z;break;case "0":0===D&&(D=z);n=z;break;default:if(0<D){if(!+N[z])break a;D=0}}N=0<D?N.slice(0,D)+N.slice(n+1):N}r&&0===+N&&(r=!1);U=(r?"("===l?l:"-":"-"===l||"("===l?"":l)+U;f=("s"===x?xj[8+yj/3]:"")+f+(r&&"("===l?")":"");if(V)for(r=-1,n=N.length;++r<n;)if(u=N.charCodeAt(r),48>u||57<u){f=(46===u?e+N.slice(r+1):N.slice(r))+f;N=N.slice(0,r);break}}F&&!w&&(N=c(N,Infinity));u=U.length+N.length+f.length;r=u<B?Array(B-u+1).join(v):"";F&&w&&(N=
c(r+N,r.length?B-f.length:Infinity),r="");switch(h){case "<":N=U+N+f+r;break;case "=":N=U+r+N+f;break;case "^":N=r.slice(0,u=r.length>>1)+U+N+f+r.slice(u);break;default:N=r+U+N+f}return g(N)}m=bd(m);var v=m.fill,h=m.align,l=m.sign,q=m.symbol,w=m.zero,B=m.width,F=m.comma,K=m.precision,P=m.trim,x=m.type;"n"===x?(F=!0,x="g"):zj[x]||(null==K&&(K=12),P=!0,x="g");if(w||"0"===v&&"="===h)w=!0,v="0",h="=";var y="$"===q?d[0]:"#"===q&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",I="$"===q?d[1]:/[%p]/.test(x)?k:"",
Q=zj[x],V=/[defgprs%]/.test(x);K=null==K?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));p.toString=function(){return m+""};return p}var c=a.grouping&&a.thousands?jq(a.grouping,a.thousands):vj,d=a.currency,e=a.decimal,g=a.numerals?kq(a.numerals):vj,k=a.percent||"%";return{format:b,formatPrefix:function(m,p){var v=b((m=bd(m),m.type="f",m));m=3*Math.max(-8,Math.min(8,Math.floor(nc(p)/3)));var h=Math.pow(10,-m),l=xj[8+m/3];return function(q){return v(h*q)+l}}}}function Aj(a){se=
wj(a);d3.format=se.format;d3.formatPrefix=se.formatPrefix;return se}function Bj(a){return Math.max(0,-nc(Math.abs(a)))}function Cj(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nc(b)/3)))-nc(Math.abs(a)))}function Dj(a,b){a=Math.abs(a);b=Math.abs(b)-a;return Math.max(0,nc(b)-nc(a))+1}function fb(){this.reset()}function Ej(a,b,c){var d=a.s=b+c,e=d-b;a.t=b-(d-e)+(c-e)}function Fj(a){return 1<a?0:-1>a?oa:Math.acos(a)}function La(a){return 1<a?wa:-1>a?-wa:Math.asin(a)}function Gj(a){return(a=
ca(a/2))*a}function xa(){}function te(a,b){if(a&&Hj.hasOwnProperty(a.type))Hj[a.type](a,b)}function ug(a,b,c){var d=-1;c=a.length-c;for(b.lineStart();++d<c;){var e=a[d];b.point(e[0],e[1],e[2])}b.lineEnd()}function Ij(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)ug(a[c],b,1);b.polygonEnd()}function gb(a,b){if(a&&Jj.hasOwnProperty(a.type))Jj[a.type](a,b);else te(a,b)}function mq(){lb.point=nq}function oq(){Kj(Lj,Mj)}function nq(a,b){lb.point=Kj;Lj=a;Mj=b;a*=ia;b*=ia;vg=a;wg=da(b=b/2+ue);xg=
ca(b)}function Kj(a,b){a*=ia;b*=ia;b=b/2+ue;var c=a-vg,d=0<=c?1:-1,e=d*c;c=da(b);b=ca(b);var g=xg*b,k=wg*c+g*da(e);d=g*d*ca(e);ve.add(Ma(d,k));vg=a;wg=c;xg=b}function we(a){return[Ma(a[1],a[0]),La(a[2])]}function Vb(a){var b=a[0];a=a[1];var c=da(a);return[c*da(b),c*ca(b),ca(a)]}function xe(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function oc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function yg(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function ye(a,b){return[a[0]*b,a[1]*
b,a[2]*b]}function ze(a){var b=Ba(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function zg(a,b){Hb.push(tb=[za=a,Aa=a]);b<Wa&&(Wa=b);b>Za&&(Za=b)}function Nj(a,b){var c=Vb([a*ia,b*ia]);if(pc){var d=oc(pc,c);d=oc([d[1],-d[0],0],d);ze(d);d=we(d);var e=a-Wb,g=0<e?1:-1,k=d[0]*va*g;e=180<ra(e);e^(g*Wb<k&&k<g*a)?(d=d[1]*va,d>Za&&(Za=d)):(k=(k+360)%360-180,e^(g*Wb<k&&k<g*a))?(d=-d[1]*va,d<Wa&&(Wa=d)):(b<Wa&&(Wa=b),b>Za&&(Za=b));e?a<Wb?Xa(za,a)>Xa(za,Aa)&&(Aa=a):Xa(a,Aa)>Xa(za,Aa)&&(za=a):Aa>=za?
(a<za&&(za=a),a>Aa&&(Aa=a)):a>Wb?Xa(za,a)>Xa(za,Aa)&&(Aa=a):Xa(a,Aa)>Xa(za,Aa)&&(za=a)}else Hb.push(tb=[za=a,Aa=a]);b<Wa&&(Wa=b);b>Za&&(Za=b);pc=c;Wb=a}function Oj(){ub.point=Nj}function Pj(){tb[0]=za;tb[1]=Aa;ub.point=zg;pc=null}function Qj(a,b){if(pc){var c=a-Wb;cd.add(180<ra(c)?c+(0<c?360:-360):c)}else Rj=a,Sj=b;lb.point(a,b);Nj(a,b)}function pq(){lb.lineStart()}function qq(){Qj(Rj,Sj);lb.lineEnd();1E-6<ra(cd)&&(za=-(Aa=180));tb[0]=za;tb[1]=Aa;pc=null}function Xa(a,b){return 0>(b-=a)?b+360:b}function rq(a,
b){return a[0]-b[0]}function Tj(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function Ag(a,b){a*=ia;b*=ia;var c=da(b);dd(c*da(a),c*ca(a),ca(b))}function dd(a,b,c){++ed;Ae+=(a-Ae)/ed;Be+=(b-Be)/ed;Ce+=(c-Ce)/ed}function Uj(){hb.point=sq}function sq(a,b){a*=ia;b*=ia;var c=da(b);Na=c*da(a);Oa=c*ca(a);Pa=ca(b);hb.point=tq;dd(Na,Oa,Pa)}function tq(a,b){a*=ia;b*=ia;var c=da(b),d=c*da(a);a=c*ca(a);b=ca(b);var e=Ma(Ba((e=Oa*b-Pa*a)*e+(e=Pa*d-Na*b)*e+(e=Na*a-Oa*d)*e),Na*d+Oa*a+Pa*b);De+=e;Ee+=e*
(Na+(Na=d));Fe+=e*(Oa+(Oa=a));Ge+=e*(Pa+(Pa=b));dd(Na,Oa,Pa)}function Vj(){hb.point=Ag}function uq(){hb.point=vq}function wq(){Wj(Xj,Yj);hb.point=Ag}function vq(a,b){Xj=a;Yj=b;a*=ia;b*=ia;hb.point=Wj;var c=da(b);Na=c*da(a);Oa=c*ca(a);Pa=ca(b);dd(Na,Oa,Pa)}function Wj(a,b){a*=ia;b*=ia;var c=da(b),d=c*da(a);a=c*ca(a);b=ca(b);c=Oa*b-Pa*a;var e=Pa*d-Na*b,g=Na*a-Oa*d,k=Ba(c*c+e*e+g*g),m=La(k);k=k&&-m/k;Bg+=k*c;Cg+=k*e;Dg+=k*g;De+=m;Ee+=m*(Na+(Na=d));Fe+=m*(Oa+(Oa=a));Ge+=m*(Pa+(Pa=b));dd(Na,Oa,Pa)}function qc(a){return function(){return a}}
function Eg(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}a.invert&&b.invert&&(c.invert=function(d,e){return d=b.invert(d,e),d&&a.invert(d[0],d[1])});return c}function Fg(a,b){return[a>oa?a-Sa:a<-oa?a+Sa:a,b]}function Gg(a,b,c){return(a%=Sa)?b||c?Eg(Zj(a),ak(b,c)):Zj(a):b||c?ak(b,c):Fg}function bk(a){return function(b,c){return b+=a,[b>oa?b-Sa:b<-oa?b+Sa:b,c]}}function Zj(a){var b=bk(a);b.invert=bk(-a);return b}function ak(a,b){function c(m,p){var v=da(p),h=da(m)*v;m=ca(m)*v;p=ca(p);v=p*d+h*e;
return[Ma(m*g-v*k,h*d-p*e),La(v*g+m*k)]}var d=da(a),e=ca(a),g=da(b),k=ca(b);c.invert=function(m,p){var v=da(p),h=da(m)*v;m=ca(m)*v;p=ca(p);v=p*g-m*k;return[Ma(m*g+p*k,h*d+v*e),La(v*d-h*e)]};return c}function ck(a){function b(c){c=a(c[0]*ia,c[1]*ia);return c[0]*=va,c[1]*=va,c}a=Gg(a[0]*ia,a[1]*ia,2<a.length?a[2]*ia:0);b.invert=function(c){c=a.invert(c[0]*ia,c[1]*ia);return c[0]*=va,c[1]*=va,c};return b}function dk(a,b,c,d,e,g){if(c){var k=da(b),m=ca(b);c*=d;if(null==e)e=b+d*Sa,g=b-c/2;else if(e=ek(k,
e),g=ek(k,g),0<d?e<g:e>g)e+=d*Sa;for(;0<d?e>g:e<g;e-=c)b=we([k,-m*da(e),-m*ca(e)]),a.point(b[0],b[1])}}function ek(a,b){b=Vb(b);b[0]-=a;ze(b);a=Fj(-b[1]);return((0>-b[2]?-a:a)+Sa-1E-6)%Sa}function fk(){var a=[],b;return{point:function(c,d){b.push([c,d])},lineStart:function(){a.push(b=[])},lineEnd:xa,rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))},result:function(){var c=a;a=[];b=null;return c}}}function He(a,b){return 1E-6>ra(a[0]-b[0])&&1E-6>ra(a[1]-b[1])}function Ie(a,b,c,d){this.x=
a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function gk(a,b,c,d,e){var g=[],k=[];a.forEach(function(l){if(!(0>=(q=l.length-1))){var q,w=l[0],B=l[q];if(He(w,B)){e.lineStart();for(m=0;m<q;++m)e.point((w=l[m])[0],w[1]);e.lineEnd()}else g.push(q=new Ie(w,l,null,!0)),k.push(q.o=new Ie(w,null,q,!1)),g.push(q=new Ie(B,l,null,!1)),k.push(q.o=new Ie(B,null,q,!0))}});if(g.length){k.sort(b);hk(g);hk(k);var m=0;for(a=k.length;m<a;++m)k[m].e=c=!c;c=g[0];for(var p;;){for(var v=c,h=!0;v.v;)if((v=v.n)===
c)return;b=v.z;e.lineStart();do{v.v=v.o.v=!0;if(v.e){if(h)for(m=0,a=b.length;m<a;++m)e.point((p=b[m])[0],p[1]);else d(v.x,v.n.x,1,e);v=v.n}else{if(h)for(b=v.p.z,m=b.length-1;0<=m;--m)e.point((p=b[m])[0],p[1]);else d(v.x,v.p.x,-1,e);v=v.p}v=v.o;b=v.z;h=!h}while(!v.v);e.lineEnd()}}}function hk(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function ik(a,b){var c=b[0];b=b[1];var d=ca(b),e=[ca(c),-da(c),0],g=0,k=0;Hg.reset();1===d?b=wa+1E-6:-1===d&&(b=-wa-1E-6);
d=0;for(var m=a.length;d<m;++d)if(v=(p=a[d]).length){var p,v,h=p[v-1],l=h[0],q=h[1]/2+ue,w=ca(q),B=da(q);for(q=0;q<v;++q,l=K,w=P,B=x,h=F){var F=p[q],K=F[0];x=F[1]/2+ue;var P=ca(x),x=da(x),y=K-l,I=0<=y?1:-1,Q=I*y,V=Q>oa;w*=P;Hg.add(Ma(w*I*ca(Q),B*x+w*da(Q)));g+=V?y+I*Sa:y;V^l>=c^K>=c&&(h=oc(Vb(h),Vb(F)),ze(h),l=oc(e,h),ze(l),l=(V^0<=y?-1:1)*La(l[2]),b>l||b===l&&(h[0]||h[1]))&&(k+=V^0<=y?1:-1)}}return(-1E-6>g||1E-6>g&&-1E-6>Hg)^k&1}function jk(a,b,c,d){return function(e){function g(I,Q){a(I,Q)&&e.point(I,
Q)}function k(I,Q){q.point(I,Q)}function m(){y.point=k;q.lineStart()}function p(){y.point=g;q.lineEnd()}function v(I,Q){x.push([I,Q]);B.point(I,Q)}function h(){B.lineStart();x=[]}function l(){v(x[0][0],x[0][1]);B.lineEnd();var I=B.clean(),Q=w.result(),V=Q.length,N;x.pop();K.push(x);x=null;if(V)if(I&1){if(V=Q[0],0<(Q=V.length-1)){F||(e.polygonStart(),F=!0);e.lineStart();for(I=0;I<Q;++I)e.point((N=V[I])[0],N[1]);e.lineEnd()}}else 1<V&&I&2&&Q.push(Q.pop().concat(Q.shift())),P.push(Q.filter(xq))}var q=
b(e),w=fk(),B=b(w),F=!1,K,P,x,y={point:g,lineStart:m,lineEnd:p,polygonStart:function(){y.point=v;y.lineStart=h;y.lineEnd=l;P=[];K=[]},polygonEnd:function(){y.point=g;y.lineStart=m;y.lineEnd=p;P=Jf(P);var I=ik(K,d);P.length?(F||(e.polygonStart(),F=!0),gk(P,yq,I,c,e)):I&&(F||(e.polygonStart(),F=!0),e.lineStart(),c(null,null,1,e),e.lineEnd());F&&(e.polygonEnd(),F=!1);P=K=null},sphere:function(){e.polygonStart();e.lineStart();c(null,null,1,e);e.lineEnd();e.polygonEnd()}};return y}}function xq(a){return 1<
a.length}function yq(a,b){return(0>(a=a.x)[0]?a[1]-wa-1E-6:wa-a[1])-(0>(b=b.x)[0]?b[1]-wa-1E-6:wa-b[1])}function kk(a){function b(p,v){return da(p)*da(v)>e}function c(p,v,h){var l=Vb(p),q=Vb(v),w=[1,0,0];q=oc(l,q);var B=xe(q,q);l=q[0];var F=B-l*l;if(!F)return!h&&p;B=e*B/F;F=-e*l/F;l=oc(w,q);w=ye(w,B);q=ye(q,F);yg(w,q);q=xe(w,l);B=xe(l,l);F=q*q-B*(xe(w,w)-1);if(!(0>F)){var K=Ba(F);F=ye(l,(-q-K)/B);yg(F,w);F=we(F);if(!h)return F;h=p[0];var P=v[0];p=p[1];v=v[1];if(P<h){var x=h;h=P;P=x}var y=P-h,I=1E-6>
ra(y-oa);!I&&v<p&&(x=p,p=v,v=x);if(I||1E-6>y?I?0<p+v^F[1]<(1E-6>ra(F[0]-h)?p:v):p<=F[1]&&F[1]<=v:y>oa^(h<=F[0]&&F[0]<=P))return v=ye(l,(-q+K)/B),yg(v,w),[F,we(v)]}}function d(p,v){var h=k?a:oa-a,l=0;p<-h?l|=1:p>h&&(l|=2);v<-h?l|=4:v>h&&(l|=8);return l}var e=da(a),g=6*ia,k=0<e,m=1E-6<ra(e);return jk(b,function(p){var v,h,l,q,w;return{lineStart:function(){q=l=!1;w=1},point:function(B,F){var K=[B,F],P=b(B,F);F=k?P?0:d(B,F):P?d(B+(0>B?oa:-oa),F):0;!v&&(q=l=P)&&p.lineStart();P!==l&&(B=c(v,K),!B||He(v,
B)||He(K,B))&&(K[0]+=1E-6,K[1]+=1E-6,P=b(K[0],K[1]));if(P!==l)w=0,P?(p.lineStart(),B=c(K,v),p.point(B[0],B[1])):(B=c(v,K),p.point(B[0],B[1]),p.lineEnd()),v=B;else if(m&&v&&k^P){var x;F&h||!(x=c(K,v,!0))||(w=0,k?(p.lineStart(),p.point(x[0][0],x[0][1]),p.point(x[1][0],x[1][1]),p.lineEnd()):(p.point(x[1][0],x[1][1]),p.lineEnd(),p.lineStart(),p.point(x[0][0],x[0][1])))}!P||v&&He(v,K)||p.point(K[0],K[1]);v=K;l=P;h=F},lineEnd:function(){l&&p.lineEnd();v=null},clean:function(){return w|(q&&l)<<1}}},function(p,
v,h,l){dk(l,a,g,h,p,v)},k?[0,-a]:[-oa,a-oa])}function zq(a,b,c,d,e,g){var k=a[0],m=a[1],p=0,v=1,h=b[0]-k,l=b[1]-m;c-=k;if(h||!(0<c)){c/=h;if(0>h){if(c<p)return;c<v&&(v=c)}else if(0<h){if(c>v)return;c>p&&(p=c)}c=e-k;if(h||!(0>c)){c/=h;if(0>h){if(c>v)return;c>p&&(p=c)}else if(0<h){if(c<p)return;c<v&&(v=c)}c=d-m;if(l||!(0<c)){c/=l;if(0>l){if(c<p)return;c<v&&(v=c)}else if(0<l){if(c>v)return;c>p&&(p=c)}c=g-m;if(l||!(0>c)){c/=l;if(0>l){if(c>v)return;c>p&&(p=c)}else if(0<l){if(c<p)return;c<v&&(v=c)}0<p&&
(a[0]=k+p*h,a[1]=m+p*l);1>v&&(b[0]=k+v*h,b[1]=m+v*l);return!0}}}}}function Je(a,b,c,d){function e(p,v,h,l){var q=0,w=0;if(null==p||(q=g(p,h))!==(w=g(v,h))||0>m(p,v)^0<h){do l.point(0===q||3===q?a:c,1<q?d:b);while((q=(q+h+4)%4)!==w)}else l.point(v[0],v[1])}function g(p,v){return 1E-6>ra(p[0]-a)?0<v?0:3:1E-6>ra(p[0]-c)?0<v?2:1:1E-6>ra(p[1]-b)?0<v?1:0:0<v?3:2}function k(p,v){return m(p.x,v.x)}function m(p,v){var h=g(p,1),l=g(v,1);return h!==l?h-l:0===h?v[1]-p[1]:1===h?p[0]-v[0]:2===h?p[1]-v[1]:v[0]-
p[0]}return function(p){function v(f,n){a<=f&&f<=c&&b<=n&&n<=d&&l.point(f,n)}function h(f,n){var u=a<=f&&f<=c&&b<=n&&n<=d;B&&F.push([f,n]);if(V)K=f,P=n,x=u,V=!1,u&&(l.lineStart(),l.point(f,n));else if(u&&Q)l.point(f,n);else{var r=[y=Math.max(-1E9,Math.min(1E9,y)),I=Math.max(-1E9,Math.min(1E9,I))],t=[f=Math.max(-1E9,Math.min(1E9,f)),n=Math.max(-1E9,Math.min(1E9,n))];zq(r,t,a,b,c,d)?(Q||(l.lineStart(),l.point(r[0],r[1])),l.point(t[0],t[1]),u||l.lineEnd(),N=!1):u&&(l.lineStart(),l.point(f,n),N=!1)}y=
f;I=n;Q=u}var l=p,q=fk(),w,B,F,K,P,x,y,I,Q,V,N,U={point:v,lineStart:function(){U.point=h;B&&B.push(F=[]);V=!0;Q=!1;y=I=NaN},lineEnd:function(){w&&(h(K,P),x&&Q&&q.rejoin(),w.push(q.result()));U.point=v;Q&&l.lineEnd()},polygonStart:function(){l=q;w=[];B=[];N=!0},polygonEnd:function(){for(var f,n=f=0,u=B.length;n<u;++n){var r=B[n],t=1,z=r.length,D=r[0],A=D[0];for(D=D[1];t<z;++t){var C=A;var G=D;D=r[t];A=D[0];D=D[1];G<=d?D>d&&(A-C)*(d-G)>(D-G)*(a-C)&&++f:D<=d&&(A-C)*(d-G)<(D-G)*(a-C)&&--f}}n=N&&f;u=(w=
Jf(w)).length;if(n||u)p.polygonStart(),n&&(p.lineStart(),e(null,null,1,p),p.lineEnd()),u&&gk(w,k,f,e,p),p.polygonEnd();l=p;w=B=F=null}};return U}}function Aq(){rc.point=rc.lineEnd=xa}function Bq(a,b){a*=ia;b*=ia;Ig=a;Ke=ca(b);Le=da(b);rc.point=Cq}function Cq(a,b){a*=ia;b*=ia;var c=ca(b);b=da(b);var d=ra(a-Ig),e=da(d);d=ca(d);d*=b;var g=Le*c-Ke*b*e;e=Ke*c+Le*b*e;Jg.add(Ma(Ba(d*d+g*g),e));Ig=a;Ke=c;Le=b}function lk(a){Jg.reset();gb(a,rc);return+Jg}function sc(a,b){Kg[0]=a;Kg[1]=b;return lk(Dq)}function Me(a,
b){return a&&mk.hasOwnProperty(a.type)?mk[a.type](a,b):!1}function nk(a,b){var c=sc(a[0],a[1]),d=sc(a[0],b);a=sc(b,a[1]);return d+a<=c+1E-6}function ok(a,b){return!!ik(a.map(Eq),pk(b))}function Eq(a){return a=a.map(pk),a.pop(),a}function pk(a){return[a[0]*ia,a[1]*ia]}function qk(a,b,c){var d=Ta(a,b-1E-6,c).concat(b);return function(e){return d.map(function(g){return[e,g]})}}function rk(a,b,c){var d=Ta(a,b-1E-6,c).concat(b);return function(e){return d.map(function(g){return[g,e]})}}function sk(){function a(){return{type:"MultiLineString",
coordinates:b()}}function b(){return Ta(Ne(g/q)*q,e,q).map(K).concat(Ta(Ne(v/w)*w,p,w).map(P)).concat(Ta(Ne(d/h)*h,c,h).filter(function(y){return 1E-6<ra(y%q)}).map(B)).concat(Ta(Ne(m/l)*l,k,l).filter(function(y){return 1E-6<ra(y%w)}).map(F))}var c,d,e,g,k,m,p,v,h=10,l=h,q=90,w=360,B,F,K,P,x=2.5;a.lines=function(){return b().map(function(y){return{type:"LineString",coordinates:y}})};a.outline=function(){return{type:"Polygon",coordinates:[K(g).concat(P(p).slice(1),K(e).reverse().slice(1),P(v).reverse().slice(1))]}};
a.extent=function(y){return arguments.length?a.extentMajor(y).extentMinor(y):a.extentMinor()};a.extentMajor=function(y){if(!arguments.length)return[[g,v],[e,p]];g=+y[0][0];e=+y[1][0];v=+y[0][1];p=+y[1][1];g>e&&(y=g,g=e,e=y);v>p&&(y=v,v=p,p=y);return a.precision(x)};a.extentMinor=function(y){if(!arguments.length)return[[d,m],[c,k]];d=+y[0][0];c=+y[1][0];m=+y[0][1];k=+y[1][1];d>c&&(y=d,d=c,c=y);m>k&&(y=m,m=k,k=y);return a.precision(x)};a.step=function(y){return arguments.length?a.stepMajor(y).stepMinor(y):
a.stepMinor()};a.stepMajor=function(y){if(!arguments.length)return[q,w];q=+y[0];w=+y[1];return a};a.stepMinor=function(y){if(!arguments.length)return[h,l];h=+y[0];l=+y[1];return a};a.precision=function(y){if(!arguments.length)return x;x=+y;B=qk(m,k,90);F=rk(d,c,x);K=qk(v,p,90);P=rk(g,e,x);return a};return a.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Xb(a){return a}function Fq(){vb.point=Gq}function Gq(a,b){vb.point=tk;uk=Lg=a;vk=Mg=b}
function tk(a,b){Ng.add(Mg*a-Lg*b);Lg=a;Mg=b}function Hq(){tk(uk,vk)}function Yb(a,b){Og+=a;Pg+=b;++fd}function wk(){$a.point=Iq}function Iq(a,b){$a.point=Jq;Yb(mb=a,nb=b)}function Jq(a,b){var c=a-mb,d=b-nb;c=Ba(c*c+d*d);Oe+=c*(mb+a)/2;Pe+=c*(nb+b)/2;tc+=c;Yb(mb=a,nb=b)}function xk(){$a.point=Yb}function Kq(){$a.point=Lq}function Mq(){yk(zk,Ak)}function Lq(a,b){$a.point=yk;Yb(zk=mb=a,Ak=nb=b)}function yk(a,b){var c=a-mb,d=b-nb;c=Ba(c*c+d*d);Oe+=c*(mb+a)/2;Pe+=c*(nb+b)/2;tc+=c;c=nb*a-mb*b;Qg+=c*(mb+
a);Rg+=c*(nb+b);gd+=3*c;Yb(mb=a,nb=b)}function Bk(a){this._context=a}function Nq(a,b){hd.point=Ck;Dk=id=a;Ek=jd=b}function Ck(a,b){id-=a;jd-=b;Sg.add(Ba(id*id+jd*jd));id=a;jd=b}function Fk(){this._string=[]}function Gk(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function kd(a){return function(b){var c=new Tg,d;for(d in a)c[d]=a[d];c.stream=b;return c}}function Tg(){}function Ug(a,b,c){var d=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]);null!=d&&a.clipExtent(null);
gb(c,a.stream(Qe));b(Qe.result());null!=d&&a.clipExtent(d);return a}function uc(a,b,c){return Ug(a,function(d){var e=b[1][0]-b[0][0],g=b[1][1]-b[0][1],k=Math.min(e/(d[1][0]-d[0][0]),g/(d[1][1]-d[0][1]));e=+b[0][0]+(e-k*(d[1][0]+d[0][0]))/2;d=+b[0][1]+(g-k*(d[1][1]+d[0][1]))/2;a.scale(150*k).translate([e,d])},c)}function Vg(a,b,c){return Ug(a,function(d){var e=+b,g=e/(d[1][0]-d[0][0]);e=(e-g*(d[1][0]+d[0][0]))/2;d=-g*d[0][1];a.scale(150*g).translate([e,d])},c)}function Wg(a,b,c){return Ug(a,function(d){var e=
+b,g=e/(d[1][1]-d[0][1]),k=-g*d[0][0];d=(e-g*(d[1][1]+d[0][1]))/2;a.scale(150*g).translate([k,d])},c)}function Hk(a){return kd({point:function(b,c){b=a(b,c);this.stream.point(b[0],b[1])}})}function Ik(a,b){function c(d,e,g,k,m,p,v,h,l,q,w,B,F,K){var P=v-d,x=h-e,y=P*P+x*x;if(y>4*b&&F--){var I=k+q,Q=m+w,V=p+B,N=Ba(I*I+Q*Q+V*V),U=La(V/=N),f=1E-6>ra(ra(V)-1)||1E-6>ra(g-l)?(g+l)/2:Ma(Q,I),n=a(f,U);U=n[0];n=n[1];var u=U-d,r=n-e,t=x*u-P*r;if(t*t/y>b||.3<ra((P*u+x*r)/y-.5)||k*q+m*w+p*B<Oq)c(d,e,g,k,m,p,U,
n,f,I/=N,Q/=N,V,F,K),K.point(U,n),c(U,n,f,I,Q,V,v,h,l,q,w,B,F,K)}}return function(d){function e(U,f){U=a(U,f);d.point(U[0],U[1])}function g(){x=NaN;N.point=k;d.lineStart()}function k(U,f){var n=Vb([U,f]);f=a(U,f);c(x,y,P,I,Q,V,x=f[0],y=f[1],P=U,I=n[0],Q=n[1],V=n[2],16,d);d.point(x,y)}function m(){N.point=e;d.lineEnd()}function p(){g();N.point=v;N.lineEnd=h}function v(U,f){k(l=U,f);q=x;w=y;B=I;F=Q;K=V;N.point=k}function h(){c(x,y,P,I,Q,V,q,w,l,B,F,K,16,d);N.lineEnd=m;m()}var l,q,w,B,F,K,P,x,y,I,Q,
V,N={point:e,lineStart:g,lineEnd:m,polygonStart:function(){d.polygonStart();N.lineStart=p},polygonEnd:function(){d.polygonEnd();N.lineStart=g}};return N}}function Pq(a){return kd({point:function(b,c){b=a(b,c);return this.stream.point(b[0],b[1])}})}function Qq(a,b,c){function d(e,g){return[b+a*e,c-a*g]}d.invert=function(e,g){return[(e-b)/a,(c-g)/a]};return d}function Jk(a,b,c,d){function e(q,w){return[k*q-m*w+b,c-m*q-k*w]}var g=da(d);d=ca(d);var k=g*a,m=d*a,p=g/a,v=d/a,h=(d*c-g*b)/a,l=(d*b+g*c)/a;
e.invert=function(q,w){return[p*q-v*w+h,l-v*q-p*w]};return e}function ob(a){return Xg(function(){return a})()}function Xg(a){function b(t){return n(t[0]*ia,t[1]*ia)}function c(t){return(t=n.invert(t[0],t[1]))&&[t[0]*va,t[1]*va]}function d(){var t=Jk(k,0,0,F).apply(null,g(v,h));t=(F?Jk:Qq)(k,m-t[0],p-t[1],F);B=Gg(l,q,w);f=Eg(g,t);n=Eg(B,f);t=f;U=+N?Ik(t,N):Hk(t);return e()}function e(){u=r=null;return b}var g,k=150,m=480,p=250,v=0,h=0,l=0,q=0,w=0,B,F=0,K=null,P=Yg,x=null,y,I,Q,V=Xb,N=.5,U,f,n,u,r;
b.stream=function(t){return u&&r===t?u:u=Rq(Pq(B)(P(U(V(r=t)))))};b.preclip=function(t){return arguments.length?(P=t,K=void 0,e()):P};b.postclip=function(t){return arguments.length?(V=t,x=y=I=Q=null,e()):V};b.clipAngle=function(t){return arguments.length?(P=+t?kk(K=t*ia):(K=null,Yg),e()):K*va};b.clipExtent=function(t){return arguments.length?(V=null==t?(x=y=I=Q=null,Xb):Je(x=+t[0][0],y=+t[0][1],I=+t[1][0],Q=+t[1][1]),e()):null==x?null:[[x,y],[I,Q]]};b.scale=function(t){return arguments.length?(k=
+t,d()):k};b.translate=function(t){return arguments.length?(m=+t[0],p=+t[1],d()):[m,p]};b.center=function(t){return arguments.length?(v=t[0]%360*ia,h=t[1]%360*ia,d()):[v*va,h*va]};b.rotate=function(t){return arguments.length?(l=t[0]%360*ia,q=t[1]%360*ia,w=2<t.length?t[2]%360*ia:0,d()):[l*va,q*va,w*va]};b.angle=function(t){return arguments.length?(F=t%360*ia,d()):F*va};b.precision=function(t){if(arguments.length){var z=f;var D=N=t*t;z=(U=+D?Ik(z,D):Hk(z),e())}else z=Ba(N);return z};b.fitExtent=function(t,
z){return uc(b,t,z)};b.fitSize=function(t,z){return uc(b,[[0,0],t],z)};b.fitWidth=function(t,z){return Vg(b,t,z)};b.fitHeight=function(t,z){return Wg(b,t,z)};return function(){g=a.apply(this,arguments);b.invert=g.invert&&c;return d()}}function Zg(a){var b=0,c=oa/3,d=Xg(a);a=d(b,c);a.parallels=function(e){return arguments.length?d(b=e[0]*ia,c=e[1]*ia):[b*va,c*va]};return a}function Sq(a){function b(d,e){return[d*c,ca(e)/c]}var c=da(a);b.invert=function(d,e){return[d/c,La(e*c)]};return b}function Kk(a,
b){function c(m,p){p=Ba(g-2*e*ca(p))/e;return[p*ca(m*=e),k-p*da(m)]}var d=ca(a),e=(d+ca(b))/2;if(1E-6>ra(e))return Sq(a);var g=1+d*(2*e-d),k=Ba(g)/e;c.invert=function(m,p){p=k-p;return[Ma(m,ra(p))/e*ld(p),La((g-(m*m+p*p)*e*e)/(2*e))]};return c}function Re(){return Zg(Kk).scale(155.424).center([0,33.6442])}function Lk(){return Re().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tq(a){var b=a.length;return{point:function(c,d){for(var e=-1;++e<b;)a[e].point(c,
d)},sphere:function(){for(var c=-1;++c<b;)a[c].sphere()},lineStart:function(){for(var c=-1;++c<b;)a[c].lineStart()},lineEnd:function(){for(var c=-1;++c<b;)a[c].lineEnd()},polygonStart:function(){for(var c=-1;++c<b;)a[c].polygonStart()},polygonEnd:function(){for(var c=-1;++c<b;)a[c].polygonEnd()}}}function Mk(a){return function(b,c){var d=da(b),e=da(c);d=a(d*e);return[d*e*ca(b),d*ca(c)]}}function md(a){return function(b,c){var d=Ba(b*b+c*c),e=a(d),g=ca(e);e=da(e);return[Ma(b*g,d*e),La(d&&c*g/d)]}}
function nd(a,b){return[a,Se(vc((wa+b)/2))]}function Nk(a){function b(){var l=oa*e(),q=c(ck(c.rotate()).invert([0,0]));return k(null==m?[[q[0]-l,q[1]-l],[q[0]+l,q[1]+l]]:a===nd?[[Math.max(q[0]-l,m),p],[Math.min(q[0]+l,v),h]]:[[m,Math.max(q[1]-l,p)],[v,Math.min(q[1]+l,h)]])}var c=ob(a),d=c.center,e=c.scale,g=c.translate,k=c.clipExtent,m=null,p,v,h;c.scale=function(l){return arguments.length?(e(l),b()):e()};c.translate=function(l){return arguments.length?(g(l),b()):g()};c.center=function(l){return arguments.length?
(d(l),b()):d()};c.clipExtent=function(l){return arguments.length?(null==l?m=p=v=h=null:(m=+l[0][0],p=+l[0][1],v=+l[1][0],h=+l[1][1]),b()):null==m?null:[[m,p],[v,h]]};return b()}function Ok(a,b){function c(k,m){0<g?m<-wa+1E-6&&(m=-wa+1E-6):m>wa-1E-6&&(m=wa-1E-6);m=g/$g(vc((wa+m)/2),e);return[m*ca(e*k),g-m*da(e*k)]}var d=da(a),e=a===b?ca(a):Se(d/da(b))/Se(vc((wa+b)/2)/vc((wa+a)/2)),g=d*$g(vc((wa+a)/2),e)/e;if(!e)return nd;c.invert=function(k,m){m=g-m;var p=ld(e)*Ba(k*k+m*m);return[Ma(k,ra(m))/e*ld(m),
2*wc($g(g/p,1/e))-wa]};return c}function od(a,b){return[a,b]}function Pk(a,b){function c(k,m){m=g-m;k*=e;return[m*ca(k),g-m*da(k)]}var d=da(a),e=a===b?ca(a):(d-da(b))/(b-a),g=d/e+a;if(1E-6>ra(e))return od;c.invert=function(k,m){m=g-m;return[Ma(k,ra(m))/e*ld(m),g-ld(e)*Ba(k*k+m*m)]};return c}function ah(a,b){b=La(Te*ca(b));var c=b*b,d=c*c*c;return[a*da(b)/(Te*(1.340264+3*-.081106*c+d*(7*8.93E-4+.034164*c))),b*(1.340264+-.081106*c+d*(8.93E-4+.003796*c))]}function bh(a,b){var c=da(b),d=da(a)*c;return[c*
ca(a)/d,ca(b)/d]}function Ue(a,b,c,d){return 1===a&&1===b&&0===c&&0===d?Xb:kd({point:function(e,g){this.stream.point(e*a+c,g*b+d)}})}function ch(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function dh(a,b){return[da(b)*ca(a),ca(b)]}function eh(a,b){var c=da(b),d=1+da(a)*c;return[c*ca(a)/d,ca(b)/d]}function fh(a,b){return[Se(vc((wa+b)/2)),-a]}function Uq(a,b){return a.parent===b.parent?1:2}function Vq(a,
b){return a+b.x}function Wq(a,b){return Math.max(a,b.y)}function Xq(a){for(var b;b=a.children;)a=b[0];return a}function Yq(a){for(var b;b=a.children;)a=b[b.length-1];return a}function Zq(a){var b=0,c=a.children,d=c&&c.length;if(d)for(;0<=--d;)b+=c[d].value;else b=1;a.value=b}function gh(a,b){var c=new xc(a);a=+a.value&&(c.value=a.value);var d,e=[c],g,k,m,p;for(null==b&&(b=$q);d=e.pop();)if(a&&(d.value=+d.data.value),(k=b(d.data))&&(p=k.length))for(d.children=Array(p),m=p-1;0<=m;--m)e.push(g=d.children[m]=
new xc(k[m])),g.parent=d,g.depth=d.depth+1;return c.eachBefore(Qk)}function $q(a){return a.children}function ar(a){a.data=a.data.data}function Qk(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function xc(a){this.data=a;this.depth=this.height=0;this.parent=null}function Rk(a){var b=0;a=br.call(a);for(var c=a.length,d,e;c;)e=Math.random()*c--|0,d=a[c],a[c]=a[e],a[e]=d;c=a.length;d=[];for(var g;b<c;)if(e=a[b],g&&Sk(g,e))++b;else{a:if(b=d,hh(e,b))b=[e];else{for(d=0;d<b.length;++d)if(Ve(e,
b[d])&&hh(pd(b[d],e),b)){b=[b[d],e];break a}for(d=0;d<b.length-1;++d)for(g=d+1;g<b.length;++g)if(Ve(pd(b[d],b[g]),e)&&Ve(pd(b[d],e),b[g])&&Ve(pd(b[g],e),b[d])&&hh(Tk(b[d],b[g],e),b)){b=[b[d],b[g],e];break a}throw Error();}a:{b=d=b;switch(b.length){case 1:b=b[0];b={x:b.x,y:b.y,r:b.r};break a;case 2:b=pd(b[0],b[1]);break a;case 3:b=Tk(b[0],b[1],b[2]);break a}b=void 0}g=b;b=0}return g}function Ve(a,b){var c=a.r-b.r,d=b.x-a.x;a=b.y-a.y;return 0>c||c*c<d*d+a*a}function Sk(a,b){var c=a.r-b.r+1E-6,d=b.x-
a.x;a=b.y-a.y;return 0<c&&c*c>d*d+a*a}function hh(a,b){for(var c=0;c<b.length;++c)if(!Sk(a,b[c]))return!1;return!0}function pd(a,b){var c=a.x,d=a.y;a=a.r;var e=b.x,g=b.y;b=b.r;var k=e-c,m=g-d,p=b-a,v=Math.sqrt(k*k+m*m);return{x:(c+e+k/v*p)/2,y:(d+g+m/v*p)/2,r:(v+a+b)/2}}function Tk(a,b,c){var d=a.x,e=a.y;a=a.r;var g=b.x,k=b.y,m=b.r,p=c.x,v=c.y,h=c.r;c=d-g;b=d-p;var l=e-k,q=e-v,w=m-a,B=h-a,F=d*d+e*e-a*a;k=F-g*g-k*k+m*m;v=F-p*p-v*v+h*h;p=b*l-c*q;g=(l*v-q*k)/(2*p)-d;l=(q*w-l*B)/p;q=(b*k-c*v)/(2*p)-e;
c=(c*B-b*w)/p;b=l*l+c*c-1;w=2*(a+g*l+q*c);a=g*g+q*q-a*a;a=-(b?(w+Math.sqrt(w*w-4*b*a))/(2*b):a/w);return{x:d+g+l*a,y:e+q+c*a,r:a}}function Uk(a,b,c){var d=a.x-b.x,e=a.y-b.y,g=d*d+e*e;if(g){var k=b.r+c.r;k*=k;var m=a.r+c.r;m*=m;if(k>m){var p=(g+m-k)/(2*g);k=Math.sqrt(Math.max(0,m/g-p*p));c.x=a.x-p*d-k*e;c.y=a.y-p*e+k*d}else p=(g+k-m)/(2*g),k=Math.sqrt(Math.max(0,k/g-p*p)),c.x=b.x+p*d-k*e,c.y=b.y+p*e+k*d}else c.x=b.x+c.r,c.y=b.y}function Vk(a,b){var c=a.r+b.r-1E-6,d=b.x-a.x;a=b.y-a.y;return 0<c&&c*
c>d*d+a*a}function Wk(a){var b=a._,c=a.next._,d=b.r+c.r;a=(b.x*c.r+c.x*b.r)/d;b=(b.y*c.r+c.y*b.r)/d;return a*a+b*b}function We(a){this._=a;this.previous=this.next=null}function Xk(a){if(!(c=a.length))return 0;var b,c;var d=a[0];d.x=0;d.y=0;if(!(1<c))return d.r;var e=a[1];d.x=-e.r;e.x=d.r;e.y=0;if(!(2<c))return d.r+e.r;Uk(e,d,b=a[2]);d=new We(d);e=new We(e);b=new We(b);d.next=b.previous=e;e.next=d.previous=b;b.next=e.previous=d;var g=3;a:for(;g<c;++g){Uk(d._,e._,b=a[g]);b=new We(b);var k=e.next;var m=
d.previous;var p=e._.r;var v=d._.r;do if(p<=v){if(Vk(k._,b._)){e=k;d.next=e;e.previous=d;--g;continue a}p+=k._.r;k=k.next}else{if(Vk(m._,b._)){d=m;d.next=e;e.previous=d;--g;continue a}v+=m._.r;m=m.previous}while(k!==m.next);b.previous=d;b.next=e;d.next=e.previous=e=b;for(k=Wk(d);(b=b.next)!==e;)(m=Wk(b))<k&&(d=b,k=m);e=d.next}d=[e._];for(b=e;(b=b.next)!==e;)d.push(b._);b=Rk(d);for(g=0;g<c;++g)d=a[g],d.x-=b.x,d.y-=b.y;return b.r}function Xe(a){if("function"!==typeof a)throw Error();return a}function Zb(){return 0}
function yc(a){return function(){return a}}function cr(a){return Math.sqrt(a.value)}function Yk(a){return function(b){b.children||(b.r=Math.max(0,+a(b)||0))}}function ih(a,b){return function(c){if(d=c.children){var d,e,g=d.length,k=a(c)*b||0;if(k)for(e=0;e<g;++e)d[e].r+=k;var m=Xk(d);if(k)for(e=0;e<g;++e)d[e].r-=k;c.r=m+k}}}function Zk(a){return function(b){var c=b.parent;b.r*=a;c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function $k(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=
Math.round(a.y1)}function qd(a,b,c,d,e){var g=a.children,k=-1,m=g.length;for(d=a.value&&(d-b)/a.value;++k<m;)a=g[k],a.y0=c,a.y1=e,a.x0=b,a.x1=b+=a.value*d}function dr(a){return a.id}function er(a){return a.parentId}function fr(a,b){return a.parent===b.parent?1:2}function jh(a){var b=a.children;return b?b[0]:a.t}function kh(a){var b=a.children;return b?b[b.length-1]:a.t}function Ye(a,b){this._=a;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=b}function gr(a){a=
new Ye(a,0);for(var b,c=[a],d,e,g;b=c.pop();)if(e=b._.children)for(b.children=Array(d=e.length),g=d-1;0<=g;--g)c.push(d=b.children[g]=new Ye(e[g],g)),d.parent=b;(a.parent=new Ye(null,0)).children=[a];return a}function Ze(a,b,c,d,e){var g=a.children,k=-1,m=g.length;for(e=a.value&&(e-c)/a.value;++k<m;)a=g[k],a.x0=b,a.x1=d,a.y0=c,a.y1=c+=a.value*e}function al(a,b,c,d,e,g){for(var k=[],m=b.children,p,v,h=p=0,l=m.length,q,w=b.value,B,F,K,P,x,y;p<l;){b=e-c;q=g-d;do B=m[h++].value;while(!B&&h<l);F=K=B;y=
Math.max(q/b,b/q)/(w*a);P=B*B*y;for(x=Math.max(K/P,P/F);h<l;++h){B+=v=m[h].value;v<F&&(F=v);v>K&&(K=v);P=B*B*y;P=Math.max(K/P,P/F);if(P>x){B-=v;break}x=P}k.push(p={value:B,dice:b<q,children:m.slice(p,h)});p.dice?qd(p,c,d,e,w?d+=q*B/w:g):Ze(p,c,d,w?c+=b*B/w:e,g);w-=B;p=h}return k}function hr(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ir(a,b){return a[0]-b[0]||a[1]-b[1]}function bl(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;++e){for(;1<d&&0>=hr(a[c[d-2]],a[c[d-1]],a[e]);)--d;
c[d++]=e}return c.slice(0,d)}function zc(){return Math.random()}function lh(a){function b(g){var k=g+"",m=c.get(k);if(!m){if(e!==mh)return e;c.set(k,m=d.push(g))}return a[(m-1)%a.length]}var c=rb(),d=[],e=mh;a=null==a?[]:Ib.call(a);b.domain=function(g){if(!arguments.length)return d.slice();d=[];c=rb();for(var k=-1,m=g.length,p,v;++k<m;)c.has(v=(p=g[k])+"")||c.set(v,d.push(p));return b};b.range=function(g){return arguments.length?(a=Ib.call(g),b):a.slice()};b.unknown=function(g){return arguments.length?
(e=g,b):e};b.copy=function(){return lh().domain(d).range(a).unknown(e)};return b}function nh(){function a(){var l=c().length,q=e[1]<e[0],w=e[q-0],B=e[1-q];g=(B-w)/Math.max(1,l-p+2*v);m&&(g=Math.floor(g));w+=(B-w-g*(l-p))*h;k=g*(1-p);m&&(w=Math.round(w),k=Math.round(k));l=Ta(l).map(function(F){return w+g*F});return d(q?l.reverse():l)}var b=lh().unknown(void 0),c=b.domain,d=b.range,e=[0,1],g,k,m=!1,p=0,v=0,h=.5;delete b.unknown;b.domain=function(l){return arguments.length?(c(l),a()):c()};b.range=function(l){return arguments.length?
(e=[+l[0],+l[1]],a()):e.slice()};b.rangeRound=function(l){return e=[+l[0],+l[1]],m=!0,a()};b.bandwidth=function(){return k};b.step=function(){return g};b.round=function(l){return arguments.length?(m=!!l,a()):m};b.padding=function(l){return arguments.length?(p=v=Math.max(0,Math.min(1,l)),a()):p};b.paddingInner=function(l){return arguments.length?(p=Math.max(0,Math.min(1,l)),a()):p};b.paddingOuter=function(l){return arguments.length?(v=Math.max(0,Math.min(1,l)),a()):v};b.align=function(l){return arguments.length?
(h=Math.max(0,Math.min(1,l)),a()):h};b.copy=function(){return nh().domain(c()).range(e).round(m).paddingInner(p).paddingOuter(v).align(h)};return a()}function cl(a){var b=a.copy;a.padding=a.paddingOuter;delete a.paddingInner;delete a.paddingOuter;a.copy=function(){return cl(b())};return a}function oh(a){return function(){return a}}function dl(a){return+a}function ph(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:oh(b)}function jr(a){return function(b,c){var d=a(b=+b,c=+c);return function(e){return e<=
b?0:e>=c?1:d(e)}}}function kr(a){return function(b,c){var d=a(b=+b,c=+c);return function(e){return 0>=e?b:1<=e?c:d(e)}}}function lr(a,b,c,d){var e=a[0];a=a[1];var g=b[0];b=b[1];a<e?(e=c(a,e),g=d(b,g)):(e=c(e,a),g=d(g,b));return function(k){return g(e(k))}}function mr(a,b,c,d){var e=Math.min(a.length,b.length)-1,g=Array(e),k=Array(e),m=-1;a[e]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++m<e;)g[m]=c(a[m],a[m+1]),k[m]=d(b[m],b[m+1]);return function(p){var v=$b(a,p,1,e)-1;return k[v](g[v](p))}}
function $e(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function af(a,b){function c(){p=2<Math.min(e.length,g.length)?mr:lr;v=h=null;return d}function d(l){return(v||(v=p(e,g,m?jr(a):a,k)))(+l)}var e=el,g=el,k=Sc,m=!1,p,v,h;d.invert=function(l){return(h||(h=p(g,e,ph,m?kr(b):b)))(+l)};d.domain=function(l){return arguments.length?(e=qh.call(l,dl),c()):e.slice()};d.range=function(l){return arguments.length?(g=Ib.call(l),c()):g.slice()};d.rangeRound=
function(l){return g=Ib.call(l),k=Ni,c()};d.clamp=function(l){return arguments.length?(m=!!l,c()):m};d.interpolate=function(l){return arguments.length?(k=l,c()):k};return c()}function Ac(a){var b=a.domain;a.ticks=function(c){var d=b();return Ef(d[0],d[d.length-1],null==c?10:c)};a.tickFormat=function(c,d){var e;a:{var g=b(),k=g[0];g=g[g.length-1];c=Nb(k,g,null==c?10:c);d=bd(null==d?",f":d);switch(d.type){case "s":k=Math.max(Math.abs(k),Math.abs(g));null!=d.precision||isNaN(e=Cj(c,k))||(d.precision=
e);e=d3.formatPrefix(d,k);break a;case "":case "e":case "g":case "p":case "r":null!=d.precision||isNaN(e=Dj(c,Math.max(Math.abs(k),Math.abs(g))))||(d.precision=e-("e"===d.type));break;case "f":case "%":null!=d.precision||isNaN(e=Bj(c))||(d.precision=e-2*("%"===d.type))}e=d3.format(d)}return e};a.nice=function(c){null==c&&(c=10);var d=b(),e=0,g=d.length-1,k=d[e],m=d[g];if(m<k){var p=k;k=m;m=p;p=e;e=g;g=p}p=Nc(k,m,c);0<p?(k=Math.floor(k/p)*p,m=Math.ceil(m/p)*p,p=Nc(k,m,c)):0>p&&(k=Math.ceil(k*p)/p,
m=Math.floor(m*p)/p,p=Nc(k,m,c));0<p?(d[e]=Math.floor(k/p)*p,d[g]=Math.ceil(m/p)*p,b(d)):0>p&&(d[e]=Math.ceil(k*p)/p,d[g]=Math.floor(m*p)/p,b(d));return a};return a}function fl(){var a=af(ph,Va);a.copy=function(){return $e(a,fl())};return Ac(a)}function gl(){function a(c){return+c}var b=[0,1];a.invert=a;a.domain=a.range=function(c){return arguments.length?(b=qh.call(c,dl),a):b.slice()};a.copy=function(){return gl().domain(b)};return Ac(a)}function hl(a,b){a=a.slice();var c=0,d=a.length-1,e=a[c],g=
a[d];if(g<e){var k=c;c=d;d=k;k=e;e=g;g=k}a[c]=b.floor(e);a[d]=b.ceil(g);return a}function nr(a,b){return(b=Math.log(b/a))?function(c){return Math.log(c/a)/b}:oh(b)}function or(a,b){return 0>a?function(c){return-Math.pow(-b,c)*Math.pow(-a,1-c)}:function(c){return Math.pow(b,c)*Math.pow(a,1-c)}}function pr(a){return isFinite(a)?+("1e"+a):0>a?0:a}function il(a){return 10===a?pr:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function jl(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&
Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function kl(a){return function(b){return-a(-b)}}function ll(){function a(){e=jl(d);g=il(d);0>c()[0]&&(e=kl(e),g=kl(g));return b}var b=af(nr,or).domain([1,10]),c=b.domain,d=10,e=jl(10),g=il(10);b.base=function(k){return arguments.length?(d=+k,a()):d};b.domain=function(k){return arguments.length?(c(k),a()):c()};b.ticks=function(k){var m=c(),p=m[0];m=m[m.length-1];var v;if(v=m<p)h=p,p=m,m=h;var h=e(p),l=e(m);var q=null==k?10:+k;k=[];if(!(d%
1)&&l-h<q)if(h=Math.round(h)-1,l=Math.round(l)+1,0<p)for(;h<l;++h){var w=1;for(q=g(h);w<d;++w){var B=q*w;if(!(B<p)){if(B>m)break;k.push(B)}}}else for(;h<l;++h)for(w=d-1,q=g(h);1<=w;--w){if(B=q*w,!(B<p)){if(B>m)break;k.push(B)}}else k=Ef(h,l,Math.min(l-h,q)).map(g);return v?k.reverse():k};b.tickFormat=function(k,m){null==m&&(m=10===d?".0e":",");"function"!==typeof m&&(m=d3.format(m));if(Infinity===k)return m;null==k&&(k=10);var p=Math.max(1,d*k/b.ticks().length);return function(v){var h=v/g(Math.round(e(v)));
h*d<d-.5&&(h*=d);return h<=p?m(v):""}};b.nice=function(){return c(hl(c(),{floor:function(k){return g(Math.floor(e(k)))},ceil:function(k){return g(Math.ceil(e(k)))}}))};b.copy=function(){return $e(b,ll().base(d))};return b}function Bc(a,b){return 0>a?-Math.pow(-a,b):Math.pow(a,b)}function rh(){var a=1,b=af(function(d,e){return(e=Bc(e,a)-(d=Bc(d,a)))?function(g){return(Bc(g,a)-d)/e}:oh(e)},function(d,e){e=Bc(e,a)-(d=Bc(d,a));return function(g){return Bc(d+e*g,1/a)}}),c=b.domain;b.exponent=function(d){return arguments.length?
(a=+d,c(c())):a};b.copy=function(){return $e(b,rh().exponent(a))};return Ac(b)}function ml(){function a(){var g=0,k=Math.max(1,d.length);for(e=Array(k-1);++g<k;)e[g-1]=Oc(c,g/k);return b}function b(g){if(!isNaN(g=+g))return d[$b(e,g)]}var c=[],d=[],e=[];b.invertExtent=function(g){g=d.indexOf(g);return 0>g?[NaN,NaN]:[0<g?e[g-1]:c[0],g<e.length?e[g]:c[c.length-1]]};b.domain=function(g){if(!arguments.length)return c.slice();c=[];for(var k=0,m=g.length,p;k<m;++k)(p=g[k],null==p||isNaN(p=+p))||c.push(p);
c.sort(Mb);return a()};b.range=function(g){return arguments.length?(d=Ib.call(g),a()):d.slice()};b.quantiles=function(){return e.slice()};b.copy=function(){return ml().domain(c).range(d)};return b}function nl(){function a(m){if(m<=m)return k[$b(g,m,0,e)]}function b(){var m=-1;for(g=Array(e);++m<e;)g[m]=((m+1)*d-(m-e)*c)/(e+1);return a}var c=0,d=1,e=1,g=[.5],k=[0,1];a.domain=function(m){return arguments.length?(c=+m[0],d=+m[1],b()):[c,d]};a.range=function(m){return arguments.length?(e=(k=Ib.call(m)).length-
1,b()):k.slice()};a.invertExtent=function(m){m=k.indexOf(m);return 0>m?[NaN,NaN]:1>m?[c,g[0]]:m>=e?[g[e-1],d]:[g[m-1],g[m]]};a.copy=function(){return nl().domain([c,d]).range(k)};return Ac(a)}function ol(){function a(e){if(e<=e)return c[$b(b,e,0,d)]}var b=[.5],c=[0,1],d=1;a.domain=function(e){return arguments.length?(b=Ib.call(e),d=Math.min(b.length,c.length-1),a):b.slice()};a.range=function(e){return arguments.length?(c=Ib.call(e),d=Math.min(b.length,c.length-1),a):c.slice()};a.invertExtent=function(e){e=
c.indexOf(e);return[b[e-1],b[e]]};a.copy=function(){return ol().domain(b).range(c)};return a}function Da(a,b,c,d){function e(g){return a(g=new Date(+g)),g}e.floor=e;e.ceil=function(g){return a(g=new Date(g-1)),b(g,1),a(g),g};e.round=function(g){var k=e(g),m=e.ceil(g);return g-k<m-g?k:m};e.offset=function(g,k){return b(g=new Date(+g),null==k?1:Math.floor(k)),g};e.range=function(g,k,m){var p=[],v;g=e.ceil(g);m=null==m?1:Math.floor(m);if(!(g<k&&0<m))return p;do p.push(v=new Date(+g)),b(g,m),a(g);while(v<
g&&g<k);return p};e.filter=function(g){return Da(function(k){if(k>=k)for(;a(k),!g(k);)k.setTime(k-1)},function(k,m){if(k>=k)if(0>m)for(;0>=++m;)for(;b(k,-1),!g(k););else for(;0<=--m;)for(;b(k,1),!g(k););})};c&&(e.count=function(g,k){sh.setTime(+g);th.setTime(+k);a(sh);a(th);return Math.floor(c(sh,th))},e.every=function(g){g=Math.floor(g);return isFinite(g)&&0<g?1<g?e.filter(d?function(k){return 0===d(k)%g}:function(k){return 0===e.count(0,k)%g}):e:null});return e}function ac(a){return Da(function(b){b.setDate(b.getDate()-
(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(b,c){b.setDate(b.getDate()+7*c)},function(b,c){return(c-b-6E4*(c.getTimezoneOffset()-b.getTimezoneOffset()))/6048E5})}function bc(a){return Da(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCDate(b.getUTCDate()+7*c)},function(b,c){return(c-b)/6048E5})}function qr(a){if(0<=a.y&&100>a.y){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,
a.M,a.S,a.L)}function bf(a){if(0<=a.y&&100>a.y){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function rd(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function pl(a){function b(f,n){return function(u){var r=[],t=-1,z=0,D=f.length,A,C;for(u instanceof Date||(u=new Date(+u));++t<D;)if(37===f.charCodeAt(t)){r.push(f.slice(z,t));null!=(z=ql[A=f.charAt(++t)])?A=f.charAt(++t):z="e"===A?" ":"0";if(C=n[A])A=C(u,z);r.push(A);
z=t+1}r.push(f.slice(z,t));return r.join("")}}function c(f,n){return function(u){var r=rd(1900);if(d(r,f,u+="",0)!=u.length)return null;if("Q"in r)return new Date(r.Q);"p"in r&&(r.H=r.H%12+12*r.p);if("V"in r){if(1>r.V||53<r.V)return null;"w"in r||(r.w=1);if("Z"in r){u=bf(rd(r.y));var t=u.getUTCDay();u=4<t||0===t?sd.ceil(u):sd(u);u=td.offset(u,7*(r.V-1));r.y=u.getUTCFullYear();r.m=u.getUTCMonth();r.d=u.getUTCDate()+(r.w+6)%7}else u=n(rd(r.y)),t=u.getDay(),u=4<t||0===t?ud.ceil(u):ud(u),u=vd.offset(u,
7*(r.V-1)),r.y=u.getFullYear(),r.m=u.getMonth(),r.d=u.getDate()+(r.w+6)%7}else if("W"in r||"U"in r)"w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),t="Z"in r?bf(rd(r.y)).getUTCDay():n(rd(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(t+5)%7:r.w+7*r.U-(t+6)%7;return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,bf(r)):n(r)}}function d(f,n,u,r){for(var t=0,z=n.length,D=u.length,A;t<z;){if(r>=D)return-1;A=n.charCodeAt(t++);if(37===A){if(A=n.charAt(t++),A=U[A in ql?n.charAt(t++):A],!A||0>(r=A(f,u,r)))return-1}else if(A!=
u.charCodeAt(r++))return-1}return r}var e=a.dateTime,g=a.date,k=a.time,m=a.periods,p=a.days,v=a.shortDays,h=a.months,l=a.shortMonths,q=wd(m),w=xd(m),B=wd(p),F=xd(p),K=wd(v),P=xd(v),x=wd(h),y=xd(h),I=wd(l),Q=xd(l),V={a:function(f){return v[f.getDay()]},A:function(f){return p[f.getDay()]},b:function(f){return l[f.getMonth()]},B:function(f){return h[f.getMonth()]},c:null,d:rl,e:rl,f:rr,H:sr,I:tr,j:ur,L:sl,m:vr,M:wr,p:function(f){return m[+(12<=f.getHours())]},Q:tl,s:ul,S:xr,u:yr,U:zr,V:Ar,w:Br,W:Cr,
x:null,X:null,y:Dr,Y:Er,Z:Fr,"%":vl},N={a:function(f){return v[f.getUTCDay()]},A:function(f){return p[f.getUTCDay()]},b:function(f){return l[f.getUTCMonth()]},B:function(f){return h[f.getUTCMonth()]},c:null,d:wl,e:wl,f:Gr,H:Hr,I:Ir,j:Jr,L:xl,m:Kr,M:Lr,p:function(f){return m[+(12<=f.getUTCHours())]},Q:tl,s:ul,S:Mr,u:Nr,U:Or,V:Pr,w:Qr,W:Rr,x:null,X:null,y:Sr,Y:Tr,Z:Ur,"%":vl},U={a:function(f,n,u){return(n=K.exec(n.slice(u)))?(f.w=P[n[0].toLowerCase()],u+n[0].length):-1},A:function(f,n,u){return(n=B.exec(n.slice(u)))?
(f.w=F[n[0].toLowerCase()],u+n[0].length):-1},b:function(f,n,u){return(n=I.exec(n.slice(u)))?(f.m=Q[n[0].toLowerCase()],u+n[0].length):-1},B:function(f,n,u){return(n=x.exec(n.slice(u)))?(f.m=y[n[0].toLowerCase()],u+n[0].length):-1},c:function(f,n,u){return d(f,e,n,u)},d:yl,e:yl,f:Vr,H:zl,I:zl,j:Wr,L:Xr,m:Yr,M:Zr,p:function(f,n,u){return(n=q.exec(n.slice(u)))?(f.p=w[n[0].toLowerCase()],u+n[0].length):-1},Q:$r,s:as,S:bs,u:cs,U:ds,V:es,w:fs,W:gs,x:function(f,n,u){return d(f,g,n,u)},X:function(f,n,u){return d(f,
k,n,u)},y:hs,Y:is,Z:js,"%":ks};V.x=b(g,V);V.X=b(k,V);V.c=b(e,V);N.x=b(g,N);N.X=b(k,N);N.c=b(e,N);return{format:function(f){var n=b(f+="",V);n.toString=function(){return f};return n},parse:function(f){var n=c(f+="",qr);n.toString=function(){return f};return n},utcFormat:function(f){var n=b(f+="",N);n.toString=function(){return f};return n},utcParse:function(f){var n=c(f,bf);n.toString=function(){return f};return n}}}function sa(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-
e+1).join(b)+a:a)}function ls(a){return a.replace(ms,"\\$&")}function wd(a){return new RegExp("^(?:"+a.map(ls).join("|")+")","i")}function xd(a){for(var b={},c=-1,d=a.length;++c<d;)b[a[c].toLowerCase()]=c;return b}function fs(a,b,c){return(b=Ga.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function cs(a,b,c){return(b=Ga.exec(b.slice(c,c+1)))?(a.u=+b[0],c+b[0].length):-1}function ds(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.U=+b[0],c+b[0].length):-1}function es(a,b,c){return(b=Ga.exec(b.slice(c,
c+2)))?(a.V=+b[0],c+b[0].length):-1}function gs(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.W=+b[0],c+b[0].length):-1}function is(a,b,c){return(b=Ga.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function hs(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1}function js(a,b,c){return(b=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6)))?(a.Z=b[1]?0:-(b[2]+(b[3]||"00")),c+b[0].length):-1}function Yr(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+
b[0].length):-1}function yl(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Wr(a,b,c){return(b=Ga.exec(b.slice(c,c+3)))?(a.m=0,a.d=+b[0],c+b[0].length):-1}function zl(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Zr(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function bs(a,b,c){return(b=Ga.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function Xr(a,b,c){return(b=Ga.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):
-1}function Vr(a,b,c){return(b=Ga.exec(b.slice(c,c+6)))?(a.L=Math.floor(b[0]/1E3),c+b[0].length):-1}function ks(a,b,c){return(a=ns.exec(b.slice(c,c+1)))?c+a[0].length:-1}function $r(a,b,c){return(b=Ga.exec(b.slice(c)))?(a.Q=+b[0],c+b[0].length):-1}function as(a,b,c){return(b=Ga.exec(b.slice(c)))?(a.Q=1E3*+b[0],c+b[0].length):-1}function rl(a,b){return sa(a.getDate(),b,2)}function sr(a,b){return sa(a.getHours(),b,2)}function tr(a,b){return sa(a.getHours()%12||12,b,2)}function ur(a,b){return sa(1+vd.count(wb(a),
a),b,3)}function sl(a,b){return sa(a.getMilliseconds(),b,3)}function rr(a,b){return sl(a,b)+"000"}function vr(a,b){return sa(a.getMonth()+1,b,2)}function wr(a,b){return sa(a.getMinutes(),b,2)}function xr(a,b){return sa(a.getSeconds(),b,2)}function yr(a){a=a.getDay();return 0===a?7:a}function zr(a,b){return sa(yd.count(wb(a),a),b,2)}function Ar(a,b){var c=a.getDay();a=4<=c||0===c?zd(a):zd.ceil(a);return sa(zd.count(wb(a),a)+(4===wb(a).getDay()),b,2)}function Br(a){return a.getDay()}function Cr(a,b){return sa(ud.count(wb(a),
a),b,2)}function Dr(a,b){return sa(a.getFullYear()%100,b,2)}function Er(a,b){return sa(a.getFullYear()%1E4,b,4)}function Fr(a){a=a.getTimezoneOffset();return(0<a?"-":(a*=-1,"+"))+sa(a/60|0,"0",2)+sa(a%60,"0",2)}function wl(a,b){return sa(a.getUTCDate(),b,2)}function Hr(a,b){return sa(a.getUTCHours(),b,2)}function Ir(a,b){return sa(a.getUTCHours()%12||12,b,2)}function Jr(a,b){return sa(1+td.count(xb(a),a),b,3)}function xl(a,b){return sa(a.getUTCMilliseconds(),b,3)}function Gr(a,b){return xl(a,b)+"000"}
function Kr(a,b){return sa(a.getUTCMonth()+1,b,2)}function Lr(a,b){return sa(a.getUTCMinutes(),b,2)}function Mr(a,b){return sa(a.getUTCSeconds(),b,2)}function Nr(a){a=a.getUTCDay();return 0===a?7:a}function Or(a,b){return sa(Ad.count(xb(a),a),b,2)}function Pr(a,b){var c=a.getUTCDay();a=4<=c||0===c?Bd(a):Bd.ceil(a);return sa(Bd.count(xb(a),a)+(4===xb(a).getUTCDay()),b,2)}function Qr(a){return a.getUTCDay()}function Rr(a,b){return sa(sd.count(xb(a),a),b,2)}function Sr(a,b){return sa(a.getUTCFullYear()%
100,b,2)}function Tr(a,b){return sa(a.getUTCFullYear()%1E4,b,4)}function Ur(){return"+0000"}function vl(){return"%"}function tl(a){return+a}function ul(a){return Math.floor(+a/1E3)}function Al(a){Cc=pl(a);d3.timeFormat=Cc.format;d3.timeParse=Cc.parse;d3.utcFormat=Cc.utcFormat;d3.utcParse=Cc.utcParse;return Cc}function os(a){return a.toISOString()}function ps(a){a=new Date(a);return isNaN(a)?null:a}function qs(a){return new Date(a)}function rs(a){return a instanceof Date?+a:+new Date(+a)}function uh(a,
b,c,d,e,g,k,m,p){function v(N){return(k(N)<N?B:g(N)<N?F:e(N)<N?K:d(N)<N?P:b(N)<N?c(N)<N?x:y:a(N)<N?I:Q)(N)}function h(N,U,f,n){null==N&&(N=10);if("number"===typeof N){n=Math.abs(f-U)/N;var u=Cf(function(r){return r[2]}).right(V,n);u===V.length?(n=Nb(U/vh,f/vh,N),N=a):u?(u=V[n/V[u-1][2]<V[u][2]/n?u-1:u],n=u[1],N=u[0]):(n=Math.max(Nb(U,f,N),1),N=m)}return null==n?N:N.every(n)}var l=af(ph,Va),q=l.invert,w=l.domain,B=p(".%L"),F=p(":%S"),K=p("%I:%M"),P=p("%I %p"),x=p("%a %d"),y=p("%b %d"),I=p("%B"),Q=
p("%Y"),V=[[k,1,1E3],[k,5,5E3],[k,15,15E3],[k,30,3E4],[g,1,6E4],[g,5,3E5],[g,15,9E5],[g,30,18E5],[e,1,36E5],[e,3,108E5],[e,6,216E5],[e,12,432E5],[d,1,864E5],[d,2,1728E5],[c,1,ss],[b,1,Bl],[b,3,3*Bl],[a,1,vh]];l.invert=function(N){return new Date(q(N))};l.domain=function(N){return arguments.length?w(qh.call(N,rs)):w().map(qs)};l.ticks=function(N,U){var f=w(),n=f[0];f=f[f.length-1];var u=f<n;if(u){var r=n;n=f;f=r}r=(r=h(N,n,f,U))?r.range(n,f+1):[];return u?r.reverse():r};l.tickFormat=function(N,U){return null==
U?v:p(U)};l.nice=function(N,U){var f=w();return(N=h(N,f[0],f[f.length-1],U))?w(hl(f,N)):l};l.copy=function(){return $e(l,uh(a,b,c,d,e,g,k,m,p))};return l}function Cl(a){function b(k){k=(k-c)*e;return a(g?Math.max(0,Math.min(1,k)):k)}var c=0,d=1,e=1,g=!1;b.domain=function(k){return arguments.length?(c=+k[0],d=+k[1],e=c===d?0:1/(d-c),b):[c,d]};b.clamp=function(k){return arguments.length?(g=!!k,b):g};b.interpolator=function(k){return arguments.length?(a=k,b):a};b.copy=function(){return Cl(a).domain([c,
d]).clamp(g)};return Ac(b)}function Dl(a){function b(p){var v=.5+((p=+p)-d)*(p<d?g:k);return a(m?Math.max(0,Math.min(1,v)):v)}var c=0,d=.5,e=1,g=1,k=1,m=!1;b.domain=function(p){return arguments.length?(c=+p[0],d=+p[1],e=+p[2],g=c===d?0:.5/(d-c),k=d===e?0:.5/(e-d),b):[c,d,e]};b.clamp=function(p){return arguments.length?(m=!!p,b):m};b.interpolator=function(p){return arguments.length?(a=p,b):a};b.copy=function(){return Dl(a).domain([c,d,e]).clamp(m)};return Ac(b)}function ka(a){for(var b=a.length/6|
0,c=Array(b),d=0;d<b;)c[d]="#"+a.slice(6*d,6*++d);return c}function ua(a){return El(a[a.length-1])}function cf(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}}function na(a){return function(){return a}}function Fl(a){return 1<=a?df:-1>=a?-df:Math.asin(a)}function ts(a){return a.innerRadius}function us(a){return a.outerRadius}function vs(a){return a.startAngle}function ws(a){return a.endAngle}function xs(a){return a&&a.padAngle}function ef(a,b,c,d,e,g,k){var m=
a-c,p=b-d;k=(k?g:-g)/Dc(m*m+p*p);p*=k;m*=-k;var v=a+p,h=b+m,l=c+p,q=d+m;c=(v+l)/2;d=(h+q)/2;b=l-v;a=q-h;k=b*b+a*a;g=e-g;q=v*q-l*h;var w=(0>a?-1:1)*Dc(ys(0,g*g*k-q*q));v=(q*a-b*w)/k;h=(-q*b-a*w)/k;l=(q*a+b*w)/k;b=(-q*b+a*w)/k;a=v-c;k=h-d;c=l-c;d=b-d;a*a+k*k>c*c+d*d&&(v=l,h=b);return{cx:v,cy:h,x01:-p,y01:-m,x11:v*(e/g-1),y11:h*(e/g-1)}}function Gl(a){this._context=a}function ff(a){return new Gl(a)}function wh(a){return a[0]}function xh(a){return a[1]}function yh(){function a(m){var p,v=m.length,h,l=
!1,q;null==e&&(k=g(q=Eb()));for(p=0;p<=v;++p)!(p<v&&d(h=m[p],p,m))===l&&((l=!l)?k.lineStart():k.lineEnd()),l&&k.point(+b(h,p,m),+c(h,p,m));if(q)return k=null,q+""||null}var b=wh,c=xh,d=na(!0),e=null,g=ff,k=null;a.x=function(m){return arguments.length?(b="function"===typeof m?m:na(+m),a):b};a.y=function(m){return arguments.length?(c="function"===typeof m?m:na(+m),a):c};a.defined=function(m){return arguments.length?(d="function"===typeof m?m:na(!!m),a):d};a.curve=function(m){return arguments.length?
(g=m,null!=e&&(k=g(e)),a):g};a.context=function(m){return arguments.length?(null==m?e=k=null:k=g(e=m),a):e};return a}function Hl(){function a(h){var l,q,w=h.length,B,F=!1,K,P=Array(w),x=Array(w);null==m&&(v=p(K=Eb()));for(l=0;l<=w;++l){if(!(l<w&&k(B=h[l],l,h))===F)if(F=!F){var y=l;v.areaStart();v.lineStart()}else{v.lineEnd();v.lineStart();for(q=l-1;q>=y;--q)v.point(P[q],x[q]);v.lineEnd();v.areaEnd()}F&&(P[l]=+c(B,l,h),x[l]=+e(B,l,h),v.point(d?+d(B,l,h):P[l],g?+g(B,l,h):x[l]))}if(K)return v=null,K+
""||null}function b(){return yh().defined(k).curve(p).context(m)}var c=wh,d=null,e=na(0),g=xh,k=na(!0),m=null,p=ff,v=null;a.x=function(h){return arguments.length?(c="function"===typeof h?h:na(+h),d=null,a):c};a.x0=function(h){return arguments.length?(c="function"===typeof h?h:na(+h),a):c};a.x1=function(h){return arguments.length?(d=null==h?null:"function"===typeof h?h:na(+h),a):d};a.y=function(h){return arguments.length?(e="function"===typeof h?h:na(+h),g=null,a):e};a.y0=function(h){return arguments.length?
(e="function"===typeof h?h:na(+h),a):e};a.y1=function(h){return arguments.length?(g=null==h?null:"function"===typeof h?h:na(+h),a):g};a.lineX0=a.lineY0=function(){return b().x(c).y(e)};a.lineY1=function(){return b().x(c).y(g)};a.lineX1=function(){return b().x(d).y(e)};a.defined=function(h){return arguments.length?(k="function"===typeof h?h:na(!!h),a):k};a.curve=function(h){return arguments.length?(p=h,null!=m&&(v=p(m)),a):p};a.context=function(h){return arguments.length?(null==h?m=v=null:v=p(m=h),
a):m};return a}function zs(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function As(a){return a}function Il(a){this._curve=a}function zh(a){function b(c){return new Il(a(c))}b._curve=a;return b}function Cd(a){var b=a.curve;a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;a.curve=function(c){return arguments.length?b(zh(c)):b()._curve};return a}function Jl(){return Cd(yh().curve(Kl))}function Ll(){var a=Hl().curve(Kl),b=a.curve,c=a.lineX0,d=a.lineX1,e=a.lineY0,g=a.lineY1;a.angle=a.x;delete a.x;a.startAngle=a.x0;
delete a.x0;a.endAngle=a.x1;delete a.x1;a.radius=a.y;delete a.y;a.innerRadius=a.y0;delete a.y0;a.outerRadius=a.y1;delete a.y1;a.lineStartAngle=function(){return Cd(c())};delete a.lineX0;a.lineEndAngle=function(){return Cd(d())};delete a.lineX1;a.lineInnerRadius=function(){return Cd(e())};delete a.lineY0;a.lineOuterRadius=function(){return Cd(g())};delete a.lineY1;a.curve=function(k){return arguments.length?b(zh(k)):b()._curve};return a}function Dd(a,b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}
function Bs(a){return a.source}function Cs(a){return a.target}function Ah(a){function b(){var m,p=Bh.call(arguments),v=c.apply(this,p),h=d.apply(this,p);k||(k=m=Eb());a(k,+e.apply(this,(p[0]=v,p)),+g.apply(this,p),+e.apply(this,(p[0]=h,p)),+g.apply(this,p));if(m)return k=null,m+""||null}var c=Bs,d=Cs,e=wh,g=xh,k=null;b.source=function(m){return arguments.length?(c=m,b):c};b.target=function(m){return arguments.length?(d=m,b):d};b.x=function(m){return arguments.length?(e="function"===typeof m?m:na(+m),
b):e};b.y=function(m){return arguments.length?(g="function"===typeof m?m:na(+m),b):g};b.context=function(m){return arguments.length?(k=null==m?null:m,b):k};return b}function Ds(a,b,c,d,e){a.moveTo(b,c);a.bezierCurveTo(b=(b+d)/2,c,b,e,d,e)}function Es(a,b,c,d,e){a.moveTo(b,c);a.bezierCurveTo(b,c=(c+e)/2,d,c,d,e)}function Fs(a,b,c,d,e){var g=Dd(b,c);b=Dd(b,c=(c+e)/2);c=Dd(d,c);d=Dd(d,e);a.moveTo(g[0],g[1]);a.bezierCurveTo(b[0],b[1],c[0],c[1],d[0],d[1])}function Jb(){}function gf(a,b,c){a._context.bezierCurveTo((2*
a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function hf(a){this._context=a}function Ml(a){this._context=a}function Nl(a){this._context=a}function Ol(a,b){this._basis=new hf(a);this._beta=b}function jf(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function Ch(a,b){this._context=a;this._k=(1-b)/6}function Dh(a,b){this._context=a;this._k=(1-b)/6}
function Eh(a,b){this._context=a;this._k=(1-b)/6}function Fh(a,b,c){var d=a._x1,e=a._y1,g=a._x2,k=a._y2;if(1E-12<a._l01_a){var m=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,p=3*a._l01_a*(a._l01_a+a._l12_a);d=(d*m-a._x0*a._l12_2a+a._x2*a._l01_2a)/p;e=(e*m-a._y0*a._l12_2a+a._y2*a._l01_2a)/p}1E-12<a._l23_a&&(m=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,p=3*a._l23_a*(a._l23_a+a._l12_a),g=(g*m+a._x1*a._l23_2a-b*a._l12_2a)/p,k=(k*m+a._y1*a._l23_2a-c*a._l12_2a)/p);a._context.bezierCurveTo(d,e,g,k,a._x2,a._y2)}
function Pl(a,b){this._context=a;this._alpha=b}function Ql(a,b){this._context=a;this._alpha=b}function Rl(a,b){this._context=a;this._alpha=b}function Sl(a){this._context=a}function Tl(a,b,c){var d=a._x1-a._x0;b-=a._x1;var e=(a._y1-a._y0)/(d||0>b&&-0);a=(c-a._y1)/(b||0>d&&-0);return((0>e?-1:1)+(0>a?-1:1))*Math.min(Math.abs(e),Math.abs(a),.5*Math.abs((e*b+a*d)/(d+b)))||0}function Ul(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function Gh(a,b,c){var d=a._x0,e=a._x1,g=a._y1,k=(e-d)/3;a._context.bezierCurveTo(d+
k,a._y0+k*b,e-k,g-k*c,e,g)}function kf(a){this._context=a}function Vl(a){this._context=new Wl(a)}function Wl(a){this._context=a}function Xl(a){this._context=a}function Yl(a){var b,c=a.length-1,d=Array(c),e=Array(c),g=Array(c);d[0]=0;e[0]=2;g[0]=a[0]+2*a[1];for(b=1;b<c-1;++b)d[b]=1,e[b]=4,g[b]=4*a[b]+2*a[b+1];d[c-1]=2;e[c-1]=7;g[c-1]=8*a[c-1]+a[c];for(b=1;b<c;++b){var k=d[b]/e[b-1];e[b]-=k;g[b]-=k*g[b-1]}d[c-1]=g[c-1]/e[c-1];for(b=c-2;0<=b;--b)d[b]=(g[b]-d[b+1])/e[b];e[c-1]=(a[c]+d[c-1])/2;for(b=0;b<
c-1;++b)e[b]=2*a[b+1]-d[b+1];return[d,e]}function lf(a,b){this._context=a;this._t=b}function Ec(a,b){if(1<(k=a.length))for(var c=1,d,e,g=a[b[0]],k,m=g.length;c<k;++c)for(e=g,g=a[b[c]],d=0;d<m;++d)g[d][1]+=g[d][0]=isNaN(e[d][1])?e[d][0]:e[d][1]}function Fc(a){a=a.length;for(var b=Array(a);0<=--a;)b[a]=a;return b}function Gs(a,b){return a[b]}function Zl(a){var b=a.map($l);return Fc(a).sort(function(c,d){return b[c]-b[d]})}function $l(a){for(var b=0,c=-1,d=a.length,e;++c<d;)if(e=+a[c][1])b+=e;return b}
function am(a){return function(){return a}}function Hs(a){return a[0]}function Is(a){return a[1]}function mf(){this._=null}function nf(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Ed(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function Fd(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function bm(a){for(;a.L;)a=a.L;return a}function Gd(a,b,c,d){var e=[null,null],g=Ha.push(e)-1;e.left=a;e.right=b;c&&of(e,a,b,c);d&&
of(e,b,a,d);Ya[a.index].halfedges.push(g);Ya[b.index].halfedges.push(g);return e}function Hd(a,b,c){b=[b,c];b.left=a;return b}function of(a,b,c,d){a[0]||a[1]?a.left===c?a[1]=d:a[0]=d:(a[0]=d,a.left=b,a.right=c)}function Js(a,b,c,d,e){var g=a[0],k=a[1],m=g[0];g=g[1];var p=0,v=1,h=k[0]-m;k=k[1]-g;b-=m;if(h||!(0<b)){b/=h;if(0>h){if(b<p)return;b<v&&(v=b)}else if(0<h){if(b>v)return;b>p&&(p=b)}b=d-m;if(h||!(0>b)){b/=h;if(0>h){if(b>v)return;b>p&&(p=b)}else if(0<h){if(b<p)return;b<v&&(v=b)}b=c-g;if(k||!(0<
b)){b/=k;if(0>k){if(b<p)return;b<v&&(v=b)}else if(0<k){if(b>v)return;b>p&&(p=b)}b=e-g;if(k||!(0>b)){b/=k;if(0>k){if(b>v)return;b>p&&(p=b)}else if(0<k){if(b<p)return;b<v&&(v=b)}if(!(0<p||1>v))return!0;0<p&&(a[0]=[m+p*h,g+p*k]);1>v&&(a[1]=[m+v*h,g+v*k]);return!0}}}}}function Ks(a,b,c,d,e){var g=a[1];if(g)return!0;var k=a[0],m=a.left,p=a.right;g=m[0];m=m[1];var v=p[0];p=p[1];var h=(g+v)/2;if(p===m){if(h<b||h>=d)return;if(g>v){if(!k)k=[h,c];else if(k[1]>=e)return;g=[h,e]}else{if(!k)k=[h,e];else if(k[1]<
c)return;g=[h,c]}}else{var l=(g-v)/(p-m);h=(m+p)/2-l*h;if(-1>l||1<l)if(g>v){if(!k)k=[(c-h)/l,c];else if(k[1]>=e)return;g=[(e-h)/l,e]}else{if(!k)k=[(e-h)/l,e];else if(k[1]<c)return;g=[(c-h)/l,c]}else if(m<p){if(!k)k=[b,l*b+h];else if(k[0]>=d)return;g=[d,l*d+h]}else{if(!k)k=[d,l*d+h];else if(k[0]<b)return;g=[b,l*b+h]}}a[0]=k;a[1]=g;return!0}function Ls(a,b){a=a.site;var c=b.left,d=b.right;a===d&&(d=c,c=a);if(d)return Math.atan2(d[1]-c[1],d[0]-c[0]);a===c?(c=b[1],d=b[0]):(c=b[0],d=b[1]);return Math.atan2(c[0]-
d[0],d[1]-c[1])}function cm(a,b){return b[+(b.left!==a.site)]}function Ms(){for(var a=0,b=Ya.length,c,d,e,g;a<b;++a)if((c=Ya[a])&&(g=(d=c.halfedges).length)){var k=Array(g),m=Array(g);for(e=0;e<g;++e)k[e]=e,m[e]=Ls(c,Ha[d[e]]);k.sort(function(p,v){return m[v]-m[p]});for(e=0;e<g;++e)m[e]=d[k[e]];for(e=0;e<g;++e)d[e]=m[e]}}function Ns(){nf(this);this.x=this.y=this.arc=this.site=this.cy=null}function Gc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site;b=a.site;var e=c.site;if(d!==e){c=b[0];var g=b[1],k=d[0]-
c,m=d[1]-g;d=e[0]-c;var p=e[1]-g;e=2*(k*p-m*d);if(!(e>=-Os)){var v=k*k+m*m,h=d*d+p*p;m=(p*v-m*h)/e;d=(k*h-d*v)/e;k=dm.pop()||new Ns;k.arc=a;k.site=b;k.x=m+c;k.y=(k.cy=d+g)+Math.sqrt(m*m+d*d);a.circle=k;a=null;for(b=Id._;b;)if(k.y<b.y||k.y===b.y&&k.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}Id.insert(a,k);a||(Hh=k)}}}}function Hc(a){var b=a.circle;b&&(b.P||(Hh=b.N),Id.remove(b),dm.push(b),nf(b),a.circle=null)}function Ps(){nf(this);this.edge=this.site=this.circle=null}function em(a){var b=
fm.pop()||new Ps;b.site=a;return b}function Ih(a){Hc(a);Ic.remove(a);fm.push(a);nf(a)}function gm(a,b){var c=a.site,d=c[0],e=c[1],g=e-b;if(!g)return d;a=a.P;if(!a)return-Infinity;c=a.site;a=c[0];c=c[1];b=c-b;if(!b)return a;var k=a-d,m=1/g-1/b,p=k/b;return m?(-p+Math.sqrt(p*p-2*m*(k*k/(-2*b)-c+b/2+e-g/2)))/m+d:(d+a)/2}function Qs(a,b){return b[1]-a[1]||b[0]-a[0]}function Jh(a,b){var c=a.sort(Qs).pop(),d;Ha=[];Ya=Array(a.length);Ic=new mf;for(Id=new mf;;){var e=Hh;if(c&&(!e||c[1]<e.y||c[1]===e.y&&c[0]<
e.x)){if(c[0]!==d||c[1]!==g){var g=d=void 0;e=c;for(var k=e[0],m=e[1],p=Ic._;p;){var v=gm(p,m)-k;if(v>ta)p=p.L;else{var h=p;var l=m;var q=h.N;q?l=gm(q,l):(h=h.site,l=h[1]===l?h[0]:Infinity);l=k-l;if(l>ta){if(!p.R){g=p;break}p=p.R}else{v>-ta?(g=p.P,d=p):l>-ta?(g=p,d=p.N):g=d=p;break}}}Ya[e.index]={site:e,halfedges:[]};v=em(e);Ic.insert(g,v);if(g||d)if(g===d)Hc(g),d=em(g.site),Ic.insert(v,d),v.edge=d.edge=Gd(g.site,v.site),Gc(g),Gc(d);else if(d){Hc(g);Hc(d);k=g.site;p=k[0];l=k[1];h=e[0]-p;q=e[1]-l;
m=d.site;var w=m[0]-p,B=m[1]-l,F=2*(h*B-q*w),K=h*h+q*q,P=w*w+B*B;p=[(B*K-q*P)/F+p,(h*P-w*K)/F+l];of(d.edge,k,m,p);v.edge=Gd(k,e,null,p);d.edge=Gd(e,m,null,p);Gc(g);Gc(d)}else v.edge=Gd(g.site,v.site);d=c[0];g=c[1]}c=a.pop()}else if(e){m=e.arc;e=m.circle;k=e.x;p=e.cy;e=[k,p];h=m.P;l=m.N;v=[m];Ih(m);for(m=h;m.circle&&Math.abs(k-m.circle.x)<ta&&Math.abs(p-m.circle.cy)<ta;)h=m.P,v.unshift(m),Ih(m),m=h;v.unshift(m);Hc(m);for(h=l;h.circle&&Math.abs(k-h.circle.x)<ta&&Math.abs(p-h.circle.cy)<ta;)l=h.N,v.push(h),
Ih(h),h=l;v.push(h);Hc(h);p=v.length;for(k=1;k<p;++k)h=v[k],m=v[k-1],of(h.edge,m.site,h.site,e);m=v[0];h=v[p-1];h.edge=Gd(m.site,h.site,null,e);Gc(m);Gc(h)}else break}Ms();if(b){d=+b[0][0];a=+b[0][1];c=+b[1][0];b=+b[1][1];g=Ha.length;for(var x;g--;)Ks(x=Ha[g],d,a,c,b)&&Js(x,d,a,c,b)&&(Math.abs(x[0][0]-x[1][0])>ta||Math.abs(x[0][1]-x[1][1])>ta)||delete Ha[g];x=Ya.length;g=!0;for(e=0;e<x;++e)if(v=Ya[e]){var y=v.site;m=v.halfedges;for(k=m.length;k--;)Ha[m[k]]||m.splice(k,1);k=0;for(p=m.length;k<p;)if(l=
Ha[m[k]],h=l[+(l.left===v.site)],q=h[0],w=h[1],B=cm(v,Ha[m[++k%p]]),l=B[0],B=B[1],Math.abs(q-l)>ta||Math.abs(w-B)>ta)m.splice(k,0,Ha.push(Hd(y,h,Math.abs(q-d)<ta&&b-w>ta?[d,Math.abs(l-d)<ta?B:b]:Math.abs(w-b)<ta&&c-q>ta?[Math.abs(B-b)<ta?l:c,b]:Math.abs(q-c)<ta&&w-a>ta?[c,Math.abs(l-c)<ta?B:a]:Math.abs(w-a)<ta&&q-d>ta?[Math.abs(B-a)<ta?l:d,a]:null))-1),++p;p&&(g=!1)}if(g){k=Infinity;e=0;for(g=null;e<x;++e)if(v=Ya[e])y=v.site,m=y[0]-d,p=y[1]-a,m=m*m+p*p,m<k&&(k=m,g=v);g&&(e=[d,a],d=[d,b],b=[c,b],a=
[c,a],g.halfedges.push(Ha.push(Hd(y=g.site,e,d))-1,Ha.push(Hd(y,d,b))-1,Ha.push(Hd(y,b,a))-1,Ha.push(Hd(y,a,e))-1))}for(e=0;e<x;++e)if(v=Ya[e])v.halfedges.length||delete Ya[e]}this.edges=Ha;this.cells=Ya;Ic=Id=Ha=Ya=null}function pf(a){return function(){return a}}function Rs(a,b,c){this.target=a;this.type=b;this.transform=c}function yb(a,b,c){this.k=a;this.x=b;this.y=c}function hm(a){return a.__zoom||qf}function Jd(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Ss(){return!d3.event.button}
function Ts(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function im(){return this.__zoom||qf}function Us(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)/500}function Vs(){return"ontouchstart"in this}function Ws(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],g=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/
2:Math.min(0,d)||Math.max(0,e),b>g?(g+b)/2:Math.min(0,g)||Math.max(0,b))}var jm=Cf(Mb),$b=jm.right,Xs=jm.left,km=Array.prototype,Ys=km.slice,Zs=km.map,Ff=Math.sqrt(50),Gf=Math.sqrt(10),Hf=Math.sqrt(2),Kf=Array.prototype.slice,On={value:function(){}};Qd.prototype=Ob.prototype={constructor:Qd,on:function(a,b){var c=this._,d=Nn(a+"",c),e,g=-1,k=d.length;if(2>arguments.length)for(;++g<k;){var m;if(m=e=(a=d[g]).type){a:{m=c[e];for(var p=0,v=m.length;p<v;++p)if((e=m[p]).name===a.name){e=e.value;break a}e=
void 0}m=e}if(m)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+b);for(;++g<k;)if(e=(a=d[g]).type)c[e]=mi(c[e],a.name,b);else if(null==b)for(e in c)c[e]=mi(c[e],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new Qd(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,g;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);g=this._[a];d=0;for(e=g.length;d<e;++d)g[d].value.apply(b,
c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var Ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};if("undefined"!==typeof document){var Kd=document.documentElement;if(!Kd.matches){var $s=Kd.webkitMatchesSelector||Kd.msMatchesSelector||Kd.mozMatchesSelector||
Kd.oMatchesSelector;fi=function(a){return function(){return $s.call(this,a)}}}}var Kh=fi;Td.prototype={constructor:Td,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};oi.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},
remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var si={};d3.event=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(si={mouseenter:"mouseover",mouseleave:"mouseout"}));var Of=[null];Ja.prototype=Qb.prototype={constructor:Ja,select:function(a){"function"!==typeof a&&(a=Sd(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],k=g.length,m=d[e]=Array(k),p,v,h=0;h<k;++h)(p=g[h])&&(v=a.call(p,p.__data__,h,g))&&("__data__"in p&&(v.__data__=p.__data__),m[h]=v);return new Ja(d,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=Lf(a));for(var b=this._groups,c=b.length,d=[],e=[],g=0;g<c;++g)for(var k=b[g],m=k.length,p,v=0;v<m;++v)if(p=k[v])d.push(a.call(p,p.__data__,v,k)),e.push(p);return new Ja(d,e)},filter:function(a){"function"!==typeof a&&(a=Kh(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var g=
b[e],k=g.length,m=d[e]=[],p,v=0;v<k;++v)(p=g[v])&&a.call(p,p.__data__,v,g)&&m.push(p);return new Ja(d,this._parents)},data:function(a,b){if(!a)return w=Array(this.size()),v=-1,this.each(function(x){w[++v]=x}),w;var c=b?Vn:Un,d=this._parents,e=this._groups;"function"!==typeof a&&(a=Tn(a));for(var g=e.length,k=Array(g),m=Array(g),p=Array(g),v=0;v<g;++v){var h=d[v],l=e[v],q=l.length,w=a.call(h,h&&h.__data__,v,d),B=w.length,F=m[v]=Array(B),K=k[v]=Array(B);q=p[v]=Array(q);c(h,l,F,K,q,w,b);l=h=0;for(var P;h<
B;++h)if(q=F[h]){for(h>=l&&(l=h+1);!(P=K[l])&&++l<B;);q._next=P||null}}k=new Ja(k,d);k._enter=m;k._exit=p;return k},enter:function(){return new Ja(this._enter||this._groups.map(ni),this._parents)},exit:function(){return new Ja(this._exit||this._groups.map(ni),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),g=0;g<d;++g)for(var k=b[g],m=a[g],p=k.length,v=e[g]=Array(p),h,l=0;l<p;++l)if(h=k[l]||m[l])v[l]=h;for(;g<c;++g)e[g]=b[g];return new Ja(e,
this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,g=d[e],k;0<=--e;)if(k=d[e])g&&g!==k.nextSibling&&g.parentNode.insertBefore(k,g),g=k;return this},sort:function(a){function b(l,q){return l&&q?a(l.__data__,q.__data__):!l-!q}a||(a=Wn);for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g){for(var k=c[g],m=k.length,p=e[g]=Array(m),v,h=0;h<m;++h)if(v=k[h])p[h]=v;p.sort(b)}return(new Ja(e,this._parents)).order()},call:function(){var a=arguments[0];
arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,g=d.length;e<g;++e){var k=d[e];if(k)return k}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],g=0,k=e.length,m;g<k;++g)(m=e[g])&&a.call(m,
m.__data__,g,e);return this},attr:function(a,b){var c=Pc(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?Yn:Xn:"function"===typeof b?c.local?bo:ao:c.local?$n:Zn)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?co:"function"===typeof b?fo:eo)(a,b,null==c?"":c)):Pb(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?go:"function"===typeof b?io:ho)(a,
b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Nf(this.node()),e=-1,g=c.length;++e<g;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===typeof b?lo:b?jo:ko)(c,b))},text:function(a){return arguments.length?this.each(null==a?mo:("function"===typeof a?oo:no)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?po:("function"===typeof a?ro:qo)(a)):this.node().innerHTML},raise:function(){return this.each(so)},
lower:function(){return this.each(to)},append:function(a){var b="function"===typeof a?a:Rd(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:Rd(a),d=null==b?uo:"function"===typeof b?b:Sd(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(vo)},clone:function(a){return this.select(a?xo:wo)},datum:function(a){return arguments.length?
this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d=zo(a+""),e=d.length,g;if(2>arguments.length){var k=this.node().__on;if(k)for(var m=0,p=k.length,v;m<p;++m){var h=0;for(v=k[m];h<e;++h)if((g=d[h]).type===v.type&&g.name===v.name)return v.value}}else{k=b?Bo:Ao;null==c&&(c=!1);for(h=0;h<e;++h)this.each(k(d[h],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?Do:Co)(a,b))}};var Eo=0;Pf.prototype=ui.prototype={constructor:Pf,get:function(a){for(var b=
this._;!(b in a);)if(!(a=a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};Rf.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var Jc=1/.7,Jo=/^#([0-9a-f]{3})$/,Ko=/^#([0-9a-f]{6})$/,Lo=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Mo=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
No=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Oo=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Po=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Qo=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gc(Cb,Db,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});gc(Fa,hc,Rc(Cb,{brighter:function(a){a=null==a?Jc:Math.pow(Jc,a);return new Fa(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Fa(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},
displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Tf(this.r)+Tf(this.g)+Tf(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));gc(ib,Zd,Rc(Cb,{brighter:function(a){a=
null==a?Jc:Math.pow(Jc,a);return new ib(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new ib(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new Fa(Uf(240<=a?a-240:a+120,c,b),Uf(a,c,b),Uf(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));
var zi=Math.PI/180,Di=180/Math.PI,Bi=4/29,ic=6/29,Ai=3*ic*ic,So=ic*ic*ic;gc(cb,$d,Rc(Cb,{brighter:function(a){return new cb(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new cb(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*Yf(b);a=1*Yf(a);c=.82521*Yf(c);return new Fa(Zf(3.1338561*b-1.6168667*a-.4906146*c),Zf(-.9787684*b+1.9161415*a+.033454*c),Zf(.0719453*
b-.2289914*a+1.4052427*c),this.opacity)}}));gc(jb,ae,Rc(Cb,{brighter:function(a){return new jb(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new jb(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Vf(this).rgb()}}));var Ei=1.78277*-.29227-.1347134789;gc(Rb,db,Rc(Cb,{brighter:function(a){a=null==a?Jc:Math.pow(Jc,a);return new Rb(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Rb(this.h,this.s,
this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*zi,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);a=Math.sin(a);return new Fa(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var Tc=function c(b){function d(g,k){var m=e((g=hc(g)).r,(k=hc(k)).r),p=e(g.g,k.g),v=e(g.b,k.b),h=Ea(g.opacity,k.opacity);return function(l){g.r=m(l);g.g=p(l);g.b=v(l);g.opacity=h(l);return g+""}}var e=Uo(b);d.gamma=c;return d}(1),El=Ji(Gi),
at=Ji(Hi),ag=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(ag.source,"g"),Pi=180/Math.PI,Lh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ld,Mh,lm,rf,mm=Qi(function(b){if("none"===b)return Lh;Ld||(Ld=document.createElement("DIV"),Mh=document.documentElement,lm=document.defaultView);Ld.style.transform=b;b=lm.getComputedStyle(Mh.appendChild(Ld),null).getPropertyValue("transform");Mh.removeChild(Ld);b=b.slice(7,-1).split(",");return Oi(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},
"px, ","px)","deg)"),nm=Qi(function(b){if(null==b)return Lh;rf||(rf=document.createElementNS("http://www.w3.org/2000/svg","g"));rf.setAttribute("transform",b);if(!(b=rf.transform.baseVal.consolidate()))return Lh;b=b.matrix;return Oi(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),Uc=Math.SQRT2,bt=Ti(ce),ct=Ti(Ea),dt=Ui(ce),et=Ui(Ea),ft=Vi(ce),sf=Vi(Ea),kc=0,Xc=0,Zc=0,fe,Yc,ge=0,Sb=0,de=0,Vc="object"===typeof performance&&performance.now?performance:Date,Wi="object"===typeof window&&window.requestAnimationFrame?
window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};Wc.prototype=ee.prototype={constructor:Wc,restart:function(b,c,d){if("function"!==typeof b)throw new TypeError("callback is not a function");d=(null==d?jc():+d)+(null==c?0:+c);this._next||Yc===this||(Yc?Yc._next=this:fe=this,Yc=this);this._call=b;this._time=d;cg()},stop:function(){this._call&&(this._call=null,this._time=Infinity,cg())}};var $o=Ob("start","end","interrupt"),ap=[],gt=Qb.prototype.constructor,om=0,Kc=Qb.prototype;
kb.prototype=$i.prototype={constructor:kb,select:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Sd(b));for(var e=this._groups,g=e.length,k=Array(g),m=0;m<g;++m)for(var p=e[m],v=p.length,h=k[m]=Array(v),l,q,w=0;w<v;++w)(l=p[w])&&(q=b.call(l,l.__data__,w,p))&&("__data__"in l&&(q.__data__=l.__data__),h[w]=q,he(h[w],c,d,w,h,eb(l,d)));return new kb(k,this._parents,c,d)},selectAll:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Lf(b));for(var e=this._groups,g=e.length,
k=[],m=[],p=0;p<g;++p)for(var v=e[p],h=v.length,l,q=0;q<h;++q)if(l=v[q]){for(var w=b.call(l,l.__data__,q,v),B,F=eb(l,d),K=0,P=w.length;K<P;++K)(B=w[K])&&he(B,c,d,K,w,F);k.push(w);m.push(l)}return new kb(k,m,c,d)},filter:function(b){"function"!==typeof b&&(b=Kh(b));for(var c=this._groups,d=c.length,e=Array(d),g=0;g<d;++g)for(var k=c[g],m=k.length,p=e[g]=[],v,h=0;h<m;++h)(v=k[h])&&b.call(v,v.__data__,h,k)&&p.push(v);return new kb(e,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();
var c=this._groups;b=b._groups;for(var d=c.length,e=Math.min(d,b.length),g=Array(d),k=0;k<e;++k)for(var m=c[k],p=b[k],v=m.length,h=g[k]=Array(v),l,q=0;q<v;++q)if(l=m[q]||p[q])h[q]=l;for(;k<d;++k)g[k]=c[k];return new kb(g,this._parents,this._name,this._id)},selection:function(){return new gt(this._groups,this._parents)},transition:function(){for(var b=this._name,c=this._id,d=++om,e=this._groups,g=e.length,k=0;k<g;++k)for(var m=e[k],p=m.length,v,h=0;h<p;++h)if(v=m[h]){var l=eb(v,c);he(v,b,d,h,m,{time:l.time+
l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new kb(e,this._parents,b,d)},call:Kc.call,nodes:Kc.nodes,node:Kc.node,size:Kc.size,empty:Kc.empty,each:Kc.each,on:function(b,c){var d=this._id;return 2>arguments.length?eb(this.node(),d).on.on(b):this.each(rp(d,b,c))},attr:function(b,c){var d=Pc(b),e="transform"===d?nm:Zi;return this.attrTween(b,"function"===typeof c?(d.local?ip:hp)(d,e,fg(this,"attr."+b,c)):null==c?(d.local?ep:dp)(d):(d.local?gp:fp)(d,e,c+""))},attrTween:function(b,
c){var d="attr."+b;if(2>arguments.length)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!==typeof c)throw Error();var e=Pc(b);return this.tween(d,(e.local?jp:kp)(e,c))},style:function(b,c,d){var e="transform"===(b+="")?mm:Zi;return null==c?this.styleTween(b,tp(b,e)).on("end.style."+b,up(b)):this.styleTween(b,"function"===typeof c?wp(b,e,fg(this,"style."+b,c)):vp(b,e,c+""),d)},styleTween:function(b,c,d){var e="style."+(b+="");if(2>arguments.length)return(e=this.tween(e))&&
e._value;if(null==c)return this.tween(e,null);if("function"!==typeof c)throw Error();return this.tween(e,xp(b,c,null==d?"":d))},text:function(b){return this.tween("text","function"===typeof b?zp(fg(this,"text",b)):yp(null==b?"":b+""))},remove:function(){return this.on("end.remove",sp(this._id))},tween:function(b,c){var d=this._id;b+="";if(2>arguments.length){d=eb(this.node(),d).tween;for(var e=0,g=d.length,k;e<g;++e)if((k=d[e]).name===b)return k.value;return null}return this.each((null==c?bp:cp)(d,
b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?lp:mp)(c,b)):eb(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?np:op)(c,b)):eb(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?this.each(pp(c,b)):eb(this.node(),c).ease}};var ht=function d(c){function e(g){return Math.pow(g,c)}c=+c;e.exponent=d;return e}(3),it=function e(d){function g(k){return 1-Math.pow(1-
k,d)}d=+d;g.exponent=e;return g}(3),pm=function g(e){function k(m){return(1>=(m*=2)?Math.pow(m,e):2-Math.pow(2-m,e))/2}e=+e;k.exponent=g;return k}(3),cj=Math.PI,qm=cj/2,hg=4/11,Bp=6/11,Ap=8/11,Dp=9/11,Cp=10/11,Ep=21/22,ie=1/hg/hg,jt=function k(g){function m(p){return p*p*((g+1)*p-g)}g=+g;m.overshoot=k;return m}(1.70158),kt=function m(k){function p(v){return--v*v*((k+1)*v+k)+1}k=+k;p.overshoot=m;return p}(1.70158),rm=function p(m){function v(h){return(1>(h*=2)?h*h*((m+1)*h-m):(h-=2)*h*((m+1)*h+m)+
2)/2}m=+m;v.overshoot=p;return v}(1.70158),Lc=2*Math.PI,lt=function h(p,v){function l(w){return p*Math.pow(2,10*--w)*Math.sin((q-w)/v)}var q=Math.asin(1/(p=Math.max(1,p)))*(v/=Lc);l.amplitude=function(w){return h(w,v*Lc)};l.period=function(w){return h(p,w)};return l}(1,.3),sm=function l(v,h){function q(B){return 1-v*Math.pow(2,-10*(B=+B))*Math.sin((B+w)/h)}var w=Math.asin(1/(v=Math.max(1,v)))*(h/=Lc);q.amplitude=function(B){return l(B,h*Lc)};q.period=function(B){return l(v,B)};return q}(1,.3),mt=
function q(h,l){function w(F){return(0>(F=2*F-1)?h*Math.pow(2,10*F)*Math.sin((B-F)/l):2-h*Math.pow(2,-10*F)*Math.sin((B+F)/l))/2}var B=Math.asin(1/(h=Math.max(1,h)))*(l/=Lc);w.amplitude=function(F){return q(F,l*Lc)};w.period=function(F){return q(h,F)};return w}(1,.3),Nh={time:null,delay:0,duration:250,ease:gg};Qb.prototype.interrupt=function(h){return this.each(function(){Ub(this,h)})};Qb.prototype.transition=function(h){var l;if(h instanceof kb){var q=h._id;h=h._name}else q=++om,(l=Nh).time=jc(),
h=null==h?null:h+"";for(var w=this._groups,B=w.length,F=0;F<B;++F)for(var K=w[F],P=K.length,x,y=0;y<P;++y)if(x=K[y]){var I=x,Q=h,V=q,N=y,U=K,f;if(!(f=l))a:{f=void 0;for(var n=q;!(f=x.__transition)||!(f=f[n]);)if(!(x=x.parentNode)){f=(Nh.time=jc(),Nh);break a}}he(I,Q,V,N,U,f)}return new kb(w,this._parents,h,q)};var nt=[null],gj={name:"drag"},lg={name:"space"},lc={name:"handle"},mc={name:"center"},le={name:"x",handles:["e","w"].map(ad),input:function(h,l){return h&&[[h[0],l[0][1]],[h[1],l[1][1]]]},
output:function(h){return h&&[h[0][0],h[1][0]]}},ke={name:"y",handles:["n","s"].map(ad),input:function(h,l){return h&&[[l[0][0],h[0]],[l[1][0],h[1]]]},output:function(h){return h&&[h[0][1],h[1][1]]}},ot={name:"xy",handles:"n e s w nw ne se sw".split(" ").map(ad),input:function(h){return h},output:function(h){return h}},qb={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hj={e:"w",w:"e",
nw:"ne",ne:"nw",se:"sw",sw:"se"},ij={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ip={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Jp={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},tm=Math.cos,um=Math.sin,vm=Math.PI,tf=vm/2,wm=2*vm,xm=Math.max,pt=Array.prototype.slice,Oh=Math.PI,Ph=2*Oh,qt=Ph-1E-6;ng.prototype=Eb.prototype={constructor:ng,moveTo:function(h,l){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&
(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(h,l){this._+="L"+(this._x1=+h)+","+(this._y1=+l)},quadraticCurveTo:function(h,l,q,w){this._+="Q"+ +h+","+ +l+","+(this._x1=+q)+","+(this._y1=+w)},bezierCurveTo:function(h,l,q,w,B,F){this._+="C"+ +h+","+ +l+","+ +q+","+ +w+","+(this._x1=+B)+","+(this._y1=+F)},arcTo:function(h,l,q,w,B){h=+h;l=+l;q=+q;w=+w;B=+B;var F=this._x1,K=this._y1,P=q-h,x=w-l,y=F-h,I=K-l,Q=y*y+I*I;if(0>B)throw Error("negative radius: "+B);if(null===this._x1)this._+=
"M"+(this._x1=h)+","+(this._y1=l);else if(1E-6<Q)if(1E-6<Math.abs(I*P-x*y)&&B){q-=F;w-=K;var V=P*P+x*x;K=Math.sqrt(V);F=Math.sqrt(Q);Q=B*Math.tan((Oh-Math.acos((V+Q-(q*q+w*w))/(2*K*F)))/2);F=Q/F;Q/=K;1E-6<Math.abs(F-1)&&(this._+="L"+(h+F*y)+","+(l+F*I));this._+="A"+B+","+B+",0,0,"+ +(I*q>y*w)+","+(this._x1=h+Q*P)+","+(this._y1=l+Q*x)}else this._+="L"+(this._x1=h)+","+(this._y1=l)},arc:function(h,l,q,w,B,F){h=+h;l=+l;q=+q;var K=q*Math.cos(w),P=q*Math.sin(w),x=h+K,y=l+P,I=1^F;w=F?w-B:B-w;if(0>q)throw Error("negative radius: "+
q);if(null===this._x1)this._+="M"+x+","+y;else if(1E-6<Math.abs(this._x1-x)||1E-6<Math.abs(this._y1-y))this._+="L"+x+","+y;q&&(0>w&&(w=w%Ph+Ph),w>qt?this._+="A"+q+","+q+",0,1,"+I+","+(h-K)+","+(l-P)+"A"+q+","+q+",0,1,"+I+","+(this._x1=x)+","+(this._y1=y):1E-6<w&&(this._+="A"+q+","+q+",0,"+ +(w>=Oh)+","+I+","+(this._x1=h+q*Math.cos(B))+","+(this._y1=l+q*Math.sin(B))))},rect:function(h,l,q,w){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+l)+"h"+ +q+"v"+ +w+"h"+-q+"Z"},toString:function(){return this._}};
me.prototype=rb.prototype={constructor:me,has:function(h){return"$"+h in this},get:function(h){return this["$"+h]},set:function(h,l){this["$"+h]=l;return this},remove:function(h){h="$"+h;return h in this&&delete this[h]},clear:function(){for(var h in this)"$"===h[0]&&delete this[h]},keys:function(){var h=[],l;for(l in this)"$"===l[0]&&h.push(l.slice(1));return h},values:function(){var h=[],l;for(l in this)"$"===l[0]&&h.push(this[l]);return h},entries:function(){var h=[],l;for(l in this)"$"===l[0]&&
h.push({key:l.slice(1),value:this[l]});return h},size:function(){var h=0,l;for(l in this)"$"===l[0]&&++h;return h},empty:function(){for(var h in this)if("$"===h[0])return!1;return!0},each:function(h){for(var l in this)"$"===l[0]&&h(this[l],l.slice(1),this)}};var cc=rb.prototype;ne.prototype=lj.prototype={constructor:ne,has:cc.has,add:function(h){h+="";this["$"+h]=h;return this},remove:cc.remove,clear:cc.clear,values:cc.keys,size:cc.size,empty:cc.empty,each:cc.each};var nj=Array.prototype.slice,sb=
[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],pj={},qg={},uf=oe(","),ym=uf.parse,rt=uf.parseRows,st=uf.format,tt=uf.formatRows,vf=oe("\t"),zm=vf.parse,ut=vf.parseRows,vt=vf.format,wt=vf.formatRows,xt=qj(ym),yt=qj(zm),zt=rg("application/xml"),
At=rg("text/html"),Bt=rg("image/svg+xml"),Qa=qe.prototype=sg.prototype;Qa.copy=function(){var h=new sg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root,q,w;if(!l)return h;if(!l.length)return h._root=sj(l),h;for(q=[{source:l,target:h._root=Array(4)}];l=q.pop();)for(var B=0;4>B;++B)if(w=l.source[B])w.length?q.push({source:w,target:l.target[B]=Array(4)}):l.target[B]=sj(w);return h};Qa.add=function(h){var l=+this._x.call(null,h),q=+this._y.call(null,h);return rj(this.cover(l,q),l,q,h)};
Qa.addAll=function(h){var l,q,w=h.length,B,F,K=Array(w),P=Array(w),x=Infinity,y=Infinity,I=-Infinity,Q=-Infinity;for(q=0;q<w;++q)isNaN(B=+this._x.call(null,l=h[q]))||isNaN(F=+this._y.call(null,l))||(K[q]=B,P[q]=F,B<x&&(x=B),B>I&&(I=B),F<y&&(y=F),F>Q&&(Q=F));I<x&&(x=this._x0,I=this._x1);Q<y&&(y=this._y0,Q=this._y1);this.cover(x,y).cover(I,Q);for(q=0;q<w;++q)rj(this,K[q],P[q],h[q]);return this};Qa.cover=function(h,l){if(isNaN(h=+h)||isNaN(l=+l))return this;var q=this._x0,w=this._y0,B=this._x1,F=this._y1;
if(isNaN(q))B=(q=Math.floor(h))+1,F=(w=Math.floor(l))+1;else if(q>h||h>B||w>l||l>F){var K=B-q,P=this._root,x;switch(x=(l<(w+F)/2)<<1|h<(q+B)/2){case 0:do{var y=Array(4);y[x]=P;P=y}while(K*=2,B=q+K,F=w+K,h>B||l>F);break;case 1:do y=Array(4),y[x]=P,P=y;while(K*=2,q=B-K,F=w+K,q>h||l>F);break;case 2:do y=Array(4),y[x]=P,P=y;while(K*=2,B=q+K,w=F-K,h>B||w>l);break;case 3:do y=Array(4),y[x]=P,P=y;while(K*=2,q=B-K,w=F-K,q>h||w>l)}this._root&&this._root.length&&(this._root=P)}else return this;this._x0=q;this._y0=
w;this._x1=B;this._y1=F;return this};Qa.data=function(){var h=[];this.visit(function(l){if(!l.length){do h.push(l.data);while(l=l.next)}});return h};Qa.extent=function(h){return arguments.length?this.cover(+h[0][0],+h[0][1]).cover(+h[1][0],+h[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};Qa.find=function(h,l,q){var w=this._x0,B=this._y0,F,K,P,x,y=this._x1,I=this._y1,Q=[],V=this._root,N;V&&Q.push(new Ka(V,w,B,y,I));null==q?q=Infinity:(w=h-q,B=l-q,y=h+q,I=l+q,q*=q);for(;N=
Q.pop();)if(!(!(V=N.node)||(F=N.x0)>y||(K=N.y0)>I||(P=N.x1)<w||(x=N.y1)<B))if(V.length){N=(F+P)/2;var U=(K+x)/2;Q.push(new Ka(V[3],N,U,P,x),new Ka(V[2],F,U,N,x),new Ka(V[1],N,K,P,U),new Ka(V[0],F,K,N,U));if(V=(l>=U)<<1|h>=N)N=Q[Q.length-1],Q[Q.length-1]=Q[Q.length-1-V],Q[Q.length-1-V]=N}else if(N=h-+this._x.call(null,V.data),U=l-+this._y.call(null,V.data),N=N*N+U*U,N<q){var f=Math.sqrt(q=N);w=h-f;B=l-f;y=h+f;I=l+f;f=V.data}return f};Qa.remove=function(h){if(isNaN(x=+this._x.call(null,h))||isNaN(y=
+this._y.call(null,h)))return this;var l,q=this._root,w,B=this._x0,F=this._y0,K=this._x1,P=this._y1,x,y,I,Q,V,N;if(!q)return this;if(q.length)for(;;){(V=x>=(I=(B+K)/2))?B=I:K=I;(N=y>=(Q=(F+P)/2))?F=Q:P=Q;if(!(l=q,q=q[V|=N<<1]))return this;if(!q.length)break;if(l[V+1&3]||l[V+2&3]||l[V+3&3]){var U=l;var f=V}}for(;q.data!==h;)if(!(w=q,q=q.next))return this;(h=q.next)&&delete q.next;if(w)return h?w.next=h:delete w.next,this;if(!l)return this._root=h,this;h?l[V]=h:delete l[V];(q=l[0]||l[1]||l[2]||l[3])&&
q===(l[3]||l[2]||l[1]||l[0])&&!q.length&&(U?U[f]=q:this._root=q);return this};Qa.removeAll=function(h){for(var l=0,q=h.length;l<q;++l)this.remove(h[l]);return this};Qa.root=function(){return this._root};Qa.size=function(){var h=0;this.visit(function(l){if(!l.length){do++h;while(l=l.next)}});return h};Qa.visit=function(h){var l=[],q,w=this._root,B,F,K,P;for(w&&l.push(new Ka(w,this._x0,this._y0,this._x1,this._y1));q=l.pop();)if(!h(w=q.node,F=q.x0,K=q.y0,P=q.x1,q=q.y1)&&w.length){var x=(F+P)/2,y=(K+
q)/2;(B=w[3])&&l.push(new Ka(B,x,y,P,q));(B=w[2])&&l.push(new Ka(B,F,y,x,q));(B=w[1])&&l.push(new Ka(B,x,K,P,y));(B=w[0])&&l.push(new Ka(B,F,K,x,y))}return this};Qa.visitAfter=function(h){var l=[],q=[],w;for(this._root&&l.push(new Ka(this._root,this._x0,this._y0,this._x1,this._y1));w=l.pop();){var B=w.node;if(B.length){var F,K=w.x0,P=w.y0,x=w.x1,y=w.y1,I=(K+x)/2,Q=(P+y)/2;(F=B[0])&&l.push(new Ka(F,K,P,I,Q));(F=B[1])&&l.push(new Ka(F,I,P,x,Q));(F=B[2])&&l.push(new Ka(F,K,Q,I,y));(F=B[3])&&l.push(new Ka(F,
I,Q,x,y))}q.push(w)}for(;w=q.pop();)h(w.node,w.x0,w.y0,w.x1,w.y1);return this};Qa.x=function(h){return arguments.length?(this._x=h,this):this._x};Qa.y=function(h){return arguments.length?(this._y=h,this):this._y};var Ct=Math.PI*(3-Math.sqrt(5)),lq=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;bd.prototype=tg.prototype;tg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?
",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var yj,zj={"%":function(h,l){return(100*h).toFixed(l)},b:function(h){return Math.round(h).toString(2)},c:function(h){return h+""},d:function(h){return Math.round(h).toString(10)},e:function(h,l){return h.toExponential(l)},f:function(h,l){return h.toFixed(l)},g:function(h,l){return h.toPrecision(l)},o:function(h){return Math.round(h).toString(8)},p:function(h,l){return uj(100*h,l)},r:uj,s:function(h,l){var q=
re(h,l);if(!q)return h+"";var w=q[0];q=q[1];q=q-(yj=3*Math.max(-8,Math.min(8,Math.floor(q/3))))+1;var B=w.length;return q===B?w:q>B?w+Array(q-B+1).join("0"):0<q?w.slice(0,q)+"."+w.slice(q):"0."+Array(1-q).join("0")+re(h,Math.max(0,l+q-1))[0]},X:function(h){return Math.round(h).toString(16).toUpperCase()},x:function(h){return Math.round(h).toString(16)}},xj="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),se;Aj({decimal:".",thousands:",",grouping:[3],currency:["$",""]});fb.prototype={constructor:fb,
reset:function(){this.s=this.t=0},add:function(h){Ej(wf,h,this.t);Ej(this,wf.s,this.s);this.s?this.t+=wf.t:this.s=wf.t},valueOf:function(){return this.s}};var wf=new fb,oa=Math.PI,wa=oa/2,ue=oa/4,Sa=2*oa,va=180/oa,ia=oa/180,ra=Math.abs,wc=Math.atan,Ma=Math.atan2,da=Math.cos,Ne=Math.ceil,Am=Math.exp,Se=Math.log,$g=Math.pow,ca=Math.sin,ld=Math.sign||function(h){return 0<h?1:0>h?-1:0},Ba=Math.sqrt,vc=Math.tan,Jj={Feature:function(h,l){te(h.geometry,l)},FeatureCollection:function(h,l){h=h.features;for(var q=
-1,w=h.length;++q<w;)te(h[q].geometry,l)}},Hj={Sphere:function(h,l){l.sphere()},Point:function(h,l){h=h.coordinates;l.point(h[0],h[1],h[2])},MultiPoint:function(h,l){for(var q=h.coordinates,w=-1,B=q.length;++w<B;)h=q[w],l.point(h[0],h[1],h[2])},LineString:function(h,l){ug(h.coordinates,l,0)},MultiLineString:function(h,l){h=h.coordinates;for(var q=-1,w=h.length;++q<w;)ug(h[q],l,0)},Polygon:function(h,l){Ij(h.coordinates,l)},MultiPolygon:function(h,l){h=h.coordinates;for(var q=-1,w=h.length;++q<w;)Ij(h[q],
l)},GeometryCollection:function(h,l){h=h.geometries;for(var q=-1,w=h.length;++q<w;)te(h[q],l)}},ve=new fb,xf=new fb,Lj,Mj,vg,wg,xg,lb={point:xa,lineStart:xa,lineEnd:xa,polygonStart:function(){ve.reset();lb.lineStart=mq;lb.lineEnd=oq},polygonEnd:function(){var h=+ve;xf.add(0>h?Sa+h:h);this.lineStart=this.lineEnd=this.point=xa},sphere:function(){xf.add(Sa)}},za,Wa,Aa,Za,Wb,Rj,Sj,pc,cd=new fb,Hb,tb,ub={point:zg,lineStart:Oj,lineEnd:Pj,polygonStart:function(){ub.point=Qj;ub.lineStart=pq;ub.lineEnd=qq;
cd.reset();lb.polygonStart()},polygonEnd:function(){lb.polygonEnd();ub.point=zg;ub.lineStart=Oj;ub.lineEnd=Pj;0>ve?(za=-(Aa=180),Wa=-(Za=90)):1E-6<cd?Za=90:-1E-6>cd&&(Wa=-90);tb[0]=za;tb[1]=Aa}},ed,De,Ae,Be,Ce,Ee,Fe,Ge,Bg,Cg,Dg,Xj,Yj,Na,Oa,Pa,hb={sphere:xa,point:Ag,lineStart:Uj,lineEnd:Vj,polygonStart:function(){hb.lineStart=uq;hb.lineEnd=wq},polygonEnd:function(){hb.lineStart=Uj;hb.lineEnd=Vj}};Fg.invert=Fg;var Hg=new fb,Yg=jk(function(){return!0},function(h){var l=NaN,q=NaN,w=NaN,B;return{lineStart:function(){h.lineStart();
B=1},point:function(F,K){var P=0<F?oa:-oa,x=ra(F-l);if(1E-6>ra(x-oa))h.point(l,q=0<(q+K)/2?wa:-wa),h.point(w,q),h.lineEnd(),h.lineStart(),h.point(P,q),h.point(F,q),B=0;else if(w!==P&&x>=oa){1E-6>ra(l-w)&&(l-=1E-6*w);1E-6>ra(F-P)&&(F-=1E-6*P);x=l;var y=q,I=F,Q,V,N=ca(x-I);q=1E-6<ra(N)?wc((ca(y)*(V=da(K))*ca(I)-ca(K)*(Q=da(y))*ca(x))/(Q*V*N)):(y+K)/2;h.point(w,q);h.lineEnd();h.lineStart();h.point(P,q);B=0}h.point(l=F,q=K);w=P},lineEnd:function(){h.lineEnd();l=q=NaN},clean:function(){return 2-B}}},function(h,
l,q,w){null==h?(q*=wa,w.point(-oa,q),w.point(0,q),w.point(oa,q),w.point(oa,0),w.point(oa,-q),w.point(0,-q),w.point(-oa,-q),w.point(-oa,0),w.point(-oa,q)):1E-6<ra(h[0]-l[0])?(h=h[0]<l[0]?oa:-oa,q=q*h/2,w.point(-h,q),w.point(0,q),w.point(h,q)):w.point(l[0],l[1])},[-oa,-wa]),Jg=new fb,Ig,Ke,Le,rc={sphere:xa,point:xa,lineStart:function(){rc.point=Bq;rc.lineEnd=Aq},lineEnd:xa,polygonStart:xa,polygonEnd:xa},Kg=[null,null],Dq={type:"LineString",coordinates:Kg},Bm={Feature:function(h,l){return Me(h.geometry,
l)},FeatureCollection:function(h,l){h=h.features;for(var q=-1,w=h.length;++q<w;)if(Me(h[q].geometry,l))return!0;return!1}},mk={Sphere:function(){return!0},Point:function(h,l){return 0===sc(h.coordinates,l)},MultiPoint:function(h,l){h=h.coordinates;for(var q=-1,w=h.length;++q<w;)if(0===sc(h[q],l))return!0;return!1},LineString:function(h,l){return nk(h.coordinates,l)},MultiLineString:function(h,l){h=h.coordinates;for(var q=-1,w=h.length;++q<w;)if(nk(h[q],l))return!0;return!1},Polygon:function(h,l){return ok(h.coordinates,
l)},MultiPolygon:function(h,l){h=h.coordinates;for(var q=-1,w=h.length;++q<w;)if(ok(h[q],l))return!0;return!1},GeometryCollection:function(h,l){h=h.geometries;for(var q=-1,w=h.length;++q<w;)if(Me(h[q],l))return!0;return!1}},Qh=new fb,Ng=new fb,uk,vk,Lg,Mg,vb={point:xa,lineStart:xa,lineEnd:xa,polygonStart:function(){vb.lineStart=Fq;vb.lineEnd=Hq},polygonEnd:function(){vb.lineStart=vb.lineEnd=vb.point=xa;Qh.add(ra(Ng));Ng.reset()},result:function(){var h=Qh/2;Qh.reset();return h}},Mc=Infinity,yf=Mc,
Md=-Mc,zf=Md,Qe={point:function(h,l){h<Mc&&(Mc=h);h>Md&&(Md=h);l<yf&&(yf=l);l>zf&&(zf=l)},lineStart:xa,lineEnd:xa,polygonStart:xa,polygonEnd:xa,result:function(){var h=[[Mc,yf],[Md,zf]];Md=zf=-(yf=Mc=Infinity);return h}},Og=0,Pg=0,fd=0,Oe=0,Pe=0,tc=0,Qg=0,Rg=0,gd=0,zk,Ak,mb,nb,$a={point:Yb,lineStart:wk,lineEnd:xk,polygonStart:function(){$a.lineStart=Kq;$a.lineEnd=Mq},polygonEnd:function(){$a.point=Yb;$a.lineStart=wk;$a.lineEnd=xk},result:function(){var h=gd?[Qg/gd,Rg/gd]:tc?[Oe/tc,Pe/tc]:fd?[Og/fd,
Pg/fd]:[NaN,NaN];Og=Pg=fd=Oe=Pe=tc=Qg=Rg=gd=0;return h}};Bk.prototype={_radius:4.5,pointRadius:function(h){return this._radius=h,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(h,l){switch(this._point){case 0:this._context.moveTo(h,l);this._point=1;break;case 1:this._context.lineTo(h,l);break;default:this._context.moveTo(h+this._radius,
l),this._context.arc(h,l,this._radius,0,Sa)}},result:xa};var Sg=new fb,Rh,Dk,Ek,id,jd,hd={point:xa,lineStart:function(){hd.point=Nq},lineEnd:function(){Rh&&Ck(Dk,Ek);hd.point=xa},polygonStart:function(){Rh=!0},polygonEnd:function(){Rh=null},result:function(){var h=+Sg;Sg.reset();return h}};Fk.prototype={_radius:4.5,_circle:Gk(4.5),pointRadius:function(h){(h=+h)!==this._radius&&(this._radius=h,this._circle=null);return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},
lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(h,l){switch(this._point){case 0:this._string.push("M",h,",",l);this._point=1;break;case 1:this._string.push("L",h,",",l);break;default:null==this._circle&&(this._circle=Gk(this._radius)),this._string.push("M",h,",",l,this._circle)}},result:function(){if(this._string.length){var h=this._string.join("");this._string=[];return h}return null}};Tg.prototype={constructor:Tg,point:function(h,
l){this.stream.point(h,l)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Oq=da(30*ia),Rq=kd({point:function(h,l){this.stream.point(h*ia,l*ia)}}),Sh=Mk(function(h){return Ba(2/(1+h))});Sh.invert=md(function(h){return 2*La(h/2)});var Th=Mk(function(h){return(h=Fj(h))&&h/ca(h)});Th.invert=md(function(h){return h});nd.invert=
function(h,l){return[h,2*wc(Am(l))-wa]};od.invert=od;var Te=Ba(3)/2;ah.invert=function(h,l){for(var q=l,w=q*q,B=w*w*w,F=0,K;12>F&&!(K=q*(1.340264+-.081106*w+B*(8.93E-4+.003796*w))-l,w=1.340264+3*-.081106*w+B*(7*8.93E-4+.034164*w),q-=K/=w,w=q*q,B=w*w*w,1E-12>ra(K));++F);return[Te*h*(1.340264+3*-.081106*w+B*(7*8.93E-4+.034164*w))/da(q),La(ca(q)/Te)]};bh.invert=md(wc);ch.invert=function(h,l){var q=l,w=25;do{var B=q*q;var F=B*B;q-=F=(q*(1.007226+B*(.015085+F*(-.044475+.028874*B-.005916*F)))-l)/(1.007226+
B*(.045255+F*(-.311325+.259866*B-.005916*11*F)))}while(1E-6<ra(F)&&0<--w);return[h/(.8707+(B=q*q)*(-.131979+B*(-.013791+B*B*B*(.003971-.001529*B)))),q]};dh.invert=md(La);eh.invert=md(function(h){return 2*wc(h)});fh.invert=function(h,l){return[-l,2*wc(Am(h))-wa]};xc.prototype=gh.prototype={constructor:xc,count:function(){return this.eachAfter(Zq)},each:function(h){var l,q=[this],w;do{var B=q.reverse();for(q=[];l=B.pop();)if(h(l),l=l.children){var F=0;for(w=l.length;F<w;++F)q.push(l[F])}}while(q.length);
return this},eachAfter:function(h){for(var l,q=[this],w=[],B,F;l=q.pop();)if(w.push(l),l=l.children)for(B=0,F=l.length;B<F;++B)q.push(l[B]);for(;l=w.pop();)h(l);return this},eachBefore:function(h){for(var l,q=[this],w;l=q.pop();)if(h(l),l=l.children)for(w=l.length-1;0<=w;--w)q.push(l[w]);return this},sum:function(h){return this.eachAfter(function(l){for(var q=+h(l.data)||0,w=l.children,B=w&&w.length;0<=--B;)q+=w[B].value;l.value=q})},sort:function(h){return this.eachBefore(function(l){l.children&&
l.children.sort(h)})},path:function(h){var l=this;var q=l;var w=h;if(q!==w){var B=q.ancestors(),F=w.ancestors(),K=null;q=B.pop();for(w=F.pop();q===w;)K=q,q=B.pop(),w=F.pop();q=K}for(w=[l];l!==q;)l=l.parent,w.push(l);for(l=w.length;h!==q;)w.splice(l,0,h),h=h.parent;return w},ancestors:function(){for(var h=this,l=[h];h=h.parent;)l.push(h);return l},descendants:function(){var h=[];this.each(function(l){h.push(l)});return h},leaves:function(){var h=[];this.eachBefore(function(l){l.children||h.push(l)});
return h},links:function(){var h=this,l=[];h.each(function(q){q!==h&&l.push({source:q.parent,target:q})});return l},copy:function(){return gh(this).eachBefore(ar)}};var br=Array.prototype.slice,Dt={depth:-1},Cm={};Ye.prototype=Object.create(xc.prototype);var Dm=(1+Math.sqrt(5))/2,Em=function q(l){function w(B,F,K,P,x){al(l,B,F,K,P,x)}w.ratio=function(B){return q(1<(B=+B)?B:1)};return w}(Dm),Et=function w(q){function B(F,K,P,x,y){if((I=F._squarify)&&I.ratio===q)for(var I,Q,V,N=-1,U,f=I.length,n=F.value;++N<
f;){F=I[N];Q=F.children;V=F.value=0;for(U=Q.length;V<U;++V)F.value+=Q[V].value;F.dice?qd(F,K,P,x,P+=(y-P)*F.value/n):Ze(F,K,P,K+=(x-K)*F.value/n,y);n-=F.value}else F._squarify=I=al(q,F,K,P,x,y),I.ratio=q}B.ratio=function(F){return w(1<(F=+F)?F:1)};return B}(Dm),Ft=function B(w){function F(K,P){K=null==K?0:+K;P=null==P?1:+P;1===arguments.length?(P=K,K=0):P-=K;return function(){return w()*P+K}}F.source=B;return F}(zc),Fm=function F(B){function K(P,x){var y,I;P=null==P?0:+P;x=null==x?1:+x;return function(){if(null!=
y){var Q=y;y=null}else{do y=2*B()-1,Q=2*B()-1,I=y*y+Q*Q;while(!I||1<I)}return P+x*Q*Math.sqrt(-2*Math.log(I)/I)}}K.source=F;return K}(zc),Gt=function K(F){function P(){var x=Fm.source(F).apply(this,arguments);return function(){return Math.exp(x())}}P.source=K;return P}(zc),Gm=function P(K){function x(y){return function(){for(var I=0,Q=0;Q<y;++Q)I+=K();return I}}x.source=P;return x}(zc),Ht=function x(P){function y(I){var Q=Gm.source(P)(I);return function(){return Q()/I}}y.source=x;return y}(zc),It=
function y(x){function I(Q){return function(){return-Math.log(1-x())/Q}}I.source=y;return I}(zc),Hm=Array.prototype,qh=Hm.map,Ib=Hm.slice,mh={name:"implicit"},el=[0,1],sh=new Date,th=new Date,dc=Da(function(){},function(x,y){x.setTime(+x+y)},function(x,y){return y-x});dc.every=function(x){x=Math.floor(x);return isFinite(x)&&0<x?1<x?Da(function(y){y.setTime(Math.floor(y/x)*x)},function(y,I){y.setTime(+y+I*x)},function(y,I){return(I-y)/x}):dc:null};var Im=dc.range,Nd=Da(function(x){x.setTime(1E3*Math.floor(x/
1E3))},function(x,y){x.setTime(+x+1E3*y)},function(x,y){return(y-x)/1E3},function(x){return x.getUTCSeconds()}),Jm=Nd.range,Uh=Da(function(x){x.setTime(6E4*Math.floor(x/6E4))},function(x,y){x.setTime(+x+6E4*y)},function(x,y){return(y-x)/6E4},function(x){return x.getMinutes()}),Jt=Uh.range,Vh=Da(function(x){var y=6E4*x.getTimezoneOffset()%36E5;0>y&&(y+=36E5);x.setTime(36E5*Math.floor((+x-y)/36E5)+y)},function(x,y){x.setTime(+x+36E5*y)},function(x,y){return(y-x)/36E5},function(x){return x.getHours()}),
Kt=Vh.range,vd=Da(function(x){x.setHours(0,0,0,0)},function(x,y){x.setDate(x.getDate()+y)},function(x,y){return(y-x-6E4*(y.getTimezoneOffset()-x.getTimezoneOffset()))/864E5},function(x){return x.getDate()-1}),Lt=vd.range,yd=ac(0),ud=ac(1),Km=ac(2),Lm=ac(3),zd=ac(4),Mm=ac(5),Nm=ac(6),Om=yd.range,Mt=ud.range,Nt=Km.range,Ot=Lm.range,Pt=zd.range,Qt=Mm.range,Rt=Nm.range,Wh=Da(function(x){x.setDate(1);x.setHours(0,0,0,0)},function(x,y){x.setMonth(x.getMonth()+y)},function(x,y){return y.getMonth()-x.getMonth()+
12*(y.getFullYear()-x.getFullYear())},function(x){return x.getMonth()}),St=Wh.range,wb=Da(function(x){x.setMonth(0,1);x.setHours(0,0,0,0)},function(x,y){x.setFullYear(x.getFullYear()+y)},function(x,y){return y.getFullYear()-x.getFullYear()},function(x){return x.getFullYear()});wb.every=function(x){return isFinite(x=Math.floor(x))&&0<x?Da(function(y){y.setFullYear(Math.floor(y.getFullYear()/x)*x);y.setMonth(0,1);y.setHours(0,0,0,0)},function(y,I){y.setFullYear(y.getFullYear()+I*x)}):null};var Tt=wb.range,
Xh=Da(function(x){x.setUTCSeconds(0,0)},function(x,y){x.setTime(+x+6E4*y)},function(x,y){return(y-x)/6E4},function(x){return x.getUTCMinutes()}),Ut=Xh.range,Yh=Da(function(x){x.setUTCMinutes(0,0,0)},function(x,y){x.setTime(+x+36E5*y)},function(x,y){return(y-x)/36E5},function(x){return x.getUTCHours()}),Vt=Yh.range,td=Da(function(x){x.setUTCHours(0,0,0,0)},function(x,y){x.setUTCDate(x.getUTCDate()+y)},function(x,y){return(y-x)/864E5},function(x){return x.getUTCDate()-1}),Wt=td.range,Ad=bc(0),sd=bc(1),
Pm=bc(2),Qm=bc(3),Bd=bc(4),Rm=bc(5),Sm=bc(6),Tm=Ad.range,Xt=sd.range,Yt=Pm.range,Zt=Qm.range,$t=Bd.range,au=Rm.range,bu=Sm.range,Zh=Da(function(x){x.setUTCDate(1);x.setUTCHours(0,0,0,0)},function(x,y){x.setUTCMonth(x.getUTCMonth()+y)},function(x,y){return y.getUTCMonth()-x.getUTCMonth()+12*(y.getUTCFullYear()-x.getUTCFullYear())},function(x){return x.getUTCMonth()}),cu=Zh.range,xb=Da(function(x){x.setUTCMonth(0,1);x.setUTCHours(0,0,0,0)},function(x,y){x.setUTCFullYear(x.getUTCFullYear()+y)},function(x,
y){return y.getUTCFullYear()-x.getUTCFullYear()},function(x){return x.getUTCFullYear()});xb.every=function(x){return isFinite(x=Math.floor(x))&&0<x?Da(function(y){y.setUTCFullYear(Math.floor(y.getUTCFullYear()/x)*x);y.setUTCMonth(0,1);y.setUTCHours(0,0,0,0)},function(y,I){y.setUTCFullYear(y.getUTCFullYear()+I*x)}):null};var du=xb.range,ql={"-":"",_:" ",0:"0"},Ga=/^\s*\d+/,ns=/^%/,ms=/[\\^$*+?|[\]().{}]/g,Cc;Al({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var eu=Date.prototype.toISOString?os:d3.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),fu=+new Date("2000-01-01T00:00:00.000Z")?ps:d3.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),ss=6048E5,Bl=2592E6,vh=31536E6,gu=ka("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),hu=ka("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),
iu=ka("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ju=ka("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ku=ka("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),lu=ka("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),mu=ka("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),nu=ka("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),
ou=ka("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pu=ka("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qu=ka("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ru=ka("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Um="   d8b365f5f5f55ab4ac a6611adfc27d80cdc1018571 a6611adfc27df5f5f580cdc1018571 8c510ad8b365f6e8c3c7eae55ab4ac01665e 8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e 8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e 8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e 5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30 5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30".split(" ").map(ka),
su=ua(Um),Vm="   af8dc3f7f7f77fbf7b 7b3294c2a5cfa6dba0008837 7b3294c2a5cff7f7f7a6dba0008837 762a83af8dc3e7d4e8d9f0d37fbf7b1b7837 762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837 762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837 762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837 40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b 40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b".split(" ").map(ka),tu=ua(Vm),Wm="   e9a3c9f7f7f7a1d76a d01c8bf1b6dab8e1864dac26 d01c8bf1b6daf7f7f7b8e1864dac26 c51b7de9a3c9fde0efe6f5d0a1d76a4d9221 c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221 c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221 c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221 8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419 8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419".split(" ").map(ka),
uu=ua(Wm),Xm="   998ec3f7f7f7f1a340 5e3c99b2abd2fdb863e66101 5e3c99b2abd2f7f7f7fdb863e66101 542788998ec3d8daebfee0b6f1a340b35806 542788998ec3d8daebf7f7f7fee0b6f1a340b35806 5427888073acb2abd2d8daebfee0b6fdb863e08214b35806 5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806 2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08 2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08".split(" ").map(ka),vu=ua(Xm),Ym="   ef8a62f7f7f767a9cf ca0020f4a58292c5de0571b0 ca0020f4a582f7f7f792c5de0571b0 b2182bef8a62fddbc7d1e5f067a9cf2166ac b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac 67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061 67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061".split(" ").map(ka),
wu=ua(Ym),Zm="   ef8a62ffffff999999 ca0020f4a582bababa404040 ca0020f4a582ffffffbababa404040 b2182bef8a62fddbc7e0e0e09999994d4d4d b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d 67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a 67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a".split(" ").map(ka),xu=ua(Zm),$m="   fc8d59ffffbf91bfdb d7191cfdae61abd9e92c7bb6 d7191cfdae61ffffbfabd9e92c7bb6 d73027fc8d59fee090e0f3f891bfdb4575b4 d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4 d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4 d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4 a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695 a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695".split(" ").map(ka),
yu=ua($m),an="   fc8d59ffffbf91cf60 d7191cfdae61a6d96a1a9641 d7191cfdae61ffffbfa6d96a1a9641 d73027fc8d59fee08bd9ef8b91cf601a9850 d73027fc8d59fee08bffffbfd9ef8b91cf601a9850 d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850 d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850 a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837 a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837".split(" ").map(ka),zu=ua(an),bn="   fc8d59ffffbf99d594 d7191cfdae61abdda42b83ba d7191cfdae61ffffbfabdda42b83ba d53e4ffc8d59fee08be6f59899d5943288bd d53e4ffc8d59fee08bffffbfe6f59899d5943288bd d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd 9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2 9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2".split(" ").map(ka),
Au=ua(bn),cn="   e5f5f999d8c92ca25f edf8fbb2e2e266c2a4238b45 edf8fbb2e2e266c2a42ca25f006d2c edf8fbccece699d8c966c2a42ca25f006d2c edf8fbccece699d8c966c2a441ae76238b45005824 f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824 f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b".split(" ").map(ka),Bu=ua(cn),dn="   e0ecf49ebcda8856a7 edf8fbb3cde38c96c688419d edf8fbb3cde38c96c68856a7810f7c edf8fbbfd3e69ebcda8c96c68856a7810f7c edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b".split(" ").map(ka),
Cu=ua(dn),en="   e0f3dba8ddb543a2ca f0f9e8bae4bc7bccc42b8cbe f0f9e8bae4bc7bccc443a2ca0868ac f0f9e8ccebc5a8ddb57bccc443a2ca0868ac f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081".split(" ").map(ka),Du=ua(en),fn="   fee8c8fdbb84e34a33 fef0d9fdcc8afc8d59d7301f fef0d9fdcc8afc8d59e34a33b30000 fef0d9fdd49efdbb84fc8d59e34a33b30000 fef0d9fdd49efdbb84fc8d59ef6548d7301f990000 fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000 fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000".split(" ").map(ka),
Eu=ua(fn),gn="   ece2f0a6bddb1c9099 f6eff7bdc9e167a9cf02818a f6eff7bdc9e167a9cf1c9099016c59 f6eff7d0d1e6a6bddb67a9cf1c9099016c59 f6eff7d0d1e6a6bddb67a9cf3690c002818a016450 fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450 fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636".split(" ").map(ka),Fu=ua(gn),hn="   ece7f2a6bddb2b8cbe f1eef6bdc9e174a9cf0570b0 f1eef6bdc9e174a9cf2b8cbe045a8d f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858".split(" ").map(ka),
Gu=ua(hn),jn="   e7e1efc994c7dd1c77 f1eef6d7b5d8df65b0ce1256 f1eef6d7b5d8df65b0dd1c77980043 f1eef6d4b9dac994c7df65b0dd1c77980043 f1eef6d4b9dac994c7df65b0e7298ace125691003f f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f".split(" ").map(ka),Hu=ua(jn),kn="   fde0ddfa9fb5c51b8a feebe2fbb4b9f768a1ae017e feebe2fbb4b9f768a1c51b8a7a0177 feebe2fcc5c0fa9fb5f768a1c51b8a7a0177 feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177 fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177 fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a".split(" ").map(ka),
Iu=ua(kn),ln="   edf8b17fcdbb2c7fb8 ffffcca1dab441b6c4225ea8 ffffcca1dab441b6c42c7fb8253494 ffffccc7e9b47fcdbb41b6c42c7fb8253494 ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84 ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84 ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58".split(" ").map(ka),Ju=ua(ln),mn="   f7fcb9addd8e31a354 ffffccc2e69978c679238443 ffffccc2e69978c67931a354006837 ffffccd9f0a3addd8e78c67931a354006837 ffffccd9f0a3addd8e78c67941ab5d238443005a32 ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32 ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529".split(" ").map(ka),
Ku=ua(mn),nn="   fff7bcfec44fd95f0e ffffd4fed98efe9929cc4c02 ffffd4fed98efe9929d95f0e993404 ffffd4fee391fec44ffe9929d95f0e993404 ffffd4fee391fec44ffe9929ec7014cc4c028c2d04 ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04 ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506".split(" ").map(ka),Lu=ua(nn),on="   ffeda0feb24cf03b20 ffffb2fecc5cfd8d3ce31a1c ffffb2fecc5cfd8d3cf03b20bd0026 ffffb2fed976feb24cfd8d3cf03b20bd0026 ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026 ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026 ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026".split(" ").map(ka),
Mu=ua(on),pn="   deebf79ecae13182bd eff3ffbdd7e76baed62171b5 eff3ffbdd7e76baed63182bd08519c eff3ffc6dbef9ecae16baed63182bd08519c eff3ffc6dbef9ecae16baed64292c62171b5084594 f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594 f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b".split(" ").map(ka),Nu=ua(pn),qn="   e5f5e0a1d99b31a354 edf8e9bae4b374c476238b45 edf8e9bae4b374c47631a354006d2c edf8e9c7e9c0a1d99b74c47631a354006d2c edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32 f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32 f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b".split(" ").map(ka),
Ou=ua(qn),rn="   f0f0f0bdbdbd636363 f7f7f7cccccc969696525252 f7f7f7cccccc969696636363252525 f7f7f7d9d9d9bdbdbd969696636363252525 f7f7f7d9d9d9bdbdbd969696737373525252252525 fffffff0f0f0d9d9d9bdbdbd969696737373525252252525 fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000".split(" ").map(ka),Pu=ua(rn),sn="   efedf5bcbddc756bb1 f2f0f7cbc9e29e9ac86a51a3 f2f0f7cbc9e29e9ac8756bb154278f f2f0f7dadaebbcbddc9e9ac8756bb154278f f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486 fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486 fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d".split(" ").map(ka),
Qu=ua(sn),tn="   fee0d2fc9272de2d26 fee5d9fcae91fb6a4acb181d fee5d9fcae91fb6a4ade2d26a50f15 fee5d9fcbba1fc9272fb6a4ade2d26a50f15 fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d".split(" ").map(ka),Ru=ua(tn),un="   fee6cefdae6be6550d feeddefdbe85fd8d3cd94701 feeddefdbe85fd8d3ce6550da63603 feeddefdd0a2fdae6bfd8d3ce6550da63603 feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04 fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04 fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704".split(" ").map(ka),
Su=ua(un),Tu=sf(db(300,.5,0),db(-240,.5,1)),Uu=sf(db(-100,.75,.35),db(80,1.5,.8)),Vu=sf(db(260,.75,.35),db(80,1.5,.8)),Af=db(),Bf=hc(),Wu=Math.PI/3,Xu=2*Math.PI/3,Yu=cf(ka("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),
Zu=cf(ka("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),
$u=cf(ka("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),
av=cf(ka("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),
vn=Math.abs,Ia=Math.atan2,ec=Math.cos,ys=Math.max,$h=Math.min,pb=Math.sin,Dc=Math.sqrt,Kb=Math.PI,df=Kb/2,Lb=2*Kb;Gl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x;y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=
2;default:this._context.lineTo(x,y)}}};var Kl=zh(ff);Il.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(x,y){this._curve.point(y*Math.sin(x),y*-Math.cos(x))}};var Bh=Array.prototype.slice,ai={draw:function(x,y){y=Math.sqrt(y/Kb);x.moveTo(y,0);x.arc(0,0,y,0,Lb)}},wn={draw:function(x,y){y=Math.sqrt(y/5)/2;x.moveTo(-3*y,-y);x.lineTo(-y,-y);x.lineTo(-y,
-3*y);x.lineTo(y,-3*y);x.lineTo(y,-y);x.lineTo(3*y,-y);x.lineTo(3*y,y);x.lineTo(y,y);x.lineTo(y,3*y);x.lineTo(-y,3*y);x.lineTo(-y,y);x.lineTo(-3*y,y);x.closePath()}},xn=Math.sqrt(1/3),bv=2*xn,yn={draw:function(x,y){y=Math.sqrt(y/bv);var I=y*xn;x.moveTo(0,-y);x.lineTo(I,0);x.lineTo(0,y);x.lineTo(-I,0);x.closePath()}},zn=Math.sin(Kb/10)/Math.sin(7*Kb/10),cv=Math.sin(Lb/10)*zn,dv=-Math.cos(Lb/10)*zn,An={draw:function(x,y){y=Math.sqrt(.8908130915292852*y);var I=cv*y,Q=dv*y;x.moveTo(0,-y);x.lineTo(I,Q);
for(var V=1;5>V;++V){var N=Lb*V/5,U=Math.cos(N);N=Math.sin(N);x.lineTo(N*y,-U*y);x.lineTo(U*I-N*Q,N*I+U*Q)}x.closePath()}},Bn={draw:function(x,y){y=Math.sqrt(y);var I=-y/2;x.rect(I,I,y,y)}},bi=Math.sqrt(3),Cn={draw:function(x,y){y=-Math.sqrt(y/(3*bi));x.moveTo(0,2*y);x.lineTo(-bi*y,-y);x.lineTo(bi*y,-y);x.closePath()}},ab=Math.sqrt(3)/2,ci=1/Math.sqrt(12),ev=3*(ci/2+1),Dn={draw:function(x,y){var I=Math.sqrt(y/ev);y=I/2;var Q=I*ci;I=I*ci+I;var V=-y;x.moveTo(y,Q);x.lineTo(y,I);x.lineTo(V,I);x.lineTo(-.5*
y-ab*Q,ab*y+-.5*Q);x.lineTo(-.5*y-ab*I,ab*y+-.5*I);x.lineTo(-.5*V-ab*I,ab*V+-.5*I);x.lineTo(-.5*y+ab*Q,-.5*Q-ab*y);x.lineTo(-.5*y+ab*I,-.5*I-ab*y);x.lineTo(-.5*V+ab*I,-.5*I-ab*V);x.closePath()}},fv=[ai,wn,yn,Bn,An,Cn,Dn];hf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:gf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x;y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gf(this,x,y)}this._x0=this._x1;this._x1=x;this._y0=this._y1;this._y1=y}};Ml.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._x0=this._x1=
this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,
y){x=+x;y=+y;switch(this._point){case 0:this._point=1;this._x2=x;this._y2=y;break;case 1:this._point=2;this._x3=x;this._y3=y;break;case 2:this._point=3;this._x4=x;this._y4=y;this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:gf(this,x,y)}this._x0=this._x1;this._x1=x;this._y0=this._y1;this._y1=y}};Nl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||
0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x;y=+y;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var I=(this._x0+4*this._x1+x)/6,Q=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(I,Q):this._context.moveTo(I,Q);break;case 3:this._point=4;default:gf(this,x,y)}this._x0=this._x1;this._x1=x;this._y0=this._y1;this._y1=y}};Ol.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},
lineEnd:function(){var x=this._x,y=this._y,I=x.length-1;if(0<I)for(var Q=x[0],V=y[0],N=x[I]-Q,U=y[I]-V,f=-1,n;++f<=I;)n=f/I,this._basis.point(this._beta*x[f]+(1-this._beta)*(Q+n*N),this._beta*y[f]+(1-this._beta)*(V+n*U));this._x=this._y=null;this._basis.lineEnd()},point:function(x,y){this._x.push(+x);this._y.push(+y)}};var gv=function I(y){function Q(V){return 1===y?new hf(V):new Ol(V,y)}Q.beta=function(V){return I(+V)};return Q}(.85);Ch.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jf(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(y,I){y=+y;I=+I;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(y,I):this._context.moveTo(y,I);break;case 1:this._point=2;this._x1=y;this._y1=
I;break;case 2:this._point=3;default:jf(this,y,I)}this._x0=this._x1;this._x1=this._x2;this._x2=y;this._y0=this._y1;this._y1=this._y2;this._y2=I}};var hv=function Q(I){function V(N){return new Ch(N,I)}V.tension=function(N){return Q(+N)};return V}(0);Dh.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(I,Q){I=+I;Q=+Q;switch(this._point){case 0:this._point=1;this._x3=I;this._y3=Q;break;case 1:this._point=2;this._context.moveTo(this._x4=I,this._y4=Q);break;case 2:this._point=3;this._x5=I;this._y5=Q;break;default:jf(this,I,Q)}this._x0=this._x1;this._x1=this._x2;this._x2=
I;this._y0=this._y1;this._y1=this._y2;this._y2=Q}};var iv=function V(Q){function N(U){return new Dh(U,Q)}N.tension=function(U){return V(+U)};return N}(0);Eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Q,V){Q=+Q;V=+V;switch(this._point){case 0:this._point=
1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jf(this,Q,V)}this._x0=this._x1;this._x1=this._x2;this._x2=Q;this._y0=this._y1;this._y1=this._y2;this._y2=V}};var jv=function N(V){function U(f){return new Eh(f,V)}U.tension=function(f){return N(+f)};return U}(0);Pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(V,N){V=+V;N=+N;if(this._point){var U=this._x2-V,f=this._y2-N;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(U*U+f*f,this._alpha))}switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(V,N):this._context.moveTo(V,N);break;case 1:this._point=2;break;case 2:this._point=3;default:Fh(this,V,N)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=V;this._y0=this._y1;this._y1=this._y2;this._y2=N}};var kv=function U(N){function f(n){return N?new Pl(n,N):new Ch(n,0)}f.alpha=function(n){return U(+n)};return f}(.5);Ql.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._x0=
this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(N,
U){N=+N;U=+U;if(this._point){var f=this._x2-N,n=this._y2-U;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(f*f+n*n,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=N;this._y3=U;break;case 1:this._point=2;this._context.moveTo(this._x4=N,this._y4=U);break;case 2:this._point=3;this._x5=N;this._y5=U;break;default:Fh(this,N,U)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=N;this._y0=this._y1;this._y1=
this._y2;this._y2=U}};var lv=function f(U){function n(u){return U?new Ql(u,U):new Dh(u,0)}n.alpha=function(u){return f(+u)};return n}(.5);Rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},
point:function(U,f){U=+U;f=+f;if(this._point){var n=this._x2-U,u=this._y2-f;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+u*u,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Fh(this,U,f)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=
this._x2;this._x2=U;this._y0=this._y1;this._y1=this._y2;this._y2=f}};var mv=function n(f){function u(r){return f?new Rl(r,f):new Eh(r,0)}u.alpha=function(r){return n(+r)};return u}(.5);Sl.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(f,n){f=+f;n=+n;this._point?this._context.lineTo(f,n):(this._point=1,this._context.moveTo(f,n))}};kf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gh(this,this._t0,Ul(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(f,n){var u=NaN;f=+f;n=+n;if(f!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(f,n):this._context.moveTo(f,n);break;
case 1:this._point=2;break;case 2:this._point=3;Gh(this,Ul(this,u=Tl(this,f,n)),u);break;default:Gh(this,this._t0,u=Tl(this,f,n))}this._x0=this._x1;this._x1=f;this._y0=this._y1;this._y1=n;this._t0=u}}};(Vl.prototype=Object.create(kf.prototype)).point=function(f,n){kf.prototype.point.call(this,n,f)};Wl.prototype={moveTo:function(f,n){this._context.moveTo(n,f)},closePath:function(){this._context.closePath()},lineTo:function(f,n){this._context.lineTo(n,f)},bezierCurveTo:function(f,n,u,r,t,z){this._context.bezierCurveTo(n,
f,r,u,z,t)}};Xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var f=this._x,n=this._y,u=f.length;if(u)if(this._line?this._context.lineTo(f[0],n[0]):this._context.moveTo(f[0],n[0]),2===u)this._context.lineTo(f[1],n[1]);else for(var r=Yl(f),t=Yl(n),z=0,D=1;D<u;++z,++D)this._context.bezierCurveTo(r[0][z],t[0][z],r[1][z],t[1][z],f[D],n[D]);(this._line||0!==this._line&&1===u)&&this._context.closePath();this._line=
1-this._line;this._x=this._y=null},point:function(f,n){this._x.push(+f);this._y.push(+n)}};lf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(f,n){f=+f;n=+n;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(f,n):this._context.moveTo(f,n);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,n),this._context.lineTo(f,n);else{var u=this._x*(1-this._t)+f*this._t;this._context.lineTo(u,this._y);this._context.lineTo(u,n)}}this._x=f;this._y=n}};mf.prototype={constructor:mf,insert:function(f,n){var u;if(f){n.P=f;if(n.N=f.N)f.N.P=n;f.N=n;if(f.R){for(f=f.R;f.L;)f=f.L;f.L=n}else f.R=n;var r=f}else this._?(f=bm(this._),n.P=null,n.N=f,f.P=f.L=n,r=f):(n.P=
n.N=null,this._=n,r=null);n.L=n.R=null;n.U=r;n.C=!0;for(f=n;r&&r.C;)n=r.U,r===n.L?(u=n.R)&&u.C?(r.C=u.C=!1,n.C=!0,f=n):(f===r.R&&(Ed(this,r),f=r,r=f.U),r.C=!1,n.C=!0,Fd(this,n)):(u=n.L)&&u.C?(r.C=u.C=!1,n.C=!0,f=n):(f===r.L&&(Fd(this,r),f=r,r=f.U),r.C=!1,n.C=!0,Ed(this,n)),r=f.U;this._.C=!1},remove:function(f){f.N&&(f.N.P=f.P);f.P&&(f.P.N=f.N);f.N=f.P=null;var n=f.U,u=f.L,r=f.R;var t=u?r?bm(r):u:r;n?n.L===f?n.L=t:n.R=t:this._=t;if(u&&r){var z=t.C;t.C=f.C;t.L=u;u.U=t;t!==r?(n=t.U,t.U=f.U,f=t.R,n.L=
f,t.R=r,r.U=t):(t.U=n,n=t,f=t.R)}else z=f.C,f=t;f&&(f.U=n);if(!z)if(f&&f.C)f.C=!1;else{do{if(f===this._)break;if(f===n.L){if(f=n.R,f.C&&(f.C=!1,n.C=!0,Ed(this,n),f=n.R),f.L&&f.L.C||f.R&&f.R.C){f.R&&f.R.C||(f.L.C=!1,f.C=!0,Fd(this,f),f=n.R);f.C=n.C;n.C=f.R.C=!1;Ed(this,n);f=this._;break}}else if(f=n.L,f.C&&(f.C=!1,n.C=!0,Fd(this,n),f=n.L),f.L&&f.L.C||f.R&&f.R.C){f.L&&f.L.C||(f.R.C=!1,f.C=!0,Ed(this,f),f=n.L);f.C=n.C;n.C=f.L.C=!1;Fd(this,n);f=this._;break}f.C=!0;f=n;n=n.U}while(!f.C);f&&(f.C=!1)}}};
var dm=[],Hh,fm=[],ta=1E-6,Os=1E-12,Ic,Ya,Id,Ha;Jh.prototype={constructor:Jh,polygons:function(){var f=this.edges;return this.cells.map(function(n){var u=n.halfedges.map(function(r){return cm(n,f[r])});u.data=n.site.data;return u})},triangles:function(){var f=[],n=this.edges;this.cells.forEach(function(u,r){if(D=(t=u.halfedges).length){u=u.site;var t,z=-1,D,A=n[t[D-1]];for(A=A.left===u?A.right:A.left;++z<D;){var C=A;A=n[t[z]];A=A.left===u?A.right:A.left;C&&A&&r<C.index&&r<A.index&&0>(u[0]-A[0])*(C[1]-
u[1])-(u[0]-C[0])*(A[1]-u[1])&&f.push([u.data,C.data,A.data])}}});return f},links:function(){return this.edges.filter(function(f){return f.right}).map(function(f){return{source:f.left.data,target:f.right.data}})},find:function(f,n,u){var r=this,t=r._found||0;var z=r.cells.length;for(var D;!(D=r.cells[t]);)if(++t>=z)return null;z=f-D.site[0];var A=n-D.site[1],C=z*z+A*A;do D=r.cells[z=t],t=null,D.halfedges.forEach(function(G){var O=r.edges[G];G=O.left;if(G!==D.site&&G||(G=O.right)){O=f-G[0];var S=n-
G[1];O=O*O+S*S;O<C&&(C=O,t=G.index)}});while(null!==t);r._found=z;return null==u||C<=u*u?D.site:null}};yb.prototype={constructor:yb,scale:function(f){return 1===f?this:new yb(this.k*f,this.x,this.y)},translate:function(f,n){return 0===f&0===n?this:new yb(this.k,this.x+this.k*f,this.y+this.k*n)},apply:function(f){return[f[0]*this.k+this.x,f[1]*this.k+this.y]},applyX:function(f){return f*this.k+this.x},applyY:function(f){return f*this.k+this.y},invert:function(f){return[(f[0]-this.x)/this.k,(f[1]-this.y)/
this.k]},invertX:function(f){return(f-this.x)/this.k},invertY:function(f){return(f-this.y)/this.k},rescaleX:function(f){return f.copy().domain(f.range().map(this.invertX,this).map(f.invert,f))},rescaleY:function(f){return f.copy().domain(f.range().map(this.invertY,this).map(f.invert,f))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qf=new yb(1,0,0);hm.prototype=yb.prototype;d3.version="5.7.0";d3.bisect=$b;d3.bisectRight=$b;d3.bisectLeft=Xs;d3.ascending=Mb;d3.bisector=
Cf;d3.cross=function(f,n,u){var r=f.length,t=n.length,z=Array(r*t),D,A,C;null==u&&(u=gi);for(D=C=0;D<r;++D){var G=f[D];for(A=0;A<t;++A,++C)z[C]=u(G,n[A])}return z};d3.descending=function(f,n){return n<f?-1:n>f?1:n>=f?0:NaN};d3.deviation=ii;d3.extent=Df;d3.histogram=function(){function f(t){var z,D=t.length,A=Array(D);for(z=0;z<D;++z)A[z]=n(t[z],z,t);z=u(A);var C=z[0],G=z[1],O=r(A,C,G);Array.isArray(O)||(O=Nb(C,G,O),O=Ta(Math.ceil(C/O)*O,G,O));for(var S=O.length;O[0]<=C;)O.shift(),--S;for(;O[S-1]>
G;)O.pop(),--S;var E=Array(S+1);for(z=0;z<=S;++z){var J=E[z]=[];J.x0=0<z?O[z-1]:C;J.x1=z<S?O[z]:G}for(z=0;z<D;++z)J=A[z],C<=J&&J<=G&&E[$b(O,J,0,S)].push(t[z]);return E}var n=Fn,u=Df,r=If;f.value=function(t){return arguments.length?(n="function"===typeof t?t:Od(t),f):n};f.domain=function(t){return arguments.length?(u="function"===typeof t?t:Od([t[0],t[1]]),f):u};f.thresholds=function(t){return arguments.length?(r="function"===typeof t?t:Array.isArray(t)?Od(Ys.call(t)):Od(t),f):r};return f};d3.thresholdFreedmanDiaconis=
function(f,n,u){f=Zs.call(f,Ab).sort(Mb);return Math.ceil((u-n)/(2*(Oc(f,.75)-Oc(f,.25))*Math.pow(f.length,-1/3)))};d3.thresholdScott=function(f,n,u){return Math.ceil((u-n)/(3.5*ii(f)*Math.pow(f.length,-1/3)))};d3.thresholdSturges=If;d3.max=ji;d3.mean=function(f,n){var u=f.length,r=u,t=-1,z,D=0;if(null==n)for(;++t<u;)isNaN(z=Ab(f[t]))?--r:D+=z;else for(;++t<u;)isNaN(z=Ab(n(f[t],t,f)))?--r:D+=z;if(r)return D/r};d3.median=function(f,n){var u=f.length,r=-1,t,z=[];if(null==n)for(;++r<u;)isNaN(t=Ab(f[r]))||
z.push(t);else for(;++r<u;)isNaN(t=Ab(n(f[r],r,f)))||z.push(t);return Oc(z.sort(Mb),.5)};d3.merge=Jf;d3.min=ki;d3.pairs=function(f,n){null==n&&(n=gi);for(var u=0,r=f.length-1,t=f[0],z=Array(0>r?0:r);u<r;)z[u]=n(t,t=f[++u]);return z};d3.permute=function(f,n){for(var u=n.length,r=Array(u);u--;)r[u]=f[n[u]];return r};d3.quantile=Oc;d3.range=Ta;d3.scan=function(f,n){if(u=f.length){var u,r=0,t=0,z,D=f[t];for(null==n&&(n=Mb);++r<u;)if(0>n(z=f[r],D)||0!==n(D,D))D=z,t=r;if(0===n(D,D))return t}};d3.shuffle=
function(f,n,u){u=(null==u?f.length:u)-(n=null==n?0:+n);for(var r,t;u;)t=Math.random()*u--|0,r=f[u+n],f[u+n]=f[t+n],f[t+n]=r;return f};d3.sum=function(f,n){var u=f.length,r=-1,t,z=0;if(null==n)for(;++r<u;){if(t=+f[r])z+=t}else for(;++r<u;)if(t=+n(f[r],r,f))z+=t;return z};d3.ticks=Ef;d3.tickIncrement=Nc;d3.tickStep=Nb;d3.transpose=li;d3.variance=hi;d3.zip=function(){return li(arguments)};d3.axisTop=function(f){return Pd(1,f)};d3.axisRight=function(f){return Pd(2,f)};d3.axisBottom=function(f){return Pd(3,
f)};d3.axisLeft=function(f){return Pd(4,f)};d3.brush=function(){return kg(ot)};d3.brushX=function(){return kg(le)};d3.brushY=function(){return kg(ke)};d3.brushSelection=function(f){return(f=f.__brush)?f.dim.output(f.selection):null};d3.chord=function(){function f(z){var D=z.length,A=[],C=Ta(D),G=[],O=[],S=O.groups=Array(D),E=Array(D*D),J,H;var L=0;for(J=-1;++J<D;){var T=0;for(H=-1;++H<D;)T+=z[J][H];A.push(T);G.push(Ta(D));L+=T}u&&C.sort(function(ea,la){return u(A[ea],A[la])});r&&G.forEach(function(ea,
la){ea.sort(function(pa,R){return r(z[la][pa],z[la][R])})});var M=(L=xm(0,wm-n*D)/L)?n:wm/D;T=0;for(J=-1;++J<D;){var X=T;for(H=-1;++H<D;){var Y=C[J],W=G[Y][H],ba=z[Y][W],aa=T,ha=T+=ba*L;E[W*D+Y]={index:Y,subindex:W,startAngle:aa,endAngle:ha,value:ba}}S[Y]={index:Y,startAngle:X,endAngle:T,value:A[Y]};T+=M}for(J=-1;++J<D;)for(H=J-1;++H<D;)C=E[H*D+J],G=E[J*D+H],(C.value||G.value)&&O.push(C.value<G.value?{source:G,target:C}:{source:C,target:G});return t?O.sort(t):O}var n=0,u=null,r=null,t=null;f.padAngle=
function(z){return arguments.length?(n=xm(0,z),f):n};f.sortGroups=function(z){return arguments.length?(u=z,f):u};f.sortSubgroups=function(z){return arguments.length?(r=z,f):r};f.sortChords=function(z){return arguments.length?(null==z?t=null:(t=Kp(z))._=z,f):t&&t._};return f};d3.ribbon=function(){function f(){var A,C=pt.call(arguments),G=n.apply(this,C),O=u.apply(this,C);G=+r.apply(this,(C[0]=G,C));var S=t.apply(this,C)-tf,E=z.apply(this,C)-tf,J=G*tm(S),H=G*um(S);O=+r.apply(this,(C[0]=O,C));var L=
t.apply(this,C)-tf;C=z.apply(this,C)-tf;D||(D=A=Eb());D.moveTo(J,H);D.arc(0,0,G,S,E);if(S!==L||E!==C)D.quadraticCurveTo(0,0,O*tm(L),O*um(L)),D.arc(0,0,O,L,C);D.quadraticCurveTo(0,0,J,H);D.closePath();if(A)return D=null,A+""||null}var n=Lp,u=Mp,r=Np,t=Op,z=Pp,D=null;f.radius=function(A){return arguments.length?(r="function"===typeof A?A:mg(+A),f):r};f.startAngle=function(A){return arguments.length?(t="function"===typeof A?A:mg(+A),f):t};f.endAngle=function(A){return arguments.length?(z="function"===
typeof A?A:mg(+A),f):z};f.source=function(A){return arguments.length?(n=A,f):n};f.target=function(A){return arguments.length?(u=A,f):u};f.context=function(A){return arguments.length?(D=null==A?null:A,f):D};return f};d3.nest=function(){function f(A,C,G,O){if(C>=u.length)return null!=t&&A.sort(t),null!=z?z(A):A;for(var S=-1,E=A.length,J=u[C++],H,L,T=rb(),M,X=G();++S<E;)(M=T.get(H=J(L=A[S])+""))?M.push(L):T.set(H,[L]);T.each(function(Y,W){O(X,W,f(Y,C,G,O))});return X}function n(A,C){if(++C>u.length)return A;
var G=r[C-1];if(null!=z&&C>=u.length)var O=A.entries();else O=[],A.each(function(S,E){O.push({key:E,values:n(S,C)})});return null!=G?O.sort(function(S,E){return G(S.key,E.key)}):O}var u=[],r=[],t,z,D;return D={object:function(A){return f(A,0,Qp,Rp)},map:function(A){return f(A,0,jj,kj)},entries:function(A){return n(f(A,0,jj,kj),0)},key:function(A){u.push(A);return D},sortKeys:function(A){r[u.length-1]=A;return D},sortValues:function(A){t=A;return D},rollup:function(A){z=A;return D}}};d3.set=lj;d3.map=
rb;d3.keys=function(f){var n=[],u;for(u in f)n.push(u);return n};d3.values=function(f){var n=[],u;for(u in f)n.push(f[u]);return n};d3.entries=function(f){var n=[],u;for(u in f)n.push({key:u,value:f[u]});return n};d3.color=Db;d3.rgb=hc;d3.hsl=Zd;d3.lab=$d;d3.hcl=ae;d3.lch=function(f,n,u,r){return 1===arguments.length?Ci(f):new jb(u,n,f,null==r?1:r)};d3.gray=function(f,n){return new cb(f,0,0,null==n?1:n)};d3.cubehelix=db;d3.contours=mj;d3.contourDensity=function(){function f(M){var X=new Float32Array(H*
L),Y=new Float32Array(H*L);M.forEach(function(W,ba,aa){var ha=+D(W,ba,aa)+J>>E,ea=+A(W,ba,aa)+J>>E;W=+C(W,ba,aa);0<=ha&&ha<H&&0<=ea&&ea<L&&(X[ha+ea*H]+=W)});og({width:H,height:L,data:X},{width:H,height:L,data:Y},S>>E);pg({width:H,height:L,data:Y},{width:H,height:L,data:X},S>>E);og({width:H,height:L,data:X},{width:H,height:L,data:Y},S>>E);pg({width:H,height:L,data:Y},{width:H,height:L,data:X},S>>E);og({width:H,height:L,data:X},{width:H,height:L,data:Y},S>>E);pg({width:H,height:L,data:Y},{width:H,height:L,
data:X},S>>E);M=T(X);Array.isArray(M)||(Y=ji(X),M=Nb(0,Y,M),M=Ta(0,Math.floor(Y/M)*M,M),M.shift());return mj().thresholds(M).size([H,L])(X).map(n)}function n(M){M.value*=Math.pow(2,-2*E);M.coordinates.forEach(u);return M}function u(M){M.forEach(r)}function r(M){M.forEach(t)}function t(M){M[0]=M[0]*Math.pow(2,E)-J;M[1]=M[1]*Math.pow(2,E)-J}function z(){J=3*S;H=G+2*J>>E;L=O+2*J>>E;return f}var D=Up,A=Vp,C=Wp,G=960,O=500,S=20,E=2,J=3*S,H=G+2*J>>E,L=O+2*J>>E,T=Fb(20);f.x=function(M){return arguments.length?
(D="function"===typeof M?M:Fb(+M),f):D};f.y=function(M){return arguments.length?(A="function"===typeof M?M:Fb(+M),f):A};f.weight=function(M){return arguments.length?(C="function"===typeof M?M:Fb(+M),f):C};f.size=function(M){if(!arguments.length)return[G,O];var X=Math.ceil(M[0]),Y=Math.ceil(M[1]);if(!(0<=X||0<=X))throw Error("invalid size");return G=X,O=Y,z()};f.cellSize=function(M){if(!arguments.length)return 1<<E;if(!(1<=(M=+M)))throw Error("invalid cell size");return E=Math.floor(Math.log(M)/Math.LN2),
z()};f.thresholds=function(M){return arguments.length?(T="function"===typeof M?M:Array.isArray(M)?Fb(nj.call(M)):Fb(M),f):T};f.bandwidth=function(M){if(!arguments.length)return Math.sqrt(S*(S+1));if(!(0<=(M=+M)))throw Error("invalid bandwidth");return S=Math.round((Math.sqrt(4*M*M+1)-1)/2),z()};return f};d3.dispatch=Ob;d3.drag=function(){function f(W){W.on("mousedown.drag",n).filter(S).on("touchstart.drag",t).on("touchmove.drag",z).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)")}function n(){if(!X&&C.apply(this,arguments)){var W=A("mouse",G.apply(this,arguments),Bb,this,arguments);W&&(Ra(d3.event.view).on("mousemove.drag",u,!0).on("mouseup.drag",r,!0),Wd(d3.event.view),d3.event.stopImmediatePropagation(),M=!1,L=d3.event.clientX,T=d3.event.clientY,W("start"))}}function u(){fc();if(!M){var W=d3.event.clientX-L,ba=d3.event.clientY-T;M=W*W+ba*ba>Y}E.mouse("drag")}function r(){Ra(d3.event.view).on("mousemove.drag mouseup.drag",null);Xd(d3.event.view,M);fc();E.mouse("end")}
function t(){if(C.apply(this,arguments)){var W=d3.event.changedTouches,ba=G.apply(this,arguments),aa=W.length,ha,ea;for(ha=0;ha<aa;++ha)if(ea=A(W[ha].identifier,ba,Vd,this,arguments))d3.event.stopImmediatePropagation(),ea("start")}}function z(){var W=d3.event.changedTouches,ba=W.length,aa,ha;for(aa=0;aa<ba;++aa)if(ha=E[W[aa].identifier])fc(),ha("drag")}function D(){var W=d3.event.changedTouches,ba=W.length,aa,ha;X&&clearTimeout(X);X=setTimeout(function(){X=null},500);for(aa=0;aa<ba;++aa)if(ha=E[W[aa].identifier])d3.event.stopImmediatePropagation(),
ha("end")}function A(W,ba,aa,ha,ea){var la=aa(ba,W),pa,R,Z,fa=J.copy();if(Qc(new Rf(f,"beforestart",pa,W,H,la[0],la[1],0,0,fa),function(){if(null==(d3.event.subject=pa=O.apply(ha,ea)))return!1;R=pa.x-la[0]||0;Z=pa.y-la[1]||0;return!0}))return function ma(qa){var ya=la;switch(qa){case "start":E[W]=ma;var bb=H++;break;case "end":delete E[W],--H;case "drag":la=aa(ba,W),bb=H}Qc(new Rf(f,qa,pa,W,bb,la[0]+R,la[1]+Z,la[0]-ya[0],la[1]-ya[1],fa),fa.apply,fa,[qa,ha,ea])}}var C=Fo,G=Go,O=Ho,S=Io,E={},J=Ob("start",
"drag","end"),H=0,L,T,M,X,Y=0;f.filter=function(W){return arguments.length?(C="function"===typeof W?W:Yd(!!W),f):C};f.container=function(W){return arguments.length?(G="function"===typeof W?W:Yd(W),f):G};f.subject=function(W){return arguments.length?(O="function"===typeof W?W:Yd(W),f):O};f.touchable=function(W){return arguments.length?(S="function"===typeof W?W:Yd(!!W),f):S};f.on=function(){var W=J.on.apply(J,arguments);return W===J?f:W};f.clickDistance=function(W){return arguments.length?(Y=(W=+W)*
W,f):Math.sqrt(Y)};return f};d3.dragDisable=Wd;d3.dragEnable=Xd;d3.dsvFormat=oe;d3.csvParse=ym;d3.csvParseRows=rt;d3.csvFormat=st;d3.csvFormatRows=tt;d3.tsvParse=zm;d3.tsvParseRows=ut;d3.tsvFormat=vt;d3.tsvFormatRows=wt;d3.easeLinear=function(f){return+f};d3.easeQuad=aj;d3.easeQuadIn=function(f){return f*f};d3.easeQuadOut=function(f){return f*(2-f)};d3.easeQuadInOut=aj;d3.easeCubic=gg;d3.easeCubicIn=function(f){return f*f*f};d3.easeCubicOut=function(f){return--f*f*f+1};d3.easeCubicInOut=gg;d3.easePoly=
pm;d3.easePolyIn=ht;d3.easePolyOut=it;d3.easePolyInOut=pm;d3.easeSin=bj;d3.easeSinIn=function(f){return 1-Math.cos(f*qm)};d3.easeSinOut=function(f){return Math.sin(f*qm)};d3.easeSinInOut=bj;d3.easeExp=dj;d3.easeExpIn=function(f){return Math.pow(2,10*f-10)};d3.easeExpOut=function(f){return 1-Math.pow(2,-10*f)};d3.easeExpInOut=dj;d3.easeCircle=ej;d3.easeCircleIn=function(f){return 1-Math.sqrt(1-f*f)};d3.easeCircleOut=function(f){return Math.sqrt(1- --f*f)};d3.easeCircleInOut=ej;d3.easeBounce=$c;d3.easeBounceIn=
function(f){return 1-$c(1-f)};d3.easeBounceOut=$c;d3.easeBounceInOut=function(f){return(1>=(f*=2)?1-$c(1-f):$c(f-1)+1)/2};d3.easeBack=rm;d3.easeBackIn=jt;d3.easeBackOut=kt;d3.easeBackInOut=rm;d3.easeElastic=sm;d3.easeElasticIn=lt;d3.easeElasticOut=sm;d3.easeElasticInOut=mt;d3.blob=function(f,n){return fetch(f,n).then(Zp)};d3.buffer=function(f,n){return fetch(f,n).then($p)};d3.dsv=function(f,n,u,r){3===arguments.length&&"function"===typeof u&&(r=u,u=void 0);var t=oe(f);return pe(n,u).then(function(z){return t.parse(z,
r)})};d3.csv=xt;d3.tsv=yt;d3.image=function(f,n){return new Promise(function(u,r){var t=new Image,z;for(z in n)t[z]=n[z];t.onerror=r;t.onload=function(){u(t)};t.src=f})};d3.json=function(f,n){return fetch(f,n).then(bq)};d3.text=pe;d3.xml=zt;d3.html=At;d3.svg=Bt;d3.forceCenter=function(f,n){function u(){var t,z=r.length,D=0,A=0;for(t=0;t<z;++t){var C=r[t];D+=C.x;A+=C.y}D=D/z-f;A=A/z-n;for(t=0;t<z;++t)C=r[t],C.x-=D,C.y-=A}var r;null==f&&(f=0);null==n&&(n=0);u.initialize=function(t){r=t};u.x=function(t){return arguments.length?
(f=+t,u):f};u.y=function(t){return arguments.length?(n=+t,u):n};return u};d3.forceCollide=function(f){function n(){function C(X,Y,W,ba,aa){var ha=X.data;X=X.r;var ea=L+X;if(ha)ha.index>E.index&&(Y=J-ha.x-ha.vx,W=H-ha.y-ha.vy,ba=Y*Y+W*W,ba<ea*ea&&(0===Y&&(Y=Gb(),ba+=Y*Y),0===W&&(W=Gb(),ba+=W*W),ba=(ea-(ba=Math.sqrt(ba)))/ba*D,E.vx+=(Y*=ba)*(ea=(X*=X)/(T+X)),E.vy+=(W*=ba)*ea,ha.vx-=Y*(ea=1-ea),ha.vy-=W*ea));else return Y>J+ea||ba<J-ea||W>H+ea||aa<H-ea}for(var G,O=t.length,S,E,J,H,L,T,M=0;M<A;++M)for(S=
qe(t,eq,fq).visitAfter(u),G=0;G<O;++G)E=t[G],L=z[E.index],T=L*L,J=E.x+E.vx,H=E.y+E.vy,S.visit(C)}function u(C){if(C.data)return C.r=z[C.data.index];for(var G=C.r=0;4>G;++G)C[G]&&C[G].r>C.r&&(C.r=C[G].r)}function r(){if(t){var C,G=t.length;z=Array(G);for(C=0;C<G;++C){var O=t[C];z[O.index]=+f(O,C,t)}}}var t,z,D=1,A=1;"function"!==typeof f&&(f=Ca(null==f?1:+f));n.initialize=function(C){t=C;r()};n.iterations=function(C){return arguments.length?(A=+C,n):A};n.strength=function(C){return arguments.length?
(D=+C,n):D};n.radius=function(C){return arguments.length?(f="function"===typeof C?C:Ca(+C),r(),n):f};return n};d3.forceLink=function(f){function n(H){return 1/Math.min(S[H.source.index],S[H.target.index])}function u(H){for(var L=0,T=f.length;L<J;++L)for(var M=0,X,Y,W,ba,aa;M<T;++M)X=f[M],Y=X.source,X=X.target,W=X.x+X.vx-Y.x-Y.vx||Gb(),ba=X.y+X.vy-Y.y-Y.vy||Gb(),aa=Math.sqrt(W*W+ba*ba),aa=(aa-G[M])/aa*H*A[M],W*=aa,ba*=aa,X.vx-=W*(aa=E[M]),X.vy-=ba*aa,Y.vx+=W*(aa=1-aa),Y.vy+=ba*aa}function r(){if(O){var H=
O.length,L=f.length,T=rb(O,D);var M=0;for(S=Array(H);M<L;++M)H=f[M],H.index=M,"object"!==typeof H.source&&(H.source=tj(T,H.source)),"object"!==typeof H.target&&(H.target=tj(T,H.target)),S[H.source.index]=(S[H.source.index]||0)+1,S[H.target.index]=(S[H.target.index]||0)+1;M=0;for(E=Array(L);M<L;++M)H=f[M],E[M]=S[H.source.index]/(S[H.source.index]+S[H.target.index]);A=Array(L);t();G=Array(L);z()}}function t(){if(O)for(var H=0,L=f.length;H<L;++H)A[H]=+n(f[H],H,f)}function z(){if(O)for(var H=0,L=f.length;H<
L;++H)G[H]=+C(f[H],H,f)}var D=gq,A,C=Ca(30),G,O,S,E,J=1;null==f&&(f=[]);u.initialize=function(H){O=H;r()};u.links=function(H){return arguments.length?(f=H,r(),u):f};u.id=function(H){return arguments.length?(D=H,u):D};u.iterations=function(H){return arguments.length?(J=+H,u):J};u.strength=function(H){return arguments.length?(n="function"===typeof H?H:Ca(+H),t(),u):n};u.distance=function(H){return arguments.length?(C="function"===typeof H?H:Ca(+H),z(),u):C};return u};d3.forceManyBody=function(){function f(E){var J,
H=t.length,L=qe(t,hq,iq).visitAfter(u);D=E;for(J=0;J<H;++J)z=t[J],L.visit(r)}function n(){if(t){var E,J=t.length;C=Array(J);for(E=0;E<J;++E){var H=t[E];C[H.index]=+A(H,E,t)}}}function u(E){var J=0,H,L,T=0,M,X,Y;if(E.length){for(M=X=Y=0;4>Y;++Y)(H=E[Y])&&(L=Math.abs(H.value))&&(J+=H.value,T+=L,M+=L*H.x,X+=L*H.y);E.x=M/T;E.y=X/T}else{H=E;H.x=H.data.x;H.y=H.data.y;do J+=C[H.data.index];while(H=H.next)}E.value=J}function r(E,J,H,L){if(!E.value)return!0;var T=E.x-z.x,M=E.y-z.y;J=L-J;L=T*T+M*M;if(J*J/S<
L)return L<O&&(0===T&&(T=Gb(),L+=T*T),0===M&&(M=Gb(),L+=M*M),L<G&&(L=Math.sqrt(G*L)),z.vx+=T*E.value*D/L,z.vy+=M*E.value*D/L),!0;if(!(E.length||L>=O)){if(E.data!==z||E.next)0===T&&(T=Gb(),L+=T*T),0===M&&(M=Gb(),L+=M*M),L<G&&(L=Math.sqrt(G*L));do E.data!==z&&(J=C[E.data.index]*D/L,z.vx+=T*J,z.vy+=M*J);while(E=E.next)}}var t,z,D,A=Ca(-30),C,G=1,O=Infinity,S=.81;f.initialize=function(E){t=E;n()};f.strength=function(E){return arguments.length?(A="function"===typeof E?E:Ca(+E),n(),f):A};f.distanceMin=
function(E){return arguments.length?(G=E*E,f):Math.sqrt(G)};f.distanceMax=function(E){return arguments.length?(O=E*E,f):Math.sqrt(O)};f.theta=function(E){return arguments.length?(S=E*E,f):Math.sqrt(S)};return f};d3.forceRadial=function(f,n,u){function r(G){for(var O=0,S=z.length;O<S;++O){var E=z[O],J=E.x-n||1E-6,H=E.y-u||1E-6,L=Math.sqrt(J*J+H*H);L=(C[O]-L)*A[O]*G/L;E.vx+=J*L;E.vy+=H*L}}function t(){if(z){var G,O=z.length;A=Array(O);C=Array(O);for(G=0;G<O;++G)C[G]=+f(z[G],G,z),A[G]=isNaN(C[G])?0:
+D(z[G],G,z)}}var z,D=Ca(.1),A,C;"function"!==typeof f&&(f=Ca(+f));null==n&&(n=0);null==u&&(u=0);r.initialize=function(G){z=G;t()};r.strength=function(G){return arguments.length?(D="function"===typeof G?G:Ca(+G),t(),r):D};r.radius=function(G){return arguments.length?(f="function"===typeof G?G:Ca(+G),t(),r):f};r.x=function(G){return arguments.length?(n=+G,r):n};r.y=function(G){return arguments.length?(u=+G,r):u};return r};d3.forceSimulation=function(f){function n(){u();J.call("tick",z);D<A&&(E.stop(),
J.call("end",z))}function u(){var H,L=f.length;D+=(G-D)*C;S.each(function(M){M(D)});for(H=0;H<L;++H){var T=f[H];null==T.fx?T.x+=T.vx*=O:(T.x=T.fx,T.vx=0);null==T.fy?T.y+=T.vy*=O:(T.y=T.fy,T.vy=0)}}function r(){for(var H=0,L=f.length,T;H<L;++H){T=f[H];T.index=H;if(isNaN(T.x)||isNaN(T.y)){var M=10*Math.sqrt(H),X=H*Ct;T.x=M*Math.cos(X);T.y=M*Math.sin(X)}if(isNaN(T.vx)||isNaN(T.vy))T.vx=T.vy=0}}function t(H){H.initialize&&H.initialize(f);return H}var z,D=1,A=.001,C=1-Math.pow(A,1/300),G=0,O=.6,S=rb(),
E=ee(n),J=Ob("tick","end");null==f&&(f=[]);r();return z={tick:u,restart:function(){return E.restart(n),z},stop:function(){return E.stop(),z},nodes:function(H){return arguments.length?(f=H,r(),S.each(t),z):f},alpha:function(H){return arguments.length?(D=+H,z):D},alphaMin:function(H){return arguments.length?(A=+H,z):A},alphaDecay:function(H){return arguments.length?(C=+H,z):+C},alphaTarget:function(H){return arguments.length?(G=+H,z):G},velocityDecay:function(H){return arguments.length?(O=1-H,z):1-
O},force:function(H,L){return 1<arguments.length?(null==L?S.remove(H):S.set(H,t(L)),z):S.get(H)},find:function(H,L,T){var M,X=f.length;T=null==T?Infinity:T*T;for(M=0;M<X;++M){var Y=f[M];var W=H-Y.x;var ba=L-Y.y;W=W*W+ba*ba;if(W<T){var aa=Y;T=W}}return aa},on:function(H,L){return 1<arguments.length?(J.on(H,L),z):J.on(H)}}};d3.forceX=function(f){function n(A){for(var C=0,G=t.length,O;C<G;++C)O=t[C],O.vx+=(D[C]-O.x)*z[C]*A}function u(){if(t){var A,C=t.length;z=Array(C);D=Array(C);for(A=0;A<C;++A)z[A]=
isNaN(D[A]=+f(t[A],A,t))?0:+r(t[A],A,t)}}var r=Ca(.1),t,z,D;"function"!==typeof f&&(f=Ca(null==f?0:+f));n.initialize=function(A){t=A;u()};n.strength=function(A){return arguments.length?(r="function"===typeof A?A:Ca(+A),u(),n):r};n.x=function(A){return arguments.length?(f="function"===typeof A?A:Ca(+A),u(),n):f};return n};d3.forceY=function(f){function n(A){for(var C=0,G=t.length,O;C<G;++C)O=t[C],O.vy+=(D[C]-O.y)*z[C]*A}function u(){if(t){var A,C=t.length;z=Array(C);D=Array(C);for(A=0;A<C;++A)z[A]=
isNaN(D[A]=+f(t[A],A,t))?0:+r(t[A],A,t)}}var r=Ca(.1),t,z,D;"function"!==typeof f&&(f=Ca(null==f?0:+f));n.initialize=function(A){t=A;u()};n.strength=function(A){return arguments.length?(r="function"===typeof A?A:Ca(+A),u(),n):r};n.y=function(A){return arguments.length?(f="function"===typeof A?A:Ca(+A),u(),n):f};return n};d3.formatDefaultLocale=Aj;d3.formatLocale=wj;d3.formatSpecifier=bd;d3.precisionFixed=Bj;d3.precisionPrefix=Cj;d3.precisionRound=Dj;d3.geoArea=function(f){xf.reset();gb(f,lb);return 2*
xf};d3.geoBounds=function(f){var n,u,r;Za=Aa=-(za=Wa=Infinity);Hb=[];gb(f,ub);if(n=Hb.length){Hb.sort(rq);f=1;var t=Hb[0];for(u=[t];f<n;++f){var z=Hb[f];Tj(t,z[0])||Tj(t,z[1])?(Xa(t[0],z[1])>Xa(t[0],t[1])&&(t[1]=z[1]),Xa(z[0],t[1])>Xa(t[0],t[1])&&(t[0]=z[0])):u.push(t=z)}var D=-Infinity;n=u.length-1;f=0;for(t=u[n];f<=n;t=z,++f)z=u[f],(r=Xa(t[1],z[0]))>D&&(D=r,za=z[0],Aa=t[1])}Hb=tb=null;return Infinity===za||Infinity===Wa?[[NaN,NaN],[NaN,NaN]]:[[za,Wa],[Aa,Za]]};d3.geoCentroid=function(f){ed=De=Ae=
Be=Ce=Ee=Fe=Ge=Bg=Cg=Dg=0;gb(f,hb);f=Bg;var n=Cg,u=Dg,r=f*f+n*n+u*u;return 1E-12>r&&(f=Ee,n=Fe,u=Ge,1E-6>De&&(f=Ae,n=Be,u=Ce),r=f*f+n*n+u*u,1E-12>r)?[NaN,NaN]:[Ma(n,f)*va,La(u/Ba(r))*va]};d3.geoCircle=function(){function f(){var A=n.apply(this,arguments),C=u.apply(this,arguments)*ia,G=r.apply(this,arguments)*ia;t=[];z=Gg(-A[0]*ia,-A[1]*ia,0).invert;dk(D,C,G,1);A={type:"Polygon",coordinates:[t]};t=z=null;return A}var n=qc([0,0]),u=qc(90),r=qc(6),t,z,D={point:function(A,C){t.push(A=z(A,C));A[0]*=va;
A[1]*=va}};f.center=function(A){return arguments.length?(n="function"===typeof A?A:qc([+A[0],+A[1]]),f):n};f.radius=function(A){return arguments.length?(u="function"===typeof A?A:qc(+A),f):u};f.precision=function(A){return arguments.length?(r="function"===typeof A?A:qc(+A),f):r};return f};d3.geoClipAntimeridian=Yg;d3.geoClipCircle=kk;d3.geoClipExtent=function(){var f=0,n=0,u=960,r=500,t,z,D;return D={stream:function(A){return t&&z===A?t:t=Je(f,n,u,r)(z=A)},extent:function(A){return arguments.length?
(f=+A[0][0],n=+A[0][1],u=+A[1][0],r=+A[1][1],t=z=null,D):[[f,n],[u,r]]}}};d3.geoClipRectangle=Je;d3.geoContains=function(f,n){return(f&&Bm.hasOwnProperty(f.type)?Bm[f.type]:Me)(f,n)};d3.geoDistance=sc;d3.geoGraticule=sk;d3.geoGraticule10=function(){return sk()()};d3.geoInterpolate=function(f,n){var u=f[0]*ia,r=f[1]*ia;f=n[0]*ia;n=n[1]*ia;var t=da(r),z=ca(r),D=da(n),A=ca(n),C=t*da(u),G=t*ca(u),O=D*da(f),S=D*ca(f),E=2*La(Ba(Gj(n-r)+t*D*Gj(f-u))),J=ca(E);f=E?function(H){var L=ca(H*=E)/J,T=ca(E-H)/J;
H=T*C+L*O;var M=T*G+L*S;L=T*z+L*A;return[Ma(M,H)*va,Ma(L,Ba(H*H+M*M))*va]}:function(){return[u*va,r*va]};f.distance=E;return f};d3.geoLength=lk;d3.geoPath=function(f,n){function u(D){D&&("function"===typeof r&&z.pointRadius(+r.apply(this,arguments)),gb(D,t(z)));return z.result()}var r=4.5,t,z;u.area=function(D){gb(D,t(vb));return vb.result()};u.measure=function(D){gb(D,t(hd));return hd.result()};u.bounds=function(D){gb(D,t(Qe));return Qe.result()};u.centroid=function(D){gb(D,t($a));return $a.result()};
u.projection=function(D){return arguments.length?(t=null==D?(f=null,Xb):(f=D).stream,u):f};u.context=function(D){if(!arguments.length)return n;z=null==D?(n=null,new Fk):new Bk(n=D);"function"!==typeof r&&z.pointRadius(r);return u};u.pointRadius=function(D){if(!arguments.length)return r;r="function"===typeof D?D:(z.pointRadius(+D),+D);return u};return u.projection(f).context(n)};d3.geoAlbers=Lk;d3.geoAlbersUsa=function(){function f(E){var J=E[0];E=E[1];return O=null,(z.point(J,E),O)||(A.point(J,E),
O)||(G.point(J,E),O)}function n(){u=r=null;return f}var u,r,t=Lk(),z,D=Re().rotate([154,0]).center([-2,58.5]).parallels([55,65]),A,C=Re().rotate([157,0]).center([-3,19.9]).parallels([8,18]),G,O,S={point:function(E,J){O=[E,J]}};f.invert=function(E){var J=t.scale(),H=t.translate(),L=(E[0]-H[0])/J;J=(E[1]-H[1])/J;return(.12<=J&&.234>J&&-.425<=L&&-.214>L?D:.166<=J&&.234>J&&-.214<=L&&-.115>L?C:t).invert(E)};f.stream=function(E){return u&&r===E?u:u=Tq([t.stream(r=E),D.stream(E),C.stream(E)])};f.precision=
function(E){if(!arguments.length)return t.precision();t.precision(E);D.precision(E);C.precision(E);return n()};f.scale=function(E){if(!arguments.length)return t.scale();t.scale(E);D.scale(.35*E);C.scale(E);return f.translate(t.translate())};f.translate=function(E){if(!arguments.length)return t.translate();var J=t.scale(),H=+E[0],L=+E[1];z=t.translate(E).clipExtent([[H-.455*J,L-.238*J],[H+.455*J,L+.238*J]]).stream(S);A=D.translate([H-.307*J,L+.201*J]).clipExtent([[H-.425*J+1E-6,L+.12*J+1E-6],[H-.214*
J-1E-6,L+.234*J-1E-6]]).stream(S);G=C.translate([H-.205*J,L+.212*J]).clipExtent([[H-.214*J+1E-6,L+.166*J+1E-6],[H-.115*J-1E-6,L+.234*J-1E-6]]).stream(S);return n()};f.fitExtent=function(E,J){return uc(f,E,J)};f.fitSize=function(E,J){return uc(f,[[0,0],E],J)};f.fitWidth=function(E,J){return Vg(f,E,J)};f.fitHeight=function(E,J){return Wg(f,E,J)};return f.scale(1070)};d3.geoAzimuthalEqualArea=function(){return ob(Sh).scale(124.75).clipAngle(179.999)};d3.geoAzimuthalEqualAreaRaw=Sh;d3.geoAzimuthalEquidistant=
function(){return ob(Th).scale(79.4188).clipAngle(179.999)};d3.geoAzimuthalEquidistantRaw=Th;d3.geoConicConformal=function(){return Zg(Ok).scale(109.5).parallels([30,30])};d3.geoConicConformalRaw=Ok;d3.geoConicEqualArea=Re;d3.geoConicEqualAreaRaw=Kk;d3.geoConicEquidistant=function(){return Zg(Pk).scale(131.154).center([0,13.9389])};d3.geoConicEquidistantRaw=Pk;d3.geoEqualEarth=function(){return ob(ah).scale(177.158)};d3.geoEqualEarthRaw=ah;d3.geoEquirectangular=function(){return ob(od).scale(152.63)};
d3.geoEquirectangularRaw=od;d3.geoGnomonic=function(){return ob(bh).scale(144.049).clipAngle(60)};d3.geoGnomonicRaw=bh;d3.geoIdentity=function(){function f(){E=J=null;return H}var n=1,u=0,r=0,t=1,z=1,D=Xb,A=null,C,G,O,S=Xb,E,J,H;return H={stream:function(L){return E&&J===L?E:E=D(S(J=L))},postclip:function(L){return arguments.length?(S=L,A=C=G=O=null,f()):S},clipExtent:function(L){return arguments.length?(S=null==L?(A=C=G=O=null,Xb):Je(A=+L[0][0],C=+L[0][1],G=+L[1][0],O=+L[1][1]),f()):null==A?null:
[[A,C],[G,O]]},scale:function(L){return arguments.length?(D=Ue((n=+L)*t,n*z,u,r),f()):n},translate:function(L){return arguments.length?(D=Ue(n*t,n*z,u=+L[0],r=+L[1]),f()):[u,r]},reflectX:function(L){return arguments.length?(D=Ue(n*(t=L?-1:1),n*z,u,r),f()):0>t},reflectY:function(L){return arguments.length?(D=Ue(n*t,n*(z=L?-1:1),u,r),f()):0>z},fitExtent:function(L,T){return uc(H,L,T)},fitSize:function(L,T){return uc(H,[[0,0],L],T)},fitWidth:function(L,T){return Vg(H,L,T)},fitHeight:function(L,T){return Wg(H,
L,T)}}};d3.geoProjection=ob;d3.geoProjectionMutator=Xg;d3.geoMercator=function(){return Nk(nd).scale(961/Sa)};d3.geoMercatorRaw=nd;d3.geoNaturalEarth1=function(){return ob(ch).scale(175.295)};d3.geoNaturalEarth1Raw=ch;d3.geoOrthographic=function(){return ob(dh).scale(249.5).clipAngle(90.000001)};d3.geoOrthographicRaw=dh;d3.geoStereographic=function(){return ob(eh).scale(250).clipAngle(142)};d3.geoStereographicRaw=eh;d3.geoTransverseMercator=function(){var f=Nk(fh),n=f.center,u=f.rotate;f.center=function(r){return arguments.length?
n([-r[1],r[0]]):(r=n(),[r[1],-r[0]])};f.rotate=function(r){return arguments.length?u([r[0],r[1],2<r.length?r[2]+90:90]):(r=u(),[r[0],r[1],r[2]-90])};return u([0,0,90]).scale(159.155)};d3.geoTransverseMercatorRaw=fh;d3.geoRotation=ck;d3.geoStream=gb;d3.geoTransform=function(f){return{stream:kd(f)}};d3.cluster=function(){function f(z){var D,A=0;z.eachAfter(function(E){var J=E.children;if(J){var H=J.reduce(Vq,0)/J.length;E.x=H;E.y=1+J.reduce(Wq,0)}else E.x=D?A+=n(E,D):0,E.y=0,D=E});var C=Xq(z),G=Yq(z),
O=C.x-n(C,G)/2,S=G.x+n(G,C)/2;return z.eachAfter(t?function(E){E.x=(E.x-z.x)*u;E.y=(z.y-E.y)*r}:function(E){E.x=(E.x-O)/(S-O)*u;E.y=(1-(z.y?E.y/z.y:1))*r})}var n=Uq,u=1,r=1,t=!1;f.separation=function(z){return arguments.length?(n=z,f):n};f.size=function(z){return arguments.length?(t=!1,u=+z[0],r=+z[1],f):t?null:[u,r]};f.nodeSize=function(z){return arguments.length?(t=!0,u=+z[0],r=+z[1],f):t?[u,r]:null};return f};d3.hierarchy=gh;d3.pack=function(){function f(z){z.x=u/2;z.y=r/2;n?z.eachBefore(Yk(n)).eachAfter(ih(t,
.5)).eachBefore(Zk(1)):z.eachBefore(Yk(cr)).eachAfter(ih(Zb,1)).eachAfter(ih(t,z.r/Math.min(u,r))).eachBefore(Zk(Math.min(u,r)/(2*z.r)));return z}var n=null,u=1,r=1,t=Zb;f.radius=function(z){return arguments.length?(n=null==z?null:Xe(z),f):n};f.size=function(z){return arguments.length?(u=+z[0],r=+z[1],f):[u,r]};f.padding=function(z){return arguments.length?(t="function"===typeof z?z:yc(+z),f):t};return f};d3.packSiblings=function(f){Xk(f);return f};d3.packEnclose=Rk;d3.partition=function(){function f(D){var A=
D.height+1;D.x0=D.y0=t;D.x1=u;D.y1=r/A;D.eachBefore(n(r,A));z&&D.eachBefore($k);return D}function n(D,A){return function(C){C.children&&qd(C,C.x0,D*(C.depth+1)/A,C.x1,D*(C.depth+2)/A);var G=C.x0,O=C.y0,S=C.x1-t,E=C.y1-t;S<G&&(G=S=(G+S)/2);E<O&&(O=E=(O+E)/2);C.x0=G;C.y0=O;C.x1=S;C.y1=E}}var u=1,r=1,t=0,z=!1;f.round=function(D){return arguments.length?(z=!!D,f):z};f.size=function(D){return arguments.length?(u=+D[0],r=+D[1],f):[u,r]};f.padding=function(D){return arguments.length?(t=+D,f):t};return f};
d3.stratify=function(){function f(r){var t,z=r.length,D=Array(z),A,C={};for(t=0;t<z;++t){var G=r[t];var O=D[t]=new xc(G);null!=(A=n(G,t,r))&&(A+="")&&(G="$"+(O.id=A),C[G]=G in C?Cm:O)}for(t=0;t<z;++t)if(O=D[t],A=u(r[t],t,r),null!=A&&(A+="")){G=C["$"+A];if(!G)throw Error("missing: "+A);if(G===Cm)throw Error("ambiguous: "+A);G.children?G.children.push(O):G.children=[O];O.parent=G}else{if(S)throw Error("multiple roots");var S=O}if(!S)throw Error("no root");S.parent=Dt;S.eachBefore(function(E){E.depth=
E.parent.depth+1;--z}).eachBefore(Qk);S.parent=null;if(0<z)throw Error("cycle");return S}var n=dr,u=er;f.id=function(r){return arguments.length?(n=Xe(r),f):n};f.parentId=function(r){return arguments.length?(u=Xe(r),f):u};return f};d3.tree=function(){function f(C){var G=gr(C);G.eachAfter(n);G.parent.m=-G.z;G.eachBefore(u);if(A)C.eachBefore(r);else{var O=C,S=C,E=C;C.eachBefore(function(T){T.x<O.x&&(O=T);T.x>S.x&&(S=T);T.depth>E.depth&&(E=T)});G=O===S?1:t(O,S)/2;var J=G-O.x,H=z/(S.x+G+J),L=D/(E.depth||
1);C.eachBefore(function(T){T.x=(T.x+J)*H;T.y=T.depth*L})}return C}function n(C){var G=C.children,O=C.parent.children,S=C.i?O[C.i-1]:null;if(G){for(var E=0,J=0,H=C.children,L=H.length,T;0<=--L;)T=H[L],T.z+=E,T.m+=E,E+=T.s+(J+=T.c);G=(G[0].z+G[G.length-1].z)/2;S?(C.z=S.z+t(C._,S._),C.m=C.z-G):C.z=G}else S&&(C.z=S.z+t(C._,S._));G=C.parent;O=C.parent.A||O[0];if(S){J=E=C;H=E.parent.children[0];L=E.m;T=J.m;for(var M=S.m,X=H.m,Y;S=kh(S),E=jh(E),S&&E;){H=jh(H);J=kh(J);J.a=C;Y=S.z+M-E.z-L+t(S._,E._);if(0<
Y){var W=S.a.parent===C.parent?S.a:O,ba=C,aa=Y,ha=aa/(ba.i-W.i);ba.c-=ha;ba.s+=aa;W.c+=ha;ba.z+=aa;ba.m+=aa;L+=Y;T+=Y}M+=S.m;L+=E.m;X+=H.m;T+=J.m}S&&!kh(J)&&(J.t=S,J.m+=M-T);E&&!jh(H)&&(H.t=E,H.m+=L-X,O=C)}G.A=O}function u(C){C._.x=C.z+C.parent.m;C.m+=C.parent.m}function r(C){C.x*=z;C.y=C.depth*D}var t=fr,z=1,D=1,A=null;f.separation=function(C){return arguments.length?(t=C,f):t};f.size=function(C){return arguments.length?(A=!1,z=+C[0],D=+C[1],f):A?null:[z,D]};f.nodeSize=function(C){return arguments.length?
(A=!0,z=+C[0],D=+C[1],f):A?[z,D]:null};return f};d3.treemap=function(){function f(E){E.x0=E.y0=0;E.x1=t;E.y1=z;E.eachBefore(n);D=[0];r&&E.eachBefore($k);return E}function n(E){var J=D[E.depth],H=E.x0+J,L=E.y0+J,T=E.x1-J,M=E.y1-J;T<H&&(H=T=(H+T)/2);M<L&&(L=M=(L+M)/2);E.x0=H;E.y0=L;E.x1=T;E.y1=M;E.children&&(J=D[E.depth+1]=A(E)/2,H+=S(E)-J,L+=C(E)-J,T-=G(E)-J,M-=O(E)-J,T<H&&(H=T=(H+T)/2),M<L&&(L=M=(L+M)/2),u(E,H,L,T,M))}var u=Em,r=!1,t=1,z=1,D=[0],A=Zb,C=Zb,G=Zb,O=Zb,S=Zb;f.round=function(E){return arguments.length?
(r=!!E,f):r};f.size=function(E){return arguments.length?(t=+E[0],z=+E[1],f):[t,z]};f.tile=function(E){return arguments.length?(u=Xe(E),f):u};f.padding=function(E){return arguments.length?f.paddingInner(E).paddingOuter(E):f.paddingInner()};f.paddingInner=function(E){return arguments.length?(A="function"===typeof E?E:yc(+E),f):A};f.paddingOuter=function(E){return arguments.length?f.paddingTop(E).paddingRight(E).paddingBottom(E).paddingLeft(E):f.paddingTop()};f.paddingTop=function(E){return arguments.length?
(C="function"===typeof E?E:yc(+E),f):C};f.paddingRight=function(E){return arguments.length?(G="function"===typeof E?E:yc(+E),f):G};f.paddingBottom=function(E){return arguments.length?(O="function"===typeof E?E:yc(+E),f):O};f.paddingLeft=function(E){return arguments.length?(S="function"===typeof E?E:yc(+E),f):S};return f};d3.treemapBinary=function(f,n,u,r,t){function z(S,E,J,H,L,T,M){if(S>=E-1)S=D[S],S.x0=H,S.y0=L,S.x1=T,S.y1=M;else{for(var X=O[S],Y=J/2+X,W=S+1,ba=E-1;W<ba;){var aa=W+ba>>>1;O[aa]<
Y?W=aa+1:ba=aa}Y-O[W-1]<O[W]-Y&&S+1<W&&--W;X=O[W]-X;Y=J-X;T-H>M-L?(J=(H*Y+T*X)/J,z(S,W,X,H,L,J,M),z(W,E,Y,J,L,T,M)):(J=(L*Y+M*X)/J,z(S,W,X,H,L,T,J),z(W,E,Y,H,J,T,M))}}var D=f.children,A,C=D.length,G,O=Array(C+1);for(O[0]=G=A=0;A<C;++A)O[A+1]=G+=D[A].value;z(0,C,f.value,n,u,r,t)};d3.treemapDice=qd;d3.treemapSlice=Ze;d3.treemapSliceDice=function(f,n,u,r,t){(f.depth&1?Ze:qd)(f,n,u,r,t)};d3.treemapSquarify=Em;d3.treemapResquarify=Et;d3.interpolate=Sc;d3.interpolateArray=Ki;d3.interpolateBasis=Gi;d3.interpolateBasisClosed=
Hi;d3.interpolateDate=Li;d3.interpolateDiscrete=function(f){var n=f.length;return function(u){return f[Math.max(0,Math.min(n-1,Math.floor(u*n)))]}};d3.interpolateHue=function(f,n){var u=ce(+f,+n);return function(r){r=u(r);return r-360*Math.floor(r/360)}};d3.interpolateNumber=Va;d3.interpolateObject=Mi;d3.interpolateRound=Ni;d3.interpolateString=$f;d3.interpolateTransformCss=mm;d3.interpolateTransformSvg=nm;d3.interpolateZoom=Si;d3.interpolateRgb=Tc;d3.interpolateRgbBasis=El;d3.interpolateRgbBasisClosed=
at;d3.interpolateHsl=bt;d3.interpolateHslLong=ct;d3.interpolateLab=function(f,n){var u=Ea((f=$d(f)).l,(n=$d(n)).l),r=Ea(f.a,n.a),t=Ea(f.b,n.b),z=Ea(f.opacity,n.opacity);return function(D){f.l=u(D);f.a=r(D);f.b=t(D);f.opacity=z(D);return f+""}};d3.interpolateHcl=dt;d3.interpolateHclLong=et;d3.interpolateCubehelix=ft;d3.interpolateCubehelixLong=sf;d3.piecewise=function(f,n){for(var u=0,r=n.length-1,t=n[0],z=Array(0>r?0:r);u<r;)z[u]=f(t,t=n[++u]);return function(D){var A=Math.max(0,Math.min(r-1,Math.floor(D*=
r)));return z[A](D-A)}};d3.quantize=function(f,n){for(var u=Array(n),r=0;r<n;++r)u[r]=f(r/(n-1));return u};d3.path=Eb;d3.polygonArea=function(f){for(var n=-1,u=f.length,r,t=f[u-1],z=0;++n<u;)r=t,t=f[n],z+=r[1]*t[0]-r[0]*t[1];return z/2};d3.polygonCentroid=function(f){for(var n=-1,u=f.length,r=0,t=0,z,D=f[u-1],A,C=0;++n<u;)z=D,D=f[n],C+=A=z[0]*D[1]-D[0]*z[1],r+=(z[0]+D[0])*A,t+=(z[1]+D[1])*A;return C*=3,[r/C,t/C]};d3.polygonHull=function(f){if(3>(u=f.length))return null;var n,u,r=Array(u),t=Array(u);
for(n=0;n<u;++n)r[n]=[+f[n][0],+f[n][1],n];r.sort(ir);for(n=0;n<u;++n)t[n]=[r[n][0],-r[n][1]];u=bl(r);t=bl(t);var z=t[0]===u[0],D=t[t.length-1]===u[u.length-1],A=[];for(n=u.length-1;0<=n;--n)A.push(f[r[u[n]][2]]);for(n=+z;n<t.length-D;++n)A.push(f[r[t[n]][2]]);return A};d3.polygonContains=function(f,n){var u=f.length,r=f[u-1],t=n[0];n=n[1];for(var z=r[0],D=r[1],A,C=!1,G=0;G<u;++G)r=f[G],A=r[0],r=r[1],r>n!==D>n&&t<(z-A)*(n-r)/(D-r)+A&&(C=!C),z=A,D=r;return C};d3.polygonLength=function(f){var n=-1,
u=f.length,r=f[u-1],t=r[0];r=r[1];for(var z=0;++n<u;){var D=t;var A=r;r=f[n];t=r[0];r=r[1];D-=t;A-=r;z+=Math.sqrt(D*D+A*A)}return z};d3.quadtree=qe;d3.randomUniform=Ft;d3.randomNormal=Fm;d3.randomLogNormal=Gt;d3.randomBates=Ht;d3.randomIrwinHall=Gm;d3.randomExponential=It;d3.scaleBand=nh;d3.scalePoint=function(){return cl(nh().paddingInner(1))};d3.scaleIdentity=gl;d3.scaleLinear=fl;d3.scaleLog=ll;d3.scaleOrdinal=lh;d3.scaleImplicit=mh;d3.scalePow=rh;d3.scaleSqrt=function(){return rh().exponent(.5)};
d3.scaleQuantile=ml;d3.scaleQuantize=nl;d3.scaleThreshold=ol;d3.scaleTime=function(){return uh(wb,Wh,yd,vd,Vh,Uh,Nd,dc,d3.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)])};d3.scaleUtc=function(){return uh(xb,Zh,Ad,td,Yh,Xh,Nd,dc,d3.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)])};d3.scaleSequential=Cl;d3.scaleDiverging=Dl;d3.schemeCategory10=gu;d3.schemeCategory20b=hu;d3.schemeCategory20c=iu;d3.schemeCategory20=ju;d3.schemeAccent=ku;d3.schemeDark2=lu;d3.schemePaired=mu;d3.schemePastel1=
nu;d3.schemePastel2=ou;d3.schemeSet1=pu;d3.schemeSet2=qu;d3.schemeSet3=ru;d3.interpolateBrBG=su;d3.schemeBrBG=Um;d3.interpolatePRGn=tu;d3.schemePRGn=Vm;d3.interpolatePiYG=uu;d3.schemePiYG=Wm;d3.interpolatePuOr=vu;d3.schemePuOr=Xm;d3.interpolateRdBu=wu;d3.schemeRdBu=Ym;d3.interpolateRdGy=xu;d3.schemeRdGy=Zm;d3.interpolateRdYlBu=yu;d3.schemeRdYlBu=$m;d3.interpolateRdYlGn=zu;d3.schemeRdYlGn=an;d3.interpolateSpectral=Au;d3.schemeSpectral=bn;d3.interpolateBuGn=Bu;d3.schemeBuGn=cn;d3.interpolateBuPu=Cu;
d3.schemeBuPu=dn;d3.interpolateGnBu=Du;d3.schemeGnBu=en;d3.interpolateOrRd=Eu;d3.schemeOrRd=fn;d3.interpolatePuBuGn=Fu;d3.schemePuBuGn=gn;d3.interpolatePuBu=Gu;d3.schemePuBu=hn;d3.interpolatePuRd=Hu;d3.schemePuRd=jn;d3.interpolateRdPu=Iu;d3.schemeRdPu=kn;d3.interpolateYlGnBu=Ju;d3.schemeYlGnBu=ln;d3.interpolateYlGn=Ku;d3.schemeYlGn=mn;d3.interpolateYlOrBr=Lu;d3.schemeYlOrBr=nn;d3.interpolateYlOrRd=Mu;d3.schemeYlOrRd=on;d3.interpolateBlues=Nu;d3.schemeBlues=pn;d3.interpolateGreens=Ou;d3.schemeGreens=
qn;d3.interpolateGreys=Pu;d3.schemeGreys=rn;d3.interpolatePurples=Qu;d3.schemePurples=sn;d3.interpolateReds=Ru;d3.schemeReds=tn;d3.interpolateOranges=Su;d3.schemeOranges=un;d3.interpolateCubehelixDefault=Tu;d3.interpolateRainbow=function(f){if(0>f||1<f)f-=Math.floor(f);var n=Math.abs(f-.5);Af.h=360*f-100;Af.s=1.5-1.5*n;Af.l=.8-.9*n;return Af+""};d3.interpolateWarm=Uu;d3.interpolateCool=Vu;d3.interpolateSinebow=function(f){var n;f=(.5-f)*Math.PI;Bf.r=255*(n=Math.sin(f))*n;Bf.g=255*(n=Math.sin(f+Wu))*
n;Bf.b=255*(n=Math.sin(f+Xu))*n;return Bf+""};d3.interpolateViridis=Yu;d3.interpolateMagma=Zu;d3.interpolateInferno=$u;d3.interpolatePlasma=av;d3.create=function(f){return Ra(Rd(f).call(document.documentElement))};d3.creator=Rd;d3.local=ui;d3.matcher=Kh;d3.mouse=Bb;d3.namespace=Pc;d3.namespaces=Ua;d3.clientPoint=Ud;d3.select=Ra;d3.selectAll=function(f){return"string"===typeof f?new Ja([document.querySelectorAll(f)],[document.documentElement]):new Ja([null==f?[]:f],Of)};d3.selection=Qb;d3.selector=
Sd;d3.selectorAll=Lf;d3.style=Pb;d3.touch=Vd;d3.touches=function(f,n){null==n&&(n=Qf().touches);for(var u=0,r=n?n.length:0,t=Array(r);u<r;++u)t[u]=Ud(f,n[u]);return t};d3.window=Mf;d3.customEvent=Qc;d3.arc=function(){function f(){var G,O=+n.apply(this,arguments),S=+u.apply(this,arguments),E=z.apply(this,arguments)-df,J=D.apply(this,arguments)-df,H=vn(J-E),L=J>E;C||(C=G=Eb());if(S<O){var T=S;S=O;O=T}if(1E-12<S)if(H>Lb-1E-12)C.moveTo(S*ec(E),S*pb(E)),C.arc(0,0,S,E,J,!L),1E-12<O&&(C.moveTo(O*ec(J),O*
pb(J)),C.arc(0,0,O,J,E,L));else{var M=E,X=J;T=E;var Y=J,W=H,ba=H,aa=A.apply(this,arguments)/2,ha=1E-12<aa&&(t?+t.apply(this,arguments):Dc(O*O+S*S)),ea=$h(vn(S-O)/2,+r.apply(this,arguments)),la=ea,pa=ea;if(1E-12<ha){var R=Fl(ha/O*pb(aa));aa=Fl(ha/S*pb(aa));1E-12<(W-=2*R)?(R*=L?1:-1,T+=R,Y-=R):(W=0,T=Y=(E+J)/2);1E-12<(ba-=2*aa)?(aa*=L?1:-1,M+=aa,X-=aa):(ba=0,M=X=(E+J)/2)}E=S*ec(M);J=S*pb(M);R=O*ec(Y);aa=O*pb(Y);if(1E-12<ea){var Z=S*ec(X),fa=S*pb(X),ja=O*ec(T),qa=O*pb(T);if(H<Kb){1E-12<W?(la=ja-E,pa=
qa-J,H=R-Z,ha=aa-fa,H=(H*(J-fa)-ha*(E-Z))/(ha*la-H*pa),la=[E+H*la,J+H*pa]):la=[R,aa];pa=E-la[0];H=J-la[1];ha=Z-la[0];var ma=fa-la[1];pa=(pa*ha+H*ma)/(Dc(pa*pa+H*H)*Dc(ha*ha+ma*ma));pa=1/pb((1<pa?0:-1>pa?Kb:Math.acos(pa))/2);H=Dc(la[0]*la[0]+la[1]*la[1]);la=$h(ea,(O-H)/(pa-1));pa=$h(ea,(S-H)/(pa+1))}}1E-12<ba?1E-12<pa?(M=ef(ja,qa,E,J,S,pa,L),X=ef(Z,fa,R,aa,S,pa,L),C.moveTo(M.cx+M.x01,M.cy+M.y01),pa<ea?C.arc(M.cx,M.cy,pa,Ia(M.y01,M.x01),Ia(X.y01,X.x01),!L):(C.arc(M.cx,M.cy,pa,Ia(M.y01,M.x01),Ia(M.y11,
M.x11),!L),C.arc(0,0,S,Ia(M.cy+M.y11,M.cx+M.x11),Ia(X.cy+X.y11,X.cx+X.x11),!L),C.arc(X.cx,X.cy,pa,Ia(X.y11,X.x11),Ia(X.y01,X.x01),!L))):(C.moveTo(E,J),C.arc(0,0,S,M,X,!L)):C.moveTo(E,J);1E-12<O&&1E-12<W?1E-12<la?(M=ef(R,aa,Z,fa,O,-la,L),X=ef(E,J,ja,qa,O,-la,L),C.lineTo(M.cx+M.x01,M.cy+M.y01),la<ea?C.arc(M.cx,M.cy,la,Ia(M.y01,M.x01),Ia(X.y01,X.x01),!L):(C.arc(M.cx,M.cy,la,Ia(M.y01,M.x01),Ia(M.y11,M.x11),!L),C.arc(0,0,O,Ia(M.cy+M.y11,M.cx+M.x11),Ia(X.cy+X.y11,X.cx+X.x11),L),C.arc(X.cx,X.cy,la,Ia(X.y11,
X.x11),Ia(X.y01,X.x01),!L))):C.arc(0,0,O,Y,T,L):C.lineTo(R,aa)}else C.moveTo(0,0);C.closePath();if(G)return C=null,G+""||null}var n=ts,u=us,r=na(0),t=null,z=vs,D=ws,A=xs,C=null;f.centroid=function(){var G=(+n.apply(this,arguments)+ +u.apply(this,arguments))/2,O=(+z.apply(this,arguments)+ +D.apply(this,arguments))/2-Kb/2;return[ec(O)*G,pb(O)*G]};f.innerRadius=function(G){return arguments.length?(n="function"===typeof G?G:na(+G),f):n};f.outerRadius=function(G){return arguments.length?(u="function"===
typeof G?G:na(+G),f):u};f.cornerRadius=function(G){return arguments.length?(r="function"===typeof G?G:na(+G),f):r};f.padRadius=function(G){return arguments.length?(t=null==G?null:"function"===typeof G?G:na(+G),f):t};f.startAngle=function(G){return arguments.length?(z="function"===typeof G?G:na(+G),f):z};f.endAngle=function(G){return arguments.length?(D="function"===typeof G?G:na(+G),f):D};f.padAngle=function(G){return arguments.length?(A="function"===typeof G?G:na(+G),f):A};f.context=function(G){return arguments.length?
(C=null==G?null:G,f):C};return f};d3.area=Hl;d3.line=yh;d3.pie=function(){function f(A){var C,G=A.length;var O=0;var S=Array(G),E=Array(G),J=+t.apply(this,arguments);var H=Math.min(Lb,Math.max(-Lb,z.apply(this,arguments)-J));var L=Math.min(Math.abs(H)/G,D.apply(this,arguments)),T=L*(0>H?-1:1),M;for(C=0;C<G;++C)0<(M=E[S[C]=C]=+n(A[C],C,A))&&(O+=M);null!=u?S.sort(function(Y,W){return u(E[Y],E[W])}):null!=r&&S.sort(function(Y,W){return r(A[Y],A[W])});C=0;for(H=O?(H-G*T)/O:0;C<G;++C,J=X){O=S[C];M=E[O];
var X=J+(0<M?M*H:0)+T;E[O]={data:A[O],index:C,value:M,startAngle:J,endAngle:X,padAngle:L}}return E}var n=As,u=zs,r=null,t=na(0),z=na(Lb),D=na(0);f.value=function(A){return arguments.length?(n="function"===typeof A?A:na(+A),f):n};f.sortValues=function(A){return arguments.length?(u=A,r=null,f):u};f.sort=function(A){return arguments.length?(r=A,u=null,f):r};f.startAngle=function(A){return arguments.length?(t="function"===typeof A?A:na(+A),f):t};f.endAngle=function(A){return arguments.length?(z="function"===
typeof A?A:na(+A),f):z};f.padAngle=function(A){return arguments.length?(D="function"===typeof A?A:na(+A),f):D};return f};d3.areaRadial=Ll;d3.radialArea=Ll;d3.lineRadial=Jl;d3.radialLine=Jl;d3.pointRadial=Dd;d3.linkHorizontal=function(){return Ah(Ds)};d3.linkVertical=function(){return Ah(Es)};d3.linkRadial=function(){var f=Ah(Fs);f.angle=f.x;delete f.x;f.radius=f.y;delete f.y;return f};d3.symbol=function(){function f(){var t;r||(r=t=Eb());n.apply(this,arguments).draw(r,+u.apply(this,arguments));if(t)return r=
null,t+""||null}var n=na(ai),u=na(64),r=null;f.type=function(t){return arguments.length?(n="function"===typeof t?t:na(t),f):n};f.size=function(t){return arguments.length?(u="function"===typeof t?t:na(+t),f):u};f.context=function(t){return arguments.length?(r=null==t?null:t,f):r};return f};d3.symbols=fv;d3.symbolCircle=ai;d3.symbolCross=wn;d3.symbolDiamond=yn;d3.symbolSquare=Bn;d3.symbolStar=An;d3.symbolTriangle=Cn;d3.symbolWye=Dn;d3.curveBasisClosed=function(f){return new Ml(f)};d3.curveBasisOpen=
function(f){return new Nl(f)};d3.curveBasis=function(f){return new hf(f)};d3.curveBundle=gv;d3.curveCardinalClosed=iv;d3.curveCardinalOpen=jv;d3.curveCardinal=hv;d3.curveCatmullRomClosed=lv;d3.curveCatmullRomOpen=mv;d3.curveCatmullRom=kv;d3.curveLinearClosed=function(f){return new Sl(f)};d3.curveLinear=ff;d3.curveMonotoneX=function(f){return new kf(f)};d3.curveMonotoneY=function(f){return new Vl(f)};d3.curveNatural=function(f){return new Xl(f)};d3.curveStep=function(f){return new lf(f,.5)};d3.curveStepAfter=
function(f){return new lf(f,1)};d3.curveStepBefore=function(f){return new lf(f,0)};d3.stack=function(){function f(z){var D=n.apply(this,arguments),A,C=z.length,G=D.length,O=Array(G);for(A=0;A<G;++A){for(var S=D[A],E=O[A]=Array(C),J=0,H;J<C;++J)E[J]=H=[0,+t(z[J],S,J,z)],H.data=z[J];E.key=S}A=0;for(D=u(O);A<G;++A)O[D[A]].index=A;r(O,D);return O}var n=na([]),u=Fc,r=Ec,t=Gs;f.keys=function(z){return arguments.length?(n="function"===typeof z?z:na(Bh.call(z)),f):n};f.value=function(z){return arguments.length?
(t="function"===typeof z?z:na(+z),f):t};f.order=function(z){return arguments.length?(u=null==z?Fc:"function"===typeof z?z:na(Bh.call(z)),f):u};f.offset=function(z){return arguments.length?(r=null==z?Ec:z,f):r};return f};d3.stackOffsetExpand=function(f,n){if(0<(r=f.length)){for(var u,r,t=0,z=f[0].length,D;t<z;++t){for(D=u=0;u<r;++u)D+=f[u][t][1]||0;if(D)for(u=0;u<r;++u)f[u][t][1]/=D}Ec(f,n)}};d3.stackOffsetDiverging=function(f,n){if(1<(C=f.length))for(var u,r=0,t,z,D,A,C,G=f[n[0]].length;r<G;++r)for(u=
D=A=0;u<C;++u)0<=(z=(t=f[n[u]][r])[1]-t[0])?(t[0]=D,t[1]=D+=z):0>z?(t[1]=A,t[0]=A+=z):t[0]=D};d3.stackOffsetNone=Ec;d3.stackOffsetSilhouette=function(f,n){if(0<(t=f.length)){for(var u=0,r=f[n[0]],t,z=r.length;u<z;++u){for(var D=0,A=0;D<t;++D)A+=f[D][u][1]||0;r[u][1]+=r[u][0]=-A/2}Ec(f,n)}};d3.stackOffsetWiggle=function(f,n){if(0<(D=f.length)&&0<(z=(t=f[n[0]]).length)){for(var u=0,r=1,t,z,D;r<z;++r){for(var A=0,C=0,G=0;A<D;++A){var O=f[n[A]],S=O[r][1]||0;O=(S-(O[r-1][1]||0))/2;for(var E=0;E<A;++E){var J=
f[n[E]];O+=(J[r][1]||0)-(J[r-1][1]||0)}C+=S;G+=O*S}t[r-1][1]+=t[r-1][0]=u;C&&(u-=G/C)}t[r-1][1]+=t[r-1][0]=u;Ec(f,n)}};d3.stackOrderAscending=Zl;d3.stackOrderDescending=function(f){return Zl(f).reverse()};d3.stackOrderInsideOut=function(f){var n=f.length,u=f.map($l),r=Fc(f).sort(function(G,O){return u[O]-u[G]}),t=0,z=0,D=[],A=[];for(f=0;f<n;++f){var C=r[f];t<z?(t+=u[C],D.push(C)):(z+=u[C],A.push(C))}return A.reverse().concat(D)};d3.stackOrderNone=Fc;d3.stackOrderReverse=function(f){return Fc(f).reverse()};
d3.timeInterval=Da;d3.timeMillisecond=dc;d3.timeMilliseconds=Im;d3.utcMillisecond=dc;d3.utcMilliseconds=Im;d3.timeSecond=Nd;d3.timeSeconds=Jm;d3.utcSecond=Nd;d3.utcSeconds=Jm;d3.timeMinute=Uh;d3.timeMinutes=Jt;d3.timeHour=Vh;d3.timeHours=Kt;d3.timeDay=vd;d3.timeDays=Lt;d3.timeWeek=yd;d3.timeWeeks=Om;d3.timeSunday=yd;d3.timeSundays=Om;d3.timeMonday=ud;d3.timeMondays=Mt;d3.timeTuesday=Km;d3.timeTuesdays=Nt;d3.timeWednesday=Lm;d3.timeWednesdays=Ot;d3.timeThursday=zd;d3.timeThursdays=Pt;d3.timeFriday=
Mm;d3.timeFridays=Qt;d3.timeSaturday=Nm;d3.timeSaturdays=Rt;d3.timeMonth=Wh;d3.timeMonths=St;d3.timeYear=wb;d3.timeYears=Tt;d3.utcMinute=Xh;d3.utcMinutes=Ut;d3.utcHour=Yh;d3.utcHours=Vt;d3.utcDay=td;d3.utcDays=Wt;d3.utcWeek=Ad;d3.utcWeeks=Tm;d3.utcSunday=Ad;d3.utcSundays=Tm;d3.utcMonday=sd;d3.utcMondays=Xt;d3.utcTuesday=Pm;d3.utcTuesdays=Yt;d3.utcWednesday=Qm;d3.utcWednesdays=Zt;d3.utcThursday=Bd;d3.utcThursdays=$t;d3.utcFriday=Rm;d3.utcFridays=au;d3.utcSaturday=Sm;d3.utcSaturdays=bu;d3.utcMonth=
Zh;d3.utcMonths=cu;d3.utcYear=xb;d3.utcYears=du;d3.timeFormatDefaultLocale=Al;d3.timeFormatLocale=pl;d3.isoFormat=eu;d3.isoParse=fu;d3.now=jc;d3.timer=ee;d3.timerFlush=Xi;d3.timeout=dg;d3.interval=function(f,n,u){var r=new Wc,t=n;if(null==n)return r.restart(f,n,u),r;n=+n;u=null==u?jc():+u;r.restart(function A(D){D+=t;r.restart(A,t+=n,u);f(D)},n,u);return r};d3.transition=$i;d3.active=function(f,n){var u=f.__transition,r,t;if(u)for(t in n=null==n?null:n+"",u)if(1<(r=u[t]).state&&r.name===n)return new kb([[f]],
nt,n,+t);return null};d3.interrupt=Ub;d3.voronoi=function(){function f(t){return new Jh(t.map(function(z,D){var A=[Math.round(n(z,D,t)/ta)*ta,Math.round(u(z,D,t)/ta)*ta];A.index=D;A.data=z;return A}),r)}var n=Hs,u=Is,r=null;f.polygons=function(t){return f(t).polygons()};f.links=function(t){return f(t).links()};f.triangles=function(t){return f(t).triangles()};f.x=function(t){return arguments.length?(n="function"===typeof t?t:am(+t),f):n};f.y=function(t){return arguments.length?(u="function"===typeof t?
t:am(+t),f):u};f.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],f):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]};f.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],f):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]};return f};d3.zoom=function(){function f(R){R.property("__zoom",im).on("wheel.zoom",A).on("mousedown.zoom",C).on("dblclick.zoom",G).filter(M).on("touchstart.zoom",O).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",
E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(R,Z){Z=Math.max(X[0],Math.min(X[1],Z));return Z===R.k?R:new yb(Z,R.x,R.y)}function u(R,Z,fa){var ja=Z[0]-fa[0]*R.k;Z=Z[1]-fa[1]*R.k;return ja===R.x&&Z===R.y?R:new yb(R.k,ja,Z)}function r(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function t(R,Z,fa){R.on("start.zoom",function(){z(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).end()}).tween("zoom",function(){var ja=
arguments,qa=z(this,ja),ma=H.apply(this,ja),ya=fa||r(ma),bb=Math.max(ma[1][0]-ma[0][0],ma[1][1]-ma[0][1]);ma=this.__zoom;var di="function"===typeof Z?Z.apply(this,ja):Z,nv=ba(ma.invert(ya).concat(bb/ma.k),di.invert(ya).concat(bb/di.k));return function(zb){if(1===zb)zb=di;else{zb=nv(zb);var ei=bb/zb[2];zb=new yb(ei,ya[0]-zb[0]*ei,ya[1]-zb[1]*ei)}qa.zoom(null,zb)}})}function z(R,Z){for(var fa=0,ja=aa.length,qa;fa<ja;++fa)if((qa=aa[fa]).that===R)return qa;return new D(R,Z)}function D(R,Z){this.that=
R;this.args=Z;this.index=-1;this.active=0;this.extent=H.apply(R,Z)}function A(){if(J.apply(this,arguments)){var R=z(this,arguments),Z=this.__zoom,fa=Math.max(X[0],Math.min(X[1],Z.k*Math.pow(2,T.apply(this,arguments)))),ja=Bb(this);if(R.wheel){if(R.mouse[0][0]!==ja[0]||R.mouse[0][1]!==ja[1])R.mouse[1]=Z.invert(R.mouse[0]=ja);clearTimeout(R.wheel)}else{if(Z.k===fa)return;R.mouse=[ja,Z.invert(ja)];Ub(this);R.start()}Jd();R.wheel=setTimeout(function(){R.wheel=null;R.end()},150);R.zoom("mouse",L(u(n(Z,
fa),R.mouse[0],R.mouse[1]),R.extent,Y))}}function C(){if(!la&&J.apply(this,arguments)){var R=z(this,arguments),Z=Ra(d3.event.view).on("mousemove.zoom",function(){Jd();if(!R.moved){var ma=d3.event.clientX-ja,ya=d3.event.clientY-qa;R.moved=ma*ma+ya*ya>pa}R.zoom("mouse",L(u(R.that.__zoom,R.mouse[0]=Bb(R.that),R.mouse[1]),R.extent,Y))},!0).on("mouseup.zoom",function(){Z.on("mousemove.zoom mouseup.zoom",null);Xd(d3.event.view,R.moved);Jd();R.end()},!0),fa=Bb(this),ja=d3.event.clientX,qa=d3.event.clientY;
Wd(d3.event.view);d3.event.stopImmediatePropagation();R.mouse=[fa,this.__zoom.invert(fa)];Ub(this);R.start()}}function G(){if(J.apply(this,arguments)){var R=this.__zoom,Z=Bb(this),fa=R.invert(Z);R=L(u(n(R,R.k*(d3.event.shiftKey?.5:2)),Z,fa),H.apply(this,arguments),Y);Jd();0<W?Ra(this).transition().duration(W).call(t,R,Z):Ra(this).call(f.transform,R)}}function O(){if(J.apply(this,arguments)){var R=z(this,arguments),Z=d3.event.changedTouches,fa=Z.length,ja;d3.event.stopImmediatePropagation();for(ja=
0;ja<fa;++ja){var qa=Z[ja];var ma=Vd(this,Z,qa.identifier);ma=[ma,this.__zoom.invert(ma),qa.identifier];if(R.touch0)R.touch1||(R.touch1=ma);else{R.touch0=ma;var ya=!0}}if(ea&&(ea=clearTimeout(ea),!R.touch1)){R.end();(ma=Ra(this).on("dblclick.zoom"))&&ma.apply(this,arguments);return}ya&&(ea=setTimeout(function(){ea=null},500),Ub(this),R.start())}}function S(){var R=z(this,arguments),Z=d3.event.changedTouches,fa=Z.length,ja;Jd();ea&&(ea=clearTimeout(ea));for(ja=0;ja<fa;++ja){var qa=Z[ja];var ma=Vd(this,
Z,qa.identifier);R.touch0&&R.touch0[2]===qa.identifier?R.touch0[0]=ma:R.touch1&&R.touch1[2]===qa.identifier&&(R.touch1[0]=ma)}qa=R.that.__zoom;if(R.touch1){ma=R.touch0[0];Z=R.touch0[1];ja=R.touch1[0];fa=R.touch1[1];var ya=(ya=ja[0]-ma[0])*ya+(ya=ja[1]-ma[1])*ya;var bb=(bb=fa[0]-Z[0])*bb+(bb=fa[1]-Z[1])*bb;qa=n(qa,Math.sqrt(ya/bb));ma=[(ma[0]+ja[0])/2,(ma[1]+ja[1])/2];ya=[(Z[0]+fa[0])/2,(Z[1]+fa[1])/2]}else if(R.touch0)ma=R.touch0[0],ya=R.touch0[1];else return;R.zoom("touch",L(u(qa,ma,ya),R.extent,
Y))}function E(){var R=z(this,arguments),Z=d3.event.changedTouches,fa=Z.length,ja;d3.event.stopImmediatePropagation();la&&clearTimeout(la);la=setTimeout(function(){la=null},500);for(ja=0;ja<fa;++ja){var qa=Z[ja];R.touch0&&R.touch0[2]===qa.identifier?delete R.touch0:R.touch1&&R.touch1[2]===qa.identifier&&delete R.touch1}R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1);R.touch0?R.touch0[1]=this.__zoom.invert(R.touch0[0]):R.end()}var J=Ss,H=Ts,L=Ws,T=Us,M=Vs,X=[0,Infinity],Y=[[-Infinity,-Infinity],
[Infinity,Infinity]],W=250,ba=Si,aa=[],ha=Ob("start","zoom","end"),ea,la,pa=0;f.transform=function(R,Z){var fa=R.selection?R.selection():R;fa.property("__zoom",im);R!==fa?t(R,Z):fa.interrupt().each(function(){z(this,arguments).start().zoom(null,"function"===typeof Z?Z.apply(this,arguments):Z).end()})};f.scaleBy=function(R,Z){f.scaleTo(R,function(){var fa=this.__zoom.k,ja="function"===typeof Z?Z.apply(this,arguments):Z;return fa*ja})};f.scaleTo=function(R,Z){f.transform(R,function(){var fa=H.apply(this,
arguments),ja=this.__zoom,qa=r(fa),ma=ja.invert(qa),ya="function"===typeof Z?Z.apply(this,arguments):Z;return L(u(n(ja,ya),qa,ma),fa,Y)})};f.translateBy=function(R,Z,fa){f.transform(R,function(){return L(this.__zoom.translate("function"===typeof Z?Z.apply(this,arguments):Z,"function"===typeof fa?fa.apply(this,arguments):fa),H.apply(this,arguments),Y)})};f.translateTo=function(R,Z,fa){f.transform(R,function(){var ja=H.apply(this,arguments),qa=this.__zoom,ma=r(ja);return L(qf.translate(ma[0],ma[1]).scale(qa.k).translate("function"===
typeof Z?-Z.apply(this,arguments):-Z,"function"===typeof fa?-fa.apply(this,arguments):-fa),ja,Y)})};D.prototype={start:function(){1===++this.active&&(this.index=aa.push(this)-1,this.emit("start"));return this},zoom:function(R,Z){this.mouse&&"mouse"!==R&&(this.mouse[1]=Z.invert(this.mouse[0]));this.touch0&&"touch"!==R&&(this.touch0[1]=Z.invert(this.touch0[0]));this.touch1&&"touch"!==R&&(this.touch1[1]=Z.invert(this.touch1[0]));this.that.__zoom=Z;this.emit("zoom");return this},end:function(){0===--this.active&&
(aa.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(R){Qc(new Rs(f,R,this.that.__zoom),ha.apply,ha,[R,this.that,this.args])}};f.wheelDelta=function(R){return arguments.length?(T="function"===typeof R?R:pf(+R),f):T};f.filter=function(R){return arguments.length?(J="function"===typeof R?R:pf(!!R),f):J};f.touchable=function(R){return arguments.length?(M="function"===typeof R?R:pf(!!R),f):M};f.extent=function(R){return arguments.length?(H="function"===typeof R?R:pf([[+R[0][0],
+R[0][1]],[+R[1][0],+R[1][1]]]),f):H};f.scaleExtent=function(R){return arguments.length?(X[0]=+R[0],X[1]=+R[1],f):[X[0],X[1]]};f.translateExtent=function(R){return arguments.length?(Y[0][0]=+R[0][0],Y[1][0]=+R[1][0],Y[0][1]=+R[0][1],Y[1][1]=+R[1][1],f):[[Y[0][0],Y[0][1]],[Y[1][0],Y[1][1]]]};f.constrain=function(R){return arguments.length?(L=R,f):L};f.duration=function(R){return arguments.length?(W=+R,f):W};f.interpolate=function(R){return arguments.length?(ba=R,f):ba};f.on=function(){var R=ha.on.apply(ha,
arguments);return R===ha?f:R};f.clickDistance=function(R){return arguments.length?(pa=(R=+R)*R,f):Math.sqrt(pa)};return f};d3.zoomTransform=hm;d3.zoomIdentity=qf;Ua.svg=Ua.svg;Ua.xhtml=Ua.xhtml;Ua.xlink=Ua.xlink;Ua.xml=Ua.xml;Ua.xmlns=Ua.xmlns})();
</script><script>/*

  Numeric Javascript
  Copyright (C) 2011 by Sébastien Loisel

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
var numeric=typeof exports==="undefined"?function numeric(){}:exports;if(typeof global!=="undefined")global.numeric=numeric;if(typeof window!=="undefined")window.numeric=numeric;numeric.version="1.2.6";
numeric.bench=function bench(f,interval){var t1,t2,n,i;if(typeof interval==="undefined")interval=15;n=.5;t1=new Date;while(1){n*=2;for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;if(t2-t1>interval)break}for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;return 1E3*(3*n-1)/(t2-t1)};numeric._myIndexOf=function _myIndexOf(w){var n=this.length,k;for(k=0;k<n;++k)if(this[k]===w)return k;return-1};numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf;
numeric.Function=Function;numeric.precision=4;numeric.largeArray=50;
numeric.prettyPrint=function prettyPrint(x){function fmtnum(x){if(x===0)return"0";if(isNaN(x))return"NaN";if(x<0)return"-"+fmtnum(-x);if(isFinite(x)){var scale=Math.floor(Math.log(x)/Math.log(10));var normalized=x/Math.pow(10,scale);var basic=normalized.toPrecision(numeric.precision);if(parseFloat(basic)===10){scale++;normalized=1;basic=normalized.toPrecision(numeric.precision)}return parseFloat(basic).toString()+"e"+scale.toString()}return"Infinity"}var ret=[];function foo(x){var k;if(typeof x===
"undefined"){ret.push(Array(numeric.precision+8).join(" "));return false}if(typeof x==="string"){ret.push('"'+x+'"');return false}if(typeof x==="boolean"){ret.push(x.toString());return false}if(typeof x==="number"){var a=fmtnum(x);var b=x.toPrecision(numeric.precision);var c=parseFloat(x.toString()).toString();var d=[a,b,c,parseFloat(b).toString(),parseFloat(c).toString()];for(k=1;k<d.length;k++)if(d[k].length<a.length)a=d[k];ret.push(Array(numeric.precision+8-a.length).join(" ")+a);return false}if(x===
null){ret.push("null");return false}if(typeof x==="function"){ret.push(x.toString());var flag=false;for(k in x)if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");else ret.push("\n{");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}if(flag)ret.push("}\n");return true}if(x instanceof Array){if(x.length>numeric.largeArray){ret.push("...Large Array...");return true}var flag=false;ret.push("[");for(k=0;k<x.length;k++){if(k>0){ret.push(",");if(flag)ret.push("\n ")}flag=foo(x[k])}ret.push("]");return true}ret.push("{");
var flag=false;for(k in x)if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}ret.push("}");return true}foo(x);return ret.join("")};numeric.parseDate=function parseDate(d){function foo(d){if(typeof d==="string")return Date.parse(d.replace(/-/g,"/"));if(!(d instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var ret=[],k;for(k=0;k<d.length;k++)ret[k]=foo(d[k]);return ret}return foo(d)};
numeric.parseFloat=function parseFloat_(d){function foo(d){if(typeof d==="string")return parseFloat(d);if(!(d instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var ret=[],k;for(k=0;k<d.length;k++)ret[k]=foo(d[k]);return ret}return foo(d)};
numeric.parseCSV=function parseCSV(t){var foo=t.split("\n");var j,k;var ret=[];var pat=/(([^'",]*)|('[^']*')|("[^"]*")),/g;var patnum=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/;var stripper=function(n){return n.substr(0,n.length-1)};var count=0;for(k=0;k<foo.length;k++){var bar=(foo[k]+",").match(pat),baz;if(bar.length>0){ret[count]=[];for(j=0;j<bar.length;j++){baz=stripper(bar[j]);if(patnum.test(baz))ret[count][j]=parseFloat(baz);else ret[count][j]=
baz}count++}}return ret};numeric.toCSV=function toCSV(A){var s=numeric.dim(A);var i,j,m,n,row,ret;m=s[0];n=s[1];ret=[];for(i=0;i<m;i++){row=[];for(j=0;j<m;j++)row[j]=A[i][j].toString();ret[i]=row.join(", ")}return ret.join("\n")+"\n"};numeric.getURL=function getURL(url){var client=new XMLHttpRequest;client.open("GET",url,false);client.send();return client};
numeric.imageURL=function imageURL(img){function base64(A){var n=A.length,i,x,y,z,p,q,r,s;var key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d";var ret="";for(i=0;i<n;i+=3){x=A[i];y=A[i+1];z=A[i+2];p=x>>2;q=((x&3)<<4)+(y>>4);r=((y&15)<<2)+(z>>6);s=z&63;if(i+1>=n)r=s=64;else if(i+2>=n)s=64;ret+=key.charAt(p)+key.charAt(q)+key.charAt(r)+key.charAt(s)}return ret}function crc32Array(a,from,to){if(typeof from==="undefined")from=0;if(typeof to==="undefined")to=a.length;var table=
[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,
651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,
4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,
167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,
3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,
2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var crc=-1,y=0,n=a.length,i;for(i=from;i<to;i++){y=(crc^a[i])&255;crc=crc>>>8^table[y]}return crc^-1}var h=img[0].length,w=img[0][0].length,s1,s2,next,k,length,a,b,i,j,adler32,crc32;var stream=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,w>>24&255,w>>16&255,w>>8&255,w&255,h>>24&255,
h>>16&255,h>>8&255,h&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];crc32=crc32Array(stream,12,29);stream[29]=crc32>>24&255;stream[30]=crc32>>16&255;stream[31]=crc32>>8&255;stream[32]=crc32&255;s1=1;s2=0;for(i=0;i<h;i++){if(i<h-1)stream.push(0);else stream.push(1);a=3*w+1+(i===0)&255;b=3*w+1+(i===0)>>8&255;stream.push(a);stream.push(b);stream.push(~a&255);stream.push(~b&255);if(i===0)stream.push(0);for(j=0;j<w;j++)for(k=0;k<3;k++){a=img[k][i][j];if(a>255)a=255;else if(a<0)a=0;else a=Math.round(a);
s1=(s1+a)%65521;s2=(s2+s1)%65521;stream.push(a)}stream.push(0)}adler32=(s2<<16)+s1;stream.push(adler32>>24&255);stream.push(adler32>>16&255);stream.push(adler32>>8&255);stream.push(adler32&255);length=stream.length-41;stream[33]=length>>24&255;stream[34]=length>>16&255;stream[35]=length>>8&255;stream[36]=length&255;crc32=crc32Array(stream,37);stream.push(crc32>>24&255);stream.push(crc32>>16&255);stream.push(crc32>>8&255);stream.push(crc32&255);stream.push(0);stream.push(0);stream.push(0);stream.push(0);
stream.push(73);stream.push(69);stream.push(78);stream.push(68);stream.push(174);stream.push(66);stream.push(96);stream.push(130);return"data:image/png;base64,"+base64(stream)};numeric._dim=function _dim(x){var ret=[];while(typeof x==="object"){ret.push(x.length);x=x[0]}return ret};numeric.dim=function dim(x){var y,z;if(typeof x==="object"){y=x[0];if(typeof y==="object"){z=y[0];if(typeof z==="object")return numeric._dim(x);return[x.length,y.length]}return[x.length]}return[]};
numeric.mapreduce=function mapreduce(body,init){return Function("x","accum","_s","_k",'if(typeof accum \x3d\x3d\x3d "undefined") accum \x3d '+init+";\n"+'if(typeof x \x3d\x3d\x3d "number") { var xi \x3d x; '+body+"; return accum; }\n"+'if(typeof _s \x3d\x3d\x3d "undefined") _s \x3d numeric.dim(x);\n'+'if(typeof _k \x3d\x3d\x3d "undefined") _k \x3d 0;\n'+"var _n \x3d _s[_k];\n"+"var i,xi;\n"+"if(_k \x3c _s.length-1) {\n"+"    for(i\x3d_n-1;i\x3e\x3d0;i--) {\n"+"        accum \x3d arguments.callee(x[i],accum,_s,_k+1);\n"+
"    }"+"    return accum;\n"+"}\n"+"for(i\x3d_n-1;i\x3e\x3d1;i-\x3d2) { \n"+"    xi \x3d x[i];\n"+"    "+body+";\n"+"    xi \x3d x[i-1];\n"+"    "+body+";\n"+"}\n"+"if(i \x3d\x3d\x3d 0) {\n"+"    xi \x3d x[i];\n"+"    "+body+"\n"+"}\n"+"return accum;")};numeric.mapreduce2=function mapreduce2(body,setup){return Function("x","var n \x3d x.length;\n"+"var i,xi;\n"+setup+";\n"+"for(i\x3dn-1;i!\x3d\x3d-1;--i) { \n"+"    xi \x3d x[i];\n"+"    "+body+";\n"+"}\n"+"return accum;")};
numeric.same=function same(x,y){var i,n;if(!(x instanceof Array)||!(y instanceof Array))return false;n=x.length;if(n!==y.length)return false;for(i=0;i<n;i++){if(x[i]===y[i])continue;if(typeof x[i]==="object"){if(!same(x[i],y[i]))return false}else return false}return true};numeric.rep=function rep(s,v,k){if(typeof k==="undefined")k=0;var n=s[k],ret=Array(n),i;if(k===s.length-1){for(i=n-2;i>=0;i-=2){ret[i+1]=v;ret[i]=v}if(i===-1)ret[0]=v;return ret}for(i=n-1;i>=0;i--)ret[i]=numeric.rep(s,v,k+1);return ret};
numeric.dotMMsmall=function dotMMsmall(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0;p=x.length;q=y.length;r=y[0].length;ret=Array(p);for(i=p-1;i>=0;i--){foo=Array(r);bar=x[i];for(k=r-1;k>=0;k--){woo=bar[q-1]*y[q-1][k];for(j=q-2;j>=1;j-=2){i0=j-1;woo+=bar[j]*y[j][k]+bar[i0]*y[i0][k]}if(j===0)woo+=bar[0]*y[0][k];foo[k]=woo}ret[i]=foo}return ret};numeric._getCol=function _getCol(A,j,x){var n=A.length,i;for(i=n-1;i>0;--i){x[i]=A[i][j];--i;x[i]=A[i][j]}if(i===0)x[0]=A[0][j]};
numeric.dotMMbig=function dotMMbig(x,y){var gc=numeric._getCol,p=y.length,v=Array(p);var m=x.length,n=y[0].length,A=new Array(m),xj;var VV=numeric.dotVV;var i,j,k,z;--p;--m;for(i=m;i!==-1;--i)A[i]=Array(n);--n;for(i=n;i!==-1;--i){gc(y,i,v);for(j=m;j!==-1;--j){z=0;xj=x[j];A[j][i]=VV(xj,v)}}return A};numeric.dotMV=function dotMV(x,y){var p=x.length,q=y.length,i;var ret=Array(p),dotVV=numeric.dotVV;for(i=p-1;i>=0;i--)ret[i]=dotVV(x[i],y);return ret};
numeric.dotVM=function dotVM(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0,s1,s2,s3,baz,accum;p=x.length;q=y[0].length;ret=Array(q);for(k=q-1;k>=0;k--){woo=x[p-1]*y[p-1][k];for(j=p-2;j>=1;j-=2){i0=j-1;woo+=x[j]*y[j][k]+x[i0]*y[i0][k]}if(j===0)woo+=x[0]*y[0][k];ret[k]=woo}return ret};numeric.dotVV=function dotVV(x,y){var i,n=x.length,i1,ret=x[n-1]*y[n-1];for(i=n-2;i>=1;i-=2){i1=i-1;ret+=x[i]*y[i]+x[i1]*y[i1]}if(i===0)ret+=x[0]*y[0];return ret};
numeric.dot=function dot(x,y){var d=numeric.dim;switch(d(x).length*1E3+d(y).length){case 2002:if(y.length<10)return numeric.dotMMsmall(x,y);else return numeric.dotMMbig(x,y);case 2001:return numeric.dotMV(x,y);case 1002:return numeric.dotVM(x,y);case 1001:return numeric.dotVV(x,y);case 1E3:return numeric.mulVS(x,y);case 1:return numeric.mulSV(x,y);case 0:return x*y;default:throw new Error("numeric.dot only works on vectors and matrices");}};
numeric.diag=function diag(d){var i,i1,j,n=d.length,A=Array(n),Ai;for(i=n-1;i>=0;i--){Ai=Array(n);i1=i+2;for(j=n-1;j>=i1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j>i)Ai[j]=0;Ai[i]=d[i];for(j=i-1;j>=1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j===0)Ai[0]=0;A[i]=Ai}return A};numeric.getDiag=function(A){var n=Math.min(A.length,A[0].length),i,ret=Array(n);for(i=n-1;i>=1;--i){ret[i]=A[i][i];--i;ret[i]=A[i][i]}if(i===0)ret[0]=A[0][0];return ret};numeric.identity=function identity(n){return numeric.diag(numeric.rep([n],1))};
numeric.pointwise=function pointwise(params,body,setup){if(typeof setup==="undefined")setup="";var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else p=params[k];if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="_s";fun[params.length+1]="_k";fun[params.length+2]='if(typeof _s \x3d\x3d\x3d "undefined") _s \x3d numeric.dim('+thevec+");\n"+'if(typeof _k \x3d\x3d\x3d "undefined") _k \x3d 0;\n'+
"var _n \x3d _s[_k];\n"+"var i"+(haveret?"":", ret \x3d Array(_n)")+";\n"+"if(_k \x3c _s.length-1) {\n"+"    for(i\x3d_n-1;i\x3e\x3d0;i--) ret[i] \x3d arguments.callee("+params.join(",")+",_s,_k+1);\n"+"    return ret;\n"+"}\n"+setup+"\n"+"for(i\x3d_n-1;i!\x3d\x3d-1;--i) {\n"+"    "+body+"\n"+"}\n"+"return ret;";return Function.apply(null,fun)};
numeric.pointwise2=function pointwise2(params,body,setup){if(typeof setup==="undefined")setup="";var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else p=params[k];if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="var _n \x3d "+thevec+".length;\n"+"var i"+(haveret?"":", ret \x3d Array(_n)")+";\n"+setup+"\n"+"for(i\x3d_n-1;i!\x3d\x3d-1;--i) {\n"+body+"\n"+"}\n"+"return ret;";
return Function.apply(null,fun)};numeric._biforeach=function _biforeach(x,y,s,k,f){if(k===s.length-1){f(x,y);return}var i,n=s[k];for(i=n-1;i>=0;i--)_biforeach(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f)};numeric._biforeach2=function _biforeach2(x,y,s,k,f){if(k===s.length-1)return f(x,y);var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;--i)ret[i]=_biforeach2(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f);return ret};
numeric._foreach=function _foreach(x,s,k,f){if(k===s.length-1){f(x);return}var i,n=s[k];for(i=n-1;i>=0;i--)_foreach(x[i],s,k+1,f)};numeric._foreach2=function _foreach2(x,s,k,f){if(k===s.length-1)return f(x);var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;i--)ret[i]=_foreach2(x[i],s,k+1,f);return ret};
numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};numeric.opseq={addeq:"+\x3d",subeq:"-\x3d",muleq:"*\x3d",diveq:"/\x3d",modeq:"%\x3d",lshifteq:"\x3c\x3c\x3d",rshifteq:"\x3e\x3e\x3d",rrshifteq:"\x3e\x3e\x3e\x3d",bandeq:"\x26\x3d",boreq:"|\x3d",bxoreq:"^\x3d"};
numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"];numeric.mathfuns2=["atan2","pow","max","min"];numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""};
numeric.mapreducers={any:["if(xi) return true;","var accum \x3d false;"],all:["if(!xi) return false;","var accum \x3d true;"],sum:["accum +\x3d xi;","var accum \x3d 0;"],prod:["accum *\x3d xi;","var accum \x3d 1;"],norm2Squared:["accum +\x3d xi*xi;","var accum \x3d 0;"],norminf:["accum \x3d max(accum,abs(xi));","var accum \x3d 0, max \x3d Math.max, abs \x3d Math.abs;"],norm1:["accum +\x3d abs(xi)","var accum \x3d 0, abs \x3d Math.abs;"],sup:["accum \x3d max(accum,xi);","var accum \x3d -Infinity, max \x3d Math.max;"],
inf:["accum \x3d min(accum,xi);","var accum \x3d Infinity, min \x3d Math.min;"]};
(function(){var i,o;for(i=0;i<numeric.mathfuns2.length;++i){o=numeric.mathfuns2[i];numeric.ops2[o]=o}for(i in numeric.ops2)if(numeric.ops2.hasOwnProperty(i)){o=numeric.ops2[i];var code,codeeq,setup="";if(numeric.myIndexOf.call(numeric.mathfuns2,i)!==-1){setup="var "+o+" \x3d Math."+o+";\n";code=function(r,x,y){return r+" \x3d "+o+"("+x+","+y+")"};codeeq=function(x,y){return x+" \x3d "+o+"("+x+","+y+")"}}else{code=function(r,x,y){return r+" \x3d "+x+" "+o+" "+y};if(numeric.opseq.hasOwnProperty(i+"eq"))codeeq=
function(x,y){return x+" "+o+"\x3d "+y};else codeeq=function(x,y){return x+" \x3d "+x+" "+o+" "+y}}numeric[i+"VV"]=numeric.pointwise2(["x[i]","y[i]"],code("ret[i]","x[i]","y[i]"),setup);numeric[i+"SV"]=numeric.pointwise2(["x","y[i]"],code("ret[i]","x","y[i]"),setup);numeric[i+"VS"]=numeric.pointwise2(["x[i]","y"],code("ret[i]","x[i]","y"),setup);numeric[i]=Function("var n \x3d arguments.length, i, x \x3d arguments[0], y;\n"+"var VV \x3d numeric."+i+"VV, VS \x3d numeric."+i+"VS, SV \x3d numeric."+
i+"SV;\n"+"var dim \x3d numeric.dim;\n"+"for(i\x3d1;i!\x3d\x3dn;++i) { \n"+"  y \x3d arguments[i];\n"+'  if(typeof x \x3d\x3d\x3d "object") {\n'+'      if(typeof y \x3d\x3d\x3d "object") x \x3d numeric._biforeach2(x,y,dim(x),0,VV);\n'+"      else x \x3d numeric._biforeach2(x,y,dim(x),0,VS);\n"+'  } else if(typeof y \x3d\x3d\x3d "object") x \x3d numeric._biforeach2(x,y,dim(y),0,SV);\n'+"  else "+codeeq("x","y")+"\n"+"}\nreturn x;\n");numeric[o]=numeric[i];numeric[i+"eqV"]=numeric.pointwise2(["ret[i]",
"x[i]"],codeeq("ret[i]","x[i]"),setup);numeric[i+"eqS"]=numeric.pointwise2(["ret[i]","x"],codeeq("ret[i]","x"),setup);numeric[i+"eq"]=Function("var n \x3d arguments.length, i, x \x3d arguments[0], y;\n"+"var V \x3d numeric."+i+"eqV, S \x3d numeric."+i+"eqS\n"+"var s \x3d numeric.dim(x);\n"+"for(i\x3d1;i!\x3d\x3dn;++i) { \n"+"  y \x3d arguments[i];\n"+'  if(typeof y \x3d\x3d\x3d "object") numeric._biforeach(x,y,s,0,V);\n'+"  else numeric._biforeach(x,y,s,0,S);\n"+"}\nreturn x;\n")}for(i=0;i<numeric.mathfuns2.length;++i){o=
numeric.mathfuns2[i];delete numeric.ops2[o]}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];numeric.ops1[o]=o}for(i in numeric.ops1)if(numeric.ops1.hasOwnProperty(i)){setup="";o=numeric.ops1[i];if(numeric.myIndexOf.call(numeric.mathfuns,i)!==-1)if(Math.hasOwnProperty(o))setup="var "+o+" \x3d Math."+o+";\n";numeric[i+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] \x3d "+o+"(ret[i]);",setup);numeric[i+"eq"]=Function("x",'if(typeof x !\x3d\x3d "object") return '+o+"x\n"+"var i;\n"+"var V \x3d numeric."+
i+"eqV;\n"+"var s \x3d numeric.dim(x);\n"+"numeric._foreach(x,s,0,V);\n"+"return x;\n");numeric[i+"V"]=numeric.pointwise2(["x[i]"],"ret[i] \x3d "+o+"(x[i]);",setup);numeric[i]=Function("x",'if(typeof x !\x3d\x3d "object") return '+o+"(x)\n"+"var i;\n"+"var V \x3d numeric."+i+"V;\n"+"var s \x3d numeric.dim(x);\n"+"return numeric._foreach2(x,s,0,V);\n")}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];delete numeric.ops1[o]}for(i in numeric.mapreducers)if(numeric.mapreducers.hasOwnProperty(i)){o=
numeric.mapreducers[i];numeric[i+"V"]=numeric.mapreduce2(o[0],o[1]);numeric[i]=Function("x","s","k",o[1]+'if(typeof x !\x3d\x3d "object") {'+"    xi \x3d x;\n"+o[0]+";\n"+"    return accum;\n"+"}"+'if(typeof s \x3d\x3d\x3d "undefined") s \x3d numeric.dim(x);\n'+'if(typeof k \x3d\x3d\x3d "undefined") k \x3d 0;\n'+"if(k \x3d\x3d\x3d s.length-1) return numeric."+i+"V(x);\n"+"var xi;\n"+"var n \x3d x.length, i;\n"+"for(i\x3dn-1;i!\x3d\x3d-1;--i) {\n"+"   xi \x3d arguments.callee(x[i]);\n"+o[0]+";\n"+
"}\n"+"return accum;\n")}})();numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] \x3d round(x[i]/y[i])*y[i];","var round \x3d Math.round;");numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] \x3d round(x[i]/y)*y;","var round \x3d Math.round;");numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] \x3d round(x/y[i])*y[i];","var round \x3d Math.round;");
numeric.trunc=function trunc(x,y){if(typeof x==="object"){if(typeof y==="object")return numeric.truncVV(x,y);return numeric.truncVS(x,y)}if(typeof y==="object")return numeric.truncSV(x,y);return Math.round(x/y)*y};
numeric.inv=function inv(x){var s=numeric.dim(x),abs=Math.abs,m=s[0],n=s[1];var A=numeric.clone(x),Ai,Aj;var I=numeric.identity(m),Ii,Ij;var i,j,k,x;for(j=0;j<n;++j){var i0=-1;var v0=-1;for(i=j;i!==m;++i){k=abs(A[i][j]);if(k>v0){i0=i;v0=k}}Aj=A[i0];A[i0]=A[j];A[j]=Aj;Ij=I[i0];I[i0]=I[j];I[j]=Ij;x=Aj[j];for(k=j;k!==n;++k)Aj[k]/=x;for(k=n-1;k!==-1;--k)Ij[k]/=x;for(i=m-1;i!==-1;--i)if(i!==j){Ai=A[i];Ii=I[i];x=Ai[j];for(k=j+1;k!==n;++k)Ai[k]-=Aj[k]*x;for(k=n-1;k>0;--k){Ii[k]-=Ij[k]*x;--k;Ii[k]-=Ij[k]*
x}if(k===0)Ii[0]-=Ij[0]*x}}return I};
numeric.det=function det(x){var s=numeric.dim(x);if(s.length!==2||s[0]!==s[1])throw new Error("numeric: det() only works on square matrices");var n=s[0],ret=1,i,j,k,A=numeric.clone(x),Aj,Ai,alpha,temp,k1,k2,k3;for(j=0;j<n-1;j++){k=j;for(i=j+1;i<n;i++)if(Math.abs(A[i][j])>Math.abs(A[k][j]))k=i;if(k!==j){temp=A[k];A[k]=A[j];A[j]=temp;ret*=-1}Aj=A[j];for(i=j+1;i<n;i++){Ai=A[i];alpha=Ai[j]/Aj[j];for(k=j+1;k<n-1;k+=2){k1=k+1;Ai[k]-=Aj[k]*alpha;Ai[k1]-=Aj[k1]*alpha}if(k!==n)Ai[k]-=Aj[k]*alpha}if(Aj[j]===
0)return 0;ret*=Aj[j]}return ret*A[j][j]};numeric.transpose=function transpose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j];--j;Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j]}if(j===0){Bj=ret[0];Bj[i]=A1[0];Bj[i-1]=A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=A0[j];--j;ret[j][0]=A0[j]}if(j===0)ret[0][0]=A0[0]}return ret};
numeric.negtranspose=function negtranspose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j];--j;Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j]}if(j===0){Bj=ret[0];Bj[i]=-A1[0];Bj[i-1]=-A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=-A0[j];--j;ret[j][0]=-A0[j]}if(j===0)ret[0][0]=-A0[0]}return ret};
numeric._random=function _random(s,k){var i,n=s[k],ret=Array(n),rnd;if(k===s.length-1){rnd=Math.random;for(i=n-1;i>=1;i-=2){ret[i]=rnd();ret[i-1]=rnd()}if(i===0)ret[0]=rnd();return ret}for(i=n-1;i>=0;i--)ret[i]=_random(s,k+1);return ret};numeric.random=function random(s){return numeric._random(s,0)};numeric.norm2=function norm2(x){return Math.sqrt(numeric.norm2Squared(x))};
numeric.linspace=function linspace(a,b,n){if(typeof n==="undefined")n=Math.max(Math.round(b-a)+1,1);if(n<2)return n===1?[a]:[];var i,ret=Array(n);n--;for(i=n;i>=0;i--)ret[i]=(i*b+(n-i)*a)/n;return ret};numeric.getBlock=function getBlock(x,from,to){var s=numeric.dim(x);function foo(x,k){var i,a=from[k],n=to[k]-a,ret=Array(n);if(k===s.length-1){for(i=n;i>=0;i--)ret[i]=x[i+a];return ret}for(i=n;i>=0;i--)ret[i]=foo(x[i+a],k+1);return ret}return foo(x,0)};
numeric.setBlock=function setBlock(x,from,to,B){var s=numeric.dim(x);function foo(x,y,k){var i,a=from[k],n=to[k]-a;if(k===s.length-1)for(i=n;i>=0;i--)x[i+a]=y[i];for(i=n;i>=0;i--)foo(x[i+a],y[i],k+1)}foo(x,B,0);return x};numeric.getRange=function getRange(A,I,J){var m=I.length,n=J.length;var i,j;var B=Array(m),Bi,AI;for(i=m-1;i!==-1;--i){B[i]=Array(n);Bi=B[i];AI=A[I[i]];for(j=n-1;j!==-1;--j)Bi[j]=AI[J[j]]}return B};
numeric.blockMatrix=function blockMatrix(X){var s=numeric.dim(X);if(s.length<4)return numeric.blockMatrix([X]);var m=s[0],n=s[1],M,N,i,j,Xij;M=0;N=0;for(i=0;i<m;++i)M+=X[i][0].length;for(j=0;j<n;++j)N+=X[0][j][0].length;var Z=Array(M);for(i=0;i<M;++i)Z[i]=Array(N);var I=0,J,ZI,k,l,Xijk;for(i=0;i<m;++i){J=N;for(j=n-1;j!==-1;--j){Xij=X[i][j];J-=Xij[0].length;for(k=Xij.length-1;k!==-1;--k){Xijk=Xij[k];ZI=Z[I+k];for(l=Xijk.length-1;l!==-1;--l)ZI[J+l]=Xijk[l]}}I+=X[i][0].length}return Z};
numeric.tensor=function tensor(x,y){if(typeof x==="number"||typeof y==="number")return numeric.mul(x,y);var s1=numeric.dim(x),s2=numeric.dim(y);if(s1.length!==1||s2.length!==1)throw new Error("numeric: tensor product is only defined for vectors");var m=s1[0],n=s2[0],A=Array(m),Ai,i,j,xi;for(i=m-1;i>=0;i--){Ai=Array(n);xi=x[i];for(j=n-1;j>=3;--j){Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j]}while(j>=0){Ai[j]=xi*y[j];--j}A[i]=Ai}return A};
numeric.T=function T(x,y){this.x=x;this.y=y};numeric.t=function t(x,y){return new numeric.T(x,y)};
numeric.Tbinop=function Tbinop(rr,rc,cr,cc,setup){var io=numeric.indexOf;if(typeof setup!=="string"){var k;setup="";for(k in numeric)if(numeric.hasOwnProperty(k)&&(rr.indexOf(k)>=0||rc.indexOf(k)>=0||cr.indexOf(k)>=0||cc.indexOf(k)>=0)&&k.length>1)setup+="var "+k+" \x3d numeric."+k+";\n"}return Function(["y"],"var x \x3d this;\n"+"if(!(y instanceof numeric.T)) { y \x3d new numeric.T(y); }\n"+setup+"\n"+"if(x.y) {"+"  if(y.y) {"+"    return new numeric.T("+cc+");\n"+"  }\n"+"  return new numeric.T("+
cr+");\n"+"}\n"+"if(y.y) {\n"+"  return new numeric.T("+rc+");\n"+"}\n"+"return new numeric.T("+rr+");\n")};numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");
numeric.T.prototype.reciprocal=function reciprocal(){var mul=numeric.mul,div=numeric.div;if(this.y){var d=numeric.add(mul(this.x,this.x),mul(this.y,this.y));return new numeric.T(div(this.x,d),div(numeric.neg(this.y),d))}return new T(div(1,this.x))};numeric.T.prototype.div=function div(y){if(!(y instanceof numeric.T))y=new numeric.T(y);if(y.y)return this.mul(y.reciprocal());var div=numeric.div;if(this.y)return new numeric.T(div(this.x,y.x),div(this.y,y.x));return new numeric.T(div(this.x,y.x))};
numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");numeric.T.prototype.transpose=function transpose(){var t=numeric.transpose,x=this.x,y=this.y;if(y)return new numeric.T(t(x),t(y));return new numeric.T(t(x))};numeric.T.prototype.transjugate=function transjugate(){var t=numeric.transpose,x=this.x,y=this.y;if(y)return new numeric.T(t(x),numeric.negtranspose(y));return new numeric.T(t(x))};
numeric.Tunop=function Tunop(r,c,s){if(typeof s!=="string")s="";return Function("var x \x3d this;\n"+s+"\n"+"if(x.y) {"+"  "+c+";\n"+"}\n"+r+";\n")};numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex \x3d numeric.exp(x.x), cos \x3d numeric.cos, sin \x3d numeric.sin, mul \x3d numeric.mul;");numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");
numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg \x3d numeric.neg;");numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");
numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul \x3d numeric.mul;");numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta \x3d new numeric.T(numeric.atan2(x.y,x.x)), r \x3d x.abs();\n"+"return new numeric.T(numeric.log(r.x),theta.x);");numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f \x3d numeric.norm2Squared;\n"+"return Math.sqrt(f(x.x)+f(x.y));");
numeric.T.prototype.inv=function inv(){var A=this;if(typeof A.y==="undefined")return new numeric.T(numeric.inv(A.x));var n=A.x.length,i,j,k;var Rx=numeric.identity(n),Ry=numeric.rep([n,n],0);var Ax=numeric.clone(A.x),Ay=numeric.clone(A.y);var Aix,Aiy,Ajx,Ajy,Rix,Riy,Rjx,Rjy;var i,j,k,d,d1,ax,ay,bx,by,temp;for(i=0;i<n;i++){ax=Ax[i][i];ay=Ay[i][i];d=ax*ax+ay*ay;k=i;for(j=i+1;j<n;j++){ax=Ax[j][i];ay=Ay[j][i];d1=ax*ax+ay*ay;if(d1>d){k=j;d=d1}}if(k!==i){temp=Ax[i];Ax[i]=Ax[k];Ax[k]=temp;temp=Ay[i];Ay[i]=
Ay[k];Ay[k]=temp;temp=Rx[i];Rx[i]=Rx[k];Rx[k]=temp;temp=Ry[i];Ry[i]=Ry[k];Ry[k]=temp}Aix=Ax[i];Aiy=Ay[i];Rix=Rx[i];Riy=Ry[i];ax=Aix[i];ay=Aiy[i];for(j=i+1;j<n;j++){bx=Aix[j];by=Aiy[j];Aix[j]=(bx*ax+by*ay)/d;Aiy[j]=(by*ax-bx*ay)/d}for(j=0;j<n;j++){bx=Rix[j];by=Riy[j];Rix[j]=(bx*ax+by*ay)/d;Riy[j]=(by*ax-bx*ay)/d}for(j=i+1;j<n;j++){Ajx=Ax[j];Ajy=Ay[j];Rjx=Rx[j];Rjy=Ry[j];ax=Ajx[i];ay=Ajy[i];for(k=i+1;k<n;k++){bx=Aix[k];by=Aiy[k];Ajx[k]-=bx*ax-by*ay;Ajy[k]-=by*ax+bx*ay}for(k=0;k<n;k++){bx=Rix[k];by=
Riy[k];Rjx[k]-=bx*ax-by*ay;Rjy[k]-=by*ax+bx*ay}}}for(i=n-1;i>0;i--){Rix=Rx[i];Riy=Ry[i];for(j=i-1;j>=0;j--){Rjx=Rx[j];Rjy=Ry[j];ax=Ax[j][i];ay=Ay[j][i];for(k=n-1;k>=0;k--){bx=Rix[k];by=Riy[k];Rjx[k]-=ax*bx-ay*by;Rjy[k]-=ax*by+ay*bx}}}return new numeric.T(Rx,Ry)};numeric.T.prototype.get=function get(i){var x=this.x,y=this.y,k=0,ik,n=i.length;if(y){while(k<n){ik=i[k];x=x[ik];y=y[ik];k++}return new numeric.T(x,y)}while(k<n){ik=i[k];x=x[ik];k++}return new numeric.T(x)};
numeric.T.prototype.set=function set(i,v){var x=this.x,y=this.y,k=0,ik,n=i.length,vx=v.x,vy=v.y;if(n===0){if(vy)this.y=vy;else if(y)this.y=undefined;this.x=x;return this}if(vy){if(y);else{y=numeric.rep(numeric.dim(x),0);this.y=y}while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;y[ik]=vy;return this}if(y){while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;if(vx instanceof Array)y[ik]=numeric.rep(numeric.dim(vx),0);else y[ik]=0;return this}while(k<n-1){ik=i[k];x=x[ik];k++}ik=i[k];x[ik]=
vx;return this};numeric.T.prototype.getRows=function getRows(i0,i1){var n=i1-i0+1,j;var rx=Array(n),ry,x=this.x,y=this.y;for(j=i0;j<=i1;j++)rx[j-i0]=x[j];if(y){ry=Array(n);for(j=i0;j<=i1;j++)ry[j-i0]=y[j];return new numeric.T(rx,ry)}return new numeric.T(rx)};
numeric.T.prototype.setRows=function setRows(i0,i1,A){var j;var rx=this.x,ry=this.y,x=A.x,y=A.y;for(j=i0;j<=i1;j++)rx[j]=x[j-i0];if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}for(j=i0;j<=i1;j++)ry[j]=y[j-i0]}else if(ry)for(j=i0;j<=i1;j++)ry[j]=numeric.rep([x[j-i0].length],0);return this};numeric.T.prototype.getRow=function getRow(k){var x=this.x,y=this.y;if(y)return new numeric.T(x[k],y[k]);return new numeric.T(x[k])};
numeric.T.prototype.setRow=function setRow(i,v){var rx=this.x,ry=this.y,x=v.x,y=v.y;rx[i]=x;if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}ry[i]=y}else if(ry)ry=numeric.rep([x.length],0);return this};numeric.T.prototype.getBlock=function getBlock(from,to){var x=this.x,y=this.y,b=numeric.getBlock;if(y)return new numeric.T(b(x,from,to),b(y,from,to));return new numeric.T(b(x,from,to))};
numeric.T.prototype.setBlock=function setBlock(from,to,A){if(!(A instanceof numeric.T))A=new numeric.T(A);var x=this.x,y=this.y,b=numeric.setBlock,Ax=A.x,Ay=A.y;if(Ay){if(!y){this.y=numeric.rep(numeric.dim(this),0);y=this.y}b(x,from,to,Ax);b(y,from,to,Ay);return this}b(x,from,to,Ax);if(y)b(y,from,to,numeric.rep(numeric.dim(Ax),0))};numeric.T.rep=function rep(s,v){var T=numeric.T;if(!(v instanceof T))v=new T(v);var x=v.x,y=v.y,r=numeric.rep;if(y)return new T(r(s,x),r(s,y));return new T(r(s,x))};
numeric.T.diag=function diag(d){if(!(d instanceof numeric.T))d=new numeric.T(d);var x=d.x,y=d.y,diag=numeric.diag;if(y)return new numeric.T(diag(x),diag(y));return new numeric.T(diag(x))};numeric.T.eig=function eig(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)};numeric.T.identity=function identity(n){return new numeric.T(numeric.identity(n))};
numeric.T.prototype.getDiag=function getDiag(){var n=numeric;var x=this.x,y=this.y;if(y)return new n.T(n.getDiag(x),n.getDiag(y));return new n.T(n.getDiag(x))};numeric.house=function house(x){var v=numeric.clone(x);var s=x[0]>=0?1:-1;var alpha=s*numeric.norm2(x);v[0]+=alpha;var foo=numeric.norm2(v);if(foo===0)throw new Error("eig: internal error");return numeric.div(v,foo)};
numeric.toUpperHessenberg=function toUpperHessenberg(me){var s=numeric.dim(me);if(s.length!==2||s[0]!==s[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var m=s[0],i,j,k,x,v,A=numeric.clone(me),B,C,Ai,Ci,Q=numeric.identity(m),Qi;for(j=0;j<m-2;j++){x=Array(m-j-1);for(i=j+1;i<m;i++)x[i-j-1]=A[i][j];if(numeric.norm2(x)>0){v=numeric.house(x);B=numeric.getBlock(A,[j+1,j],[m-1,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Ai=A[i];Ci=C[i-j-1];for(k=j;k<m;k++)Ai[k]-=
2*Ci[k-j]}B=numeric.getBlock(A,[0,j+1],[m-1,m-1]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Ai=A[i];Ci=C[i];for(k=j+1;k<m;k++)Ai[k]-=2*Ci[k-j-1]}B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}return{H:A,Q:Q}};numeric.epsilon=2.220446049250313E-16;
numeric.QRFrancis=function(H,maxiter){if(typeof maxiter==="undefined")maxiter=1E4;H=numeric.clone(H);var H0=numeric.clone(H);var s=numeric.dim(H),m=s[0],x,v,a,b,c,d,det,tr,Hloc,Q=numeric.identity(m),Qi,Hi,B,C,Ci,i,j,k,iter;if(m<3)return{Q:Q,B:[[0,m-1]]};var epsilon=numeric.epsilon;for(iter=0;iter<maxiter;iter++){for(j=0;j<m-1;j++)if(Math.abs(H[j+1][j])<epsilon*(Math.abs(H[j][j])+Math.abs(H[j+1][j+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[j,j]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,
[j+1,j+1],[m-1,m-1]),maxiter);B=Array(j+1);for(i=0;i<=j;i++)B[i]=Q[i];C=numeric.dot(QH1.Q,B);for(i=0;i<=j;i++)Q[i]=C[i];B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.dot(QH2.Q,B);for(i=j+1;i<m;i++)Q[i]=C[i-j-1];return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,j+1))}}a=H[m-2][m-2];b=H[m-2][m-1];c=H[m-1][m-2];d=H[m-1][m-1];tr=a+d;det=a*d-b*c;Hloc=numeric.getBlock(H,[0,0],[2,2]);if(tr*tr>=4*det){var s1,s2;s1=.5*(tr+Math.sqrt(tr*tr-4*det));s2=.5*(tr-Math.sqrt(tr*tr-4*det));Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,
Hloc),numeric.mul(Hloc,s1+s2)),numeric.diag(numeric.rep([3],s1*s2)))}else Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),numeric.mul(Hloc,tr)),numeric.diag(numeric.rep([3],det)));x=[Hloc[0][0],Hloc[1][0],Hloc[2][0]];v=numeric.house(x);B=[H[0],H[1],H[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Hi=H[i];Ci=C[i];for(k=0;k<m;k++)Hi[k]-=2*Ci[k]}B=numeric.getBlock(H,[0,0],[m-1,2]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=0;k<3;k++)Hi[k]-=2*Ci[k]}B=[Q[0],
Q[1],Q[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Qi=Q[i];Ci=C[i];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}var J;for(j=0;j<m-2;j++){for(k=j;k<=j+1;k++)if(Math.abs(H[k+1][k])<epsilon*(Math.abs(H[k][k])+Math.abs(H[k+1][k+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[k,k]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,[k+1,k+1],[m-1,m-1]),maxiter);B=Array(k+1);for(i=0;i<=k;i++)B[i]=Q[i];C=numeric.dot(QH1.Q,B);for(i=0;i<=k;i++)Q[i]=C[i];B=Array(m-k-1);for(i=k+1;i<m;i++)B[i-k-
1]=Q[i];C=numeric.dot(QH2.Q,B);for(i=k+1;i<m;i++)Q[i]=C[i-k-1];return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,k+1))}}J=Math.min(m-1,j+3);x=Array(J-j);for(i=j+1;i<=J;i++)x[i-j-1]=H[i][j];v=numeric.house(x);B=numeric.getBlock(H,[j+1,j],[J,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Hi=H[i];Ci=C[i-j-1];for(k=j;k<m;k++)Hi[k]-=2*Ci[k-j]}B=numeric.getBlock(H,[0,j+1],[m-1,J]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=j+1;k<=J;k++)Hi[k]-=2*Ci[k-j-1]}B=Array(J-
j);for(i=j+1;i<=J;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};
numeric.eig=function eig(A,maxiter){var QH=numeric.toUpperHessenberg(A);var QB=numeric.QRFrancis(QH.H,maxiter);var T=numeric.T;var n=A.length,i,k,flag=false,B=QB.B,H=numeric.dot(QB.Q,numeric.dot(QH.H,numeric.transpose(QB.Q)));var Q=new T(numeric.dot(QB.Q,QH.Q)),Q0;var m=B.length,j;var a,b,c,d,p1,p2,disc,x,y,p,q,n1,n2;var sqrt=Math.sqrt;for(k=0;k<m;k++){i=B[k][0];if(i===B[k][1]);else{j=i+1;a=H[i][i];b=H[i][j];c=H[j][i];d=H[j][j];if(b===0&&c===0)continue;p1=-a-d;p2=a*d-b*c;disc=p1*p1-4*p2;if(disc>=
0){if(p1<0)x=-.5*(p1-sqrt(disc));else x=-.5*(p1+sqrt(disc));n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1);p=(a-x)/n1;q=b/n1}else{n2=sqrt(n2);p=c/n2;q=(d-x)/n2}Q0=new T([[q,-p],[p,q]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}else{x=-.5*p1;y=.5*sqrt(-disc);n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1+y*y);p=(a-x)/n1;q=b/n1;x=0;y/=n1}else{n2=sqrt(n2+y*y);p=c/n2;q=(d-x)/n2;x=y/n2;y=0}Q0=new T([[q,-p],[p,q]],[[x,y],[y,-x]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}}}var R=Q.dot(A).dot(Q.transjugate()),
n=A.length,E=numeric.T.identity(n);for(j=0;j<n;j++)if(j>0)for(k=j-1;k>=0;k--){var Rk=R.get([k,k]),Rj=R.get([j,j]);if(numeric.neq(Rk.x,Rj.x)||numeric.neq(Rk.y,Rj.y)){x=R.getRow(k).getBlock([k],[j-1]);y=E.getRow(j).getBlock([k],[j-1]);E.set([j,k],R.get([k,j]).neg().sub(x.dot(y)).div(Rk.sub(Rj)))}else{E.setRow(j,E.getRow(k));continue}}for(j=0;j<n;j++){x=E.getRow(j);E.setRow(j,x.div(x.norm2()))}E=E.transpose();E=Q.transjugate().dot(E);return{lambda:R.getDiag(),E:E}};
numeric.ccsSparse=function ccsSparse(A){var m=A.length,n,foo,i,j,counts=[];for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo){j=parseInt(j);while(j>=counts.length)counts[counts.length]=0;if(foo[j]!==0)counts[j]++}}var n=counts.length;var Ai=Array(n+1);Ai[0]=0;for(i=0;i<n;++i)Ai[i+1]=Ai[i]+counts[i];var Aj=Array(Ai[n]),Av=Array(Ai[n]);for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo)if(foo[j]!==0){counts[j]--;Aj[Ai[j]+counts[j]]=i;Av[Ai[j]+counts[j]]=foo[j]}}return[Ai,Aj,Av]};
numeric.ccsFull=function ccsFull(A){var Ai=A[0],Aj=A[1],Av=A[2],s=numeric.ccsDim(A),m=s[0],n=s[1],i,j,j0,j1,k;var B=numeric.rep([m,n],0);for(i=0;i<n;i++){j0=Ai[i];j1=Ai[i+1];for(j=j0;j<j1;++j)B[Aj[j]][i]=Av[j]}return B};
numeric.ccsTSolve=function ccsTSolve(A,b,x,bj,xj){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,max=Math.max,n=0;if(typeof bj==="undefined")x=numeric.rep([m],0);if(typeof bj==="undefined")bj=numeric.linspace(0,x.length-1);if(typeof xj==="undefined")xj=[];function dfs(j){var k;if(x[j]!==0)return;x[j]=1;for(k=Ai[j];k<Ai[j+1];++k)dfs(Aj[k]);xj[n]=j;++n}var i,j,j0,j1,k,l,l0,l1,a;for(i=bj.length-1;i!==-1;--i)dfs(bj[i]);xj.length=n;for(i=xj.length-1;i!==-1;--i)x[xj[i]]=0;for(i=bj.length-1;i!==-1;--i){j=bj[i];
x[j]=b[j]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=max(Ai[j+1],j0);for(k=j0;k!==j1;++k)if(Aj[k]===j){x[j]/=Av[k];break}a=x[j];for(k=j0;k!==j1;++k){l=Aj[k];if(l!==j)x[l]-=a*Av[k]}}return x};numeric.ccsDFS=function ccsDFS(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};
numeric.ccsDFS.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[J];k1[0]=k11=Ai[J+1];while(1)if(km>=k11){xj[n]=j[m];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Pinv[Aj[km]];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}};
numeric.ccsLPSolve=function ccsLPSolve(A,B,x,xj,I,Pinv,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i)dfs.dfs(Pinv[Bj[i]],Ai,Aj,x,xj,Pinv);for(i=xj.length-1;i!==-1;--i)x[xj[i]]=0;for(i=i0;i!==i1;++i){j=Pinv[Bj[i]];x[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k)if(Pinv[Aj[k]]===j){x[j]/=Av[k];break}a=x[j];for(k=j0;k<j1;++k){l=Pinv[Aj[k]];if(l!==
j)x[l]-=a*Av[k]}}return x};
numeric.ccsLUP1=function ccsLUP1(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var x=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS(m);if(typeof threshold==="undefined")threshold=1;for(i=0;i<m;++i){sol(L,A,x,xj,i,Pinv,dfs);a=-1;e=-1;for(j=
xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(x[k]);if(c>a){e=k;a=c}}if(abs(x[i])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e;a=x[i];x[i]=x[e];x[e]=a}a=Li[i];e=Ui[i];d=x[i];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=x[k];xj[j]=0;x[k]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j)Lj[j]=Pinv[Lj[j]];return{L:L,U:U,P:P,Pinv:Pinv}};
numeric.ccsDFS0=function ccsDFS0(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};
numeric.ccsDFS0.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv,P){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[Pinv[J]];k1[0]=k11=Ai[Pinv[J]+1];while(1){if(isNaN(km))throw new Error("Ow!");if(km>=k11){xj[n]=Pinv[j[m]];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Aj[km];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;foo=Pinv[foo];km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}}};
numeric.ccsLPSolve0=function ccsLPSolve0(A,B,y,xj,I,Pinv,P,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i)dfs.dfs(Bj[i],Ai,Aj,y,xj,Pinv,P);for(i=xj.length-1;i!==-1;--i){j=xj[i];y[P[j]]=0}for(i=i0;i!==i1;++i){j=Bj[i];y[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];l=P[j];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k)if(Aj[k]===l){y[l]/=Av[k];break}a=y[l];for(k=j0;k<j1;++k)y[Aj[k]]-=a*Av[k];
y[l]=a}};
numeric.ccsLUP0=function ccsLUP0(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var y=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve0,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS0(m);if(typeof threshold==="undefined")threshold=1;for(i=0;i<m;++i){sol(L,A,y,xj,i,Pinv,P,dfs);a=-1;e=-1;
for(j=xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(y[P[k]]);if(c>a){e=k;a=c}}if(abs(y[P[i]])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e}a=Li[i];e=Ui[i];d=y[P[i]];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=y[P[k]];xj[j]=0;y[P[k]]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j)Lj[j]=Pinv[Lj[j]];return{L:L,U:U,P:P,Pinv:Pinv}};numeric.ccsLUP=numeric.ccsLUP0;
numeric.ccsDim=function ccsDim(A){return[numeric.sup(A[1])+1,A[0].length-1]};
numeric.ccsGetBlock=function ccsGetBlock(A,i,j){var s=numeric.ccsDim(A),m=s[0],n=s[1];if(typeof i==="undefined")i=numeric.linspace(0,m-1);else if(typeof i==="number")i=[i];if(typeof j==="undefined")j=numeric.linspace(0,n-1);else if(typeof j==="number")j=[j];var p,p0,p1,P=i.length,q,Q=j.length,r,jq,ip;var Bi=numeric.rep([n],0),Bj=[],Bv=[],B=[Bi,Bj,Bv];var Ai=A[0],Aj=A[1],Av=A[2];var x=numeric.rep([m],0),count=0,flags=numeric.rep([m],0);for(q=0;q<Q;++q){jq=j[q];var q0=Ai[jq];var q1=Ai[jq+1];for(p=q0;p<
q1;++p){r=Aj[p];flags[r]=1;x[r]=Av[p]}for(p=0;p<P;++p){ip=i[p];if(flags[ip]){Bj[count]=p;Bv[count]=x[i[p]];++count}}for(p=q0;p<q1;++p){r=Aj[p];flags[r]=0}Bi[q+1]=count}return B};
numeric.ccsDot=function ccsDot(A,B){var Ai=A[0],Aj=A[1],Av=A[2];var Bi=B[0],Bj=B[1],Bv=B[2];var sA=numeric.ccsDim(A),sB=numeric.ccsDim(B);var m=sA[0],n=sA[1],o=sB[1];var x=numeric.rep([m],0),flags=numeric.rep([m],0),xj=Array(m);var Ci=numeric.rep([o],0),Cj=[],Cv=[],C=[Ci,Cj,Cv];var i,j,k,j0,j1,i0,i1,l,p,a,b;for(k=0;k!==o;++k){j0=Bi[k];j1=Bi[k+1];p=0;for(j=j0;j<j1;++j){a=Bj[j];b=Bv[j];i0=Ai[a];i1=Ai[a+1];for(i=i0;i<i1;++i){l=Aj[i];if(flags[l]===0){xj[p]=l;flags[l]=1;p=p+1}x[l]=x[l]+Av[i]*b}}j0=Ci[k];
j1=j0+p;Ci[k+1]=j1;for(j=p-1;j!==-1;--j){b=j0+j;i=xj[j];Cj[b]=i;Cv[b]=x[i];flags[i]=0;x[i]=0}Ci[k+1]=Ci[k]+p}return C};
numeric.ccsLUPSolve=function ccsLUPSolve(LUP,B){var L=LUP.L,U=LUP.U,P=LUP.P;var Bi=B[0];var flag=false;if(typeof Bi!=="object"){B=[[0,B.length],numeric.linspace(0,B.length-1),B];Bi=B[0];flag=true}var Bj=B[1],Bv=B[2];var n=L[0].length-1,m=Bi.length-1;var x=numeric.rep([n],0),xj=Array(n);var b=numeric.rep([n],0),bj=Array(n);var Xi=numeric.rep([m+1],0),Xj=[],Xv=[];var sol=numeric.ccsTSolve;var i,j,j0,j1,k,J,N=0;for(i=0;i<m;++i){k=0;j0=Bi[i];j1=Bi[i+1];for(j=j0;j<j1;++j){J=LUP.Pinv[Bj[j]];bj[k]=J;b[J]=
Bv[j];++k}bj.length=k;sol(L,b,x,bj,xj);for(j=bj.length-1;j!==-1;--j)b[bj[j]]=0;sol(U,x,b,xj,bj);if(flag)return b;for(j=xj.length-1;j!==-1;--j)x[xj[j]]=0;for(j=bj.length-1;j!==-1;--j){J=bj[j];Xj[N]=J;Xv[N]=b[J];b[J]=0;++N}Xi[i+1]=N}return[Xi,Xj,Xv]};
numeric.ccsbinop=function ccsbinop(body,setup){if(typeof setup==="undefined")setup="";return Function("X","Y","var Xi \x3d X[0], Xj \x3d X[1], Xv \x3d X[2];\n"+"var Yi \x3d Y[0], Yj \x3d Y[1], Yv \x3d Y[2];\n"+"var n \x3d Xi.length-1,m \x3d Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\n"+"var Zi \x3d numeric.rep([n+1],0), Zj \x3d [], Zv \x3d [];\n"+"var x \x3d numeric.rep([m],0),y \x3d numeric.rep([m],0);\n"+"var xk,yk,zk;\n"+"var i,j,j0,j1,k,p\x3d0;\n"+setup+"for(i\x3d0;i\x3cn;++i) {\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+
"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+"    k \x3d Xj[j];\n"+"    x[k] \x3d 1;\n"+"    Zj[p] \x3d k;\n"+"    ++p;\n"+"  }\n"+"  j0 \x3d Yi[i]; j1 \x3d Yi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+"    k \x3d Yj[j];\n"+"    y[k] \x3d Yv[j];\n"+"    if(x[k] \x3d\x3d\x3d 0) {\n"+"      Zj[p] \x3d k;\n"+"      ++p;\n"+"    }\n"+"  }\n"+"  Zi[i+1] \x3d p;\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) x[Xj[j]] \x3d Xv[j];\n"+"  j0 \x3d Zi[i]; j1 \x3d Zi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+
"    k \x3d Zj[j];\n"+"    xk \x3d x[k];\n"+"    yk \x3d y[k];\n"+body+"\n"+"    Zv[j] \x3d zk;\n"+"  }\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) x[Xj[j]] \x3d 0;\n"+"  j0 \x3d Yi[i]; j1 \x3d Yi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) y[Yj[j]] \x3d 0;\n"+"}\n"+"return [Zi,Zj,Zv];")};
(function(){var k,A,B,C;for(k in numeric.ops2){if(isFinite(eval("1"+numeric.ops2[k]+"0")))A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]";else A="NaN";if(isFinite(eval("0"+numeric.ops2[k]+"1")))B="[X[0],X[1],numeric."+k+"(X[2],Y)]";else B="NaN";if(isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1")))C="numeric.ccs"+k+"MM(X,Y)";else C="NaN";numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk \x3d xk "+numeric.ops2[k]+"yk;");numeric["ccs"+k]=Function("X","Y",'if(typeof X \x3d\x3d\x3d "number") return '+
A+";\n"+'if(typeof Y \x3d\x3d\x3d "number") return '+B+";\n"+"return "+C+";\n")}})();numeric.ccsScatter=function ccsScatter(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=numeric.sup(Aj)+1,m=Ai.length;var Ri=numeric.rep([n],0),Rj=Array(m),Rv=Array(m);var counts=numeric.rep([n],0),i;for(i=0;i<m;++i)counts[Aj[i]]++;for(i=0;i<n;++i)Ri[i+1]=Ri[i]+counts[i];var ptr=Ri.slice(0),k,Aii;for(i=0;i<m;++i){Aii=Aj[i];k=ptr[Aii];Rj[k]=Ai[i];Rv[k]=Av[i];ptr[Aii]=ptr[Aii]+1}return[Ri,Rj,Rv]};
numeric.ccsGather=function ccsGather(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=Ai.length-1,m=Aj.length;var Ri=Array(m),Rj=Array(m),Rv=Array(m);var i,j,j0,j1,p;p=0;for(i=0;i<n;++i){j0=Ai[i];j1=Ai[i+1];for(j=j0;j!==j1;++j){Rj[p]=i;Ri[p]=Aj[j];Rv[p]=Av[j];++p}}return[Ri,Rj,Rv]};
numeric.sdim=function dim(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof A!=="object")return ret;if(typeof k==="undefined")k=0;if(!(k in ret))ret[k]=0;if(A.length>ret[k])ret[k]=A.length;var i;for(i in A)if(A.hasOwnProperty(i))dim(A[i],ret,k+1);return ret};
numeric.sclone=function clone(A,k,n){if(typeof k==="undefined")k=0;if(typeof n==="undefined")n=numeric.sdim(A).length;var i,ret=Array(A.length);if(k===n-1){for(i in A)if(A.hasOwnProperty(i))ret[i]=A[i];return ret}for(i in A)if(A.hasOwnProperty(i))ret[i]=clone(A[i],k+1,n);return ret};numeric.sdiag=function diag(d){var n=d.length,i,ret=Array(n),i1,i2,i3;for(i=n-1;i>=1;i-=2){i1=i-1;ret[i]=[];ret[i][i]=d[i];ret[i1]=[];ret[i1][i1]=d[i1]}if(i===0){ret[0]=[];ret[0][0]=d[i]}return ret};
numeric.sidentity=function identity(n){return numeric.sdiag(numeric.rep([n],1))};numeric.stranspose=function transpose(A){var ret=[],n=A.length,i,j,Ai;for(i in A){if(!A.hasOwnProperty(i))continue;Ai=A[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(typeof ret[j]!=="object")ret[j]=[];ret[j][i]=Ai[j]}}return ret};numeric.sLUP=function LUP(A,tol){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};
numeric.sdotMM=function dotMM(A,B){var p=A.length,q=B.length,BT=numeric.stranspose(B),r=BT.length,Ai,BTk;var i,j,k,accum;var ret=Array(p),reti;for(i=p-1;i>=0;i--){reti=[];Ai=A[i];for(k=r-1;k>=0;k--){accum=0;BTk=BT[k];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(j in BTk)accum+=Ai[j]*BTk[j]}if(accum)reti[k]=accum}ret[i]=reti}return ret};
numeric.sdotMV=function dotMV(A,x){var p=A.length,Ai,i,j;var ret=Array(p),accum;for(i=p-1;i>=0;i--){Ai=A[i];accum=0;for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(x[j])accum+=Ai[j]*x[j]}if(accum)ret[i]=accum}return ret};numeric.sdotVM=function dotMV(x,A){var i,j,Ai,alpha;var ret=[],accum;for(i in x){if(!x.hasOwnProperty(i))continue;Ai=A[i];alpha=x[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(!ret[j])ret[j]=0;ret[j]+=alpha*Ai[j]}}return ret};
numeric.sdotVV=function dotVV(x,y){var i,ret=0;for(i in x)if(x[i]&&y[i])ret+=x[i]*y[i];return ret};numeric.sdot=function dot(A,B){var m=numeric.sdim(A).length,n=numeric.sdim(B).length;var k=m*1E3+n;switch(k){case 0:return A*B;case 1001:return numeric.sdotVV(A,B);case 2001:return numeric.sdotMV(A,B);case 1002:return numeric.sdotVM(A,B);case 2002:return numeric.sdotMM(A,B);default:throw new Error("numeric.sdot not implemented for tensors of order "+m+" and "+n);}};
numeric.sscatter=function scatter(V){var n=V[0].length,Vij,i,j,m=V.length,A=[],Aj;for(i=n-1;i>=0;--i){if(!V[m-1][i])continue;Aj=A;for(j=0;j<m-2;j++){Vij=V[j][i];if(!Aj[Vij])Aj[Vij]=[];Aj=Aj[Vij]}Aj[V[j][i]]=V[j+1][i]}return A};
numeric.sgather=function gather(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof k==="undefined")k=[];var n,i,Ai;n=k.length;for(i in A)if(A.hasOwnProperty(i)){k[n]=parseInt(i);Ai=A[i];if(typeof Ai==="number"){if(Ai){if(ret.length===0)for(i=n+1;i>=0;--i)ret[i]=[];for(i=n;i>=0;--i)ret[i].push(k[i]);ret[n+1].push(Ai)}}else gather(Ai,ret,k)}if(k.length>n)k.pop();return ret};
numeric.cLU=function LU(A){var I=A[0],J=A[1],V=A[2];var p=I.length,m=0,i,j,k,a,b,c;for(i=0;i<p;i++)if(I[i]>m)m=I[i];m++;var L=Array(m),U=Array(m),left=numeric.rep([m],Infinity),right=numeric.rep([m],-Infinity);var Ui,Uj,alpha;for(k=0;k<p;k++){i=I[k];j=J[k];if(j<left[i])left[i]=j;if(j>right[i])right[i]=j}for(i=0;i<m-1;i++)if(right[i]>right[i+1])right[i+1]=right[i];for(i=m-1;i>=1;i--)if(left[i]<left[i-1])left[i-1]=left[i];var countL=0,countU=0;for(i=0;i<m;i++){U[i]=numeric.rep([right[i]-left[i]+1],
0);L[i]=numeric.rep([i-left[i]],0);countL+=i-left[i]+1;countU+=right[i]-i+1}for(k=0;k<p;k++){i=I[k];U[i][J[k]-left[i]]=V[k]}for(i=0;i<m-1;i++){a=i-left[i];Ui=U[i];for(j=i+1;left[j]<=i&&j<m;j++){b=i-left[j];c=right[i]-i;Uj=U[j];alpha=Uj[b]/Ui[a];if(alpha){for(k=1;k<=c;k++)Uj[k+b]-=alpha*Ui[k+a];L[j][i-left[j]]=alpha}}}var Ui=[],Uj=[],Uv=[],Li=[],Lj=[],Lv=[];var p,q,foo;p=0;q=0;for(i=0;i<m;i++){a=left[i];b=right[i];foo=U[i];for(j=i;j<=b;j++)if(foo[j-a]){Ui[p]=i;Uj[p]=j;Uv[p]=foo[j-a];p++}foo=L[i];for(j=
a;j<i;j++)if(foo[j-a]){Li[q]=i;Lj[q]=j;Lv[q]=foo[j-a];q++}Li[q]=i;Lj[q]=i;Lv[q]=1;q++}return{U:[Ui,Uj,Uv],L:[Li,Lj,Lv]}};numeric.cLUsolve=function LUsolve(lu,b){var L=lu.L,U=lu.U,ret=numeric.clone(b);var Li=L[0],Lj=L[1],Lv=L[2];var Ui=U[0],Uj=U[1],Uv=U[2];var p=Ui.length,q=Li.length;var m=ret.length,i,j,k;k=0;for(i=0;i<m;i++){while(Lj[k]<i){ret[i]-=Lv[k]*ret[Lj[k]];k++}k++}k=p-1;for(i=m-1;i>=0;i--){while(Uj[k]>i){ret[i]-=Uv[k]*ret[Uj[k]];k--}ret[i]/=Uv[k];k--}return ret};
numeric.cgrid=function grid(n,shape){if(typeof n==="number")n=[n,n];var ret=numeric.rep(n,-1);var i,j,count;if(typeof shape!=="function")switch(shape){case "L":shape=function(i,j){return i>=n[0]/2||j<n[1]/2};break;default:shape=function(i,j){return true};break}count=0;for(i=1;i<n[0]-1;i++)for(j=1;j<n[1]-1;j++)if(shape(i,j)){ret[i][j]=count;count++}return ret};
numeric.cdelsq=function delsq(g){var dir=[[-1,0],[0,-1],[0,1],[1,0]];var s=numeric.dim(g),m=s[0],n=s[1],i,j,k,p,q;var Li=[],Lj=[],Lv=[];for(i=1;i<m-1;i++)for(j=1;j<n-1;j++){if(g[i][j]<0)continue;for(k=0;k<4;k++){p=i+dir[k][0];q=j+dir[k][1];if(g[p][q]<0)continue;Li.push(g[i][j]);Lj.push(g[p][q]);Lv.push(-1)}Li.push(g[i][j]);Lj.push(g[i][j]);Lv.push(4)}return[Li,Lj,Lv]};
numeric.cdotMV=function dotMV(A,x){var ret,Ai=A[0],Aj=A[1],Av=A[2],k,p=Ai.length,N;N=0;for(k=0;k<p;k++)if(Ai[k]>N)N=Ai[k];N++;ret=numeric.rep([N],0);for(k=0;k<p;k++)ret[Ai[k]]+=Av[k]*x[Aj[k]];return ret};numeric.Spline=function Spline(x,yl,yr,kl,kr){this.x=x;this.yl=yl;this.yr=yr;this.kl=kl;this.kr=kr};
numeric.Spline.prototype._at=function _at(x1,p){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var x1,a,b,t;var add=numeric.add,sub=numeric.sub,mul=numeric.mul;a=sub(mul(kl[p],x[p+1]-x[p]),sub(yr[p+1],yl[p]));b=add(mul(kr[p+1],x[p]-x[p+1]),sub(yr[p+1],yl[p]));t=(x1-x[p])/(x[p+1]-x[p]);var s=t*(1-t);return add(add(add(mul(1-t,yl[p]),mul(t,yr[p+1])),mul(a,s*(1-t))),mul(b,s*t))};
numeric.Spline.prototype.at=function at(x0){if(typeof x0==="number"){var x=this.x;var n=x.length;var p,q,mid,floor=Math.floor,a,b,t;p=0;q=n-1;while(q-p>1){mid=floor((p+q)/2);if(x[mid]<=x0)p=mid;else q=mid}return this._at(x0,p)}var n=x0.length,i,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x0[i]);return ret};
numeric.Spline.prototype.diff=function diff(){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var n=yl.length;var i,dx,dy;var zl=kl,zr=kr,pl=Array(n),pr=Array(n);var add=numeric.add,mul=numeric.mul,div=numeric.div,sub=numeric.sub;for(i=n-1;i!==-1;--i){dx=x[i+1]-x[i];dy=sub(yr[i+1],yl[i]);pl[i]=div(add(mul(dy,6),mul(kl[i],-4*dx),mul(kr[i+1],-2*dx)),dx*dx);pr[i+1]=div(add(mul(dy,-6),mul(kl[i],2*dx),mul(kr[i+1],4*dx)),dx*dx)}return new numeric.Spline(x,zl,zr,pl,pr)};
numeric.Spline.prototype.roots=function roots(){function sqr(x){return x*x}function heval(y0,y1,k0,k1,x){var A=k0*2-(y1-y0);var B=-k1*2+(y1-y0);var t=(x+1)*.5;var s=t*(1-t);return(1-t)*y0+t*y1+A*s*(1-t)+B*s*t}var ret=[];var x=this.x,yl=this.yl,yr=this.yr,kl=this.kl,kr=this.kr;if(typeof yl[0]==="number"){yl=[yl];yr=[yr];kl=[kl];kr=[kr]}var m=yl.length,n=x.length-1,i,j,k,y,s,t;var ai,bi,ci,di,ret=Array(m),ri,k0,k1,y0,y1,A,B,D,dx,cx,stops,z0,z1,zm,t0,t1,tm;var sqrt=Math.sqrt;for(i=0;i!==m;++i){ai=yl[i];
bi=yr[i];ci=kl[i];di=kr[i];ri=[];for(j=0;j!==n;j++){if(j>0&&bi[j]*ai[j]<0)ri.push(x[j]);dx=x[j+1]-x[j];cx=x[j];y0=ai[j];y1=bi[j+1];k0=ci[j]/dx;k1=di[j+1]/dx;D=sqr(k0-k1+3*(y0-y1))+12*k1*y0;A=k1+3*y0+2*k0-3*y1;B=3*(k1+k0+2*(y0-y1));if(D<=0){z0=A/B;if(z0>x[j]&&z0<x[j+1])stops=[x[j],z0,x[j+1]];else stops=[x[j],x[j+1]]}else{z0=(A-sqrt(D))/B;z1=(A+sqrt(D))/B;stops=[x[j]];if(z0>x[j]&&z0<x[j+1])stops.push(z0);if(z1>x[j]&&z1<x[j+1])stops.push(z1);stops.push(x[j+1])}t0=stops[0];z0=this._at(t0,j);for(k=0;k<
stops.length-1;k++){t1=stops[k+1];z1=this._at(t1,j);if(z0===0){ri.push(t0);t0=t1;z0=z1;continue}if(z1===0||z0*z1>0){t0=t1;z0=z1;continue}var side=0;while(1){tm=(z0*t1-z1*t0)/(z0-z1);if(tm<=t0||tm>=t1)break;zm=this._at(tm,j);if(zm*z1>0){t1=tm;z1=zm;if(side===-1)z0*=.5;side=-1}else if(zm*z0>0){t0=tm;z0=zm;if(side===1)z1*=.5;side=1}else break}ri.push(tm);t0=stops[k+1];z0=this._at(t0,j)}if(z1===0)ri.push(t1)}ret[i]=ri}if(typeof this.yl[0]==="number")return ret[0];return ret};
numeric.spline=function spline(x,y,k1,kn){var n=x.length,b=[],dx=[],dy=[];var i;var sub=numeric.sub,mul=numeric.mul,add=numeric.add;for(i=n-2;i>=0;i--){dx[i]=x[i+1]-x[i];dy[i]=sub(y[i+1],y[i])}if(typeof k1==="string"||typeof kn==="string")k1=kn="periodic";var T=[[],[],[]];switch(typeof k1){case "undefined":b[0]=mul(3/(dx[0]*dx[0]),dy[0]);T[0].push(0,0);T[1].push(0,1);T[2].push(2/dx[0],1/dx[0]);break;case "string":b[0]=add(mul(3/(dx[n-2]*dx[n-2]),dy[n-2]),mul(3/(dx[0]*dx[0]),dy[0]));T[0].push(0,0,
0);T[1].push(n-2,0,1);T[2].push(1/dx[n-2],2/dx[n-2]+2/dx[0],1/dx[0]);break;default:b[0]=k1;T[0].push(0);T[1].push(0);T[2].push(1);break}for(i=1;i<n-1;i++){b[i]=add(mul(3/(dx[i-1]*dx[i-1]),dy[i-1]),mul(3/(dx[i]*dx[i]),dy[i]));T[0].push(i,i,i);T[1].push(i-1,i,i+1);T[2].push(1/dx[i-1],2/dx[i-1]+2/dx[i],1/dx[i])}switch(typeof kn){case "undefined":b[n-1]=mul(3/(dx[n-2]*dx[n-2]),dy[n-2]);T[0].push(n-1,n-1);T[1].push(n-2,n-1);T[2].push(1/dx[n-2],2/dx[n-2]);break;case "string":T[1][T[1].length-1]=0;break;
default:b[n-1]=kn;T[0].push(n-1);T[1].push(n-1);T[2].push(1);break}if(typeof b[0]!=="number")b=numeric.transpose(b);else b=[b];var k=Array(b.length);if(typeof k1==="string")for(i=k.length-1;i!==-1;--i){k[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(T)),b[i]);k[i][n-1]=k[i][0]}else for(i=k.length-1;i!==-1;--i)k[i]=numeric.cLUsolve(numeric.cLU(T),b[i]);if(typeof y[0]==="number")k=k[0];else k=numeric.transpose(k);return new numeric.Spline(x,y,y,k,k)};
numeric.fftpow2=function fftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}fftpow2(xe,ye);fftpow2(xo,yo);j=n/2;var t,k=-6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};
numeric._ifftpow2=function _ifftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}_ifftpow2(xe,ye);_ifftpow2(xo,yo);j=n/2;var t,k=6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};
numeric.ifftpow2=function ifftpow2(x,y){numeric._ifftpow2(x,y);numeric.diveq(x,x.length);numeric.diveq(y,y.length)};numeric.convpow2=function convpow2(ax,ay,bx,by){numeric.fftpow2(ax,ay);numeric.fftpow2(bx,by);var i,n=ax.length,axi,bxi,ayi,byi;for(i=n-1;i!==-1;--i){axi=ax[i];ayi=ay[i];bxi=bx[i];byi=by[i];ax[i]=axi*bxi-ayi*byi;ay[i]=axi*byi+ayi*bxi}numeric.ifftpow2(ax,ay)};
numeric.T.prototype.fft=function fft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=-3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,
b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X};
numeric.T.prototype.ifft=function ifft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,
b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X.div(n)};
numeric.gradient=function gradient(f,x){var n=x.length;var f0=f(x);if(isNaN(f0))throw new Error("gradient: f(x) is a NaN!");var max=Math.max;var i,x0=numeric.clone(x),f1,f2,J=Array(n);var div=numeric.div,sub=numeric.sub,errest,roundoff,max=Math.max,eps=.001,abs=Math.abs,min=Math.min;var t0,t1,t2,it=0,d1,d2,N;for(i=0;i<n;i++){var h=max(1E-6*f0,1E-8);while(1){++it;if(it>20)throw new Error("Numerical gradient fails");x0[i]=x[i]+h;f1=f(x0);x0[i]=x[i]-h;f2=f(x0);x0[i]=x[i];if(isNaN(f1)||isNaN(f2)){h/=
16;continue}J[i]=(f1-f2)/(2*h);t0=x[i]-h;t1=x[i];t2=x[i]+h;d1=(f1-f0)/h;d2=(f0-f2)/h;N=max(abs(J[i]),abs(f0),abs(f1),abs(f2),abs(t0),abs(t1),abs(t2),1E-8);errest=min(max(abs(d1-J[i]),abs(d2-J[i]),abs(d1-d2))/N,h/N);if(errest>eps)h/=16;else break}}return J};
numeric.uncmin=function uncmin(f,x0,tol,gradient,maxit,callback,options){var grad=numeric.gradient;if(typeof options==="undefined")options={};if(typeof tol==="undefined")tol=1E-8;if(typeof gradient==="undefined")gradient=function(x){return grad(f,x)};if(typeof maxit==="undefined")maxit=1E3;x0=numeric.clone(x0);var n=x0.length;var f0=f(x0),f1,df0;if(isNaN(f0))throw new Error("uncmin: f(x0) is a NaN!");var max=Math.max,norm2=numeric.norm2;tol=max(tol,numeric.epsilon);var step,g0,g1,H1=options.Hinv||
numeric.identity(n);var dot=numeric.dot,inv=numeric.inv,sub=numeric.sub,add=numeric.add,ten=numeric.tensor,div=numeric.div,mul=numeric.mul;var all=numeric.all,isfinite=numeric.isFinite,neg=numeric.neg;var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;var msg="";g0=gradient(x0);while(it<maxit){if(typeof callback==="function")if(callback(it,x0,f0,g0,H1)){msg="Callback returned true";break}if(!all(isfinite(g0))){msg="Gradient has Infinity or NaN";break}step=neg(dot(H1,g0));if(!all(isfinite(step))){msg="Search direction has Infinity or NaN";
break}nstep=norm2(step);if(nstep<tol){msg="Newton step smaller than tol";break}t=1;df0=dot(g0,step);x1=x0;while(it<maxit){if(t*nstep<tol)break;s=mul(step,t);x1=add(x0,s);f1=f(x1);if(f1-f0>=.1*t*df0||isNaN(f1)){t*=.5;++it;continue}break}if(t*nstep<tol){msg="Line search step size smaller than tol";break}if(it===maxit){msg="maxit reached during line search";break}g1=gradient(x1);y=sub(g1,g0);ys=dot(y,s);Hy=dot(H1,y);H1=sub(add(H1,mul((ys+dot(y,Hy))/(ys*ys),ten(s,s))),div(add(ten(Hy,s),ten(s,Hy)),ys));
x0=x1;f0=f1;g0=g1;++it}return{solution:x0,f:f0,gradient:g0,invHessian:H1,iterations:it,message:msg}};numeric.Dopri=function Dopri(x,y,f,ymid,iterations,msg,events){this.x=x;this.y=y;this.f=f;this.ymid=ymid;this.iterations=iterations;this.events=events;this.message=msg};
numeric.Dopri.prototype._at=function _at(xi,j){function sqr(x){return x*x}var sol=this;var xs=sol.x;var ys=sol.y;var k1=sol.f;var ymid=sol.ymid;var n=xs.length;var x0,x1,xh,y0,y1,yh,xi;var floor=Math.floor,h;var c=.5;var add=numeric.add,mul=numeric.mul,sub=numeric.sub,p,q,w;x0=xs[j];x1=xs[j+1];y0=ys[j];y1=ys[j+1];h=x1-x0;xh=x0+c*h;yh=ymid[j];p=sub(k1[j],mul(y0,1/(x0-xh)+2/(x0-x1)));q=sub(k1[j+1],mul(y1,1/(x1-xh)+2/(x1-x0)));w=[sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),sqr(xi-x0)*sqr(xi-x1)/sqr(x0-xh)/
sqr(x1-xh),sqr(xi-x0)*(xi-xh)/sqr(x1-x0)/(x1-xh),(xi-x0)*sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),(xi-x1)*sqr(xi-x0)*(xi-xh)/sqr(x0-x1)/(x1-xh)];return add(add(add(add(mul(y0,w[0]),mul(yh,w[1])),mul(y1,w[2])),mul(p,w[3])),mul(q,w[4]))};
numeric.Dopri.prototype.at=function at(x){var i,j,k,floor=Math.floor;if(typeof x!=="number"){var n=x.length,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x[i]);return ret}var x0=this.x;i=0;j=x0.length-1;while(j-i>1){k=floor(.5*(i+j));if(x0[k]<=x)i=k;else j=k}return this._at(x,i)};
numeric.dopri=function dopri(x0,x1,y0,f,tol,maxit,event){if(typeof tol==="undefined")tol=1E-6;if(typeof maxit==="undefined")maxit=1E3;var xs=[x0],ys=[y0],k1=[f(x0,y0)],k2,k3,k4,k5,k6,k7,ymid=[];var A2=1/5;var A3=[3/40,9/40];var A4=[44/45,-56/15,32/9];var A5=[19372/6561,-25360/2187,64448/6561,-212/729];var A6=[9017/3168,-355/33,46732/5247,49/176,-5103/18656];var b=[35/384,0,500/1113,125/192,-2187/6784,11/84];var bm=[.5*6025192743/30085553152,0,.5*51252292925/65400821598,.5*-2691868925/45128329728,
.5*187940372067/1594534317056,.5*-1776094331/19743644256,.5*11237099/235043384];var c=[1/5,3/10,4/5,8/9,1,1];var e=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40];var i=0,er,j;var h=(x1-x0)/10;var it=0;var add=numeric.add,mul=numeric.mul,y1,erinf;var max=Math.max,min=Math.min,abs=Math.abs,norminf=numeric.norminf,pow=Math.pow;var any=numeric.any,lt=numeric.lt,and=numeric.and,sub=numeric.sub;var e0,e1,ev;var ret=new numeric.Dopri(xs,ys,k1,ymid,-1,"");if(typeof event==="function")e0=event(x0,
y0);while(x0<x1&&it<maxit){++it;if(x0+h>x1)h=x1-x0;k2=f(x0+c[0]*h,add(y0,mul(A2*h,k1[i])));k3=f(x0+c[1]*h,add(add(y0,mul(A3[0]*h,k1[i])),mul(A3[1]*h,k2)));k4=f(x0+c[2]*h,add(add(add(y0,mul(A4[0]*h,k1[i])),mul(A4[1]*h,k2)),mul(A4[2]*h,k3)));k5=f(x0+c[3]*h,add(add(add(add(y0,mul(A5[0]*h,k1[i])),mul(A5[1]*h,k2)),mul(A5[2]*h,k3)),mul(A5[3]*h,k4)));k6=f(x0+c[4]*h,add(add(add(add(add(y0,mul(A6[0]*h,k1[i])),mul(A6[1]*h,k2)),mul(A6[2]*h,k3)),mul(A6[3]*h,k4)),mul(A6[4]*h,k5)));y1=add(add(add(add(add(y0,mul(k1[i],
h*b[0])),mul(k3,h*b[2])),mul(k4,h*b[3])),mul(k5,h*b[4])),mul(k6,h*b[5]));k7=f(x0+h,y1);er=add(add(add(add(add(mul(k1[i],h*e[0]),mul(k3,h*e[2])),mul(k4,h*e[3])),mul(k5,h*e[4])),mul(k6,h*e[5])),mul(k7,h*e[6]));if(typeof er==="number")erinf=abs(er);else erinf=norminf(er);if(erinf>tol){h=.2*h*pow(tol/erinf,.25);if(x0+h===x0){ret.msg="Step size became too small";break}continue}ymid[i]=add(add(add(add(add(add(y0,mul(k1[i],h*bm[0])),mul(k3,h*bm[2])),mul(k4,h*bm[3])),mul(k5,h*bm[4])),mul(k6,h*bm[5])),mul(k7,
h*bm[6]));++i;xs[i]=x0+h;ys[i]=y1;k1[i]=k7;if(typeof event==="function"){var yi,xl=x0,xr=x0+.5*h,xi;e1=event(xr,ymid[i-1]);ev=and(lt(e0,0),lt(0,e1));if(!any(ev)){xl=xr;xr=x0+h;e0=e1;e1=event(xr,y1);ev=and(lt(e0,0),lt(0,e1))}if(any(ev)){var xc,yc,en,ei;var side=0,sl=1,sr=1;while(1){if(typeof e0==="number")xi=(sr*e1*xl-sl*e0*xr)/(sr*e1-sl*e0);else{xi=xr;for(j=e0.length-1;j!==-1;--j)if(e0[j]<0&&e1[j]>0)xi=min(xi,(sr*e1[j]*xl-sl*e0[j]*xr)/(sr*e1[j]-sl*e0[j]))}if(xi<=xl||xi>=xr)break;yi=ret._at(xi,i-1);
ei=event(xi,yi);en=and(lt(e0,0),lt(0,ei));if(any(en)){xr=xi;e1=ei;ev=en;sr=1;if(side===-1)sl*=.5;else sl=1;side=-1}else{xl=xi;e0=ei;sl=1;if(side===1)sr*=.5;else sr=1;side=1}}y1=ret._at(.5*(x0+xi),i-1);ret.f[i]=f(xi,yi);ret.x[i]=xi;ret.y[i]=yi;ret.ymid[i-1]=y1;ret.events=ev;ret.iterations=it;return ret}}x0+=h;y0=y1;e0=e1;h=min(.8*h*pow(tol/erinf,.25),4*h)}ret.iterations=it;return ret};
numeric.LU=function(A,fast){fast=fast||false;var abs=Math.abs;var i,j,k,absAjk,Akk,Ak,Pk,Ai;var max;var n=A.length,n1=n-1;var P=new Array(n);if(!fast)A=numeric.clone(A);for(k=0;k<n;++k){Pk=k;Ak=A[k];max=abs(Ak[k]);for(j=k+1;j<n;++j){absAjk=abs(A[j][k]);if(max<absAjk){max=absAjk;Pk=j}}P[k]=Pk;if(Pk!=k){A[k]=A[Pk];A[Pk]=Ak;Ak=A[k]}Akk=Ak[k];for(i=k+1;i<n;++i)A[i][k]/=Akk;for(i=k+1;i<n;++i){Ai=A[i];for(j=k+1;j<n1;++j){Ai[j]-=Ai[k]*Ak[j];++j;Ai[j]-=Ai[k]*Ak[j]}if(j===n1)Ai[j]-=Ai[k]*Ak[j]}}return{LU:A,
P:P}};numeric.LUsolve=function LUsolve(LUP,b){var i,j;var LU=LUP.LU;var n=LU.length;var x=numeric.clone(b);var P=LUP.P;var Pi,LUi,LUii,tmp;for(i=n-1;i!==-1;--i)x[i]=b[i];for(i=0;i<n;++i){Pi=P[i];if(P[i]!==i){tmp=x[i];x[i]=x[Pi];x[Pi]=tmp}LUi=LU[i];for(j=0;j<i;++j)x[i]-=x[j]*LUi[j]}for(i=n-1;i>=0;--i){LUi=LU[i];for(j=i+1;j<n;++j)x[i]-=x[j]*LUi[j];x[i]/=LUi[i]}return x};numeric.solve=function solve(A,b,fast){return numeric.LUsolve(numeric.LU(A,fast),b)};
numeric.echelonize=function echelonize(A){var s=numeric.dim(A),m=s[0],n=s[1];var I=numeric.identity(m);var P=Array(m);var i,j,k,l,Ai,Ii,Z,a;var abs=Math.abs;var diveq=numeric.diveq;A=numeric.clone(A);for(i=0;i<m;++i){k=0;Ai=A[i];Ii=I[i];for(j=1;j<n;++j)if(abs(Ai[k])<abs(Ai[j]))k=j;P[i]=k;diveq(Ii,Ai[k]);diveq(Ai,Ai[k]);for(j=0;j<m;++j)if(j!==i){Z=A[j];a=Z[k];for(l=n-1;l!==-1;--l)Z[l]-=Ai[l]*a;Z=I[j];for(l=m-1;l!==-1;--l)Z[l]-=Ii[l]*a}}return{I:I,A:A,P:P}};
numeric.__solveLP=function __solveLP(c,A,b,tol,maxit,x,flag){var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var m=c.length,n=b.length,y;var unbounded=false,cb,i0=0;var alpha=1;var f0,df0,AT=numeric.transpose(A),svd=numeric.svd,transpose=numeric.transpose,leq=numeric.leq,sqrt=Math.sqrt,abs=Math.abs;var muleq=numeric.muleq;var norm=numeric.norminf,any=numeric.any,min=Math.min;var all=numeric.all,gt=numeric.gt;var p=Array(m),A0=Array(n),
e=numeric.rep([n],1),H;var solve=numeric.solve,z=sub(b,dot(A,x)),count;var dotcc=dot(c,c);var g;for(count=i0;count<maxit;++count){var i,j,d;for(i=n-1;i!==-1;--i)A0[i]=div(A[i],z[i]);var A1=transpose(A0);for(i=m-1;i!==-1;--i)p[i]=sum(A1[i]);alpha=.25*abs(dotcc/dot(c,p));var a1=100*sqrt(dotcc/dot(p,p));if(!isFinite(alpha)||alpha>a1)alpha=a1;g=add(c,mul(alpha,p));H=dot(A1,A0);for(i=m-1;i!==-1;--i)H[i][i]+=1;d=solve(H,div(g,alpha),true);var t0=div(z,dot(A,d));var t=1;for(i=n-1;i!==-1;--i)if(t0[i]<0)t=
min(t,-.999*t0[i]);y=sub(x,mul(d,t));z=sub(b,dot(A,y));if(!all(gt(z,0)))return{solution:x,message:"",iterations:count};x=y;if(alpha<tol)return{solution:y,message:"",iterations:count};if(flag){var s=dot(c,g),Ag=dot(A,g);unbounded=true;for(i=n-1;i!==-1;--i)if(s*Ag[i]<0){unbounded=false;break}}else if(x[m-1]>=0)unbounded=false;else unbounded=true;if(unbounded)return{solution:y,message:"Unbounded",iterations:count}}return{solution:x,message:"maximum iteration count exceeded",iterations:count}};
numeric._solveLP=function _solveLP(c,A,b,tol,maxit){var m=c.length,n=b.length,y;var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var c0=numeric.rep([m],0).concat([1]);var J=numeric.rep([n,1],-1);var A0=numeric.blockMatrix([[A,J]]);var b0=b;var y=numeric.rep([m],0).concat(Math.max(0,numeric.sup(numeric.neg(b)))+1);var x0=numeric.__solveLP(c0,A0,b0,tol,maxit,y,false);var x=numeric.clone(x0.solution);x.length=m;var foo=numeric.inf(sub(b,
dot(A,x)));if(foo<0)return{solution:NaN,message:"Infeasible",iterations:x0.iterations};var ret=numeric.__solveLP(c,A,b,tol,maxit-x0.iterations,x,true);ret.iterations+=x0.iterations;return ret};
numeric.solveLP=function solveLP(c,A,b,Aeq,beq,tol,maxit){if(typeof maxit==="undefined")maxit=1E3;if(typeof tol==="undefined")tol=numeric.epsilon;if(typeof Aeq==="undefined")return numeric._solveLP(c,A,b,tol,maxit);var m=Aeq.length,n=Aeq[0].length,o=A.length;var B=numeric.echelonize(Aeq);var flags=numeric.rep([n],0);var P=B.P;var Q=[];var i;for(i=P.length-1;i!==-1;--i)flags[P[i]]=1;for(i=n-1;i!==-1;--i)if(flags[i]===0)Q.push(i);var g=numeric.getRange;var I=numeric.linspace(0,m-1),J=numeric.linspace(0,
o-1);var Aeq2=g(Aeq,I,Q),A1=g(A,J,P),A2=g(A,J,Q),dot=numeric.dot,sub=numeric.sub;var A3=dot(A1,B.I);var A4=sub(A2,dot(A3,Aeq2)),b4=sub(b,dot(A3,beq));var c1=Array(P.length),c2=Array(Q.length);for(i=P.length-1;i!==-1;--i)c1[i]=c[P[i]];for(i=Q.length-1;i!==-1;--i)c2[i]=c[Q[i]];var c4=sub(c2,dot(c1,dot(B.I,Aeq2)));var S=numeric._solveLP(c4,A4,b4,tol,maxit);var x2=S.solution;if(x2!==x2)return S;var x1=dot(B.I,sub(beq,dot(Aeq2,x2)));var x=Array(c.length);for(i=P.length-1;i!==-1;--i)x[P[i]]=x1[i];for(i=
Q.length-1;i!==-1;--i)x[Q[i]]=x2[i];return{solution:x,message:S.message,iterations:S.iterations}};
numeric.MPStoLP=function MPStoLP(MPS){if(MPS instanceof String)MPS.split("\n");var state=0;var states=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"];var n=MPS.length;var i,j,z,N=0,rows={},sign=[],rl=0,vars={},nv=0;var name;var c=[],A=[],b=[];function err(e){throw new Error("MPStoLP: "+e+"\nLine "+i+": "+MPS[i]+"\nCurrent state: "+states[state]+"\n");}for(i=0;i<n;++i){z=MPS[i];var w0=z.match(/\S*/g);var w=[];for(j=0;j<w0.length;++j)if(w0[j]!=="")w.push(w0[j]);if(w.length===0)continue;
for(j=0;j<states.length;++j)if(z.substr(0,states[j].length)===states[j])break;if(j<states.length){state=j;if(j===1)name=w[1];if(j===6)return{name:name,c:c,A:numeric.transpose(A),b:b,rows:rows,vars:vars};continue}switch(state){case 0:case 1:err("Unexpected line");case 2:switch(w[0]){case "N":if(N===0)N=w[1];else err("Two or more N rows");break;case "L":rows[w[1]]=rl;sign[rl]=1;b[rl]=0;++rl;break;case "G":rows[w[1]]=rl;sign[rl]=-1;b[rl]=0;++rl;break;case "E":rows[w[1]]=rl;sign[rl]=0;b[rl]=0;++rl;break;
default:err("Parse error "+numeric.prettyPrint(w))}break;case 3:if(!vars.hasOwnProperty(w[0])){vars[w[0]]=nv;c[nv]=0;A[nv]=numeric.rep([rl],0);++nv}var p=vars[w[0]];for(j=1;j<w.length;j+=2){if(w[j]===N){c[p]=parseFloat(w[j+1]);continue}var q=rows[w[j]];A[p][q]=(sign[q]<0?-1:1)*parseFloat(w[j+1])}break;case 4:for(j=1;j<w.length;j+=2)b[rows[w[j]]]=(sign[rows[w[j]]]<0?-1:1)*parseFloat(w[j+1]);break;case 5:break;case 6:err("Internal error")}}err("Reached end of file without ENDATA")};
numeric.seedrandom={pow:Math.pow,random:Math.random};
(function(pool,math,width,chunks,significance,overflow,startdenom){math["seedrandom"]=function seedrandom(seed,use_entropy){var key=[];var arc4;seed=mixkey(flatten(use_entropy?[seed,pool]:arguments.length?seed:[(new Date).getTime(),pool,window],3),key);arc4=new ARC4(key);mixkey(arc4.S,pool);math["random"]=function random(){var n=arc4.g(chunks);var d=startdenom;var x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};return seed};function ARC4(key){var t,
u,me=this,keylen=key.length;var i=0,j=me.i=me.j=me.m=0;me.S=[];me.c=[];if(!keylen)key=[keylen++];while(i<width)me.S[i]=i++;for(i=0;i<width;i++){t=me.S[i];j=lowbits(j+t+key[i%keylen]);u=me.S[j];me.S[i]=u;me.S[j]=t}me.g=function getnext(count){var s=me.S;var i=lowbits(me.i+1);var t=s[i];var j=lowbits(me.j+t);var u=s[j];s[i]=u;s[j]=t;var r=s[lowbits(t+u)];while(--count){i=lowbits(i+1);t=s[i];j=lowbits(j+t);u=s[j];s[i]=u;s[j]=t;r=r*width+s[lowbits(t+u)]}me.i=i;me.j=j;return r};me.g(width)}function flatten(obj,
depth,result,prop,typ){result=[];typ=typeof obj;if(depth&&typ=="object")for(prop in obj)if(prop.indexOf("S")<5)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:obj+(typ!="string"?"\x00":"")}function mixkey(seed,key,smear,j){seed+="";smear=0;for(j=0;j<seed.length;j++)key[lowbits(j)]=lowbits((smear^=key[lowbits(j)]*19)+seed.charCodeAt(j));seed="";for(j in key)seed+=String.fromCharCode(key[j]);return seed}function lowbits(n){return n&width-1}startdenom=math.pow(width,
chunks);significance=math.pow(2,significance);overflow=significance*2;mixkey(math.random(),pool)})([],numeric.seedrandom,256,6,52);
(function(exports){function base0to1(A){if(typeof A!=="object")return A;var ret=[],i,n=A.length;for(i=0;i<n;i++)ret[i+1]=base0to1(A[i]);return ret}function base1to0(A){if(typeof A!=="object")return A;var ret=[],i,n=A.length;for(i=1;i<n;i++)ret[i-1]=base1to0(A[i]);return ret}function dpori(a,lda,n){var i,j,k,kp1,t;for(k=1;k<=n;k=k+1){a[k][k]=1/a[k][k];t=-a[k][k];for(i=1;i<k;i=i+1)a[i][k]=t*a[i][k];kp1=k+1;if(n<kp1)break;for(j=kp1;j<=n;j=j+1){t=a[k][j];a[k][j]=0;for(i=1;i<=k;i=i+1)a[i][j]=a[i][j]+t*
a[i][k]}}}function dposl(a,lda,n,b){var i,k,kb,t;for(k=1;k<=n;k=k+1){t=0;for(i=1;i<k;i=i+1)t=t+a[i][k]*b[i];b[k]=(b[k]-t)/a[k][k]}for(kb=1;kb<=n;kb=kb+1){k=n+1-kb;b[k]=b[k]/a[k][k];t=-b[k];for(i=1;i<k;i=i+1)b[i]=b[i]+t*a[i][k]}}function dpofa(a,lda,n,info){var i,j,jm1,k,t,s;for(j=1;j<=n;j=j+1){info[1]=j;s=0;jm1=j-1;if(jm1<1){s=a[j][j]-s;if(s<=0)break;a[j][j]=Math.sqrt(s)}else{for(k=1;k<=jm1;k=k+1){t=a[k][j];for(i=1;i<k;i=i+1)t=t-a[i][j]*a[i][k];t=t/a[k][k];a[k][j]=t;s=s+t*t}s=a[j][j]-s;if(s<=0)break;
a[j][j]=Math.sqrt(s)}info[1]=0}}function qpgen2(dmat,dvec,fddmat,n,sol,crval,amat,bvec,fdamat,q,meq,iact,nact,iter,work,ierr){var i,j,l,l1,info,it1,iwzv,iwrv,iwrm,iwsv,iwuv,nvl,r,iwnbv,temp,sum,t1,tt,gc,gs,nu,t1inf,t2min,vsmall,tmpa,tmpb,go;r=Math.min(n,q);l=2*n+r*(r+5)/2+2*q+1;vsmall=1E-60;do{vsmall=vsmall+vsmall;tmpa=1+.1*vsmall;tmpb=1+.2*vsmall}while(tmpa<=1||tmpb<=1);for(i=1;i<=n;i=i+1)work[i]=dvec[i];for(i=n+1;i<=l;i=i+1)work[i]=0;for(i=1;i<=q;i=i+1)iact[i]=0;info=[];if(ierr[1]===0){dpofa(dmat,
fddmat,n,info);if(info[1]!==0){ierr[1]=2;return}dposl(dmat,fddmat,n,dvec);dpori(dmat,fddmat,n)}else{for(j=1;j<=n;j=j+1){sol[j]=0;for(i=1;i<=j;i=i+1)sol[j]=sol[j]+dmat[i][j]*dvec[i]}for(j=1;j<=n;j=j+1){dvec[j]=0;for(i=j;i<=n;i=i+1)dvec[j]=dvec[j]+dmat[j][i]*sol[i]}}crval[1]=0;for(j=1;j<=n;j=j+1){sol[j]=dvec[j];crval[1]=crval[1]+work[j]*sol[j];work[j]=0;for(i=j+1;i<=n;i=i+1)dmat[i][j]=0}crval[1]=-crval[1]/2;ierr[1]=0;iwzv=n;iwrv=iwzv+n;iwuv=iwrv+r;iwrm=iwuv+r+1;iwsv=iwrm+r*(r+1)/2;iwnbv=iwsv+q;for(i=
1;i<=q;i=i+1){sum=0;for(j=1;j<=n;j=j+1)sum=sum+amat[j][i]*amat[j][i];work[iwnbv+i]=Math.sqrt(sum)}nact=0;iter[1]=0;iter[2]=0;function fn_goto_50(){iter[1]=iter[1]+1;l=iwsv;for(i=1;i<=q;i=i+1){l=l+1;sum=-bvec[i];for(j=1;j<=n;j=j+1)sum=sum+amat[j][i]*sol[j];if(Math.abs(sum)<vsmall)sum=0;if(i>meq)work[l]=sum;else{work[l]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1)amat[j][i]=-amat[j][i];bvec[i]=-bvec[i]}}}for(i=1;i<=nact;i=i+1)work[iwsv+iact[i]]=0;nvl=0;temp=0;for(i=1;i<=q;i=i+1)if(work[iwsv+i]<temp*
work[iwnbv+i]){nvl=i;temp=work[iwsv+i]/work[iwnbv+i]}if(nvl===0)return 999;return 0}function fn_goto_55(){for(i=1;i<=n;i=i+1){sum=0;for(j=1;j<=n;j=j+1)sum=sum+dmat[j][i]*amat[j][nvl];work[i]=sum}l1=iwzv;for(i=1;i<=n;i=i+1)work[l1+i]=0;for(j=nact+1;j<=n;j=j+1)for(i=1;i<=n;i=i+1)work[l1+i]=work[l1+i]+dmat[i][j]*work[j];t1inf=true;for(i=nact;i>=1;i=i-1){sum=work[i];l=iwrm+i*(i+3)/2;l1=l-i;for(j=i+1;j<=nact;j=j+1){sum=sum-work[l]*work[iwrv+j];l=l+j}sum=sum/work[l1];work[iwrv+i]=sum;if(iact[i]<meq)break;
if(sum<0)break;t1inf=false;it1=i}if(!t1inf){t1=work[iwuv+it1]/work[iwrv+it1];for(i=1;i<=nact;i=i+1){if(iact[i]<meq)break;if(work[iwrv+i]<0)break;temp=work[iwuv+i]/work[iwrv+i];if(temp<t1){t1=temp;it1=i}}}sum=0;for(i=iwzv+1;i<=iwzv+n;i=i+1)sum=sum+work[i]*work[i];if(Math.abs(sum)<=vsmall)if(t1inf){ierr[1]=1;return 999}else{for(i=1;i<=nact;i=i+1)work[iwuv+i]=work[iwuv+i]-t1*work[iwrv+i];work[iwuv+nact+1]=work[iwuv+nact+1]+t1;return 700}else{sum=0;for(i=1;i<=n;i=i+1)sum=sum+work[iwzv+i]*amat[i][nvl];
tt=-work[iwsv+nvl]/sum;t2min=true;if(!t1inf)if(t1<tt){tt=t1;t2min=false}for(i=1;i<=n;i=i+1){sol[i]=sol[i]+tt*work[iwzv+i];if(Math.abs(sol[i])<vsmall)sol[i]=0}crval[1]=crval[1]+tt*sum*(tt/2+work[iwuv+nact+1]);for(i=1;i<=nact;i=i+1)work[iwuv+i]=work[iwuv+i]-tt*work[iwrv+i];work[iwuv+nact+1]=work[iwuv+nact+1]+tt;if(t2min){nact=nact+1;iact[nact]=nvl;l=iwrm+(nact-1)*nact/2+1;for(i=1;i<=nact-1;i=i+1){work[l]=work[i];l=l+1}if(nact===n)work[l]=work[n];else{for(i=n;i>=nact+1;i=i-1){if(work[i]===0)break;gc=
Math.max(Math.abs(work[i-1]),Math.abs(work[i]));gs=Math.min(Math.abs(work[i-1]),Math.abs(work[i]));if(work[i-1]>=0)temp=Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));else temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));gc=work[i-1]/temp;gs=work[i]/temp;if(gc===1)break;if(gc===0){work[i-1]=gs*temp;for(j=1;j<=n;j=j+1){temp=dmat[j][i-1];dmat[j][i-1]=dmat[j][i];dmat[j][i]=temp}}else{work[i-1]=temp;nu=gs/(1+gc);for(j=1;j<=n;j=j+1){temp=gc*dmat[j][i-1]+gs*dmat[j][i];dmat[j][i]=nu*(dmat[j][i-1]+temp)-dmat[j][i];
dmat[j][i-1]=temp}}}work[l]=work[nact]}}else{sum=-bvec[nvl];for(j=1;j<=n;j=j+1)sum=sum+sol[j]*amat[j][nvl];if(nvl>meq)work[iwsv+nvl]=sum;else{work[iwsv+nvl]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1)amat[j][nvl]=-amat[j][nvl];bvec[nvl]=-bvec[nvl]}}return 700}}return 0}function fn_goto_797(){l=iwrm+it1*(it1+1)/2+1;l1=l+it1;if(work[l1]===0)return 798;gc=Math.max(Math.abs(work[l1-1]),Math.abs(work[l1]));gs=Math.min(Math.abs(work[l1-1]),Math.abs(work[l1]));if(work[l1-1]>=0)temp=Math.abs(gc*Math.sqrt(1+
gs*gs/(gc*gc)));else temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));gc=work[l1-1]/temp;gs=work[l1]/temp;if(gc===1)return 798;if(gc===0){for(i=it1+1;i<=nact;i=i+1){temp=work[l1-1];work[l1-1]=work[l1];work[l1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=dmat[i][it1];dmat[i][it1]=dmat[i][it1+1];dmat[i][it1+1]=temp}}else{nu=gs/(1+gc);for(i=it1+1;i<=nact;i=i+1){temp=gc*work[l1-1]+gs*work[l1];work[l1]=nu*(work[l1-1]+temp)-work[l1];work[l1-1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=gc*dmat[i][it1]+gs*dmat[i][it1+
1];dmat[i][it1+1]=nu*(dmat[i][it1]+temp)-dmat[i][it1+1];dmat[i][it1]=temp}}return 0}function fn_goto_798(){l1=l-it1;for(i=1;i<=it1;i=i+1){work[l1]=work[l];l=l+1;l1=l1+1}work[iwuv+it1]=work[iwuv+it1+1];iact[it1]=iact[it1+1];it1=it1+1;if(it1<nact)return 797;return 0}function fn_goto_799(){work[iwuv+nact]=work[iwuv+nact+1];work[iwuv+nact+1]=0;iact[nact]=0;nact=nact-1;iter[2]=iter[2]+1;return 0}go=0;while(true){go=fn_goto_50();if(go===999)return;while(true){go=fn_goto_55();if(go===0)break;if(go===999)return;
if(go===700)if(it1===nact)fn_goto_799();else{while(true){fn_goto_797();go=fn_goto_798();if(go!==797)break}fn_goto_799()}}}}function solveQP(Dmat,dvec,Amat,bvec,meq,factorized){Dmat=base0to1(Dmat);dvec=base0to1(dvec);Amat=base0to1(Amat);var i,n,q,nact,r,crval=[],iact=[],sol=[],work=[],iter=[],message;meq=meq||0;factorized=factorized?base0to1(factorized):[undefined,0];bvec=bvec?base0to1(bvec):[];n=Dmat.length-1;q=Amat[1].length-1;if(!bvec)for(i=1;i<=q;i=i+1)bvec[i]=0;for(i=1;i<=q;i=i+1)iact[i]=0;nact=
0;r=Math.min(n,q);for(i=1;i<=n;i=i+1)sol[i]=0;crval[1]=0;for(i=1;i<=2*n+r*(r+5)/2+2*q+1;i=i+1)work[i]=0;for(i=1;i<=2;i=i+1)iter[i]=0;qpgen2(Dmat,dvec,n,n,sol,crval,Amat,bvec,n,q,meq,iact,nact,iter,work,factorized);message="";if(factorized[1]===1)message="constraints are inconsistent, no solution!";if(factorized[1]===2)message="matrix D in quadratic function is not positive definite!";return{solution:base1to0(sol),value:base1to0(crval),unconstrained_solution:base1to0(dvec),iterations:base1to0(iter),
iact:base1to0(iact),message:message}}exports.solveQP=solveQP})(numeric);
numeric.svd=function svd(A){var temp;var prec=numeric.epsilon;var tolerance=1E-64/prec;var itmax=50;var c=0;var i=0;var j=0;var k=0;var l=0;var u=numeric.clone(A);var m=u.length;var n=u[0].length;if(m<n)throw"Need more rows than columns";var e=new Array(n);var q=new Array(n);for(i=0;i<n;i++)e[i]=q[i]=0;var v=numeric.rep([n,n],0);function pythag(a,b){a=Math.abs(a);b=Math.abs(b);if(a>b)return a*Math.sqrt(1+b*b/a/a);else if(b==0)return a;return b*Math.sqrt(1+a*a/b/b)}var f=0;var g=0;var h=0;var x=0;
var y=0;var z=0;var s=0;for(i=0;i<n;i++){e[i]=g;s=0;l=i+1;for(j=i;j<m;j++)s+=u[j][i]*u[j][i];if(s<=tolerance)g=0;else{f=u[i][i];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i]=f-g;for(j=l;j<n;j++){s=0;for(k=i;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}}q[i]=g;s=0;for(j=l;j<n;j++)s=s+u[i][j]*u[i][j];if(s<=tolerance)g=0;else{f=u[i][i+1];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i+1]=f-g;for(j=l;j<n;j++)e[j]=u[i][j]/h;for(j=l;j<m;j++){s=0;for(k=l;k<n;k++)s+=u[j][k]*u[i][k];for(k=
l;k<n;k++)u[j][k]+=s*e[k]}}y=Math.abs(q[i])+Math.abs(e[i]);if(y>x)x=y}for(i=n-1;i!=-1;i+=-1){if(g!=0){h=g*u[i][i+1];for(j=l;j<n;j++)v[j][i]=u[i][j]/h;for(j=l;j<n;j++){s=0;for(k=l;k<n;k++)s+=u[i][k]*v[k][j];for(k=l;k<n;k++)v[k][j]+=s*v[k][i]}}for(j=l;j<n;j++){v[i][j]=0;v[j][i]=0}v[i][i]=1;g=e[i];l=i}for(i=n-1;i!=-1;i+=-1){l=i+1;g=q[i];for(j=l;j<n;j++)u[i][j]=0;if(g!=0){h=u[i][i]*g;for(j=l;j<n;j++){s=0;for(k=l;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}for(j=i;j<m;j++)u[j][i]=
u[j][i]/g}else for(j=i;j<m;j++)u[j][i]=0;u[i][i]+=1}prec=prec*x;for(k=n-1;k!=-1;k+=-1)for(var iteration=0;iteration<itmax;iteration++){var test_convergence=false;for(l=k;l!=-1;l+=-1){if(Math.abs(e[l])<=prec){test_convergence=true;break}if(Math.abs(q[l-1])<=prec)break}if(!test_convergence){c=0;s=1;var l1=l-1;for(i=l;i<k+1;i++){f=s*e[i];e[i]=c*e[i];if(Math.abs(f)<=prec)break;g=q[i];h=pythag(f,g);q[i]=h;c=g/h;s=-f/h;for(j=0;j<m;j++){y=u[j][l1];z=u[j][i];u[j][l1]=y*c+z*s;u[j][i]=-y*s+z*c}}}z=q[k];if(l==
k){if(z<0){q[k]=-z;for(j=0;j<n;j++)v[j][k]=-v[j][k]}break}if(iteration>=itmax-1)throw"Error: no convergence.";x=q[l];y=q[k-1];g=e[k-1];h=e[k];f=((y-z)*(y+z)+(g-h)*(g+h))/(2*h*y);g=pythag(f,1);if(f<0)f=((x-z)*(x+z)+h*(y/(f-g)-h))/x;else f=((x-z)*(x+z)+h*(y/(f+g)-h))/x;c=1;s=1;for(i=l+1;i<k+1;i++){g=e[i];y=q[i];h=s*g;g=c*g;z=pythag(f,h);e[i-1]=z;c=f/z;s=h/z;f=x*c+g*s;g=-x*s+g*c;h=y*s;y=y*c;for(j=0;j<n;j++){x=v[j][i-1];z=v[j][i];v[j][i-1]=x*c+z*s;v[j][i]=-x*s+z*c}z=pythag(f,h);q[i-1]=z;c=f/z;s=h/z;f=
c*g+s*y;x=-s*g+c*y;for(j=0;j<m;j++){y=u[j][i-1];z=u[j][i];u[j][i-1]=y*c+z*s;u[j][i]=-y*s+z*c}}e[l]=0;e[k]=f;q[k]=x}for(i=0;i<q.length;i++)if(q[i]<prec)q[i]=0;for(i=0;i<n;i++)for(j=i-1;j>=0;j--)if(q[j]<q[i]){c=q[j];q[j]=q[i];q[i]=c;for(k=0;k<u.length;k++){temp=u[k][i];u[k][i]=u[k][j];u[k][j]=temp}for(k=0;k<v.length;k++){temp=v[k][i];v[k][i]=v[k][j];v[k][j]=temp}i=j}return{U:u,S:q,V:v}};</script><script>//third_party/javascript/node_modules/umap_js/v1_0_5/lib/umap-js.min.js
/**
 * @license
 *                                  Apache License
 *                            Version 2.0, January 2004
 *                         http://www.apache.org/licenses/
 *
 *    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *
 *    1. Definitions.
 *
 *       "License" shall mean the terms and conditions for use, reproduction,
 *       and distribution as defined by Sections 1 through 9 of this document.
 *
 *       "Licensor" shall mean the copyright owner or entity authorized by
 *       the copyright owner that is granting the License.
 *
 *       "Legal Entity" shall mean the union of the acting entity and all
 *       other entities that control, are controlled by, or are under common
 *       control with that entity. For the purposes of this definition,
 *       "control" means (i) the power, direct or indirect, to cause the
 *       direction or management of such entity, whether by contract or
 *       otherwise, or (ii) ownership of fifty percent (50%) or more of the
 *       outstanding shares, or (iii) beneficial ownership of such entity.
 *
 *       "You" (or "Your") shall mean an individual or Legal Entity
 *       exercising permissions granted by this License.
 *
 *       "Source" form shall mean the preferred form for making modifications,
 *       including but not limited to software source code, documentation
 *       source, and configuration files.
 *
 *       "Object" form shall mean any form resulting from mechanical
 *       transformation or translation of a Source form, including but
 *       not limited to compiled object code, generated documentation,
 *       and conversions to other media types.
 *
 *       "Work" shall mean the work of authorship, whether in Source or
 *       Object form, made available under the License, as indicated by a
 *       copyright notice that is included in or attached to the work
 *       (an example is provided in the Appendix below).
 *
 *       "Derivative Works" shall mean any work, whether in Source or Object
 *       form, that is based on (or derived from) the Work and for which the
 *       editorial revisions, annotations, elaborations, or other modifications
 *       represent, as a whole, an original work of authorship. For the purposes
 *       of this License, Derivative Works shall not include works that remain
 *       separable from, or merely link (or bind by name) to the interfaces of,
 *       the Work and Derivative Works thereof.
 *
 *       "Contribution" shall mean any work of authorship, including
 *       the original version of the Work and any modifications or additions
 *       to that Work or Derivative Works thereof, that is intentionally
 *       submitted to Licensor for inclusion in the Work by the copyright owner
 *       or by an individual or Legal Entity authorized to submit on behalf of
 *       the copyright owner. For the purposes of this definition, "submitted"
 *       means any form of electronic, verbal, or written communication sent
 *       to the Licensor or its representatives, including but not limited to
 *       communication on electronic mailing lists, source code control systems,
 *       and issue tracking systems that are managed by, or on behalf of, the
 *       Licensor for the purpose of discussing and improving the Work, but
 *       excluding communication that is conspicuously marked or otherwise
 *       designated in writing by the copyright owner as "Not a Contribution."
 *
 *       "Contributor" shall mean Licensor and any individual or Legal Entity
 *       on behalf of whom a Contribution has been received by Licensor and
 *       subsequently incorporated within the Work.
 *
 *    2. Grant of Copyright License. Subject to the terms and conditions of
 *       this License, each Contributor hereby grants to You a perpetual,
 *       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *       copyright license to reproduce, prepare Derivative Works of,
 *       publicly display, publicly perform, sublicense, and distribute the
 *       Work and such Derivative Works in Source or Object form.
 *
 *    3. Grant of Patent License. Subject to the terms and conditions of
 *       this License, each Contributor hereby grants to You a perpetual,
 *       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *       (except as stated in this section) patent license to make, have made,
 *       use, offer to sell, sell, import, and otherwise transfer the Work,
 *       where such license applies only to those patent claims licensable
 *       by such Contributor that are necessarily infringed by their
 *       Contribution(s) alone or by combination of their Contribution(s)
 *       with the Work to which such Contribution(s) was submitted. If You
 *       institute patent litigation against any entity (including a
 *       cross-claim or counterclaim in a lawsuit) alleging that the Work
 *       or a Contribution incorporated within the Work constitutes direct
 *       or contributory patent infringement, then any patent licenses
 *       granted to You under this License for that Work shall terminate
 *       as of the date such litigation is filed.
 *
 *    4. Redistribution. You may reproduce and distribute copies of the
 *       Work or Derivative Works thereof in any medium, with or without
 *       modifications, and in Source or Object form, provided that You
 *       meet the following conditions:
 *
 *       (a) You must give any other recipients of the Work or
 *           Derivative Works a copy of this License; and
 *
 *       (b) You must cause any modified files to carry prominent notices
 *           stating that You changed the files; and
 *
 *       (c) You must retain, in the Source form of any Derivative Works
 *           that You distribute, all copyright, patent, trademark, and
 *           attribution notices from the Source form of the Work,
 *           excluding those notices that do not pertain to any part of
 *           the Derivative Works; and
 *
 *       (d) If the Work includes a "NOTICE" text file as part of its
 *           distribution, then any Derivative Works that You distribute must
 *           include a readable copy of the attribution notices contained
 *           within such NOTICE file, excluding those notices that do not
 *           pertain to any part of the Derivative Works, in at least one
 *           of the following places: within a NOTICE text file distributed
 *           as part of the Derivative Works; within the Source form or
 *           documentation, if provided along with the Derivative Works; or,
 *           within a display generated by the Derivative Works, if and
 *           wherever such third-party notices normally appear. The contents
 *           of the NOTICE file are for informational purposes only and
 *           do not modify the License. You may add Your own attribution
 *           notices within Derivative Works that You distribute, alongside
 *           or as an addendum to the NOTICE text from the Work, provided
 *           that such additional attribution notices cannot be construed
 *           as modifying the License.
 *
 *       You may add Your own copyright statement to Your modifications and
 *       may provide additional or different license terms and conditions
 *       for use, reproduction, or distribution of Your modifications, or
 *       for any such Derivative Works as a whole, provided Your use,
 *       reproduction, and distribution of the Work otherwise complies with
 *       the conditions stated in this License.
 *
 *    5. Submission of Contributions. Unless You explicitly state otherwise,
 *       any Contribution intentionally submitted for inclusion in the Work
 *       by You to the Licensor shall be under the terms and conditions of
 *       this License, without any additional terms or conditions.
 *       Notwithstanding the above, nothing herein shall supersede or modify
 *       the terms of any separate license agreement you may have executed
 *       with Licensor regarding such Contributions.
 *
 *    6. Trademarks. This License does not grant permission to use the trade
 *       names, trademarks, service marks, or product names of the Licensor,
 *       except as required for reasonable and customary use in describing the
 *       origin of the Work and reproducing the content of the NOTICE file.
 *
 *    7. Disclaimer of Warranty. Unless required by applicable law or
 *       agreed to in writing, Licensor provides the Work (and each
 *       Contributor provides its Contributions) on an "AS IS" BASIS,
 *       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *       implied, including, without limitation, any warranties or conditions
 *       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 *       PARTICULAR PURPOSE. You are solely responsible for determining the
 *       appropriateness of using or redistributing the Work and assume any
 *       risks associated with Your exercise of permissions under this License.
 *
 *    8. Limitation of Liability. In no event and under no legal theory,
 *       whether in tort (including negligence), contract, or otherwise,
 *       unless required by applicable law (such as deliberate and grossly
 *       negligent acts) or agreed to in writing, shall any Contributor be
 *       liable to You for damages, including any direct, indirect, special,
 *       incidental, or consequential damages of any character arising as a
 *       result of this License or out of the use or inability to use the
 *       Work (including but not limited to damages for loss of goodwill,
 *       work stoppage, computer failure or malfunction, or any and all
 *       other commercial damages or losses), even if such Contributor
 *       has been advised of the possibility of such damages.
 *
 *    9. Accepting Warranty or Additional Liability. While redistributing
 *       the Work or Derivative Works thereof, You may choose to offer,
 *       and charge a fee for, acceptance of support, warranty, indemnity,
 *       or other liability obligations and/or rights consistent with this
 *       License. However, in accepting such obligations, You may act only
 *       on Your own behalf and on Your sole responsibility, not on behalf
 *       of any other Contributor, and only if You agree to indemnify,
 *       defend, and hold each Contributor harmless for any liability
 *       incurred by, or claims asserted against, such Contributor by reason
 *       of your accepting any such warranty or additional liability.
 *
 *    END OF TERMS AND CONDITIONS
 *
 *    APPENDIX: How to apply the Apache License to your work.
 *
 *       To apply the Apache License to your work, attach the following
 *       boilerplate notice, with the fields enclosed by brackets "[]"
 *       replaced with your own identifying information. (Don't include
 *       the brackets!)  The text should be enclosed in the appropriate
 *       comment syntax for the file format. We also recommend that a
 *       file or class name and description of purpose be included on the
 *       same "printed page" as the copyright notice for easier
 *       identification within third-party archives.
 *
 *    Copyright 2019 Google LLC.
 *
 *    Licensed under the Apache License, Version 2.0 (the "License");
 *    you may not use this file except in compliance with the License.
 *    You may obtain a copy of the License at
 *
 *        http://www.apache.org/licenses/LICENSE-2.0
 *
 *    Unless required by applicable law or agreed to in writing, software
 *    distributed under the License is distributed on an "AS IS" BASIS,
 *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *    See the License for the specific language governing permissions and
 *    limitations under the License.
 *
 * LICENSES FOR SOFTWARE PACKAGES
 * -----------------------------------------------------------------------------
 * umap
 * BSD 3-Clause License
 *
 * Copyright (c) 2017, Leland McInnes
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

!function(t){var r={};function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(r){return t[r]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=2)}([function(t,r,e){"use strict";const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},function(t,r,e){"use strict";var n=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};function i(t){return void 0===t&&(t=Math.random),t()}function o(t){for(var r=[],e=0;e<t;e++)r.push(void 0);return r}function s(t,r){return o(t).map(function(){return r})}function a(t){return t.reduce(function(t,r){return t+r})}Object.defineProperty(r,"__esModule",{value:!0}),r.randomNormal2d=function(t,r,e,n){return void 0===t&&(t=0),void 0===r&&(r=1),void 0===e&&(e=[1,1]),void 0===n&&(n=Math.random),Array(e[0]).fill(0).map(function(){return Array(e[1]).fill(0).map(function(){return function(t,r,e){void 0===e&&(e=Math.random);var n=i(e),o=i(e);return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*o)*r+t}(t,r,n)})})},r.tauRandInt=function(t,r){return void 0===r&&(r=Math.random),Math.floor(r()*t)},r.tauRand=i,r.norm=function(t){var r,e,i=0;try{for(var o=n(t),s=o.next();!s.done;s=o.next()){var a=s.value;i+=Math.pow(a,2)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return Math.sqrt(i)},r.empty=o,r.range=function(t){return o(t).map(function(t,r){return r})},r.filled=s,r.zeros=function(t){return s(t,0)},r.ones=function(t){return s(t,1)},r.linear=function(t,r,e){return o(e).map(function(n,i){return t+i*((r-t)/(e-1))})},r.sum=a,r.mean=function(t){return a(t)/t.length},r.max=function(t){for(var r=0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return r},r.max2d=function(t){for(var r=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)r=t[e][n]>r?t[e][n]:r;return r}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(3);window.UMAP=n.UMAP},function(t,r,e){"use strict";var n=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){t.done?i(t.value):new e(function(r){r(t.value)}).then(s,a)}h((n=n.apply(t,r||[])).next())})},i=this&&this.__generator||function(t,r){var e,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=r.call(t,s)}catch(t){o=[6,t],n=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t};Object.defineProperty(r,"__esModule",{value:!0});var a=e(4),h=e(5),u=e(7),l=e(1),f=e(8),c=function(){function t(t){void 0===t&&(t={}),this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.random=Math.random,this.spread=1,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=m,this.isInitialized=!1,this.embedding=[],this.optimizationState=new g,this.minDist=t.minDist||this.minDist,this.nComponents=t.nComponents||this.nComponents,this.nEpochs=t.nEpochs||this.nEpochs,this.nNeighbors=t.nNeighbors||this.nNeighbors,this.random=t.random||this.random,this.spread=t.spread||this.spread}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,r){return void 0===r&&(r=function(){return!0}),n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.initializeFit(t),[4,this.optimizeLayout(r)];case 1:return e.sent(),[2,this.embedding]}})})},t.prototype.setSupervisedProjection=function(t,r){void 0===r&&(r={}),this.Y=t,this.targetMetric=r.targetMetric||this.targetMetric,this.targetWeight=r.targetWeight||this.targetWeight,this.targetNNeighbors=r.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,r){this.knnIndices=t,this.knnDistances=r},t.prototype.initializeFit=function(t){if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var r=this.nearestNeighbors(t);this.knnIndices=r.knnIndices,this.knnDistances=r.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors),this.processGraphForSupervisedProjection();var e=this.initializeSimplicialSetEmbedding(),n=e.head,i=e.tail,o=e.epochsPerSample;return this.optimizationState.head=n,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.isInitialized=!0,this.getNEpochs()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,r=this.X;if(t){if(t.length!==r.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var e=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,e)}}},t.prototype.step=function(){var t=this.optimizationState,r=t.currentEpoch;return t.isInitialized||this.initializeOptimization(),r<this.getNEpochs()&&this.optimizeLayoutStep(r),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var r,e=this.distanceFn,n=this.nNeighbors,i=h.makeNNDescent(e,this.random),o=5+Math.floor(.5===(r=Math.pow(t.length,.5)/20)?0:Math.round(r)),s=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length)))),a=u.makeForest(t,n,o,this.random),l=i(t,u.makeLeafArray(a),n,s);return{knnIndices:l.indices,knnDistances:l.weights}},t.prototype.fuzzySimplicialSet=function(t,r,e,n){void 0===e&&(e=1),void 0===n&&(n=1);var i=this.knnIndices,o=void 0===i?[]:i,s=this.knnDistances,h=void 0===s?[]:s,u=this.smoothKNNDistance(h,r,e),l=u.sigmas,f=u.rhos,c=this.computeMembershipStrengths(o,h,l,f),m=c.rows,g=c.cols,v=c.vals,p=[t.length,t.length],w=new a.SparseMatrix(m,g,v,p),d=a.transpose(w),y=a.pairwiseMultiply(w,d),b=a.subtract(a.add(w,d),y),M=a.multiplyScalar(b,n),x=a.multiplyScalar(y,1-n);return a.add(M,x)},t.prototype.categoricalSimplicialSetIntersection=function(t,r,e,n){void 0===n&&(n=1);var i=d(t,r,n,e);return y(i=a.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,r,e,n,i){void 0===e&&(e=1),void 0===n&&(n=64),void 0===i&&(i=1);for(var o=Math.log(r)/Math.log(2)*i,s=l.zeros(t.length),a=l.zeros(t.length),h=0;h<t.length;h++){var u=0,f=1/0,c=1,m=t[h],g=m.filter(function(t){return t>0});if(g.length>=e){var v=Math.floor(e),p=e-v;v>0?(s[h]=g[v-1],p>1e-5&&(s[h]+=p*(g[v]-g[v-1]))):s[h]=p*g[0]}else g.length>0&&(s[h]=l.max(g));for(var w=0;w<n;w++){for(var d=0,y=1;y<t[h].length;y++){var b=t[h][y]-s[h];d+=b>0?Math.exp(-b/c):1}if(Math.abs(d-o)<1e-5)break;d>o?c=(u+(f=c))/2:(u=c,f===1/0?c*=2:c=(u+f)/2)}if(a[h]=c,s[h]>0){var M=l.mean(m);a[h]<.001*M&&(a[h]=.001*M)}else{var x=l.mean(t.map(l.mean));a[h]<.001*x&&(a[h]=.001*x)}}return{sigmas:a,rhos:s}},t.prototype.computeMembershipStrengths=function(t,r,e,n){for(var i=t.length,o=t[0].length,s=l.zeros(i*o),a=l.zeros(i*o),h=l.zeros(i*o),u=0;u<i;u++)for(var f=0;f<o;f++){var c=0;-1!==t[u][f]&&(c=t[u][f]===u?0:r[u][f]-n[u]<=0?1:Math.exp(-(r[u][f]-n[u])/e[u]),s[u*o+f]=u,a[u*o+f]=t[u][f],h[u*o+f]=c)}return{rows:s,cols:a,vals:h}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,r=this.getNEpochs(),e=this.nComponents,n=this.graph.getValues(),i=0,o=0;o<n.length;o++){var s=n[o];i<n[o]&&(i=s)}var a=this.graph.map(function(t){return t<i/r?0:t});this.embedding=l.zeros(a.nRows).map(function(){return l.zeros(e).map(function(){return 20*l.tauRand(t.random)-10})});var h=[],u=[],f=[];for(o=0;o<a.nRows;o++)for(var c=0;c<a.nCols;c++){(s=a.get(o,c))&&(h.push(s),f.push(o),u.push(c))}return{head:u,tail:f,epochsPerSample:this.makeEpochsPerSample(h,r)}},t.prototype.makeEpochsPerSample=function(t,r){var e=l.filled(t.length,-1),n=l.max(t),i=t.map(function(t){return t/n*r});return i.forEach(function(t,n){t>0&&(e[n]=r/i[n])}),e},t.prototype.initializeOptimization=function(){var t=this.embedding,r=this.embedding,e=this.optimizationState,n=e.head,i=e.tail,o=e.epochsPerSample,a=this.getNEpochs(),h=this.graph.nCols,u=w(this.spread,this.minDist),l=u.a,f=u.b,c=t[0].length,m=t.length===r.length,g=o.map(function(t){return t/5}),v=s(g),p=s(o);Object.assign(this.optimizationState,{isInitialized:!0,headEmbedding:t,tailEmbedding:r,head:n,tail:i,epochsPerSample:o,epochOfNextSample:p,epochOfNextNegativeSample:v,epochsPerNegativeSample:g,moveOther:m,initialAlpha:1,alpha:1,gamma:1,a:l,b:f,dim:c,nEpochs:a,nVertices:h})},t.prototype.optimizeLayoutStep=function(t){for(var r=this.optimizationState,e=r.head,n=r.tail,i=r.headEmbedding,o=r.tailEmbedding,s=r.epochsPerSample,a=r.epochOfNextSample,h=r.epochOfNextNegativeSample,u=r.epochsPerNegativeSample,f=r.moveOther,c=r.initialAlpha,m=r.alpha,g=r.gamma,w=r.a,d=r.b,y=r.dim,b=r.nEpochs,M=r.nVertices,x=0;x<s.length;x++)if(!(a[x]>t)){var S=e[x],E=n[x],R=i[S],k=o[E],A=p(R,k),N=0;A>0&&(N=-2*w*d*Math.pow(A,d-1),N/=w*Math.pow(A,d)+1);for(var V=0;V<y;V++){var z=v(N*(R[V]-k[V]),4);R[V]+=z*m,f&&(k[V]+=-z*m)}a[x]+=s[x];for(var C=Math.floor((t-h[x])/u[x]),I=0;I<C;I++){var j=l.tauRandInt(M,this.random),P=o[j],D=p(R,P),_=0;if(D>0)_=2*g*d,_/=(.001+D)*(w*Math.pow(D,d)+1);else if(S===j)continue;for(V=0;V<y;V++){z=4;_>0&&(z=v(_*(R[V]-P[V]),4)),R[V]+=z*m}}h[x]+=C*u[x]}return r.alpha=c*(1-t/b),r.currentEpoch+=1,this.embedding=i,r.currentEpoch},t.prototype.optimizeLayout=function(t){var r=this;return void 0===t&&(t=function(){return!0}),this.optimizationState.isInitialized||this.initializeOptimization(),new Promise(function(e,o){var s=function(){return n(r,void 0,void 0,function(){var r,n,a,h,u,l;return i(this,function(i){try{if(r=this.optimizationState,n=r.nEpochs,a=r.currentEpoch,h=this.optimizeLayoutStep(a),u=!1===t(h),l=h===n,u||l)return[2,e(l)];s()}catch(t){o(t)}return[2]})})};s()})},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var r=t.nRows;return r<=2500?500:r<=5e3?400:r<=7500?300:200},t}();function m(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return Math.sqrt(e)}r.UMAP=c,r.euclidean=m,r.cosine=function(t,r){for(var e=0,n=0,i=0,o=0;o<t.length;o++)e+=t[o]*r[o],n+=Math.pow(t[o],2),i+=Math.pow(r[o],2);return 0===n&&0===i?0:0===n||0===i?1:1-e/Math.sqrt(n*i)};var g=function(){return function(){this.currentEpoch=0,this.isInitialized=!1,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0}}();function v(t,r){return t>r?r:t<-r?-r:t}function p(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}function w(t,r){var e=l.linear(0,3*t,300).map(function(t){return t<r?1:t}),n=l.zeros(e.length).map(function(n,i){return e[i]>=r?Math.exp(-(e[i]-r)/t):n}),i=f({x:e,y:n},function(t){var r=o(t,2),e=r[0],n=r[1];return function(t){return 1/(1+e*Math.pow(t,2*n))}},{damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01}).parameterValues,s=o(i,2);return{a:s[0],b:s[1]}}function d(t,r,e,n){return void 0===e&&(e=1),void 0===n&&(n=5),t.map(function(t,i,o){return-1===r[i]||-1===r[o]?t*Math.exp(-e):r[i]!==r[o]?t*Math.exp(-n):t})}function y(t){t=a.normalize(t,"max");var r=a.transpose(t),e=a.pairwiseMultiply(r,t);return t=a.add(t,a.subtract(r,e)),a.eliminateZeros(t)}r.findABParams=w,r.fastIntersection=d,r.resetLocalConnectivity=y},function(t,r,e){"use strict";var n,i=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(i(arguments[r]));return t},s=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};Object.defineProperty(r,"__esModule",{value:!0});var a=e(1),h=function(){function t(t,r,e,n){this.entries=new Map,this.nRows=0,this.nCols=0,this.rows=o(t),this.cols=o(r),this.values=o(e);for(var i=0;i<e.length;i++){var s=this.makeKey(this.rows[i],this.cols[i]);this.entries.set(s,i)}this.nRows=n[0],this.nCols=n[0]}return t.prototype.makeKey=function(t,r){return t+":"+r},t.prototype.checkDims=function(t,r){if(!(t<this.nRows&&r<this.nCols))throw new Error("array index out of bounds")},t.prototype.set=function(t,r,e){this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);this.values[i]=e}else this.rows.push(t),this.cols.push(r),this.values.push(e),this.entries.set(n,this.values.length-1)},t.prototype.get=function(t,r,e){void 0===e&&(e=0),this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);return this.values[i]}return e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return o(this.rows)},t.prototype.getCols=function(){return o(this.cols)},t.prototype.getValues=function(){return o(this.values)},t.prototype.forEach=function(t){for(var r=0;r<this.values.length;r++)t(this.values[r],this.rows[r],this.cols[r])},t.prototype.map=function(r){for(var e=[],n=0;n<this.values.length;n++)e.push(r(this.values[n],this.rows[n],this.cols[n]));var i=[this.nRows,this.nCols];return new t(this.rows,this.cols,e,i)},t.prototype.toArray=function(){for(var t=this,r=a.empty(this.nRows).map(function(){return a.zeros(t.nCols)}),e=0;e<this.values.length;e++)r[this.rows[e]][this.cols[e]]=this.values[e];return r},t}();r.SparseMatrix=h,r.transpose=function(t){var r=[],e=[],n=[];t.forEach(function(t,i,o){r.push(i),e.push(o),n.push(t)});var i=[t.nCols,t.nRows];return new h(e,r,n,i)},r.identity=function(t){for(var r=i(t,1)[0],e=new h([],[],[],t),n=0;n<r;n++)e.set(n,n,1);return e},r.pairwiseMultiply=function(t,r){return l(t,r,function(t,r){return t*r})},r.add=function(t,r){return l(t,r,function(t,r){return t+r})},r.subtract=function(t,r){return l(t,r,function(t,r){return t-r})},r.multiplyScalar=function(t,r){return t.map(function(t){return t*r})},r.eliminateZeros=function(t){for(var r=new Set,e=t.getValues(),n=t.getRows(),i=t.getCols(),o=0;o<e.length;o++)0===e[o]&&r.add(o);var s=function(t,e){return!r.has(e)},a=e.filter(s),u=n.filter(s),l=i.filter(s);return new h(u,l,a,t.getDims())},r.normalize=function(t,r){var e,n;void 0===r&&(r="l2");var i=u[r],o=new Map;t.forEach(function(t,r,e){var n=o.get(r)||[];n.push(e),o.set(r,n)});var a=new h([],[],[],t.getDims()),l=function(r){for(var e=o.get(r).sort(),n=e.map(function(e){return t.get(r,e)}),s=i(n),h=0;h<s.length;h++)a.set(r,e[h],s[h])};try{for(var f=s(o.keys()),c=f.next();!c.done;c=f.next())l(c.value)}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return a};var u=((n={}).max=function(t){for(var r=-1/0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return t.map(function(t){return t/r})},n.l1=function(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return t.map(function(t){return t/r})},n.l2=function(t){for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return t.map(function(t){return Math.sqrt(Math.pow(t,2)/r)})},n);function l(t,r,e){for(var n=new Set,i=[],o=[],s=[],a=function(n,a){i.push(n),o.push(a);var h=e(t.get(n,a),r.get(n,a));s.push(h)},u=t.getValues(),l=t.getRows(),f=t.getCols(),c=0;c<u.length;c++){var m=(w=l[c])+":"+(d=f[c]);n.add(m),a(w,d)}var g=r.getValues(),v=r.getRows(),p=r.getCols();for(c=0;c<g.length;c++){var w,d;m=(w=v[c])+":"+(d=p[c]);n.has(m)||a(w,d)}var y=[t.nRows,t.nCols];return new h(i,o,s,y)}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(6),i=e(1);r.makeNNDescent=function(t,r){return function(e,o,s,a,h,u,l,f){void 0===a&&(a=10),void 0===h&&(h=50),void 0===u&&(u=.001),void 0===l&&(l=.5),void 0===f&&(f=!0);for(var c=e.length,m=n.makeHeap(e.length,s),g=0;g<e.length;g++)for(var v=n.rejectionSample(s,e.length,r),p=0;p<v.length;p++){var w=t(e[g],e[v[p]]);n.heapPush(m,g,w,v[p],1),n.heapPush(m,v[p],w,g,1)}if(f)for(var d=0;d<o.length;d++)for(g=0;g<o[d].length&&!(o[d][g]<0);g++)for(p=g+1;p<o[d].length&&!(o[d][p]<0);p++)w=t(e[o[d][g]],e[o[d][p]]),n.heapPush(m,o[d][g],w,o[d][p],1),n.heapPush(m,o[d][p],w,o[d][g],1);for(d=0;d<a;d++){var y=n.buildCandidates(m,c,s,h,r),b=0;for(g=0;g<c;g++)for(p=0;p<h;p++){var M=Math.floor(y[0][g][p]);if(!(M<0||i.tauRand(r)<l))for(var x=0;x<h;x++){var S=Math.floor(y[0][g][x]),E=y[2][g][p],R=y[2][g][x];S<0||!E&&!R||(w=t(e[M],e[S]),b+=n.heapPush(m,M,w,S,1),b+=n.heapPush(m,S,w,M,1))}}if(b<=u*s*e.length)break}return n.deheapSort(m)}}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(1);function i(t,r){var e=function(e){return n.empty(t).map(function(){return n.filled(r,e)})},i=[];return i.push(e(-1)),i.push(e(1/0)),i.push(e(0)),i}function o(t,r,e,n,i){r=Math.floor(r);var o=t[0][r],s=t[1][r],a=t[2][r];if(e>=s[0])return 0;for(var h=0;h<o.length;h++)if(n===o[h])return 0;s[0]=e,o[0]=n,a[0]=i;for(var u=0,l=0;;){var f=2*u+1,c=f+1,m=t[0][0].length;if(f>=m)break;if(c>=m){if(!(s[f]>e))break;l=f}else if(s[f]>=s[c]){if(!(e<s[f]))break;l=f}else{if(!(e<s[c]))break;l=c}s[u]=s[l],o[u]=o[l],a[u]=a[l],u=l}return s[u]=e,o[u]=n,a[u]=i,1}function s(t,r,e,n){for(;2*n+1<e;){var i=2*n+1,o=i+1,s=n;if(t[s]<t[i]&&(s=i),o<e&&t[s]<t[o]&&(s=o),s===n)break;var a=t[n];t[n]=t[s],t[s]=a;var h=r[n];r[n]=r[s],r[s]=h,n=s}}r.makeHeap=i,r.rejectionSample=function(t,r,e){for(var i=n.zeros(t),o=0;o<t;o++){for(var s=!0,a=0;s;){a=n.tauRandInt(r,e);for(var h=!1,u=0;u<o;u++)if(a===i[u]){h=!0;break}h||(s=!1)}i[o]=a}return i},r.heapPush=o,r.buildCandidates=function(t,r,e,s,a){for(var h=i(r,s),u=0;u<r;u++)for(var l=0;l<e;l++)if(!(t[0][u][l]<0)){var f=t[0][u][l],c=t[2][u][l],m=n.tauRand(a);o(h,u,m,f,c),o(h,f,m,u,c),t[2][u][l]=0}return h},r.deheapSort=function(t){for(var r=t[0],e=t[1],n=0;n<r.length;n++)for(var i=r[n],o=e[n],a=0;a<i.length-1;a++){var h=i.length-a-1,u=o.length-a-1,l=i[0];i[0]=i[h],i[h]=l;var f=o[0];o[0]=o[u],o[u]=f,s(o,i,u,0)}return{indices:r,weights:e}}},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};Object.defineProperty(r,"__esModule",{value:!0});var s=e(1),a=function(){return function(t,r,e,n){this.hyperplanes=t,this.offsets=r,this.children=e,this.indices=n}}();r.FlatTree=a,r.makeForest=function(t,r,e,n){var o=Math.max(10,r);return s.range(e).map(function(r,e){return function(t,r,e,n){void 0===r&&(r=30);var i=s.range(t.length);return function t(r,e,n,i,o){if(void 0===n&&(n=30),e.length>n){var a=function(t,r,e){var n=t[0].length,i=s.tauRandInt(r.length,e),o=s.tauRandInt(r.length,e);o=(o+=i===o?1:0)%r.length;for(var a=r[i],h=r[o],u=0,l=s.zeros(n),f=0;f<l.length;f++)l[f]=t[a][f]-t[h][f],u-=l[f]*(t[a][f]+t[h][f])/2;for(var c=0,m=0,g=s.zeros(r.length),f=0;f<r.length;f++){for(var v=u,p=0;p<n;p++)v+=l[p]*t[r[f]][p];0===v?(g[f]=s.tauRandInt(2,e),0===g[f]?c+=1:m+=1):v>0?(g[f]=0,c+=1):(g[f]=1,m+=1)}var w=s.zeros(c),d=s.zeros(m);for(var f in c=0,m=0,s.range(g.length))0===g[f]?(w[c]=r[f],c+=1):(d[m]=r[f],m+=1);return{indicesLeft:w,indicesRight:d,hyperplane:l,offset:u}}(r,e,o),h=a.indicesLeft,u=a.indicesRight,l=a.hyperplane,f=a.offset,c=t(r,h,n,i+1,o),m=t(r,u,n,i+1,o),g={leftChild:c,rightChild:m,isLeaf:!1,hyperplane:l,offset:f};return g}var g={indices:e,isLeaf:!0};return g}(t,i,r,e,n)}(t,o,e,n)}).map(function(t){return function(t,r){var e=function t(r){return r.isLeaf?1:1+t(r.leftChild)+t(r.rightChild)}(t),n=function t(r){return r.isLeaf?1:t(r.leftChild)+t(r.rightChild)}(t),o=s.range(e).map(function(){return s.zeros(t.hyperplane.length)}),h=s.zeros(e),u=s.range(e).map(function(){return[-1,-1]}),l=s.range(n).map(function(){return s.range(r).map(function(){return-1})});return function t(r,e,n,o,s,a,h){var u;if(r.isLeaf)return o[a][0]=-h,(u=s[h]).splice.apply(u,i([0,r.indices.length],r.indices)),{nodeNum:a,leafNum:h+=1};e[a]=r.hyperplane,n[a]=r.offset,o[a][0]=a+1;var l=a,f=t(r.leftChild,e,n,o,s,a+1,h);return a=f.nodeNum,h=f.leafNum,o[l][1]=a+1,{nodeNum:(f=t(r.rightChild,e,n,o,s,a+1,h)).nodeNum,leafNum:f.leafNum}}(t,o,h,u,l,0,0),new a(o,h,u,l)}(t,o)})},r.makeLeafArray=function(t){var r,e;if(t.length>0){var n=[];try{for(var s=o(t),a=s.next();!a.done;a=s.next()){var h=a.value;n.push.apply(n,i(h.indices))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(r)throw r.error}}return n}return[[-1]]}},function(t,r,e){"use strict";var n=e(9);function i(t,r,e){var n=0;const i=e(r);for(var o=0;o<t.x.length;o++)n+=Math.abs(t.y[o]-i(t.x[o]));return n}function o(t,r,e,i,o){var s=n.Matrix.eye(r.length).mul(e*i*i),a=t.x.length,h=new Array(a);const u=o(r);for(var l=0;l<a;l++)h[l]=u(t.x[l]);var f=function(t,r,e,i,o){const s=e.length,a=t.x.length;for(var h=new Array(s),u=0;u<s;u++){h[u]=new Array(a);var l=e.concat();l[u]+=i;for(var f=o(l),c=0;c<a;c++)h[u][c]=r[c]-f(t.x[c])}return new n.Matrix(h)}(t,h,r,i,o),c=function(t,r){const e=t.x.length;for(var i=new Array(e),o=0;o<e;o++)i[o]=t.y[o]-r[o];return new n.Matrix([i])}(t,h).transposeView(),m=n.inverse(s.add(f.mmul(f.transposeView())));return(r=(r=new n.Matrix([r])).sub(m.mmul(f).mmul(c).mul(i).transposeView())).to1DArray()}t.exports=function(t,r,e={}){let{maxIterations:n=100,gradientDifference:s=.1,damping:a=0,errorTolerance:h=.01,initialValues:u}=e;if(a<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var l=u||new Array(r.length).fill(1);if(!Array.isArray(l))throw new Error("initialValues must be an array");for(var f=i(t,l,r),c=f<=h,m=0;m<n&&!c;m++)c=(f=i(t,l=o(t,l,a,s,r),r))<=h;return{parameterValues:l,parameterError:f,iterations:m}}},function(t,r,e){"use strict";e.r(r);var n=e(0),i=e.n(n);var o=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r};var s=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r};var a=function(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!i()(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=s(t),a=o(t);if(n===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var h=e.min,u=void 0===h?e.autoMinMax?n:0:h,l=e.max,f=void 0===l?e.autoMinMax?a:1:l;if(u>=f)throw new RangeError("min option must be smaller than max option");for(var c=(f-u)/(a-n),m=0;m<t.length;m++)r[m]=(t[m]-n)*c+u;return r};class h{constructor(t){var r,e,n,i,o,s,a,h,u,l=(t=P.checkMatrix(t)).clone(),f=l.rows,c=l.columns,m=new Array(f),g=1;for(r=0;r<f;r++)m[r]=r;for(h=new Array(f),e=0;e<c;e++){for(r=0;r<f;r++)h[r]=l.get(r,e);for(r=0;r<f;r++){for(u=Math.min(r,e),o=0,n=0;n<u;n++)o+=l.get(r,n)*h[n];h[r]-=o,l.set(r,e,h[r])}for(i=e,r=e+1;r<f;r++)Math.abs(h[r])>Math.abs(h[i])&&(i=r);if(i!==e){for(n=0;n<c;n++)s=l.get(i,n),l.set(i,n,l.get(e,n)),l.set(e,n,s);a=m[i],m[i]=m[e],m[e]=a,g=-g}if(e<f&&0!==l.get(e,e))for(r=e+1;r<f;r++)l.set(r,e,l.get(r,e)/l.get(e,e))}this.LU=l,this.pivotVector=m,this.pivotSign=g}isSingular(){for(var t=this.LU,r=t.columns,e=0;e<r;e++)if(0===t[e][e])return!0;return!1}solve(t){t=I.checkMatrix(t);var r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var e,n,i,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),a=r.columns;for(i=0;i<a;i++)for(e=i+1;e<a;e++)for(n=0;n<o;n++)s[e][n]-=s[i][n]*r[e][i];for(i=a-1;i>=0;i--){for(n=0;n<o;n++)s[i][n]/=r[i][i];for(e=0;e<i;e++)for(n=0;n<o;n++)s[e][n]-=s[i][n]*r[e][i]}return s}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,e=t.columns,n=0;n<e;n++)r*=t[n][n];return r}get lowerTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new I(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new I(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function u(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}function l(t,r,e){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(r);for(var o=0;o<r;o++)n[i][o]=e}return n}class f{constructor(t,r={}){var e=(t=P.checkMatrix(t)).rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=r;var a,h=Boolean(i),f=Boolean(o),c=!1;if(e<n)if(s){e=(a=t.transpose()).rows,n=a.columns,c=!0;var m=h;h=f,f=m}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();var g=Math.min(e,n),v=Math.min(e+1,n),p=new Array(v),w=l(e,g,0),d=l(n,n,0),y=new Array(n),b=new Array(e),M=new Array(v);for(let t=0;t<v;t++)M[t]=t;var x=Math.min(e-1,n),S=Math.max(0,Math.min(n-2,e)),E=Math.max(x,S);for(let t=0;t<E;t++){if(t<x){p[t]=0;for(let r=t;r<e;r++)p[t]=u(p[t],a[r][t]);if(0!==p[t]){a[t][t]<0&&(p[t]=-p[t]);for(let r=t;r<e;r++)a[r][t]/=p[t];a[t][t]+=1}p[t]=-p[t]}for(let r=t+1;r<n;r++){if(t<x&&0!==p[t]){let n=0;for(let i=t;i<e;i++)n+=a[i][t]*a[i][r];n=-n/a[t][t];for(let i=t;i<e;i++)a[i][r]+=n*a[i][t]}y[r]=a[t][r]}if(h&&t<x)for(let r=t;r<e;r++)w[r][t]=a[r][t];if(t<S){y[t]=0;for(let r=t+1;r<n;r++)y[t]=u(y[t],y[r]);if(0!==y[t]){y[t+1]<0&&(y[t]=0-y[t]);for(let r=t+1;r<n;r++)y[r]/=y[t];y[t+1]+=1}if(y[t]=-y[t],t+1<e&&0!==y[t]){for(let r=t+1;r<e;r++)b[r]=0;for(let r=t+1;r<e;r++)for(let e=t+1;e<n;e++)b[r]+=y[e]*a[r][e];for(let r=t+1;r<n;r++){let n=-y[r]/y[t+1];for(let i=t+1;i<e;i++)a[i][r]+=n*b[i]}}if(f)for(let r=t+1;r<n;r++)d[r][t]=y[r]}}let R=Math.min(n,e+1);if(x<n&&(p[x]=a[x][x]),e<R&&(p[R-1]=0),S+1<R&&(y[S]=a[S][R-1]),y[R-1]=0,h){for(let t=x;t<g;t++){for(let r=0;r<e;r++)w[r][t]=0;w[t][t]=1}for(let t=x-1;t>=0;t--)if(0!==p[t]){for(let r=t+1;r<g;r++){let n=0;for(let i=t;i<e;i++)n+=w[i][t]*w[i][r];n=-n/w[t][t];for(let i=t;i<e;i++)w[i][r]+=n*w[i][t]}for(let r=t;r<e;r++)w[r][t]=-w[r][t];w[t][t]=1+w[t][t];for(let r=0;r<t-1;r++)w[r][t]=0}else{for(let r=0;r<e;r++)w[r][t]=0;w[t][t]=1}}if(f)for(let t=n-1;t>=0;t--){if(t<S&&0!==y[t])for(let r=t+1;r<n;r++){let e=0;for(let i=t+1;i<n;i++)e+=d[i][t]*d[i][r];e=-e/d[t+1][t];for(let i=t+1;i<n;i++)d[i][r]+=e*d[i][t]}for(let r=0;r<n;r++)d[r][t]=0;d[t][t]=1}for(var k=R-1,A=Number.EPSILON;R>0;){let t,r;for(t=R-2;t>=-1&&-1!==t;t--){const r=Number.MIN_VALUE+A*Math.abs(p[t]+Math.abs(p[t+1]));if(Math.abs(y[t])<=r||Number.isNaN(y[t])){y[t]=0;break}}if(t===R-2)r=4;else{let e;for(e=R-1;e>=t&&e!==t;e--){let r=(e!==R?Math.abs(y[e]):0)+(e!==t+1?Math.abs(y[e-1]):0);if(Math.abs(p[e])<=A*r){p[e]=0;break}}e===t?r=3:e===R-1?r=1:(r=2,t=e)}switch(t++,r){case 1:{let r=y[R-2];y[R-2]=0;for(let e=R-2;e>=t;e--){let i=u(p[e],r),o=p[e]/i,s=r/i;if(p[e]=i,e!==t&&(r=-s*y[e-1],y[e-1]=o*y[e-1]),f)for(let t=0;t<n;t++)i=o*d[t][e]+s*d[t][R-1],d[t][R-1]=-s*d[t][e]+o*d[t][R-1],d[t][e]=i}break}case 2:{let r=y[t-1];y[t-1]=0;for(let n=t;n<R;n++){let i=u(p[n],r),o=p[n]/i,s=r/i;if(p[n]=i,r=-s*y[n],y[n]=o*y[n],h)for(let r=0;r<e;r++)i=o*w[r][n]+s*w[r][t-1],w[r][t-1]=-s*w[r][n]+o*w[r][t-1],w[r][n]=i}break}case 3:{const r=Math.max(Math.abs(p[R-1]),Math.abs(p[R-2]),Math.abs(y[R-2]),Math.abs(p[t]),Math.abs(y[t])),i=p[R-1]/r,o=p[R-2]/r,s=y[R-2]/r,a=p[t]/r,l=y[t]/r,c=((o+i)*(o-i)+s*s)/2,m=i*s*(i*s);let g=0;0===c&&0===m||(g=m/(c+(g=c<0?0-Math.sqrt(c*c+m):Math.sqrt(c*c+m))));let v=(a+i)*(a-i)+g,b=a*l;for(let r=t;r<R-1;r++){let i=u(v,b);0===i&&(i=Number.MIN_VALUE);let o=v/i,s=b/i;if(r!==t&&(y[r-1]=i),v=o*p[r]+s*y[r],y[r]=o*y[r]-s*p[r],b=s*p[r+1],p[r+1]=o*p[r+1],f)for(let t=0;t<n;t++)i=o*d[t][r]+s*d[t][r+1],d[t][r+1]=-s*d[t][r]+o*d[t][r+1],d[t][r]=i;if(0===(i=u(v,b))&&(i=Number.MIN_VALUE),o=v/i,s=b/i,p[r]=i,v=o*y[r]+s*p[r+1],p[r+1]=-s*y[r]+o*p[r+1],b=s*y[r+1],y[r+1]=o*y[r+1],h&&r<e-1)for(let t=0;t<e;t++)i=o*w[t][r]+s*w[t][r+1],w[t][r+1]=-s*w[t][r]+o*w[t][r+1],w[t][r]=i}y[R-2]=v,1;break}case 4:if(p[t]<=0&&(p[t]=p[t]<0?-p[t]:0,f))for(let r=0;r<=k;r++)d[r][t]=-d[r][t];for(;t<k&&!(p[t]>=p[t+1]);){let r=p[t];if(p[t]=p[t+1],p[t+1]=r,f&&t<n-1)for(let e=0;e<n;e++)r=d[e][t+1],d[e][t+1]=d[e][t],d[e][t]=r;if(h&&t<e-1)for(let n=0;n<e;n++)r=w[n][t+1],w[n][t+1]=w[n][t],w[n][t]=r;t++}0,R--}}if(c){var N=d;d=w,w=N}this.m=e,this.n=n,this.s=p,this.U=w,this.V=d}solve(t){var r=t,e=this.threshold,n=this.s.length,i=I.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=e?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,s=this.rightSingularVectors,a=s.mmul(i),h=s.rows,u=o.length,l=I.zeros(h,u);for(let t=0;t<h;t++)for(let r=0;r<u;r++){let e=0;for(let i=0;i<n;i++)e+=a[t][i]*o[r][i];l[t][r]=e}return l.mmul(r)}solveForDiagonal(t){return this.solve(I.diag(t))}inverse(){var t=this.V,r=this.threshold,e=t.length,n=t[0].length,i=new I(e,this.s.length);for(let o=0;o<e;o++)for(let e=0;e<n;e++)Math.abs(this.s[e])>r?i[o][e]=t[o][e]/this.s[e]:i[o][e]=0;var o=this.U,s=o.length,a=o[0].length,h=new I(e,s);for(let t=0;t<e;t++)for(let r=0;r<s;r++){let e=0;for(let n=0;n<a;n++)e+=i[t][n]*o[r][n];h[t][r]=e}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,n=0,i=e.length;n<i;n++)e[n]>t&&r++;return r}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return I.isMatrix(this.U)||(this.U=new I(this.U)),this.U}get rightSingularVectors(){return I.isMatrix(this.V)||(this.V=new I(this.V)),this.V}get diagonalMatrix(){return I.diag(this.s)}}function c(t,r,e){var n=e?t.rows:t.rows-1;if(r<0||r>n)throw new RangeError("Row index out of range")}function m(t,r,e){var n=e?t.columns:t.columns-1;if(r<0||r>n)throw new RangeError("Column index out of range")}function g(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function v(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function p(t,r,e){return{row:w(t,r),column:d(t,e)}}function w(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for row indices");if(r.some(r=>r<0||r>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function d(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for column indices");if(r.some(r=>r<0||r>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function y(t,r,e,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(b("startRow",r),b("endRow",e),b("startColumn",n),b("endColumn",i),r>e||n>i||r<0||r>=t.rows||e<0||e>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function b(t,r){if("number"!=typeof r)throw new TypeError(`${t} must be a number`)}class M extends(C()){constructor(t,r,e){super(),this.matrix=t,this.rows=r,this.columns=e}static get[Symbol.species](){return I}}class x extends M{constructor(t){super(t,t.columns,t.rows)}set(t,r,e){return this.matrix.set(r,t,e),this}get(t,r){return this.matrix.get(r,t)}}class S extends M{constructor(t,r){super(t,1,t.columns),this.row=r}set(t,r,e){return this.matrix.set(this.row,r,e),this}get(t,r){return this.matrix.get(this.row,r)}}class E extends M{constructor(t,r,e,n,i){y(t,r,e,n,i),super(t,e-r+1,i-n+1),this.startRow=r,this.startColumn=n}set(t,r,e){return this.matrix.set(this.startRow+t,this.startColumn+r,e),this}get(t,r){return this.matrix.get(this.startRow+t,this.startColumn+r)}}class R extends M{constructor(t,r,e){var n=p(t,r,e);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,r,e){return this.matrix.set(this.rowIndices[t],this.columnIndices[r],e),this}get(t,r){return this.matrix.get(this.rowIndices[t],this.columnIndices[r])}}class k extends M{constructor(t,r){super(t,(r=w(t,r)).length,t.columns),this.rowIndices=r}set(t,r,e){return this.matrix.set(this.rowIndices[t],r,e),this}get(t,r){return this.matrix.get(this.rowIndices[t],r)}}class A extends M{constructor(t,r){r=d(t,r),super(t,t.rows,r.length),this.columnIndices=r}set(t,r,e){return this.matrix.set(t,this.columnIndices[r],e),this}get(t,r){return this.matrix.get(t,this.columnIndices[r])}}class N extends M{constructor(t,r){super(t,t.rows,1),this.column=r}set(t,r,e){return this.matrix.set(t,this.column,e),this}get(t){return this.matrix.get(t,this.column)}}class V extends M{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(this.rows-t-1,r,e),this}get(t,r){return this.matrix.get(this.rows-t-1,r)}}class z extends M{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(t,this.columns-r-1,e),this}get(t,r){return this.matrix.get(t,this.columns-r-1)}}function C(t){void 0===t&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(t,r,e){if(t*r!==e.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e[i*r+o]);return n}static rowVector(t){for(var r=new this(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}static columnVector(t){for(var r=new this(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}static empty(t,r){return new this(t,r)}static zeros(t,r){return this.empty(t,r).fill(0)}static ones(t,r){return this.empty(t,r).fill(1)}static rand(t,r,e){void 0===e&&(e=Math.random);for(var n=this.empty(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e());return n}static randInt(t,r,e,n){void 0===e&&(e=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,r),o=0;o<t;o++)for(var s=0;s<r;s++){var a=Math.floor(n()*e);i.set(o,s,a)}return i}static eye(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var n=Math.min(t,r),i=this.zeros(t,r),o=0;o<n;o++)i.set(o,o,e);return i}static diag(t,r,e){var n=t.length;void 0===r&&(r=n),void 0===e&&(e=r);for(var i=Math.min(n,r,e),o=this.zeros(r,e),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var s=0;s<n;s++)i.set(o,s,Math.min(t.get(o,s),r.get(o,s)));return i}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var s=0;s<n;s++)i.set(o,s,Math.max(t.get(o,s),r.get(o,s)));return i}static checkMatrix(t){return r.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=this.rows,e=this.columns,n=0;n<r;n++)for(var i=0;i<e;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t[r*this.columns+e]=this.get(r,e);return t}to2DArray(){for(var t=new Array(this.rows),r=0;r<this.rows;r++){t[r]=new Array(this.columns);for(var e=0;e<this.columns;e++)t[r][e]=this.get(r,e)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}set(t,r,e){throw new Error("set method is unimplemented")}get(t,r){throw new Error("get method is unimplemented")}repeat(t,r){t=t||1,r=r||1;for(var e=new this.constructor[Symbol.species](this.rows*t,this.columns*r),n=0;n<t;n++)for(var i=0;i<r;i++)e.setSubMatrix(this,this.rows*n,this.columns*i);return e}fill(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,t);return this}neg(){return this.mulS(-1)}getRow(t){c(this,t);for(var r=new Array(this.columns),e=0;e<this.columns;e++)r[e]=this.get(t,e);return r}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,r){c(this,t),r=g(this,r);for(var e=0;e<this.columns;e++)this.set(t,e,r[e]);return this}swapRows(t,r){c(this,t),c(this,r);for(var e=0;e<this.columns;e++){var n=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,n)}return this}getColumn(t){m(this,t);for(var r=new Array(this.rows),e=0;e<this.rows;e++)r[e]=this.get(e,t);return r}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,r){m(this,t),r=v(this,r);for(var e=0;e<this.rows;e++)this.set(e,t,r[e]);return this}swapColumns(t,r){m(this,t),m(this,r);for(var e=0;e<this.rows;e++){var n=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,n)}return this}addRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[e]);return this}subRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[e]);return this}mulRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[e]);return this}divRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[e]);return this}addColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[r]);return this}subColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[r]);return this}mulColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[r]);return this}divColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[r]);return this}mulRow(t,r){c(this,t);for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*r);return this}mulColumn(t,r){m(this,t);for(var e=0;e<this.rows;e++)this.set(e,t,this.get(e,t)*r);return this}max(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}maxIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}min(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}minIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}maxRow(t){c(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}maxRowIndex(t){c(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n),e[1]=n);return e}minRow(t){c(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}minRowIndex(t){c(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n),e[1]=n);return e}maxColumn(t){m(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}maxColumnIndex(t){m(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t),e[0]=n);return e}minColumn(t){m(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}minColumnIndex(t){m(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t),e[0]=n);return e}diag(){for(var t=Math.min(this.rows,this.columns),r=new Array(t),e=0;e<t;e++)r[e]=this.get(e,e);return r}sum(t){switch(t){case"row":return function(t){for(var r=I.zeros(t.rows,1),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(e,0,r.get(e,0)+t.get(e,n));return r}(this);case"column":return function(t){for(var r=I.zeros(1,t.columns),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(0,n,r.get(0,n)+t.get(e,n));return r}(this);default:return function(t){for(var r=0,e=0;e<t.rows;e++)for(var n=0;n<t.columns;n++)r+=t.get(e,n);return r}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t*=this.get(r,e);return t}norm(t="frobenius"){var r=0;if("max"===t)return this.max();if("frobenius"===t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)r+=this.get(e,n)*this.get(e,n);return Math.sqrt(r)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){for(var t=0,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t+=this.get(r,e),this.set(r,e,t);return this}dot(t){r.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var r=this.rows,e=this.columns,n=t.columns,i=new this.constructor[Symbol.species](r,n),o=new Array(e),s=0;s<n;s++){for(var a=0;a<e;a++)o[a]=t.get(a,s);for(var h=0;h<r;h++){var u=0;for(a=0;a<e;a++)u+=this.get(h,a)*o[a];i.set(h,s,u)}}return i}strassen2x2(t){var r=new this.constructor[Symbol.species](2,2);const e=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),h=this.get(1,1),u=t.get(1,1),l=(e+h)*(n+u),f=(s+h)*n,c=e*(o-u),m=h*(a-n),g=(e+i)*u,v=l+m-g+(i-h)*(a+u),p=c+g,w=f+m,d=l-f+c+(s-e)*(n+o);return r.set(0,0,v),r.set(0,1,p),r.set(1,0,w),r.set(1,1,d),r}strassen3x3(t){var r=new this.constructor[Symbol.species](3,3);const e=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),h=this.get(2,0),u=this.get(2,1),l=this.get(2,2),f=t.get(0,0),c=t.get(0,1),m=t.get(0,2),g=t.get(1,0),v=t.get(1,1),p=t.get(1,2),w=t.get(2,0),d=t.get(2,1),y=t.get(2,2),b=(e-o)*(-c+v),M=(-e+o+s)*(f-c+v),x=(o+s)*(-f+c),S=e*f,E=(-e+h+u)*(f-m+p),R=(-e+h)*(m-p),k=(h+u)*(-f+m),A=(-i+u+l)*(v+w-d),N=(i-l)*(v-d),V=i*w,z=(u+l)*(-w+d),C=(-i+s+a)*(p+w-y),I=(i-a)*(p-y),j=(s+a)*(-w+y),P=S+V+n*g,D=(e+n+i-o-s-u-l)*v+M+x+S+A+V+z,_=S+E+k+(e+n+i-s-a-h-u)*p+V+C+j,L=b+s*(-f+c+g-v-p-w+y)+M+S+V+C+I,O=b+M+x+S+a*d,q=V+C+I+j+o*m,T=S+E+R+u*(-f+m+g-v-p-w+d)+A+N+V,U=A+N+V+z+h*c,$=S+E+R+k+l*y;return r.set(0,0,P),r.set(0,1,D),r.set(0,2,_),r.set(1,0,L),r.set(1,1,O),r.set(1,2,q),r.set(2,0,T),r.set(2,1,U),r.set(2,2,$),r}mmulStrassen(t){var e=this.clone(),n=e.rows,i=e.columns,o=t.rows,s=t.columns;function a(t,e,n){var i=t.rows,o=t.columns;if(i===e&&o===n)return t;var s=r.zeros(e,n);return s=s.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var h=Math.max(n,o),u=Math.max(i,s);return function t(e,n,i,o){if(i<=512||o<=512)return e.mmul(n);i%2==1&&o%2==1?(e=a(e,i+1,o+1),n=a(n,i+1,o+1)):i%2==1?(e=a(e,i+1,o),n=a(n,i+1,o)):o%2==1&&(e=a(e,i,o+1),n=a(n,i,o+1));var s=parseInt(e.rows/2,10),h=parseInt(e.columns/2,10),u=e.subMatrix(0,s-1,0,h-1),l=n.subMatrix(0,s-1,0,h-1),f=e.subMatrix(0,s-1,h,e.columns-1),c=n.subMatrix(0,s-1,h,n.columns-1),m=e.subMatrix(s,e.rows-1,0,h-1),g=n.subMatrix(s,n.rows-1,0,h-1),v=e.subMatrix(s,e.rows-1,h,e.columns-1),p=n.subMatrix(s,n.rows-1,h,n.columns-1),w=t(r.add(u,v),r.add(l,p),s,h),d=t(r.add(m,v),l,s,h),y=t(u,r.sub(c,p),s,h),b=t(v,r.sub(g,l),s,h),M=t(r.add(u,f),p,s,h),x=t(r.sub(m,u),r.add(l,c),s,h),S=t(r.sub(f,v),r.add(g,p),s,h),E=r.add(w,b);E.sub(M),E.add(S);var R=r.add(y,M),k=r.add(d,b),A=r.sub(w,d);A.add(y),A.add(x);var N=r.zeros(2*E.rows,2*E.columns);return(N=(N=(N=(N=N.setSubMatrix(E,0,0)).setSubMatrix(R,E.rows,0)).setSubMatrix(k,0,E.columns)).setSubMatrix(A,E.rows,E.columns)).subMatrix(0,i-1,0,o-1)}(e=a(e,h,u),t=a(t,h,u),h,u)}scaleRows(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.rows;n++){var i=a(this.getRow(n),{min:t,max:r});e.setRow(n,i)}return e}scaleColumns(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.columns;n++){var i=a(this.getColumn(n),{min:t,max:r});e.setColumn(n,i)}return e}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var r=this.rows,e=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](r*n,e*i),s=0;s<r;s++)for(var a=0;a<e;a++)for(var h=0;h<n;h++)for(var u=0;u<i;u++)o[n*s+h][i*a+u]=this.get(s,a)*t.get(h,u);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(e,r,this.get(r,e));return t}sortRows(t){void 0===t&&(t=e);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=e);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,e,n){y(this,t,r,e,n);for(var i=new this.constructor[Symbol.species](r-t+1,n-e+1),o=t;o<=r;o++)for(var s=e;s<=n;s++)i[o-t][s-e]=this.get(o,s);return i}subMatrixRow(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.columns-1),r>e||r<0||r>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,e-r+1),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-r,this.get(t[i],o))}return n}subMatrixColumn(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.rows-1),r>e||r<0||r>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](e-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-r,i,this.get(o,t[i]))}return n}setSubMatrix(t,r,e){y(this,r,r+(t=this.constructor.checkMatrix(t)).rows-1,e,e+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[r+n][e+i]=t.get(n,i);return this}selection(t,r){for(var e=p(this,t,r),n=new this.constructor[Symbol.species](t.length,r.length),i=0;i<e.row.length;i++)for(var o=e.row[i],s=0;s<e.column.length;s++){var a=e.column[s];n[i][s]=this.get(o,a)}return n}trace(){for(var t=Math.min(this.rows,this.columns),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}transposeView(){return new x(this)}rowView(t){return c(this,t),new S(this,t)}columnView(t){return m(this,t),new N(this,t)}flipRowView(){return new V(this)}flipColumnView(){return new z(this)}subMatrixView(t,r,e,n){return new E(this,t,r,e,n)}selectionView(t,r){return new R(this,t,r)}rowSelectionView(t){return new k(this,t)}columnSelectionView(t){return new A(this,t)}det(){var t,r,e,n,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),r=this.get(0,1),e=this.get(1,0),t*this.get(1,1)-r*e):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),r=this.get(0,1),e=this.get(0,2),t*n.det()-r*i.det()+e*o.det()):new h(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var r=new f(this,{autoTranspose:!0}),e=r.leftSingularVectors,n=r.rightSingularVectors,i=r.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(e.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(r,e,this.get(r,e));return t}}function e(t,r){return t-r}r.prototype.klass="Matrix",r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var n,i="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",o=eval;for(var s of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var u=o(F("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:s[1],op:s[0]})),l=o(F("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:`${s[1]}S`,op:s[0]})),w=o(F("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:`${s[1]}M`,op:s[0]})),d=o(F("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:s[1]}));for(n=1;n<s.length;n++)r.prototype[s[n]]=u,r.prototype[`${s[n]}S`]=l,r.prototype[`${s[n]}M`]=w,r[s[n]]=d}var b=[["~","not"]];for(var M of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){b.push([`Math.${t}`,t])}),b)){var C=o(F("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:M[1],method:M[0]})),j=o(F("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:M[1]}));for(n=1;n<M.length;n++)r.prototype[M[n]]=C,r[M[n]]=j}for(var P of[["Math.pow",1,"pow"]]){var D="arg0";for(n=1;n<P[1];n++)D+=`, arg${n}`;if(1!==P[1]){var _=o(F("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:P[2],method:P[0],args:D})),L=o(F(i,{name:P[2],args:D}));for(n=2;n<P.length;n++)r.prototype[P[n]]=_,r[P[n]]=L}else{var O={name:P[2],args:D,method:P[0]},q=o(F("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",O)),T=o(F("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",O)),U=o(F("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",O)),$=o(F("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",O));for(n=2;n<P.length;n++)r.prototype[P[n]]=q,r.prototype[`${P[n]}M`]=U,r.prototype[`${P[n]}S`]=T,r[P[n]]=$}}function F(t,r){for(var e in r)t=t.replace(new RegExp(`%${e}%`,"g"),r[e]);return t}return r}class I extends(C(Array)){constructor(t,r){var e;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(I.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(r)&&r>0))throw new TypeError("nColumns must be a positive integer");for(e=0;e<t;e++)this[e]=new Array(r)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(r=n[0].length)||0===r)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),e=0;e<t;e++){if(n[e].length!==r)throw new RangeError("Inconsistent array dimensions");this[e]=[].concat(n[e])}}}return this.rows=t,this.columns=r,this}set(t,r,e){return this[t][r]=e,this}get(t,r){return this[t][r]}removeRow(t){if(c(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,r){return void 0===r&&(r=t,t=this.rows),c(this,t,!0),r=g(this,r),this.splice(t,0,r),this.rows+=1,this}removeColumn(t){if(m(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var r=0;r<this.rows;r++)this[r].splice(t,1);return this.columns-=1,this}addColumn(t,r){void 0===r&&(r=t,t=this.columns),m(this,t,!0),r=v(this,r);for(var e=0;e<this.rows;e++)this[e].splice(t,0,r[e]);return this.columns+=1,this}}class j extends(C()){constructor(t,r={}){const{rows:e=1}=r;if(t.length%e!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=e,this.columns=t.length/e,this.data=t}set(t,r,e){var n=this._calculateIndex(t,r);return this.data[n]=e,this}get(t,r){var e=this._calculateIndex(t,r);return this.data[e]}_calculateIndex(t,r){return t*this.columns+r}static get[Symbol.species](){return I}}class P extends(C()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,r,e){return this.data[t][r]=e,this}get(t,r){return this.data[t][r]}static get[Symbol.species](){return I}}function D(t,r){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new P(t):new j(t,r);throw new Error("the argument is not an array")}class _{constructor(t){var r,e,n,i,o=(t=P.checkMatrix(t)).clone(),s=t.rows,a=t.columns,h=new Array(a);for(n=0;n<a;n++){var l=0;for(r=n;r<s;r++)l=u(l,o.get(r,n));if(0!==l){for(o.get(n,n)<0&&(l=-l),r=n;r<s;r++)o.set(r,n,o.get(r,n)/l);for(o.set(n,n,o.get(n,n)+1),e=n+1;e<a;e++){for(i=0,r=n;r<s;r++)i+=o.get(r,n)*o.get(r,e);for(i=-i/o.get(n,n),r=n;r<s;r++)o.set(r,e,o.get(r,e)+i*o.get(r,n))}}h[n]=-l}this.QR=o,this.Rdiag=h}solve(t){t=I.checkMatrix(t);var r=this.QR,e=r.rows;if(t.rows!==e)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,i,o,s,a=t.columns,h=t.clone(),u=r.columns;for(o=0;o<u;o++)for(i=0;i<a;i++){for(s=0,n=o;n<e;n++)s+=r[n][o]*h[n][i];for(s=-s/r[o][o],n=o;n<e;n++)h[n][i]+=s*r[n][o]}for(o=u-1;o>=0;o--){for(i=0;i<a;i++)h[o][i]/=this.Rdiag[o];for(n=0;n<o;n++)for(i=0;i<a;i++)h[n][i]-=h[o][i]*r[n][o]}return h.subMatrix(0,u-1,0,a-1)}isFullRank(){for(var t=this.QR.columns,r=0;r<t;r++)if(0===this.Rdiag[r])return!1;return!0}get upperTriangularMatrix(){var t,r,e=this.QR,n=e.columns,i=new I(n,n);for(t=0;t<n;t++)for(r=0;r<n;r++)i[t][r]=t<r?e[t][r]:t===r?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,r,e,n,i=this.QR,o=i.rows,s=i.columns,a=new I(o,s);for(e=s-1;e>=0;e--){for(t=0;t<o;t++)a[t][e]=0;for(a[e][e]=1,r=e;r<s;r++)if(0!==i[e][e]){for(n=0,t=e;t<o;t++)n+=i[t][e]*a[t][r];for(n=-n/i[e][e],t=e;t<o;t++)a[t][r]+=n*i[t][e]}}return a}}function L(t,r=!1){return t=P.checkMatrix(t),r?new f(t).inverse():O(t,I.eye(t.rows))}function O(t,r,e=!1){return t=P.checkMatrix(t),r=P.checkMatrix(r),e?new f(t).solve(r):t.isSquare()?new h(t).solve(r):new _(t).solve(r)}function q(t,r){for(var e=[],n=0;n<t;n++)n!==r&&e.push(n);return e}function T(t,r,e,n=1e-9,i=1e-9){if(t>i)return new Array(r.rows+1).fill(0);for(var o=r.addRow(e,[0]),s=0;s<o.rows;s++)Math.abs(o.get(s,0))<n&&o.set(s,0,0);return o.to1DArray()}function U(t,r={}){const{thresholdValue:e=1e-9,thresholdError:n=1e-9}=r;for(var i=t.rows,s=new I(i,i),a=0;a<i;a++){var h=I.columnVector(t.getRow(a)),u=t.subMatrixRow(q(i,a)).transposeView(),l=new f(u).solve(h),c=o(I.sub(h,u.mmul(l)).abs().to1DArray());s.setRow(a,T(c,l,a,e,n))}return s}class ${constructor(t,r={}){const{assumeSymmetric:e=!1}=r;if(!(t=P.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,i,o=t.columns,s=l(o,o,0),a=new Array(o),h=new Array(o),f=t;if(!!e||t.isSymmetric()){for(n=0;n<o;n++)for(i=0;i<o;i++)s[n][i]=f.get(n,i);!function(t,r,e,n){var i,o,s,a,h,u,l,f;for(h=0;h<t;h++)e[h]=n[t-1][h];for(a=t-1;a>0;a--){for(f=0,s=0,u=0;u<a;u++)f+=Math.abs(e[u]);if(0===f)for(r[a]=e[a-1],h=0;h<a;h++)e[h]=n[a-1][h],n[a][h]=0,n[h][a]=0;else{for(u=0;u<a;u++)e[u]/=f,s+=e[u]*e[u];for(i=e[a-1],o=Math.sqrt(s),i>0&&(o=-o),r[a]=f*o,s-=i*o,e[a-1]=i-o,h=0;h<a;h++)r[h]=0;for(h=0;h<a;h++){for(i=e[h],n[h][a]=i,o=r[h]+n[h][h]*i,u=h+1;u<=a-1;u++)o+=n[u][h]*e[u],r[u]+=n[u][h]*i;r[h]=o}for(i=0,h=0;h<a;h++)r[h]/=s,i+=r[h]*e[h];for(l=i/(s+s),h=0;h<a;h++)r[h]-=l*e[h];for(h=0;h<a;h++){for(i=e[h],o=r[h],u=h;u<=a-1;u++)n[u][h]-=i*r[u]+o*e[u];e[h]=n[a-1][h],n[a][h]=0}}e[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=e[a+1])){for(u=0;u<=a;u++)e[u]=n[u][a+1]/s;for(h=0;h<=a;h++){for(o=0,u=0;u<=a;u++)o+=n[u][a+1]*n[u][h];for(u=0;u<=a;u++)n[u][h]-=o*e[u]}}for(u=0;u<=a;u++)n[u][a+1]=0}for(h=0;h<t;h++)e[h]=n[t-1][h],n[t-1][h]=0;n[t-1][t-1]=1,r[0]=0}(o,h,a,s),function(t,r,e,n){var i,o,s,a,h,l,f,c,m,g,v,p,w,d,y,b;for(s=1;s<t;s++)r[s-1]=r[s];r[t-1]=0;var M=0,x=0,S=Number.EPSILON;for(l=0;l<t;l++){for(x=Math.max(x,Math.abs(e[l])+Math.abs(r[l])),f=l;f<t&&!(Math.abs(r[f])<=S*x);)f++;if(f>l){0;do{for(1,i=e[l],c=(e[l+1]-i)/(2*r[l]),m=u(c,1),c<0&&(m=-m),e[l]=r[l]/(c+m),e[l+1]=r[l]*(c+m),g=e[l+1],o=i-e[l],s=l+2;s<t;s++)e[s]-=o;for(M+=o,c=e[f],p=v=1,w=v,d=r[l+1],y=0,b=0,s=f-1;s>=l;s--)for(w=p,p=v,b=y,i=v*r[s],o=v*c,m=u(c,r[s]),r[s+1]=y*m,y=r[s]/m,c=(v=c/m)*e[s]-y*i,e[s+1]=o+y*(v*i+y*e[s]),h=0;h<t;h++)o=n[h][s+1],n[h][s+1]=y*n[h][s]+v*o,n[h][s]=v*n[h][s]-y*o;c=-y*b*w*d*r[l]/g,r[l]=y*c,e[l]=v*c}while(Math.abs(r[l])>S*x)}e[l]=e[l]+M,r[l]=0}for(s=0;s<t-1;s++){for(h=s,c=e[s],a=s+1;a<t;a++)e[a]<c&&(h=a,c=e[a]);if(h!==s)for(e[h]=e[s],e[s]=c,a=0;a<t;a++)c=n[a][s],n[a][s]=n[a][h],n[a][h]=c}}(o,h,a,s)}else{var c=l(o,o,0),m=new Array(o);for(i=0;i<o;i++)for(n=0;n<o;n++)c[n][i]=f.get(n,i);!function(t,r,e,n){var i,o,s,a,h,u,l,f=t-1;for(u=1;u<=f-1;u++){for(l=0,a=u;a<=f;a++)l+=Math.abs(r[a][u-1]);if(0!==l){for(s=0,a=f;a>=u;a--)e[a]=r[a][u-1]/l,s+=e[a]*e[a];for(o=Math.sqrt(s),e[u]>0&&(o=-o),s-=e[u]*o,e[u]=e[u]-o,h=u;h<t;h++){for(i=0,a=f;a>=u;a--)i+=e[a]*r[a][h];for(i/=s,a=u;a<=f;a++)r[a][h]-=i*e[a]}for(a=0;a<=f;a++){for(i=0,h=f;h>=u;h--)i+=e[h]*r[a][h];for(i/=s,h=u;h<=f;h++)r[a][h]-=i*e[h]}e[u]=l*e[u],r[u][u-1]=l*o}}for(a=0;a<t;a++)for(h=0;h<t;h++)n[a][h]=a===h?1:0;for(u=f-1;u>=1;u--)if(0!==r[u][u-1]){for(a=u+1;a<=f;a++)e[a]=r[a][u-1];for(h=u;h<=f;h++){for(o=0,a=u;a<=f;a++)o+=e[a]*n[a][h];for(o=o/e[u]/r[u][u-1],a=u;a<=f;a++)n[a][h]+=o*e[a]}}}(o,c,m,s),function(t,r,e,n,i){var o,s,a,h,u,l,f,c,m,g,v,p,w,d,y,b=t-1,M=t-1,x=Number.EPSILON,S=0,E=0,R=0,k=0,A=0,N=0,V=0,z=0;for(o=0;o<t;o++)for((o<0||o>M)&&(e[o]=i[o][o],r[o]=0),s=Math.max(o-1,0);s<t;s++)E+=Math.abs(i[o][s]);for(;b>=0;){for(h=b;h>0&&(0===(N=Math.abs(i[h-1][h-1])+Math.abs(i[h][h]))&&(N=E),!(Math.abs(i[h][h-1])<x*N));)h--;if(h===b)i[b][b]=i[b][b]+S,e[b]=i[b][b],r[b]=0,b--,z=0;else if(h===b-1){if(f=i[b][b-1]*i[b-1][b],R=(i[b-1][b-1]-i[b][b])/2,k=R*R+f,V=Math.sqrt(Math.abs(k)),i[b][b]=i[b][b]+S,i[b-1][b-1]=i[b-1][b-1]+S,c=i[b][b],k>=0){for(V=R>=0?R+V:R-V,e[b-1]=c+V,e[b]=e[b-1],0!==V&&(e[b]=c-f/V),r[b-1]=0,r[b]=0,c=i[b][b-1],N=Math.abs(c)+Math.abs(V),R=c/N,k=V/N,A=Math.sqrt(R*R+k*k),R/=A,k/=A,s=b-1;s<t;s++)V=i[b-1][s],i[b-1][s]=k*V+R*i[b][s],i[b][s]=k*i[b][s]-R*V;for(o=0;o<=b;o++)V=i[o][b-1],i[o][b-1]=k*V+R*i[o][b],i[o][b]=k*i[o][b]-R*V;for(o=0;o<=M;o++)V=n[o][b-1],n[o][b-1]=k*V+R*n[o][b],n[o][b]=k*n[o][b]-R*V}else e[b-1]=c+R,e[b]=c+R,r[b-1]=V,r[b]=-V;b-=2,z=0}else{if(c=i[b][b],m=0,f=0,h<b&&(m=i[b-1][b-1],f=i[b][b-1]*i[b-1][b]),10===z){for(S+=c,o=0;o<=b;o++)i[o][o]-=c;N=Math.abs(i[b][b-1])+Math.abs(i[b-1][b-2]),c=m=.75*N,f=-.4375*N*N}if(30===z&&(N=(N=(m-c)/2)*N+f)>0){for(N=Math.sqrt(N),m<c&&(N=-N),N=c-f/((m-c)/2+N),o=0;o<=b;o++)i[o][o]-=N;S+=N,c=m=f=.964}for(z+=1,u=b-2;u>=h&&(V=i[u][u],R=((A=c-V)*(N=m-V)-f)/i[u+1][u]+i[u][u+1],k=i[u+1][u+1]-V-A-N,A=i[u+2][u+1],N=Math.abs(R)+Math.abs(k)+Math.abs(A),R/=N,k/=N,A/=N,u!==h)&&!(Math.abs(i[u][u-1])*(Math.abs(k)+Math.abs(A))<x*(Math.abs(R)*(Math.abs(i[u-1][u-1])+Math.abs(V)+Math.abs(i[u+1][u+1]))));)u--;for(o=u+2;o<=b;o++)i[o][o-2]=0,o>u+2&&(i[o][o-3]=0);for(a=u;a<=b-1&&(d=a!==b-1,a!==u&&(R=i[a][a-1],k=i[a+1][a-1],A=d?i[a+2][a-1]:0,0!==(c=Math.abs(R)+Math.abs(k)+Math.abs(A))&&(R/=c,k/=c,A/=c)),0!==c);a++)if(N=Math.sqrt(R*R+k*k+A*A),R<0&&(N=-N),0!==N){for(a!==u?i[a][a-1]=-N*c:h!==u&&(i[a][a-1]=-i[a][a-1]),c=(R+=N)/N,m=k/N,V=A/N,k/=R,A/=R,s=a;s<t;s++)R=i[a][s]+k*i[a+1][s],d&&(R+=A*i[a+2][s],i[a+2][s]=i[a+2][s]-R*V),i[a][s]=i[a][s]-R*c,i[a+1][s]=i[a+1][s]-R*m;for(o=0;o<=Math.min(b,a+3);o++)R=c*i[o][a]+m*i[o][a+1],d&&(R+=V*i[o][a+2],i[o][a+2]=i[o][a+2]-R*A),i[o][a]=i[o][a]-R,i[o][a+1]=i[o][a+1]-R*k;for(o=0;o<=M;o++)R=c*n[o][a]+m*n[o][a+1],d&&(R+=V*n[o][a+2],n[o][a+2]=n[o][a+2]-R*A),n[o][a]=n[o][a]-R,n[o][a+1]=n[o][a+1]-R*k}}}if(0===E)return;for(b=t-1;b>=0;b--)if(R=e[b],0===(k=r[b]))for(h=b,i[b][b]=1,o=b-1;o>=0;o--){for(f=i[o][o]-R,A=0,s=h;s<=b;s++)A+=i[o][s]*i[s][b];if(r[o]<0)V=f,N=A;else if(h=o,0===r[o]?i[o][b]=0!==f?-A/f:-A/(x*E):(c=i[o][o+1],m=i[o+1][o],k=(e[o]-R)*(e[o]-R)+r[o]*r[o],l=(c*N-V*A)/k,i[o][b]=l,i[o+1][b]=Math.abs(c)>Math.abs(V)?(-A-f*l)/c:(-N-m*l)/V),l=Math.abs(i[o][b]),x*l*l>1)for(s=o;s<=b;s++)i[s][b]=i[s][b]/l}else if(k<0)for(h=b-1,Math.abs(i[b][b-1])>Math.abs(i[b-1][b])?(i[b-1][b-1]=k/i[b][b-1],i[b-1][b]=-(i[b][b]-R)/i[b][b-1]):(y=F(0,-i[b-1][b],i[b-1][b-1]-R,k),i[b-1][b-1]=y[0],i[b-1][b]=y[1]),i[b][b-1]=0,i[b][b]=1,o=b-2;o>=0;o--){for(g=0,v=0,s=h;s<=b;s++)g+=i[o][s]*i[s][b-1],v+=i[o][s]*i[s][b];if(f=i[o][o]-R,r[o]<0)V=f,A=g,N=v;else if(h=o,0===r[o]?(y=F(-g,-v,f,k),i[o][b-1]=y[0],i[o][b]=y[1]):(c=i[o][o+1],m=i[o+1][o],p=(e[o]-R)*(e[o]-R)+r[o]*r[o]-k*k,w=2*(e[o]-R)*k,0===p&&0===w&&(p=x*E*(Math.abs(f)+Math.abs(k)+Math.abs(c)+Math.abs(m)+Math.abs(V))),y=F(c*A-V*g+k*v,c*N-V*v-k*g,p,w),i[o][b-1]=y[0],i[o][b]=y[1],Math.abs(c)>Math.abs(V)+Math.abs(k)?(i[o+1][b-1]=(-g-f*i[o][b-1]+k*i[o][b])/c,i[o+1][b]=(-v-f*i[o][b]-k*i[o][b-1])/c):(y=F(-A-m*i[o][b-1],-N-m*i[o][b],V,k),i[o+1][b-1]=y[0],i[o+1][b]=y[1])),l=Math.max(Math.abs(i[o][b-1]),Math.abs(i[o][b])),x*l*l>1)for(s=o;s<=b;s++)i[s][b-1]=i[s][b-1]/l,i[s][b]=i[s][b]/l}for(o=0;o<t;o++)if(o<0||o>M)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=M;o++){for(V=0,a=0;a<=Math.min(s,M);a++)V+=n[o][a]*i[a][s];n[o][s]=V}}(o,h,a,s,c)}this.n=o,this.e=h,this.d=a,this.V=s}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return I.isMatrix(this.V)||(this.V=new I(this.V)),this.V}get diagonalMatrix(){var t,r,e=this.n,n=this.e,i=this.d,o=new I(e,e);for(t=0;t<e;t++){for(r=0;r<e;r++)o[t][r]=0;o[t][t]=i[t],n[t]>0?o[t][t+1]=n[t]:n[t]<0&&(o[t][t-1]=n[t])}return o}}function F(t,r,e,n){var i,o;return Math.abs(e)>Math.abs(n)?[(t+(i=n/e)*r)/(o=e+i*n),(r-i*t)/o]:[((i=e/n)*t+r)/(o=n+i*e),(i*r-t)/o]}class W{constructor(t){if(!(t=P.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var r,e,n,i=t,o=i.rows,s=new I(o,o),a=!0;for(e=0;e<o;e++){var h=s[e],u=0;for(n=0;n<e;n++){var l=s[n],f=0;for(r=0;r<n;r++)f+=l[r]*h[r];h[n]=f=(i.get(e,n)-f)/s[n][n],u+=f*f}for(a&=(u=i.get(e,e)-u)>0,s[e][e]=Math.sqrt(Math.max(u,0)),n=e+1;n<o;n++)s[e][n]=0}if(!a)throw new Error("Matrix is not positive definite");this.L=s}solve(t){t=P.checkMatrix(t);var r=this.L,e=r.rows;if(t.rows!==e)throw new Error("Matrix dimensions do not match");var n,i,o,s=t.columns,a=t.clone();for(o=0;o<e;o++)for(i=0;i<s;i++){for(n=0;n<o;n++)a[o][i]-=a[n][i]*r[o][n];a[o][i]/=r[o][o]}for(o=e-1;o>=0;o--)for(i=0;i<s;i++){for(n=o+1;n<e;n++)a[o][i]-=a[n][i]*r[n][o];a[o][i]/=r[o][o]}return a}get lowerTriangularMatrix(){return this.L}}e.d(r,"default",function(){return I}),e.d(r,"Matrix",function(){return I}),e.d(r,"abstractMatrix",function(){return C}),e.d(r,"wrap",function(){return D}),e.d(r,"WrapperMatrix2D",function(){return P}),e.d(r,"WrapperMatrix1D",function(){return j}),e.d(r,"solve",function(){return O}),e.d(r,"inverse",function(){return L}),e.d(r,"linearDependencies",function(){return U}),e.d(r,"SingularValueDecomposition",function(){return f}),e.d(r,"SVD",function(){return f}),e.d(r,"EigenvalueDecomposition",function(){return $}),e.d(r,"EVD",function(){return $}),e.d(r,"CholeskyDecomposition",function(){return W}),e.d(r,"CHO",function(){return W}),e.d(r,"LuDecomposition",function(){return h}),e.d(r,"LU",function(){return h}),e.d(r,"QrDecomposition",function(){return _}),e.d(r,"QR",function(){return _})}]);
</script><script>/**
 * @license
 * The MIT License (MIT)
 * Copyright (c) 2015 Waylon Flinn
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.weblas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var globals = require('./lib/globals'),
	pipeline = require("./lib/pipeline"),
	SGEMMCalculator = require("./lib/sgemmcalculator"),
	SAXPYCalculator = require("./lib/saxpycalculator"),
	SSCALCalculator = require("./lib/sscalcalculator"),
	SDWNSCalculator = require("./lib/sdwnscalculator"),
	SCLMPCalculator = require("./lib/sclmpcalculator"),
	test = require("./lib/test");

var gl = globals.gl,
	sgemmcalculator = new SGEMMCalculator(gl),
	saxpycalculator = new SAXPYCalculator(gl),
	sscalcalculator = new SSCALCalculator(gl),
	sdwnscalculator = new SDWNSCalculator(gl),
	sclmpcalculator = new SCLMPCalculator(gl);

module.exports = {
	// level one
	"saxpy" : saxpy,
	"sscal" : sscal,   // single precision matrix scale
	// level two
	// level three
	"sgemm" : sgemm,   // single precision generalized matrix multiply
	// extra
	"sstd" : sstd,     // single precision Standard Score normalization
	"sdwns": sdwns,
	"sclmp": sclmp,
	// pipeline
	"pipeline" : pipeline,
	// internals
	"gpu" : {	"gl": gl,
	 			"sgemm": pipeline.sgemmcalculator.calculate.bind(pipeline.sgemmcalculator),
				"sscal" : pipeline.sscalcalculator.calculate.bind(pipeline.sscalcalculator),
				"sclmp" : pipeline.sclmpcalculator.calculate.bind(pipeline.sclmpcalculator),
				"sdwns" : pipeline.sdwnscalculator.calculate.bind(pipeline.sdwnscalculator),
				"encode" : gl.encode.bind(gl)
			},
	"util" : { "fromArray" : fromArray, "transpose" : transpose},
	"test" : test
};


/* Wrap the GL calculation object in a (relatively) user friendly function that
	accepts TypedArrays

	* convert the data to (padded) textures in GPU memory
	* execute calculation
	* read result into an array, and return
 */
function sgemm(M, N, K, alpha, A, B, beta, C){

	if(C != null && C.length != N){
		throw new Error("Only vector C with length matching rows in A is currently supported.");
	}

	// pack each matrix into a single RGBA texel array, with the second transposed
	var texels0 = A,
		texels1,
		texels2 = C;


	texels1 = transpose(K, N, B);

	// create input textures from data
	var texture0 = gl.createDataTexture(M, K, texels0);
	var texture1 = gl.createDataTexture(N, K, texels1);
	var texture2 = null;
	if(texels2 != null){
		texture2 = gl.createDataTexture(1, N, texels2);
	}

	var texture3 = gl.createOutputTexture(M, N);

	sgemmcalculator.calculate(M, N, K, alpha, texture0, texture1, beta, texture2, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture1);
	if(texture2 != null){
		gl.context.deleteTexture(texture2);
	}
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);

}

function saxpy(N, a, X, Y){

	var rawBuffer;


	var texels0 = X,
		texels1;

	// TODO: special shader for constant Y
	if(isFloat32Array(Y)){
		texels1 = Y;
	} else {
		texels1 = new Float32Array(N);
		texels1.fill(Y);
	}

	// create input textures from data
	var texture0 = gl.createDataTexture(1, N, texels0);
	var texture1 = gl.createDataTexture(1, N, texels1);

	var texture3 = gl.createOutputTexture(1, N);

	saxpycalculator.calculate(N, a, texture0, texture1, texture3);

	// retrieve data
	rawBuffer = gl.readData(1, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture1);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);

}

function isFloat32Array(obj){
	return Object.prototype.toString.call(obj) === "[object Float32Array]";
}
/* a more general version of the BLAS Level 1 scale, that works on matrices
   and includes an elementwise scalar addition

   a * X + b

   a - multiplicative scalar
   b - additive scalar
   X - matrix (M x N)

   to get the standard BLAS scal set M = 1 and b = 0

   this function is generally only cost effective to use in a pipeline
*/
function sscal(M, N, a, b, X){

	var rawBuffer;

	var texels0 = X;
	var texture0 = gl.createDataTexture(M, N, texels0);

	var texture3 = gl.createOutputTexture(M, N);

	sscalcalculator.calculate(M, N, a, b, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}

/* Calculate the Standard Score normalization (subtract mean
   ,divide by standard deviation).
 */
function sstd(M, N, mu, sigma, X){

	var rawBuffer;

	var texels0 = X;
	var texture0 = gl.createDataTexture(M, N, texels0);

	var texture3 = gl.createOutputTexture(M, N);

	// adjust the parameters (for inverse) and call the standard score normalization
	sscalcalculator.calculate(M, N, 1.0/sigma, -1.0 * mu/sigma, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}

/* downsample an image (taking the max) for Pooling

	M - rows in input
	N - columns in input
	c - channels in input
	factor - the downsample factor (width of patch to sample)
	stride - width between pooling regions
	X - input image
 */
function sdwns(M, N, channels, factor, stride, X){


	var texels0 = X;

	var texture0 = gl.createDataTexture(M, N * channels, X);

	var N_out = Math.floor((N - factor) / stride) + 1;
	var M_out = Math.floor((M - factor) / stride) + 1;

	var texture3 = gl.createOutputTexture(M_out, N_out * channels);

	sdwnscalculator.calculate(M, N, channels, factor, stride, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M_out, N_out * channels);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}
/*  Elementwise clamp function for matrices on the interval [a, b]. Can also be
	used for min or max, by passing Number.MIN_VALUE for the first parameter and
	Number.MAX_VALUE for the second parameter, respectively.

	Passing `null` for either of these parameters will default to it's
	respective min or max value.

	M - number of rows in X
	N - number of columns in X
	a - lower bound (inclusize)
	b - upper bound (inclusive)
	X - matrix

   to get the standard BLAS scal set M = 1 and b = 0

   this function is generally only cost effective to use in a pipeline
*/
function sclmp(M, N, a, b, X){

	a = (a != null) ? a : Number.MIN_VALUE;
	b = (b != null) ? b : Number.MAX_VALUE;

	var rawBuffer;

	var texels0 = X;
	var texture0 = gl.createDataTexture(M, N, texels0);

	var texture3 = gl.createOutputTexture(M, N);

	sclmpcalculator.calculate(M, N, a, b, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}
/*
function saxpy(n, a, x, y){
	var i = 0,
		result = new Float32Array(n);

	// assert n = x.length
	// assert a is scalar
	// assert x is Float32Array

	if(isNumeric(y)){
		// shortcut for scalar y
		for(; i < n; i++){
			result[i] = a * x[i] + y;
		}
	} else {

		for(; i < n; i++){
			result[i] = a * x[i] + y[i];
		}
	}

	return result;

}*/

// add a String.format method, if none exists
if (!String.prototype.format) {
  String.prototype.format = function() {
	var args = arguments;
	return this.replace(/{(\d+)}/g, function(match, number) {
	  return typeof args[number] != 'undefined'
		? args[number]
		: match
	  ;
	});
  };
}

function isNumeric( obj ) { return (obj - parseFloat( obj ) + 1) >= 0; }

/* create a typed array from a 2D javascript array */
function fromArray(array, type, tranpose) {
	var shape = [],
			data,
			c;   // number of columns

	if(!tranpose){
		shape[0] = array.length;
		shape[1] = array[0].length;
	} else {
		shape[1] = array.length;
		shape[0] = array[0].length;
	}
	c = shape[1];

	type = type || Float32Array;

	data = new type(shape[0]*shape[1]);

	for (var ii = 0; ii < shape[0]; ++ii)
		for (var jj = 0; jj < shape[1]; ++jj)
		if(!tranpose)
			data[ii*c + jj] = array[ii][jj];
		else
			data[ii*c + jj] = array[jj][ii];

	return data;
};

// tranpose a typed array in row major order, with the given row and column
// numers
function transpose(r, c, typedArray){
	var result = new typedArray.constructor(r*c);

	for(var i = 0; i < r; i++){
		for(var j = 0; j < c; j++){
			result[j * r + i] = typedArray[i * c + j];
		}
	}

	return result;
}

},{"./lib/globals":2,"./lib/pipeline":3,"./lib/saxpycalculator":4,"./lib/sclmpcalculator":5,"./lib/sdwnscalculator":6,"./lib/sgemmcalculator":7,"./lib/sscalcalculator":9,"./lib/test":11}],2:[function(require,module,exports){
var WebGL = require("./webgl");

var gl = new WebGL();

module.exports = {
	"gl" : gl
}

},{"./webgl":12}],3:[function(require,module,exports){
var globals = require('./globals'),
	SGEMMCalculator = require("./sgemmcalculator"),
	SAXPYCalculator = require("./saxpycalculator"),
	SSCALCalculator = require("./sscalcalculator"),
	SDWNSCalculator = require("./sdwnscalculator"),
	SCLMPCalculator = require("./sclmpcalculator"),
	SLOKNCalculator = require("./slokncalculator"),
	Tensor = require('./tensor');


var gl = globals.gl,
	sgemmcalculator = new SGEMMCalculator(gl, false),
	saxpycalculator = new SAXPYCalculator(gl, false),
	sscalcalculator = new SSCALCalculator(gl, false),
	sdwnscalculator = new SDWNSCalculator(gl, false),
	sclmpcalculator = new SCLMPCalculator(gl, false),
	slokncalculator = new SLOKNCalculator(gl, false);

module.exports = {
	"Tensor" : Tensor,
	"sscal" : sscal,
	"sgemm" : sgemm,
	"sdwns" : sdwns,
	"sclmp" : sclmp,
	"slokn" : slokn,

	"sgemmcalculator" : sgemmcalculator,
	"saxpycalculator" : saxpycalculator,
	"sscalcalculator" : sscalcalculator,
	"sdwnscalculator" : sdwnscalculator,
	"sclmpcalculator" : sclmpcalculator,
	"slokncalculator" : slokncalculator
}

/* scale (and optionally offset) a Tensor, elementwise
 */
function sscal(a, b, t0){

	var M = t0.shape[0],
		N = t0.shape[1];

	// create an empty output Tensor
	var tOut = new Tensor([M, N], null);

	sscalcalculator.calculate(M, N, a, b, t0.texture, tOut.texture);

	return tOut;
}

/* matrix multiply on t0 and t1 with additive t2. t1 must be transposed
 */
function sgemm(alpha, t0, t1, beta, t2){

	if(t1.shape[1] !== t0.shape[1])
		throw new Error("Second dimension must be of same size for input Tensors (second Tensor is transposed).");

	var M = t0.shape[0],
		N = t1.shape[0],
		K = t0.shape[1];

	var texture2;

	if(t2){
		texture2 = t2.texture;
	} else {
		texture2 = null;
	}

	// create an empty output Tensor
	var tOut = new Tensor([M, N], null);

	sgemmcalculator.calculate(M, N, K, alpha, t0.texture, t1.texture, beta, texture2, tOut.texture);

	return tOut;
}

function sdwns(channels, factor, stride, t0){

	if(t0.shape[1] % channels !== 0)
		throw new Error("Second dimension of tensor must be a multiple of channels");

	var M = t0.shape[0],
		N = t0.shape[1] / channels;

	var M_out = Math.floor((M - factor) / stride) + 1;
	var N_out = Math.floor((N - factor) / stride) + 1;

	// create an empty output Tensor
	var tOut = new Tensor([M_out, N_out * channels], null);

	sdwnscalculator.calculate(M, N, channels, factor, stride, t0.texture, tOut.texture);

	return tOut;
}

function sclmp(a, b, t0){

	a = (a != null) ? a : Number.MIN_VALUE;
	b = (b != null) ? b : Number.MAX_VALUE;

	var M = t0.shape[0],
		N = t0.shape[1];

	// create an empty output Tensor
	var tOut = new Tensor([M, N], null);

	sclmpcalculator.calculate(M, N, a, b, t0.texture, tOut.texture);

	return tOut;
}

/* Linearize onto Kernels, Transform input into one row per patch, for use in
	convolution.

	channels - number of channels in the input
	factor - width (and height) of kernels (and patches)
	stride - number of elements between patches
	t0 - the input Tensor
 */
function slokn(channels, factor, stride, margin, t0){

	if(t0.shape[1] % channels !== 0)
		throw new Error("Second dimension of tensor must be a multiple of channels");

	var M = t0.shape[0],
		N = t0.shape[1] / channels;

	var N_p, M_p;

	// number of patches (columns and rows)
	if(!margin){
		margin = 0;
		N_p = Math.ceil((N - factor) / stride) + 1;
		M_p = Math.ceil((M - factor) / stride) + 1;
	} else {
		N_p = Math.ceil((N + (2 * margin) - factor) / stride) + 1;
		M_p = Math.ceil((M + (2 * margin) - factor) / stride) + 1;
	}

	var P_p = factor * factor * channels; // elements per kernel
	var M_out = (M_p * N_p),
	 	N_out = P_p;

	// create an empty output Tensor
	var tOut = new Tensor([M_out, N_out], null);

	slokncalculator.calculate(M, N, channels, M_out, N_out, N_p, factor, stride, margin, t0.texture, tOut.texture);

	return tOut;
}

},{"./globals":2,"./saxpycalculator":4,"./sclmpcalculator":5,"./sdwnscalculator":6,"./sgemmcalculator":7,"./slokncalculator":8,"./sscalcalculator":9,"./tensor":10}],4:[function(require,module,exports){
var WebGL = require('./webgl');

/* A calculator object for the Float texture based AXPY

	a times X plus Y (AXPY):

	Y = a * X + Y

	where X + Y is elementwise matrix addition


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SAXPYCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = standalone || true; // default to standalone mode


	var s = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded A\nuniform sampler2D Y;\t\t// texture with data from padded transpose of B\nuniform int       N;\nuniform float     a; \t\t// coefficient to multiplication\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n \tfloat row = outTex.y;\n\tfloat col = outTex.x;\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col, row));\n\tvec4 y = texture2D( Y, vec2(col, row));\n\tvec4 sum_v = (a * x) + y;\n\tint channel = int(mod(col * float(N), 4.0 ));\n\tfloat sum = select_index_1604150559(sum_v, channel);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n \t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1540259130(sum);\n}\n";
	//	p = glslify('./glsl/saxpy/pipeline.glsl');

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SAXPYCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SAXPYCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SAXPYCalculator.TEXTURE_UNIFORM_NAME_1 = "Y";
SAXPYCalculator.LENGTH_UNIFORM_NAME = "N";
SAXPYCalculator.COEFFICIENT_UNIFORM_NAME = "a";


/* Calculate the AXPY, with the given data.

	N - number of elements in X and Y
	a - scalar coefficient to X
	X - left hand vector (texture)
	Y - right hand vector (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SAXPYCalculator.prototype.calculate = function(N, a, X, Y, out){

	var gl = this.webgl.context;

	/*
	var h1 = M, w1 = K,
		h2 = K, w2 = N;
	*/

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SAXPYCalculator.TEXTURE_UNIFORM_NAME_0);
	this.bindInputTexture(Y, gl.TEXTURE1, SAXPYCalculator.TEXTURE_UNIFORM_NAME_1);


	var pad = this.webgl.getPad(N);
	// set the data specific variables in our shader program
	this.bindUniforms(N + pad, a);

	// create our destination texture
	this.webgl.bindOutputTexture(1, N + pad, out);


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);
	this.webgl.unbindInputTexture(gl.TEXTURE1);

};

/* Create a texture from the given texel data and bind it to our shader program.

	h - number of rows in input matrix
	w - number of cols in input matrix
	texels - packed data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SAXPYCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SAXPYCalculator.prototype.bindUniforms = function(N, a) {
	var gl = this.webgl.context;

	// get var locations
	var N_gl = gl.getUniformLocation(this.program, SAXPYCalculator.LENGTH_UNIFORM_NAME),
		a_gl = gl.getUniformLocation(this.program, SAXPYCalculator.COEFFICIENT_UNIFORM_NAME);

	// bind length of shared dimension
	gl.uniform1i(N_gl, N);
	gl.uniform1f(a_gl, a);

};

},{"./webgl":12}],5:[function(require,module,exports){
var WebGL = require('./webgl');

/*  Elementwise clamp function for matrices on the interval [a, b]. Can also be
	used for min or max, by passing Number.MIN_VALUE for the first parameter and
	Number.MAX_VALUE for the second parameter, respectively.

	Passing `null` for either of these parameters will default to it's
	respective min or max value.

	max(a, min(b, x)) for each x in X

	where X is a matrix, a and b are scalars


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SCLMPCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var s = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded A\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     a; \t\t// lower bound\nuniform float     b; \t\t// upper bound\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row = outTex.y;\n\tfloat col = outTex.x;\n\n\t// return 0.0 if in padded region of output texture\n\tif(col * float(N + pad) > float(N) ) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col, row));\n\tvec4 val = clamp(x, a, b);\n\n\t// select and output channel (standalone version only)\n\tint channel = int(mod(col * float(N + pad), 4.0));\n\tfloat sum = select_index_1540259130(val, channel);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1604150559(sum);\n}\n",
		p = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded A\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     a; \t\t// lower bound\nuniform float     b; \t\t// upper bound\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col_t, row_t));\n\tvec4 val_v = clamp(x, a, b);\n\n\t// is last element in pixel past row length?\n\tif(pad > 0 && (col + 4.0) > float(N) ) {\n\t\t// fix elements in padded region\n\t\tfix_pad_1540259130(val_v, pad);\n\t}\n\n\tgl_FragColor = val_v;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SCLMPCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SCLMPCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SCLMPCalculator.LENGTH_UNIFORM_NAME = "N";
SCLMPCalculator.LOWER_UNIFORM_NAME = "a";
SCLMPCalculator.UPPER_UNIFORM_NAME = "b";


/* Elementwise clamp a matrix to the interval [a, b]

	M - number of rows in X
	N - number of columns in X
	a - lower bound (inclusize)
	b - upper bound (inclusive)
	X - matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SCLMPCalculator.prototype.calculate = function(M, N, a, b, X, out){

	a = (a != null) ? a : Number.MIN_VALUE;
	b = (b != null) ? b : Number.MAX_VALUE;

	var gl = this.webgl.context;

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SCLMPCalculator.TEXTURE_UNIFORM_NAME_0);

	var nPad = this.webgl.getPad(N);
	// set the data specific variables in our shader program
	this.bindUniforms(N, nPad, a, b);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M, N + nPad, out);
	} else {
		this.webgl.bindOutputTexture(M, (N + nPad)/ 4, out);
	}

	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	h - number of rows in input matrix
	w - number of cols in input matrix
	texels - packed data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SCLMPCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SCLMPCalculator.prototype.bindUniforms = function(N, pad, a, b) {
	var gl = this.webgl.context;

	// get var locations
	var N_gl = gl.getUniformLocation(this.program, SCLMPCalculator.LENGTH_UNIFORM_NAME),
		b_gl = gl.getUniformLocation(this.program, SCLMPCalculator.UPPER_UNIFORM_NAME),
		a_gl = gl.getUniformLocation(this.program, SCLMPCalculator.LOWER_UNIFORM_NAME),
		pad_gl = gl.getUniformLocation(this.program, "pad");

	// bind length of shared dimension
	gl.uniform1i(N_gl, N);
	gl.uniform1i(pad_gl, pad);
	gl.uniform1f(a_gl, a);
	gl.uniform1f(b_gl, b);

};

},{"./webgl":12}],6:[function(require,module,exports){
var WebGL = require('./webgl');

/*  Downsample an image (useful in pooling layers).



	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function DownsampleCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var s = "// TODO: unroll loop for stride == factor and small values (2, 3)\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform int       factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     C;       // number of channels\nuniform float     M;\nuniform float     N;\nuniform float     N_out;\nuniform float     M_out;\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate and translate to output pixel space.\n\tfloat row = floor(outTex.y * M_out);   // row on output texture (matrix space)\n\tfloat col = floor(outTex.x * N_out); // column on output texture (matrix space)\n\tfloat vcol = floor(col / C);   // virtual column on output texture (matrix space)\n\tfloat vchannel = floor(mod(col, C)); // virtual channel on output texture\n\n\tconst float min = -1.0e+08;\n\tvec4 currentMax = vec4(min, min, min, min);\n\n\tfloat deltaY = 1.0/M;\n\tfloat deltaX = 1.0/N;\n\tfloat y = ((row * stride) + 0.5)*deltaY; // texture position of input row\n\tfloat x;\n\tfloat z = vchannel * deltaX;\n\tfor (int i = 0; i < 100; i += 1) {\n\t\tif (i >= factor) {\n\t\t\tbreak;\n\t\t}\n\t\tx = ((vcol * stride * C) + 0.5) * deltaX; // texture position of input column\n\n\t\tfor (int j = 0; j < 100; j += 1) {\n\t\t\tif (j >= factor) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec2 coords = vec2(x + z, y);\n\t\t\tvec4 x_v = texture2D(X, coords);\n\t\t\tcurrentMax = max(currentMax, x_v);\n\n\t\t\tx += (deltaX * C);\n\t\t}\n\t\ty += deltaY;\n\t}\n\tint chan = int(mod(outTex.x * N_out, 4.0 ));\n\tfloat val = select_index_1604150559(currentMax, int(chan));\n\tif (val == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\tgl_FragColor = encode_float_1540259130(val);\n}\n";
		p = "// TODO: unroll loop for stride == factor and small values (2, 3)\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform int       factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     C;       // number of channels\nuniform float     M;\nuniform float     N;\nuniform float     N_out;\nuniform float     M_out;\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate and translate to output pixel space.\n\tfloat row = floor(outTex.y * M_out);   // row on output texture (pixel space)\n\tfloat col = floor(outTex.x * N_out); // column on output texture (matrix space)\n\tfloat vcol = floor(col / C);   // virtual column on output texture (matrix space)\n\tfloat vchannel = floor(mod(col, C)); // virtual channel on output texture\n\n\tconst float min = -1.0e+08;\n\tvec4 currentMax = vec4(min, min, min, min);\n\n\tfloat deltaY = 1.0/M;\n\tfloat deltaX = 1.0/N;\n\tfloat y = ((row * stride) + 0.5)*deltaY; // texture position of input row\n\tfloat x;\n\tfloat z = vchannel * deltaX;\n\tfor (int i = 0; i < 100; i += 1) {\n\t\tif (i >= factor) {\n\t\t\tbreak;\n\t\t}\n\t\tx = ((vcol * stride * C) + 0.5) * deltaX; // texture position of input column\n\n\t\tfor (int j = 0; j < 100; j += 1) {\n\t\t\tif (j >= factor) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec2 coords = vec2(x + z, y);\n\t\t\tvec4 x_v = texture2D(X, coords);\n\t\t\tcurrentMax = max(currentMax, x_v);\n\n\t\t\tx += (deltaX * C);\n\t\t}\n\t\ty += deltaY;\n\t}\n\n\tgl_FragColor = currentMax;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = DownsampleCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
DownsampleCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
DownsampleCalculator.INPUT_ROW_COUNT_UNIFORM_NAME = "M";
DownsampleCalculator.INPUT_COLUMN_COUNT_UNIFORM_NAME = "N";
DownsampleCalculator.OUTPUT_ROW_COUNT_UNIFORM_NAME = "M_out";
DownsampleCalculator.OUTPUT_COLUMN_COUNT_UNIFORM_NAME = "N_out";
DownsampleCalculator.FACTOR_UNIFORM_NAME = "factor";
DownsampleCalculator.STRIDE_UNIFORM_NAME = "stride";
DownsampleCalculator.CHANNEL_COUNT_UNIFORM_NAME = "C";


/* Downsample (pool) the input using the maximum for each channel.

	M - rows in X
	N - columns in X
	c - (channels / 4) in X
	factor - the number of pixels (width and height) to combine
	stride - amount between groups of pixels
	X - input matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
DownsampleCalculator.prototype.calculate = function(M, N, channels, factor, stride, X, out){

	if(channels % WebGL.COMPONENTS_PER_TEXEL != 0){
		throw new Error("Channel count must be a multiple of " + WebGL.COMPONENTS_PER_TEXEL);
	}
	var gl = this.webgl.context;

    var N_out = (Math.floor((N - factor) / stride) + 1) * channels;
    var M_out = Math.floor((M - factor) / stride) + 1;

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, DownsampleCalculator.TEXTURE_UNIFORM_NAME_0);


	// set the data specific variables in our shader program
	this.bindUniforms(M, N * channels, M_out, N_out, factor, stride, channels);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M_out, N_out, out);
	} else {
		this.webgl.bindOutputTexture(M_out, N_out/WebGL.COMPONENTS_PER_TEXEL, out);
	}


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	texture - texture containing input values to bind
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
DownsampleCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
DownsampleCalculator.prototype.bindUniforms = function(M, N, M_out, N_out, factor, stride, c) {
	var gl = this.webgl.context;

	// get var locations
	var M_gl = gl.getUniformLocation(this.program, DownsampleCalculator.INPUT_ROW_COUNT_UNIFORM_NAME),
		N_gl = gl.getUniformLocation(this.program, DownsampleCalculator.INPUT_COLUMN_COUNT_UNIFORM_NAME),
		M_out_gl = gl.getUniformLocation(this.program, DownsampleCalculator.OUTPUT_ROW_COUNT_UNIFORM_NAME),
		N_out_gl = gl.getUniformLocation(this.program, DownsampleCalculator.OUTPUT_COLUMN_COUNT_UNIFORM_NAME),
		factor_gl = gl.getUniformLocation(this.program, DownsampleCalculator.FACTOR_UNIFORM_NAME),
		stride_gl = gl.getUniformLocation(this.program, DownsampleCalculator.STRIDE_UNIFORM_NAME),
		channel_count_gl = gl.getUniformLocation(this.program, DownsampleCalculator.CHANNEL_COUNT_UNIFORM_NAME);

	// bind length of shared dimension
	gl.uniform1f(M_gl, M);
	gl.uniform1f(N_gl, N);
	gl.uniform1f(M_out_gl, M_out);
	gl.uniform1f(N_out_gl, N_out);
	gl.uniform1i(factor_gl, factor);
	gl.uniform1f(stride_gl, stride);
	gl.uniform1f(channel_count_gl, c);

};

},{"./webgl":12}],7:[function(require,module,exports){
var WebGL = require('./webgl');

/* A calculator object for the Float texture based GEMM

	Generalized Matrix Multiply (GEMM):

	C = alpha * A * B + beta * C

	where A * B is matrix multiplication


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SGEMMCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	// read GLSL files
	var s = "// fragment shader that calculates the matrix product and renders each\n// element to the bytes representing a 32-bit IEEE754 floating point in\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\t// sum row x col for the passed pixel\n\tfloat sum = alpha * dot_rowcol_1540259130(row_t, col_t * float(N + pad)/float(N), A, B_t, K);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1604150559(sum);\n}\n",
		s_c = "// fragment shader that calculates the matrix product (with additive 'C' term)\n// and renders each element to the bytes representing a 32-bit IEEE754 floating\n// point in the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform sampler2D C;\t\t// texture with data from C\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\nuniform float     beta; \t// coefficient to additive term\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1117569599(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tvec4 c_vec = texture2D(C, vec2(col_t, 0.5));\n\n\t// should be -0.5, but that subtly breaks at zero\n\tfloat col = col_t * float(N + pad); // index of first element in pixel (matrix space)\n\tint channel = int(mod(col, 4.0 ));\n\tfloat c = select_index_1117569599(c_vec, channel);\n\n\t// sum row x col for the passed pixel\n\tfloat sum = alpha * dot_rowcol_1540259130(row_t, col_t * float(N + pad)/float(N), A, B_t, K);\n\tsum += beta * c;\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1604150559(sum);\n}\n",
		p = "// fragment shader that calculates the matrix product and writes each\n// element to a pixel component in a floating point texture.\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tvec4 sum_v = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\tsum_v.r = alpha * dot_rowcol_1540259130(row_t, (col + 0.5)/float(N), A, B_t, K);\n\t// is last element in pixel past row length?\n\tif(pad > 0 && (col + 4.0) > float(N) ) {\n\t\t// compute elements in padded region\n\t\tif(pad < 3){\n\t\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\t}\n\t\tif(pad < 2){\n\t\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\t}\n\t} else {\n\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\tsum_v.a = alpha * dot_rowcol_1540259130(row_t, (col + 3.5)/float(N), A, B_t, K);\n\t}\n\n\tgl_FragColor = sum_v;\n}\n",
		p_c = "// fragment shader that calculates the matrix product and writes each\n// element to a pixel component in a floating point texture.\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform sampler2D C;\t\t// texture with data from C\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\nuniform float     beta; \t// coefficient to addition\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tvec4 c_v = texture2D(C, vec2(col_t, 0.5));\n\n\tvec4 sum_v = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\tsum_v.r = alpha * dot_rowcol_1540259130(row_t, (col + 0.5)/float(N), A, B_t, K);\n\t// in the padding region?\n\tif(pad > 0 && (col + 4.0) > float(N) ) {\n\t\t// pad\n\t\tif(pad < 3){\n\t\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\t}\n\t\tif(pad < 2){\n\t\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\t}\n\t} else {\n\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\tsum_v.a = alpha * dot_rowcol_1540259130(row_t, (col + 3.5)/float(N), A, B_t, K);\n\t}\n\n\tgl_FragColor = sum_v + beta*c_v;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program_ = this.webgl.createProgram(s);
		this.program_c = this.webgl.createProgram(s_c);
	} else {
		this.program_ = this.webgl.createProgram(p);
		this.program_c = this.webgl.createProgram(p_c);
	}

}

module.exports = SGEMMCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SGEMMCalculator.TEXTURE_UNIFORM_NAME_0 = "A";
SGEMMCalculator.TEXTURE_UNIFORM_NAME_1 = "B_t";
SGEMMCalculator.TEXTURE_UNIFORM_NAME_2 = "C";
SGEMMCalculator.SHARED_LENGTH_UNIFORM_NAME = "K";
SGEMMCalculator.COLUMN_COUNT_UNIFORM_NAME = "N";
SGEMMCalculator.PAD_UNIFORM_NAME = "pad";
SGEMMCalculator.ALPHA_UNIFORM_NAME = "alpha";
SGEMMCalculator.BETA_UNIFORM_NAME = "beta";

/* Calculate the GEMM, with the given data.

	M - number of rows in A
	N - number of columns in B
	K - number of elements in shared dimension (including padding)
	alpha - scalar for A
	A - left hand matrix (as padded texture)
	B - transpose of right hand matrix (as padded texture)
	beta - scalar for C
	C - additive matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 TODO: signature should look like this:
 ( TRANSA, TRANSB, M, N, K, ALPHA, A, LDA, B, LDB, BETA, C, LDC )
 http://www.math.utah.edu/software/lapack/lapack-blas/dgemm.html
 */
SGEMMCalculator.prototype.calculate = function(M, N, K, alpha, A, B, beta, C, out){

	var gl = this.webgl.context;

	/*
	var h1 = M, w1 = K,
		h2 = K, w2 = N;
	*/

	// set this calculator program as the active program
	if(C != null){
		this.program = this.program_c;
	} else {
		beta = null;
		this.program = this.program_;
		//console.log("no C");
	}
	this.webgl.selectProgram(this.program);

	//  bind our input textures containing matrix data
	this.bindInputTexture(A, gl.TEXTURE0, SGEMMCalculator.TEXTURE_UNIFORM_NAME_0);
	this.bindInputTexture(B, gl.TEXTURE1, SGEMMCalculator.TEXTURE_UNIFORM_NAME_1);
	if(C != null){
		this.bindInputTexture(C, gl.TEXTURE2, SGEMMCalculator.TEXTURE_UNIFORM_NAME_2);
	}

	var kPad = this.webgl.getPad(K),
		nPad = this.webgl.getPad(N);

	// set the data specific variables in our shader program
	this.bindUniforms(N, K + kPad, nPad, alpha, beta);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M, N + nPad, out);
	} else {
		this.webgl.bindOutputTexture(M, (N + nPad)/ 4, out);
	}

	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);
	this.webgl.unbindInputTexture(gl.TEXTURE1);
	this.webgl.unbindInputTexture(gl.TEXTURE2);

	// result can now be read with gl.readResult, or more operations can be
	// performed on destination texture (in pipeline mode)
};


/* Create a texture from the given texel data and bind it to our shader program.

	h - number of rows in input matrix
	w - number of cols in input matrix
	texels - packed data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SGEMMCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};


/* Set up inputs for the texture shader

	K - size of shared dimension for multiplied matrices
 */
SGEMMCalculator.prototype.bindUniforms = function(N, K, pad, alpha, beta) {
	var gl = this.webgl.context;

	// get var locations
	var K_gl	 = gl.getUniformLocation(this.program, SGEMMCalculator.SHARED_LENGTH_UNIFORM_NAME),
		alpha_gl = gl.getUniformLocation(this.program, SGEMMCalculator.ALPHA_UNIFORM_NAME),
		beta_gl = gl.getUniformLocation(this.program, SGEMMCalculator.BETA_UNIFORM_NAME),
		N_gl = gl.getUniformLocation(this.program, SGEMMCalculator.COLUMN_COUNT_UNIFORM_NAME),
		pad_gl = pad_gl = gl.getUniformLocation(this.program, SGEMMCalculator.PAD_UNIFORM_NAME);

	gl.uniform1f(beta_gl, beta);
	gl.uniform1i(N_gl, N);
	gl.uniform1i(pad_gl, pad);

	// bind length of shared dimension
	gl.uniform1i(K_gl, K);
	// bind alpha
	gl.uniform1f(alpha_gl, alpha);

};

},{"./webgl":12}],8:[function(require,module,exports){
var WebGL = require('./webgl');

/*  Linearize onto Kernels, a transformation similar to im2col, which
	transforms the input to a convolution kernel into a row.

	X - input data
	k - kernal width
	stride - number of elements between beginnings of patches


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SLOKNCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var p = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform float     factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     margin;\nuniform float     N_p;     // patches across\nuniform float     M;\nuniform float     N;\nuniform float     pad;\nuniform float     M_in;\nuniform float     N_in;\nuniform float     C;       // number of channels in input\nuniform float     pad_in;\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords_1604150559(float linear_index, float row_length){\n\tvec2 coords;\n\n\tcoords.x = floor(mod(linear_index + 0.5, row_length)); // column\n\tcoords.y = floor((linear_index + 0.5) / row_length); // row\n\n\treturn coords;\n}\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1117569599(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\t// row corresponds to patch\n\tfloat row = floor(row_t * M) + 0.5;\n\t// column corresponds to placement in patch\n\tfloat col_0 = floor(col_t * (N + pad) - 1.5); // index of first element in output pixel (matrix space)\n\n\t// N_p = patches across\n\tfloat col_patch = floor(mod(row, N_p)); // column index in grid of patches\n\tfloat row_patch = floor(row / N_p); // row index in grid of patches\n\tfloat col_in_0 = (col_patch * stride - margin) * C; // input column index of left element in patch\n\tfloat row_in_0 = row_patch * stride - margin; // input row index of top element in patch\n\n\tvec4 pixel_in;\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec2 coords = linear_index_coords_1604150559(col_0, factor * C); // coords inside patch\n\tvec2 ncoords;\n\tint channel_in = int(mod(col_in_0 + coords.x, 4.0));\n\tvec2 scale_in = vec2(1.0/(N_in + pad_in), 1.0/M_in); // scale from matrix to input texture coords\n\tvec2 offset_in = vec2(col_in_0 + 2.0 - float(channel_in), row_in_0 + 0.5); // offset into patch (and pixel)\n\n\tconst vec2 pixel_scale = vec2(1.0/4.0, 1.0); // scale from matrix to pixel coords\n\n\tpixel_in = texture2D(X, (coords + offset_in) * scale_in);\n\n\t// go through channels for current output pixel\n\tfor(int channel = 0; channel < 4; channel++){\n\n\t\t// are we on a new input pixel?\n\t\tncoords = linear_index_coords_1604150559(col_0 + float(channel), factor * C);\n\n\t\t// are we in the margin or outside the input texture?\n\t\tif((col_in_0 + ncoords.x + 0.5 < 0.0) || (row_in_0 + ncoords.y + 0.5 < 0.0) ||\n\t\t   (col_in_0 + ncoords.x + 0.5) > (N_in) || row_in_0 + ncoords.y + 0.5 > M_in){\n\t\t\t// yes, create a virtual pixel\n\t\t\tpixel_in = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t} else if(floor(ncoords * pixel_scale) != floor(coords * pixel_scale)){\n\t\t\t// no, get the get the next real pixel\n\t\t\tcoords = ncoords;\n\t\t\toffset_in.x += float(channel_in);\n\t\t\tchannel_in = 0;\n\t\t\tpixel_in = texture2D(X, (coords + offset_in) * scale_in);\n\t\t}\n\n\t\tif(channel == 0){\n\t\t\tresult.r = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 1){\n\t\t\tresult.g = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 2){\n\t\t\tresult.b = select_index_1540259130(pixel_in, channel_in);\n\t\t} else {\n\t\t\tresult.a = select_index_1540259130(pixel_in, channel_in);\n\t\t}\n\n\t\tchannel_in++;\n\t\toffset_in.x -= 1.0;\n\t}\n\n\t// fix padded region\n\tif(pad > 0.0 && col_0 + 4.0 > N ) {\n\t\tfix_pad_1117569599(result, int(pad));\n\t}\n\n\t//gl_FragColor = vec4(row_in_0, col_in_0, channel_in, N_p);\n\tgl_FragColor = result;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SLOKNCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SLOKNCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SLOKNCalculator.STRIDE_UNIFORM_NAME = "stride";
SLOKNCalculator.KERNEL_WIDTH_UNIFORM_NAME = "factor";

/* Elementwise scale and offset a matrix

	M - number of rows in X
	N - number of columns in X
	a - scalar coefficient to X
	b - scalar offset of X
	X - matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SLOKNCalculator.prototype.calculate = function(M, N, channels, M_out, N_out, N_p, factor, stride, margin, X, out){

	var gl = this.webgl.context;

	var pad = this.webgl.getPad(N * channels),
		pad_out = this.webgl.getPad(N_out);

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SLOKNCalculator.TEXTURE_UNIFORM_NAME_0);

	// set the data specific variables in our shader program
	this.bindUniforms(M_out, N_out, pad_out, M, N * channels, channels, pad, N_p, factor, stride, margin);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M_out, N_out + pad_out, out);
	} else {
		this.webgl.bindOutputTexture(M_out, (N_out + pad_out)/ 4, out);
	}


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	texture - texture containing the data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SLOKNCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SLOKNCalculator.prototype.bindUniforms = function(M, N, pad, M_in, N_in, channels, pad_in, N_p, factor, stride, margin) {
	var gl = this.webgl.context;

	// get var locations
	var M_gl = gl.getUniformLocation(this.program, "M"),
		N_gl = gl.getUniformLocation(this.program, "N"),
		c_gl = gl.getUniformLocation(this.program, "C"),
		M_in_gl = gl.getUniformLocation(this.program, "M_in"),
		N_in_gl = gl.getUniformLocation(this.program, "N_in"),
		stride_gl = gl.getUniformLocation(this.program, SLOKNCalculator.STRIDE_UNIFORM_NAME),
		factor_gl = gl.getUniformLocation(this.program, SLOKNCalculator.KERNEL_WIDTH_UNIFORM_NAME),
		pad_gl = gl.getUniformLocation(this.program, "pad"),
		pad_in_gl = gl.getUniformLocation(this.program, "pad_in"),
		N_p_gl = gl.getUniformLocation(this.program, "N_p");
		margin_gl = gl.getUniformLocation(this.program, "margin");

	// bind length of shared dimension
	gl.uniform1f(M_gl, M);
	gl.uniform1f(N_gl, N);
	gl.uniform1f(pad_gl, pad);
	gl.uniform1f(M_in_gl, M_in);
	gl.uniform1f(N_in_gl, N_in);
	gl.uniform1f(c_gl, channels);
	gl.uniform1f(pad_in_gl, pad_in);
	gl.uniform1f(N_p_gl, N_p);
	gl.uniform1f(factor_gl, factor);
	gl.uniform1f(stride_gl, stride);
	gl.uniform1f(margin_gl, margin);

};

},{"./webgl":12}],9:[function(require,module,exports){
var WebGL = require('./webgl');

/*  a more general version of the BLAS Level 1 scale that works on matrices
    and includes an elementwise scalar addition

    a * X + b

	where X is a matrix, a and b are scalars and operations are elementwise

    to get the standard BLAS scal set M = 1 and b = 0


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SSCALCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var s = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded X\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     b; \t\t// additive term\nuniform float     a; \t\t// multiplicative term\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n \tfloat row = outTex.y;\n\tfloat col = outTex.x;\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col, row));\n\tvec4 sum_v = (a * x) + b;\n\tint channel = int(mod(col * float(N + pad), 4.0 ));\n\tfloat sum = select_index_1604150559(sum_v, channel);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n \t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1540259130(sum);\n}\n",
		p = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded X\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     b; \t\t// additive term\nuniform float     a; \t\t// multiplicative term\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col_t, row_t));\n\tvec4 sum_v = (a * x) + b;\n\n\t// fix padded region\n\tif(pad > 0 && col + 4.0 > float(N) ) {\n\t\tfix_pad_1540259130(sum_v, pad);\n\t}\n\n\tgl_FragColor = sum_v;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SSCALCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SSCALCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SSCALCalculator.LENGTH_UNIFORM_NAME = "N";
SSCALCalculator.ADD_UNIFORM_NAME = "b";
SSCALCalculator.MUL_UNIFORM_NAME = "a";

/* Elementwise scale and offset a matrix

	M - number of rows in X
	N - number of columns in X
	a - scalar coefficient to X
	b - scalar offset of X
	X - matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SSCALCalculator.prototype.calculate = function(M, N, a, b, X, out){

	var gl = this.webgl.context;

	var pad = this.webgl.getPad(N);

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SSCALCalculator.TEXTURE_UNIFORM_NAME_0);

	// set the data specific variables in our shader program
	this.bindUniforms(N, pad, a, b);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M, N + pad, out);
	} else {
		this.webgl.bindOutputTexture(M, (N + pad)/ 4, out);
	}


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	texture - texture containing the data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SSCALCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SSCALCalculator.prototype.bindUniforms = function(N, pad, a, b) {
	var gl = this.webgl.context;

	// get var locations
	var N_gl = gl.getUniformLocation(this.program, SSCALCalculator.LENGTH_UNIFORM_NAME),
		b_gl = gl.getUniformLocation(this.program, SSCALCalculator.ADD_UNIFORM_NAME),
		a_gl = gl.getUniformLocation(this.program, SSCALCalculator.MUL_UNIFORM_NAME),
		pad_gl = gl.getUniformLocation(this.program, "pad");

	// bind length of shared dimension
	gl.uniform1i(N_gl, N);
	gl.uniform1i(pad_gl, pad);
	gl.uniform1f(a_gl, a);
	gl.uniform1f(b_gl, b);

};

},{"./webgl":12}],10:[function(require,module,exports){
var globals = require("./globals");

var gl = globals.gl;

function Tensor(shape, data){
	if(shape.length != 2)
		throw new Error("Only Tensor of order two (matrix) is supported right now.");

	var M = shape[0],
		N = shape[1];

	this.texture = gl.createDataTexture(M, N, data);

	this.shape = [M, N];
}

module.exports = Tensor;

Tensor.prototype.delete = function(){
	gl.context.deleteTexture(this.texture);
	this.texture = null;
	this.shape = null;
};

Tensor.prototype.transfer = function(keep){

	var M = this.shape[0],
		N = this.shape[1],
		out,
		result;

	// create output texture
	out = gl.createOutputTexture(M, N);

	// float extraction
	gl.encode(M, N, this.texture, out);

	result = new Float32Array(gl.readData(M, N));

	// clean up
	gl.context.deleteTexture(out);

	if(!keep){
		this.delete();
	}

	return result;
};

Tensor.prototype.reshape = function(shape, keep){

	var M = this.shape[0],
		N = this.shape[1],
		M_out = shape[0],
		N_out = shape[1];

	// create new texture to hold tranpose
	var t0 = new Tensor(shape, null);

	// invoke shader
	gl.reshape(M, N, M_out, N_out, this.texture, t0.texture);

	if(!keep){
		this.delete();
	}

	return t0;
};

Tensor.prototype.transpose = function(keep){

	var M = this.shape[0],
		N = this.shape[1];

	// create new texture to hold tranpose
	var tT = new Tensor([N, M], null);

	// invoke shader
	gl.transpose(M, N, this.texture, tT.texture);

	if(!keep){
		this.delete();
	}

	return tT;
};

Tensor.prototype.split = function(stride, keep){

	var M = this.shape[0],
		N = this.shape[1];

	if(N % 2 !== 0)
		throw new Error("row count must be multiple of two.");


	// create new texture to hold tranpose
	var t0 = new Tensor([M, N/2], null),
		t1 = new Tensor([M, N/2], null);

	gl.submatrix(N, M, N/2, stride, 0, this.texture, t0.texture);
	gl.submatrix(N, M, N/2, stride, 1, this.texture, t1.texture);

	if(!keep){
		this.delete();
	}

	return [t0, t1];
}

Tensor.combine = function(t0, t1, stride, keep){

	var M = t0.shape[0],
		N = t0.shape[1];

	if(t0.shape[1] !== t1.shape[1] || t0.shape[0] !== t1.shape[0])
		throw new Error("row and column counts must be equal.");

	if(stride % 4 !== 0)
		throw new Error("stride must be a multiple of four");

	// create new texture to hold tranpose
	var t2 = new Tensor([M, N * 2], null);

	gl.combine(M, N, stride, t0.texture, t1.texture, t2.texture);

	if(!keep){
		t0.delete();
		t1.delete();
	}

	return t2;
}

},{"./globals":2}],11:[function(require,module,exports){
var async = require('async'),
	loader = require('arrayloader'); // browserify aware file loader (xhr in browser)

/* Collection of helper methods for testing numerical computation
 */
test = {};

/* Check all entries in two TypedArrays of identical length for approximate
	equality.
	If the following equation is element-wise true, returns true

	absolute(a - b) <= (atol + rtol * absolute(b))

	from numpy.allclose
 */
test.allclose = function(a, b, RTOL, ATOL){
	RTOL= RTOL || 1e-05;  // for 32 bit precision: 1e-06
	ATOL= ATOL || 1e-08;

	if(a.length != b.length){
		console.log("lengths not equal: " + a.length + ", " + b.length);
		return {"result" : false, "index": null};
	}

	var result;
	for(var i = 0; i < a.length; i++){

		result = Math.abs(a[i] - b[i]) <= ATOL + RTOL * Math.abs(b[i]);

		if(!result) {
			return {"result": false, "index": i};
		}
	}

	return {"result": true, "index": i};
};

test.randomArray = function(N, M){

	var data = [];

	for(var i = 0; i < N; i++){
		var row = [];
		for(var j = 0; j < M; j++){
			row[j] = Math.random() / Math.sqrt(N);
		}
		data.push(row);
	}

	return data;
};
// pad rows with zeros
test.padData = function(M, N, pad, data){

	var padded = new Float32Array(M * (N + pad)); // new array of specified length filled with zeros
	for(var i = 0; i < M; i++){
		padded.set(data.subarray(i * N, (i + 1) * N), i * (N + pad));
	}
	return padded;
};

test.submatrix = function(N, M, N_out, offset, data){
	var result = new data.constructor(M * N_out);

	for(var i = 0; i < M; i++){
		for(var j = 0; j < N_out; j++){
			result[i * N_out + j] = data[i * N + j + offset];
		}
	}

	return result;
};


function loadFloat32Array(path, cb){
	return loader.load(path, Float32Array, cb);
}

/* Load test matrices from JSON data, works in a browser (with XHR)
	assumes three files 'a.json', 'b.json' and 'c.json' in nested Array format.

 callback = function(err, a, b, c)
 */
test.load = function(testDirectory, matrixFiles, callback){

	// array of paths to matrix data files for current test
	var testFiles = matrixFiles.map(function(item){ return testDirectory + item;});

	//console.log(testFiles);
	async.map(testFiles, loadFloat32Array,
		function(err, results){

			if(err) return callback(err);

			callback(err, results);
		}
	);
};

test.assert = {};

/* create a tape compatible assert */
test.assert.allclose = function(t, a, b, msg, RTOL, ATOL) {

	var ok = test.allclose(a, b, RTOL, ATOL),
		actual = "[",
		expected = "[";

	if(!ok.result){

		if(ok.index > 1){
			actual += "..., ";
			expected += "..., ";
		}
		if(ok.index > 0){
			actual += a[ok.index - 1] + ", ";
			expected += b[ok.index - 1] + ", ";
		}
		actual += "-->";
		expected += "-->";

		for(var i = ok.index; i < ok.index + 4 && i < a.length; i++ ){
			actual += a[i] + ", ";
			expected += b[i] + ", ";
		}
		if(i < a.length){
			actual += "...]";
			expected += "...]";
		} else {
			actual += "]";
			expected += "]";
		}
		msg = msg || 'should be allclose at ' + ok.index;
	}

    t._assert(ok.result, {
        message : msg || 'should be allclose',
        operator : 'allclose',
        actual : actual,
        expected : expected,
        extra : null
    });
}

module.exports = test;

},{"arrayloader":13,"async":14}],12:[function(require,module,exports){

/**
 * @license
 * Copyright (c) 2015 Waylon Flinn
 *
 * webgl.js
 *
 * multiply matrices up to 4096 x 4096 on GPUs that support OES_texture_float
 * extension. input is encoded into the red and green channels of an input texture and
 * calculations are done using a custom fragment shader.
 */


/*
	A WebGL context associated with a specific canvas element.

	* creates a canvas
	* sets up webgl context
	* translates numbers into textures
	* compiles shader programs for executing math (when supplied with an
		operation specific fragment shader)
 */
function WebGL(options) {

	var glOptions,
		ext;

	options = options || {};

	// canvas
	if(typeof options.canvas === 'undefined')
		this.canvas = document.createElement('canvas');
	else
		this.canvas = options.canvas;

	// context
	glOptions = { premultipliedAlpha: false, preserveDrawingBuffer: false };
	this.context = this.canvas.getContext("experimental-webgl", glOptions);

	if (this.context == null) {
		// No support for Webgl.
		return;
	}

	// float texture extension
	try {
		ext = this.context.getExtension('OES_texture_float');
	} catch(e) {

	}
	if ( !ext ) {
		console.log("No support for OES_texture_float extension.");
		this.hasFloat = false;
	} else {
		this.hasFloat = true;
	}

	var highp = this.context.getShaderPrecisionFormat(this.context.FRAGMENT_SHADER, this.context.HIGH_FLOAT);
	this.hasHighPrecision = highp.precision != 0;
	if(this.hasHighPrecision) this.highp = highp;

	// create pass through vertex shader
	var passThrough = "// vertex shader for a single quad\n// work is performed in the operation specific texture shader\n\nprecision highp float;\n#define GLSLIFY 1\n\nattribute vec3 pos;\nattribute vec2 tex;\nvarying vec2   outTex;\nvoid main(void)\n{\n\t// just pass the position and texture coords\n\tgl_Position = vec4(pos, 1.0);\n\toutTex = tex;\n}\n";
	this.vertexShader = this.context.createShader(this.context.VERTEX_SHADER);
	this.context.shaderSource(this.vertexShader, passThrough);
	this.context.compileShader(this.vertexShader);

	var encode = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tvec4 val_v = texture2D(A, vec2(col_t * float(N)/float(N + pad), row_t));\n\tint channel = int(mod(col_t * float(N), 4.0 ));\n\tfloat val = select_index_1604150559(val_v, channel);\n\n\tif (val == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n \t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1540259130(val);\n}\n",
		transpose = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform int       M;\t\t// number of rows in output\nuniform int       N;\t\t// number of columns in output\nuniform int       mpad;\t\t//\nuniform int       npad;\t\t//\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = (col_t * float(N + npad) - 2.0); // index of first element in pixel (matrix space)\n\n\t// get rows in the input, each containing one element in the output\n\tvec4 row_1 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 0.5)/float(N)));\n\tvec4 row_2 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 1.5)/float(N)));\n\tvec4 row_3 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 2.5)/float(N)));\n\tvec4 row_4 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 3.5)/float(N)));\n\n\t// package into output vector\n\tint channel = int(mod(row_t * float(M), 4.0 ));\n\n\tvec4 col_v = vec4(0.0, 0.0, 0.0, 0.0); // vec4 representing four elements in a column in the input\n\n\t// extract relevent element from each input row\n\tcol_v.r = select_index_1540259130(row_1, channel);\n\tif(npad > 0 && (col + 4.0) > float(N) ) {\n\t\t// compute elements in padded region\n\t\tif(npad < 3){\n\t\t\tcol_v.g = select_index_1540259130(row_2, channel);\n\t\t}\n\t\tif(npad < 2){\n\t\t\tcol_v.b = select_index_1540259130(row_3, channel);\n\t\t}\n\t} else {\n\t\tcol_v.g = select_index_1540259130(row_2, channel);\n\t\tcol_v.b = select_index_1540259130(row_3, channel);\n\t\tcol_v.a = select_index_1540259130(row_4, channel);\n\t}\n\n\tgl_FragColor = col_v;\n}\n",
		reshape = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform float     M;\t\t// number of rows in output\nuniform float     N;\t\t// number of columns in output\nuniform float     pad;\t\t// column padding in output\nuniform float     M_in;\t\t// number of rows in input\nuniform float     N_in;\t\t// number of columns in input\nuniform float     pad_in;\t// column padding in input\n\n/* number of input pixels\n   origin index (channel) for each\n   termination index (channel) for each\n   destination origin index (channel) for each\n */\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1604150559(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords_1117569599(float linear_index, float row_length){\n\tvec2 coords;\n\n\tcoords.x = floor(mod(linear_index + 0.5, row_length)); // column\n\tcoords.y = floor((linear_index + 0.5) / row_length); // row\n\n\treturn coords;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tfloat row = floor(row_t * M);\n\tfloat col_0 = (col_t * (N + pad) - 2.0); // index of first element in pixel (matrix space)\n\t//float col_0 = floor(col_t * (N + pad)/4.0)*4.0; // index of first element in pixel (matrix space)\n\tfloat lin_index_0 = row * N + col_0; // linearized index of first element in pixel in output\n\n\tvec4 pixel_in = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec2 coords = linear_index_coords_1117569599(lin_index_0, N_in);\n\tvec2 ncoords;\n\tint channel_in = int(mod(coords.x, 4.0));\n\n\tvec2 scale_in = vec2(1.0/(N_in + pad_in), 1.0/M_in); // scale from matrix to input texture coords\n\tvec2 offset_in = vec2(0.5, 0.5); // move away from edge of pixel\n\tconst vec2 pixel_scale = vec2(1.0/4.0, 1.0); // scale from matrix to pixel coords\n\n\tpixel_in = texture2D(A, (coords + offset_in) * scale_in);\n\n\t// go through channels for current output pixel\n\tfor(int channel = 0; channel < 4; channel++){\n\n\t\t// are we on a new input pixel?\n\t\tncoords = linear_index_coords_1117569599(lin_index_0 + float(channel), N_in);\n\t\tif(floor(ncoords * pixel_scale) != floor(coords * pixel_scale)){\n\t\t\tcoords = ncoords;\n\t\t\tpixel_in = texture2D(A, (coords + offset_in) * scale_in);\n\t\t\tchannel_in = 0;\n\t\t}\n\n\t\tif(channel == 0){\n\t\t\tresult.r = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 1){\n\t\t\tresult.g = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 2){\n\t\t\tresult.b = select_index_1540259130(pixel_in, channel_in);\n\t\t} else {\n\t\t\tresult.a = select_index_1540259130(pixel_in, channel_in);\n\t\t}\n\n\t\tchannel_in++;\n\t}\n\n\t// are we in the padded (output) region?\n\tif(pad > 0.0 && col_0 + 3.5 > N ) {\n\t\tfix_pad_1604150559(result, int(pad));\n\t}\n\n\tgl_FragColor = result;\n}\n",
		reshape_simple = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform float     M;\t\t// number of rows in output\nuniform float     N;\t\t// number of columns in output\nuniform float     M_in;\t\t// number of rows in input\nuniform float     N_in;\t\t// number of columns in input\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords_1540259130(float linear_index, float row_length){\n\tvec2 coords;\n\n\tcoords.x = floor(mod(linear_index + 0.5, row_length)); // column\n\tcoords.y = floor((linear_index + 0.5) / row_length); // row\n\n\treturn coords;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tfloat row = floor(row_t * M);\n\tfloat col_0 = floor(col_t * N - 1.5); // index of first element in pixel (matrix space)\n\tfloat lin_index_0 = row * N + col_0; // linearized index of first element in pixel in output\n\n\tvec4 result;\n\tvec2 coords = linear_index_coords_1540259130(lin_index_0, N_in);\n\n\tvec2 scale_in = vec2(1.0/N_in, 1.0/M_in); // scale from matrix to input texture coords\n\tvec2 offset_in = vec2(0.5, 0.5); // move away from edge of pixel\n\n\tresult = texture2D(A, (coords + offset_in) * scale_in);\n\n\tgl_FragColor = result;\n}\n",
		submatrix = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded X\nuniform float     N;\t\t// number of columns\nuniform float     pad;\t\t// additional columns to nearest multiple of four\nuniform float     N_in;\t\t// number of columns (input)\nuniform float     pad_in;\t// additional columns to nearest multiple of four (input)\nuniform float     stride;\nuniform float     offset;   // zero or one\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\n/* join parts of two pixels into one, selecting four continguous elements\n  starting at channel.\n*/\nvoid join_pixels_1604150559(inout vec4 x, vec4 x0, vec4 x1, float channel){\n\tif(channel == 1.0){\n\t\tx.rgb = x0.gba;\n\t\tx.a = x1.r;\n\t} else if(channel == 2.0){\n\t\tx.rg = x0.ba;\n\t\tx.ba = x1.rg;\n\t} else if(channel == 3.0){\n\t\tx.r = x0.a;\n\t\tx.gba = x1.rgb;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = floor(col_t * (N + pad) - 1.5); // index of first element in pixel (output matrix space)\n\n\tfloat stripe = floor(col / stride);\n\tfloat sub_col = floor(mod(col, stride));\n\n\tfloat col_in = (offset + (2.0 * stripe)) * stride + sub_col;\n\n\tvec4 x;\n\tfloat channel = mod(col_in, 4.0); // channel in the input of first element in output\n\n\t// are we at the beggining of an input pixel?\n\tif(channel == 0.0){\n\t\t// yes, select the whole thing\n\t\tx = texture2D( X, vec2((col_in + 2.0 - channel) / (N_in + pad_in) , row_t));\n\t} else {\n\t\t// no, select parts from two pixels\n\t\tvec4 x0, x1;\n\t\tx0 = texture2D( X, vec2((col_in + 2.0 - channel) / (N_in + pad_in) , row_t));\n\t\tx1 = texture2D( X, vec2((col_in + 6.0 - channel) / (N_in + pad_in) , row_t));\n\n\t\tjoin_pixels_1604150559(x, x0, x1, channel);\n\n\t}\n\n\t// fix padded region\n\tif(pad > 0.0 && col + 4.0 > N ) {\n\t\tfix_pad_1540259130(x, int(pad));\n\t}\n\n\tgl_FragColor = x;\n}\n",
		combine = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B;\t\t// texture with data from padded B\nuniform float     N_in;\t\t// number of columns\nuniform float     pad_in;\t// additional columns to nearest multiple of four\nuniform float     stride;\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat N = N_in * 2.0;\n\tfloat pad = mod(N, 4.0);\n\tfloat col = floor(col_t * (N + pad) - 1.5); // index of first element in pixel (output matrix space)\n\n\tfloat stripe = floor(col / stride);\n\tfloat sub_col = floor(mod(col, stride));\n\n\tfloat tex_select = mod(stripe, 2.0);\n\tfloat col_in = floor(stripe / 2.0) * stride + sub_col;\n\n\tvec4 x;\n\tfloat channel = mod(col_in, 4.0); // channel in the input of first element in output\n\n\t// which input texture are we getting this pixel from?\n\tif(tex_select == 0.0){\n\t\tx = texture2D( A, vec2((col_in + 2.0) / (N_in + pad_in) , row_t));\n\t} else {\n\t\tx = texture2D( B, vec2((col_in + 2.0) / (N_in + pad_in) , row_t));\n\t}\n\n\t// fix padded region\n\tif(pad > 0.0 && col + 4.0 > N ) {\n\t\tfix_pad_1540259130(x, int(pad));\n\t}\n\n\tgl_FragColor = x;\n}\n";

	this.encode_program = this.createProgram(encode);
	this.transpose_program = this.createProgram(transpose);
	this.reshape_program = this.createProgram(reshape);
	this.reshape_simple_program = this.createProgram(reshape_simple);
	this.submatrix_program = this.createProgram(submatrix);
	this.combine_program = this.createProgram(combine);
};

module.exports = WebGL;

// RGBA is the standard input/ouput texture
WebGL.COMPONENTS_PER_TEXEL = 4;

WebGL.POSITION_UNIFORM_NAME = "pos";
WebGL.TEXTURE_UNIFORM_NAME = "tex";


WebGL.prototype.encode = function(M, N, texture0, out){

	this.program = this.encode_program;
	this.selectProgram(this.program);

	var pad = this.getPad(N);

	var N_gl = this.context.getUniformLocation(this.program, "N"),
		pad_gl = this.context.getUniformLocation(this.program, "pad");

	this.context.uniform1i(N_gl, N);
	this.context.uniform1i(pad_gl, pad);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");

	this.bindOutputTexture(M, N, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
}

/* tranpose a texture where input has M rows and N columns
 */
WebGL.prototype.transpose = function(M, N, texture0, out){

	this.program = this.transpose_program;
	this.selectProgram(this.program);

	var npad = this.getPad(N),
		mpad = this.getPad(M);

	// in the shader M and N describe rows and columns in the *output*, respectively
	var N_gl = this.context.getUniformLocation(this.program, "N"),
		npad_gl = this.context.getUniformLocation(this.program, "npad"),
		M_gl = this.context.getUniformLocation(this.program, "M"),
		mpad_gl = this.context.getUniformLocation(this.program, "mpad");

	this.context.uniform1i(N_gl, M);
	this.context.uniform1i(npad_gl, mpad);
	this.context.uniform1i(M_gl, N);
	this.context.uniform1i(mpad_gl, npad);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");

	this.bindOutputTexture(N, (M + mpad)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

/* tranpose a texture where input has M rows and N columns
 */
WebGL.prototype.reshape = function(M, N, M_out, N_out, texture0, out){

	var pad = this.getPad(N),
		pad_out = this.getPad(N_out);

	if(pad == 0 && pad_out == 0){
		this.program = this.reshape_simple_program;
	} else {
		this.program = this.reshape_program;
		console.log("# WARNING: using slow reshape shader.");
	}

	this.selectProgram(this.program);


	// in the shader M and N describe rows and columns in the *output*, respectively
	var M_gl = this.context.getUniformLocation(this.program, "M"),
		N_gl = this.context.getUniformLocation(this.program, "N"),
		pad_gl = this.context.getUniformLocation(this.program, "pad"),
		M_in_gl = this.context.getUniformLocation(this.program, "M_in"),
		N_in_gl = this.context.getUniformLocation(this.program, "N_in"),
		pad_in_gl = this.context.getUniformLocation(this.program, "pad_in");

	this.context.uniform1f(M_gl, M_out);
	this.context.uniform1f(N_gl, N_out);
	this.context.uniform1f(pad_gl, pad_out);
	this.context.uniform1f(M_in_gl, M);
	this.context.uniform1f(N_in_gl, N);
	this.context.uniform1f(pad_in_gl, pad);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");

	this.bindOutputTexture(M_out, (N_out + pad_out)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

/* extract a portion of a texture into another texture
 */
WebGL.prototype.submatrix = function(N, M_out, N_out, stride, offset, texture0, out){

	this.program = this.submatrix_program;
	this.selectProgram(this.program);

	var pad = this.getPad(N),
		pad_out = this.getPad(N_out);

	// in the shader M and N describe rows and columns in the *output*, respectively
	var N_gl = this.context.getUniformLocation(this.program, "N"),
		pad_gl = this.context.getUniformLocation(this.program, "pad"),
		N_in_gl = this.context.getUniformLocation(this.program, "N_in"),
		pad_in_gl = this.context.getUniformLocation(this.program, "pad_in"),
		offset_gl = this.context.getUniformLocation(this.program, "offset");
		stride_gl = this.context.getUniformLocation(this.program, "stride");

	this.context.uniform1f(N_gl, N_out);
	this.context.uniform1f(pad_gl, pad_out);
	this.context.uniform1f(N_in_gl, N);
	this.context.uniform1f(pad_in_gl, pad);
	this.context.uniform1f(stride_gl, stride);
	this.context.uniform1f(offset_gl, offset);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "X");

	this.bindOutputTexture(M_out, (N_out + pad_out)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

/* combine two smaller textures into a larger texture
   M - input rows
   N - input columns
 */
WebGL.prototype.combine = function(M, N, stride, texture0, texture1, out){

	this.program = this.combine_program;
	this.selectProgram(this.program);

	var N_out = N * 2,
		pad = this.getPad(N),
		pad_out = this.getPad(N_out); // = (pad * 2) % 4

	// in the shader M and N describe rows and columns in the *output*, respectively
	var N_in_gl = this.context.getUniformLocation(this.program, "N_in"),
		pad_in_gl = this.context.getUniformLocation(this.program, "pad_in"),
		stride_gl = this.context.getUniformLocation(this.program, "stride");

	this.context.uniform1f(N_in_gl, N);
	this.context.uniform1f(pad_in_gl, pad);
	this.context.uniform1f(stride_gl, stride);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");
	this.bindInputTexture(texture1, this.context.TEXTURE1, "B");

	this.bindOutputTexture(M, (N_out + pad_out)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

WebGL.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/*  Create a shader program based on a pass through vertex shader and
	the supplied operation specific fragment shader.

	fragmentShaderSource - string containing the fragment shader source code.
	shader will recieve `vec2 outTex` with texture coordinates from the pass
	through vertex shader.
 */
WebGL.prototype.createProgram = function(fragmentShaderSource){
	var gl = this.context,
		fragmentShader;

	if (gl == null) {
	  // No webgl support.
	  return;
	}
	// compile the provided fragment/texture shader
	fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
	gl.shaderSource(fragmentShader, fragmentShaderSource);
	gl.compileShader(fragmentShader);

	// did it compile correctly?
	if (gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS) == 0)
		throw new Error(gl.getShaderInfoLog(fragmentShader));

	// link the program specific fragment shader and the generic pass through
	// shader into a program
	var program = gl.createProgram();
	gl.attachShader(program, this.vertexShader);
	gl.attachShader(program, fragmentShader);
	gl.linkProgram(program);

	return program;
};

WebGL.prototype.selectProgram = function(program){

	var gl = this.context;

	// set calculator program to current shader program
	gl.useProgram(program);

	this.bindVertices(program);
};

/* setup required to draw a square to our vertex shader and have
   fragment shader called for each pixel
 */
WebGL.prototype.bindVertices = function(program) {
	var gl = this.context,
		renderer = program;

	// bind vertices
	var position = gl.getAttribLocation(renderer, WebGL.POSITION_UNIFORM_NAME);
	var vertexBuffer = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);

	// define a square that covers the screen
	var vertices = [-1.0, -1.0, 0.0,	// bottom left
					 1.0, -1.0, 0.0,	// bottom right
					 1.0,  1.0, 0.0,	// top right
					-1.0,  1.0, 0.0];	// top left
	gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
	gl.vertexAttribPointer(position, /*item size*/3, gl.FLOAT, false, 0, 0);
	gl.enableVertexAttribArray(position);

	// bind texture cords
	var texture = gl.getAttribLocation(renderer, WebGL.TEXTURE_UNIFORM_NAME);
	var texCoords = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, texCoords);
	var textureCoords = [0.0, 0.0,
						 1.0, 0.0,
						 1.0, 1.0,
						 0.0, 1.0];
	gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
	gl.vertexAttribPointer(texture, /*item size*/2, gl.FLOAT, false, 0, 0);
	gl.enableVertexAttribArray(texture);

	// index to vertices
	var indices = gl.createBuffer();
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indices);
	// tesselate square into triangles
	// indeces into vertex array creating triangles, with counter-clockwise winding
	var vertexIndices = [0, 1, 2,	// bottom right triangle
						 0, 2, 3];	// top left triangle
	gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(vertexIndices), gl.STATIC_DRAW);
};

/* create RGBA texture of width w/4 from given texels
   padding the width of each row to a multiple of 4, where necessary.

   if texels is null, an empty texture is created.

   alternative to textures?
   http://stackoverflow.com/questions/17203508/webgl-hardware-skinning-with-a-bone-texture
 */
WebGL.prototype.createDataTexture = function(h, w, texels){

	var gl = this.context;

	var PAD_TEMPLATE = [0.0, 0.0, 0.0, 0.0]; // value to pad remainder with

	var rem = (w % WebGL.COMPONENTS_PER_TEXEL),
		pad = rem == 0 ? 0 : WebGL.COMPONENTS_PER_TEXEL - rem;

	// create the texture from our floats
	var texture = gl.createTexture();

	gl.bindTexture(	  gl.TEXTURE_2D, texture);
	/*
	// https://www.opengl.org/wiki/GLAPI/glPixelStore
    gl.pixelStorei(gl.UNPACK_ROW_LENGTH, w/4);
    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);

	see also: https://www.opengl.org/wiki/Common_Mistakes#Creating_a_complete_texture
	*/
	if(pad == 0 || texels == null || typeof texels === 'undefined'){
		// no padding required, write directly from input array
		gl.texImage2D(	  gl.TEXTURE_2D, 0, gl.RGBA, (w + pad) / WebGL.COMPONENTS_PER_TEXEL, h, 0,
						  gl.RGBA, gl.FLOAT, texels);

	} else {
		// must pad each row

		// create empty texture
		gl.texImage2D(	  gl.TEXTURE_2D, 0, gl.RGBA, (w + pad) / WebGL.COMPONENTS_PER_TEXEL, h, 0,
						  gl.RGBA, gl.FLOAT, null);

		var full_texel_row_len = w - rem,
			full_row_texture_width = full_texel_row_len / WebGL.COMPONENTS_PER_TEXEL;

		var row_start = 0;
		var last_texel = new Float32Array(PAD_TEMPLATE);
		var row, remainder;

		// set texture data, one row at a time, padding each row to a multiple
		// of the texel length
		for(var i = 0; i < h; i++){
			row_start = i * w;
			full_texel_row_end = row_start + full_texel_row_len;
			row = new Float32Array(texels.buffer, row_start * texels.BYTES_PER_ELEMENT, full_texel_row_len);
			if(full_texel_row_len > 0){
				// https://www.khronos.org/registry/webgl/specs/latest/1.0/index.html#TEXSUBIMAGE2D
				gl.texSubImage2D(gl.TEXTURE_2D,
					 0,					// mip-map level
					 0,					// x-offset
					 i,					// y-offset
					 full_row_texture_width,	// width
					 1,					// height
					 gl.RGBA,			// format
					 gl.FLOAT,			// type
					 row			// data
				 );
			}

			remainder = new Float32Array(texels.buffer, full_texel_row_end * texels.BYTES_PER_ELEMENT, rem);
			last_texel.set(remainder); // copy remaining data

			gl.texSubImage2D(gl.TEXTURE_2D,
				 0,				// mip-map level
				 full_row_texture_width, // x-offset
				 i,				// y-offset
				 1,				// width
				 1,				// height
				 gl.RGBA,		// format
				 gl.FLOAT,		// type
				 last_texel		// data
			 );
		}
	}

	// clamp to edge to support non-power of two textures
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

	// don't interpolate when getting data from texture
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

	// we're done with setup, so unbind current texture
	gl.bindTexture(gl.TEXTURE_2D, null);

	return texture;
};

/* Create a (padded) texture suitable for reading into an array with readPixels.
	UNSIGNED_BYTE
   Can be passed to bindDestinationTexture.

   Returns an unsigned byte RGBA texture (other formats are not yet supported
	on most platforms, see WEBGL_color_buffer_float extension)
 */
WebGL.prototype.createOutputTexture = function(h, w) {
	var gl = this.context;

	var pad = this.getPad(w);

	// create and bind texture to render to
	var destTexture = gl.createTexture();
	//gl.activeTexture(gl.TEXTURE2);
	gl.bindTexture(gl.TEXTURE_2D, destTexture);
	gl.texImage2D(gl.TEXTURE_2D,/*level*/0, gl.RGBA, w + pad, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

	// clamp to edge to support non-power of two textures
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
	// don't interpolate when getting data from texture
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

	// we're done with setup, so unbind current texture
	gl.bindTexture(gl.TEXTURE_2D, null);

	return destTexture;
};

/* Set up output

	M - number of rows in output
	N - number of columns in output
	dstTex - texture for holding the output
 */
WebGL.prototype.bindOutputTexture = function(M, N, texture) {
	var gl = this.context;

	// set canvas and viewport size
	this.canvas.height = M;
	this.canvas.width = N;
	gl.viewport(0, 0, N, M);

	// create and bind framebuffer
	this.framebuffer = this.framebuffer || gl.createFramebuffer();

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);

	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, /*level*/0);


	if( gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE)
		throw new Error("Bound framebuffer is not complete.");

	return this.framebuffer;
};

WebGL.prototype.unbindInputTexture = function(textureUnit){
	var gl = this.context;

	gl.activeTexture(textureUnit);
	gl.bindTexture(gl.TEXTURE_2D, null);
};

/* Read data out as unsigned bytes */
WebGL.prototype.readData = function(M, N){
	var gl = this.context;

	// create destination buffer
	rawbuffer = new ArrayBuffer(M*N*Float32Array.BYTES_PER_ELEMENT);

	// read the result into our buffer, as bytes
	prod = new Uint8Array(rawbuffer);
	gl.readPixels(0, 0, N, M, gl.RGBA, gl.UNSIGNED_BYTE, prod);

	// return raw result bytes
	return rawbuffer; // M x N
};

// how many extra elements do we need to fill up a pixel?
WebGL.prototype.getPad = function(N){

	var rem = (N % WebGL.COMPONENTS_PER_TEXEL),
		pad = rem == 0 ? 0 : WebGL.COMPONENTS_PER_TEXEL - rem;

	return pad;
};

},{}],13:[function(require,module,exports){
exports.load = function(url, type, callback) {
	var xhr = new XMLHttpRequest();

	xhr.onreadystatechange = function() {
		if (xhr.readyState !== 4) {
			return;
		}

		if (xhr.status >= 200 && xhr.status < 300) {
			var arrayBuffer = xhr.response;
			if (arrayBuffer) {
				try{

					// parse according to type
					var data = new type(arrayBuffer);

					// return result
					return callback(null, data);
				} catch (e){
					return callback(e);
				}
			} else {
				return callback("empty response");
			}

		} else {
			var err = new Error("failed to request file '" + url + "'");
			// follow Node.js error signature
			err.errno = 34;
			callback(err);
		}
	};

	try {
		xhr.open('GET', url, true);
		xhr.responseType = "arraybuffer";
		xhr.send(null);
	} catch (err) {
		callback(err);
	}
};

},{}],14:[function(require,module,exports){
(function (process,global){
/**
 * @license
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function () {

    var async = {};
    function noop() {}
    function identity(v) {
        return v;
    }
    function toBool(v) {
        return !!v;
    }
    function notId(v) {
        return !v;
    }

    // global on the server, window in the browser
    var previous_async;

    // Establish the root object, `window` (`self`) in the browser, `global`
    // on the server, or `this` in some virtual machines. We use `self`
    // instead of `window` for `WebWorker` support.
    var root = typeof self === 'object' && self.self === self && self ||
            typeof global === 'object' && global.global === global && global ||
            this;

    if (root != null) {
        previous_async = root.async;
    }

    async.noConflict = function () {
        root.async = previous_async;
        return async;
    };

    function only_once(fn) {
        return function() {
            if (fn === null) throw new Error("Callback was already called.");
            fn.apply(this, arguments);
            fn = null;
        };
    }

    function _once(fn) {
        return function() {
            if (fn === null) return;
            fn.apply(this, arguments);
            fn = null;
        };
    }

    //// cross-browser compatiblity functions ////

    var _toString = Object.prototype.toString;

    var _isArray = Array.isArray || function (obj) {
        return _toString.call(obj) === '[object Array]';
    };

    // Ported from underscore.js isObject
    var _isObject = function(obj) {
        var type = typeof obj;
        return type === 'function' || type === 'object' && !!obj;
    };

    function _isArrayLike(arr) {
        return _isArray(arr) || (
            // has a positive integer length property
            typeof arr.length === "number" &&
            arr.length >= 0 &&
            arr.length % 1 === 0
        );
    }

    function _arrayEach(arr, iterator) {
        var index = -1,
            length = arr.length;

        while (++index < length) {
            iterator(arr[index], index, arr);
        }
    }

    function _map(arr, iterator) {
        var index = -1,
            length = arr.length,
            result = Array(length);

        while (++index < length) {
            result[index] = iterator(arr[index], index, arr);
        }
        return result;
    }

    function _range(count) {
        return _map(Array(count), function (v, i) { return i; });
    }

    function _reduce(arr, iterator, memo) {
        _arrayEach(arr, function (x, i, a) {
            memo = iterator(memo, x, i, a);
        });
        return memo;
    }

    function _forEachOf(object, iterator) {
        _arrayEach(_keys(object), function (key) {
            iterator(object[key], key);
        });
    }

    function _indexOf(arr, item) {
        for (var i = 0; i < arr.length; i++) {
            if (arr[i] === item) return i;
        }
        return -1;
    }

    var _keys = Object.keys || function (obj) {
        var keys = [];
        for (var k in obj) {
            if (obj.hasOwnProperty(k)) {
                keys.push(k);
            }
        }
        return keys;
    };

    function _keyIterator(coll) {
        var i = -1;
        var len;
        var keys;
        if (_isArrayLike(coll)) {
            len = coll.length;
            return function next() {
                i++;
                return i < len ? i : null;
            };
        } else {
            keys = _keys(coll);
            len = keys.length;
            return function next() {
                i++;
                return i < len ? keys[i] : null;
            };
        }
    }

    // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)
    // This accumulates the arguments passed into an array, after a given index.
    // From underscore.js (https://github.com/jashkenas/underscore/pull/2140).
    function _restParam(func, startIndex) {
        startIndex = startIndex == null ? func.length - 1 : +startIndex;
        return function() {
            var length = Math.max(arguments.length - startIndex, 0);
            var rest = Array(length);
            for (var index = 0; index < length; index++) {
                rest[index] = arguments[index + startIndex];
            }
            switch (startIndex) {
                case 0: return func.call(this, rest);
                case 1: return func.call(this, arguments[0], rest);
            }
            // Currently unused but handle cases outside of the switch statement:
            // var args = Array(startIndex + 1);
            // for (index = 0; index < startIndex; index++) {
            //     args[index] = arguments[index];
            // }
            // args[startIndex] = rest;
            // return func.apply(this, args);
        };
    }

    function _withoutIndex(iterator) {
        return function (value, index, callback) {
            return iterator(value, callback);
        };
    }

    //// exported async module functions ////

    //// nextTick implementation with browser-compatible fallback ////

    // capture the global reference to guard against fakeTimer mocks
    var _setImmediate = typeof setImmediate === 'function' && setImmediate;

    var _delay = _setImmediate ? function(fn) {
        // not a direct alias for IE10 compatibility
        _setImmediate(fn);
    } : function(fn) {
        setTimeout(fn, 0);
    };

    if (typeof process === 'object' && typeof process.nextTick === 'function') {
        async.nextTick = process.nextTick;
    } else {
        async.nextTick = _delay;
    }
    async.setImmediate = _setImmediate ? _delay : async.nextTick;


    async.forEach =
    async.each = function (arr, iterator, callback) {
        return async.eachOf(arr, _withoutIndex(iterator), callback);
    };

    async.forEachSeries =
    async.eachSeries = function (arr, iterator, callback) {
        return async.eachOfSeries(arr, _withoutIndex(iterator), callback);
    };


    async.forEachLimit =
    async.eachLimit = function (arr, limit, iterator, callback) {
        return _eachOfLimit(limit)(arr, _withoutIndex(iterator), callback);
    };

    async.forEachOf =
    async.eachOf = function (object, iterator, callback) {
        callback = _once(callback || noop);
        object = object || [];

        var iter = _keyIterator(object);
        var key, completed = 0;

        while ((key = iter()) != null) {
            completed += 1;
            iterator(object[key], key, only_once(done));
        }

        if (completed === 0) callback(null);

        function done(err) {
            completed--;
            if (err) {
                callback(err);
            }
            // Check key is null in case iterator isn't exhausted
            // and done resolved synchronously.
            else if (key === null && completed <= 0) {
                callback(null);
            }
        }
    };

    async.forEachOfSeries =
    async.eachOfSeries = function (obj, iterator, callback) {
        callback = _once(callback || noop);
        obj = obj || [];
        var nextKey = _keyIterator(obj);
        var key = nextKey();
        function iterate() {
            var sync = true;
            if (key === null) {
                return callback(null);
            }
            iterator(obj[key], key, only_once(function (err) {
                if (err) {
                    callback(err);
                }
                else {
                    key = nextKey();
                    if (key === null) {
                        return callback(null);
                    } else {
                        if (sync) {
                            async.setImmediate(iterate);
                        } else {
                            iterate();
                        }
                    }
                }
            }));
            sync = false;
        }
        iterate();
    };



    async.forEachOfLimit =
    async.eachOfLimit = function (obj, limit, iterator, callback) {
        _eachOfLimit(limit)(obj, iterator, callback);
    };

    function _eachOfLimit(limit) {

        return function (obj, iterator, callback) {
            callback = _once(callback || noop);
            obj = obj || [];
            var nextKey = _keyIterator(obj);
            if (limit <= 0) {
                return callback(null);
            }
            var done = false;
            var running = 0;
            var errored = false;

            (function replenish () {
                if (done && running <= 0) {
                    return callback(null);
                }

                while (running < limit && !errored) {
                    var key = nextKey();
                    if (key === null) {
                        done = true;
                        if (running <= 0) {
                            callback(null);
                        }
                        return;
                    }
                    running += 1;
                    iterator(obj[key], key, only_once(function (err) {
                        running -= 1;
                        if (err) {
                            callback(err);
                            errored = true;
                        }
                        else {
                            replenish();
                        }
                    }));
                }
            })();
        };
    }


    function doParallel(fn) {
        return function (obj, iterator, callback) {
            return fn(async.eachOf, obj, iterator, callback);
        };
    }
    function doParallelLimit(fn) {
        return function (obj, limit, iterator, callback) {
            return fn(_eachOfLimit(limit), obj, iterator, callback);
        };
    }
    function doSeries(fn) {
        return function (obj, iterator, callback) {
            return fn(async.eachOfSeries, obj, iterator, callback);
        };
    }

    function _asyncMap(eachfn, arr, iterator, callback) {
        callback = _once(callback || noop);
        arr = arr || [];
        var results = _isArrayLike(arr) ? [] : {};
        eachfn(arr, function (value, index, callback) {
            iterator(value, function (err, v) {
                results[index] = v;
                callback(err);
            });
        }, function (err) {
            callback(err, results);
        });
    }

    async.map = doParallel(_asyncMap);
    async.mapSeries = doSeries(_asyncMap);
    async.mapLimit = doParallelLimit(_asyncMap);

    // reduce only has a series version, as doing reduce in parallel won't
    // work in many situations.
    async.inject =
    async.foldl =
    async.reduce = function (arr, memo, iterator, callback) {
        async.eachOfSeries(arr, function (x, i, callback) {
            iterator(memo, x, function (err, v) {
                memo = v;
                callback(err);
            });
        }, function (err) {
            callback(err, memo);
        });
    };

    async.foldr =
    async.reduceRight = function (arr, memo, iterator, callback) {
        var reversed = _map(arr, identity).reverse();
        async.reduce(reversed, memo, iterator, callback);
    };

    async.transform = function (arr, memo, iterator, callback) {
        if (arguments.length === 3) {
            callback = iterator;
            iterator = memo;
            memo = _isArray(arr) ? [] : {};
        }

        async.eachOf(arr, function(v, k, cb) {
            iterator(memo, v, k, cb);
        }, function(err) {
            callback(err, memo);
        });
    };

    function _filter(eachfn, arr, iterator, callback) {
        var results = [];
        eachfn(arr, function (x, index, callback) {
            iterator(x, function (v) {
                if (v) {
                    results.push({index: index, value: x});
                }
                callback();
            });
        }, function () {
            callback(_map(results.sort(function (a, b) {
                return a.index - b.index;
            }), function (x) {
                return x.value;
            }));
        });
    }

    async.select =
    async.filter = doParallel(_filter);

    async.selectLimit =
    async.filterLimit = doParallelLimit(_filter);

    async.selectSeries =
    async.filterSeries = doSeries(_filter);

    function _reject(eachfn, arr, iterator, callback) {
        _filter(eachfn, arr, function(value, cb) {
            iterator(value, function(v) {
                cb(!v);
            });
        }, callback);
    }
    async.reject = doParallel(_reject);
    async.rejectLimit = doParallelLimit(_reject);
    async.rejectSeries = doSeries(_reject);

    function _createTester(eachfn, check, getResult) {
        return function(arr, limit, iterator, cb) {
            function done() {
                if (cb) cb(getResult(false, void 0));
            }
            function iteratee(x, _, callback) {
                if (!cb) return callback();
                iterator(x, function (v) {
                    if (cb && check(v)) {
                        cb(getResult(true, x));
                        cb = iterator = false;
                    }
                    callback();
                });
            }
            if (arguments.length > 3) {
                eachfn(arr, limit, iteratee, done);
            } else {
                cb = iterator;
                iterator = limit;
                eachfn(arr, iteratee, done);
            }
        };
    }

    async.any =
    async.some = _createTester(async.eachOf, toBool, identity);

    async.someLimit = _createTester(async.eachOfLimit, toBool, identity);

    async.all =
    async.every = _createTester(async.eachOf, notId, notId);

    async.everyLimit = _createTester(async.eachOfLimit, notId, notId);

    function _findGetResult(v, x) {
        return x;
    }
    async.detect = _createTester(async.eachOf, identity, _findGetResult);
    async.detectSeries = _createTester(async.eachOfSeries, identity, _findGetResult);
    async.detectLimit = _createTester(async.eachOfLimit, identity, _findGetResult);

    async.sortBy = function (arr, iterator, callback) {
        async.map(arr, function (x, callback) {
            iterator(x, function (err, criteria) {
                if (err) {
                    callback(err);
                }
                else {
                    callback(null, {value: x, criteria: criteria});
                }
            });
        }, function (err, results) {
            if (err) {
                return callback(err);
            }
            else {
                callback(null, _map(results.sort(comparator), function (x) {
                    return x.value;
                }));
            }

        });

        function comparator(left, right) {
            var a = left.criteria, b = right.criteria;
            return a < b ? -1 : a > b ? 1 : 0;
        }
    };

    async.auto = function (tasks, concurrency, callback) {
        if (typeof arguments[1] === 'function') {
            // concurrency is optional, shift the args.
            callback = concurrency;
            concurrency = null;
        }
        callback = _once(callback || noop);
        var keys = _keys(tasks);
        var remainingTasks = keys.length;
        if (!remainingTasks) {
            return callback(null);
        }
        if (!concurrency) {
            concurrency = remainingTasks;
        }

        var results = {};
        var runningTasks = 0;

        var hasError = false;

        var listeners = [];
        function addListener(fn) {
            listeners.unshift(fn);
        }
        function removeListener(fn) {
            var idx = _indexOf(listeners, fn);
            if (idx >= 0) listeners.splice(idx, 1);
        }
        function taskComplete() {
            remainingTasks--;
            _arrayEach(listeners.slice(0), function (fn) {
                fn();
            });
        }

        addListener(function () {
            if (!remainingTasks) {
                callback(null, results);
            }
        });

        _arrayEach(keys, function (k) {
            if (hasError) return;
            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];
            var taskCallback = _restParam(function(err, args) {
                runningTasks--;
                if (args.length <= 1) {
                    args = args[0];
                }
                if (err) {
                    var safeResults = {};
                    _forEachOf(results, function(val, rkey) {
                        safeResults[rkey] = val;
                    });
                    safeResults[k] = args;
                    hasError = true;

                    callback(err, safeResults);
                }
                else {
                    results[k] = args;
                    async.setImmediate(taskComplete);
                }
            });
            var requires = task.slice(0, task.length - 1);
            // prevent dead-locks
            var len = requires.length;
            var dep;
            while (len--) {
                if (!(dep = tasks[requires[len]])) {
                    throw new Error('Has nonexistent dependency in ' + requires.join(', '));
                }
                if (_isArray(dep) && _indexOf(dep, k) >= 0) {
                    throw new Error('Has cyclic dependencies');
                }
            }
            function ready() {
                return runningTasks < concurrency && _reduce(requires, function (a, x) {
                    return (a && results.hasOwnProperty(x));
                }, true) && !results.hasOwnProperty(k);
            }
            if (ready()) {
                runningTasks++;
                task[task.length - 1](taskCallback, results);
            }
            else {
                addListener(listener);
            }
            function listener() {
                if (ready()) {
                    runningTasks++;
                    removeListener(listener);
                    task[task.length - 1](taskCallback, results);
                }
            }
        });
    };



    async.retry = function(times, task, callback) {
        var DEFAULT_TIMES = 5;
        var DEFAULT_INTERVAL = 0;

        var attempts = [];

        var opts = {
            times: DEFAULT_TIMES,
            interval: DEFAULT_INTERVAL
        };

        function parseTimes(acc, t){
            if(typeof t === 'number'){
                acc.times = parseInt(t, 10) || DEFAULT_TIMES;
            } else if(typeof t === 'object'){
                acc.times = parseInt(t.times, 10) || DEFAULT_TIMES;
                acc.interval = parseInt(t.interval, 10) || DEFAULT_INTERVAL;
            } else {
                throw new Error('Unsupported argument type for \'times\': ' + typeof t);
            }
        }

        var length = arguments.length;
        if (length < 1 || length > 3) {
            throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');
        } else if (length <= 2 && typeof times === 'function') {
            callback = task;
            task = times;
        }
        if (typeof times !== 'function') {
            parseTimes(opts, times);
        }
        opts.callback = callback;
        opts.task = task;

        function wrappedTask(wrappedCallback, wrappedResults) {
            function retryAttempt(task, finalAttempt) {
                return function(seriesCallback) {
                    task(function(err, result){
                        seriesCallback(!err || finalAttempt, {err: err, result: result});
                    }, wrappedResults);
                };
            }

            function retryInterval(interval){
                return function(seriesCallback){
                    setTimeout(function(){
                        seriesCallback(null);
                    }, interval);
                };
            }

            while (opts.times) {

                var finalAttempt = !(opts.times-=1);
                attempts.push(retryAttempt(opts.task, finalAttempt));
                if(!finalAttempt && opts.interval > 0){
                    attempts.push(retryInterval(opts.interval));
                }
            }

            async.series(attempts, function(done, data){
                data = data[data.length - 1];
                (wrappedCallback || opts.callback)(data.err, data.result);
            });
        }

        // If a callback is passed, run this as a controll flow
        return opts.callback ? wrappedTask() : wrappedTask;
    };

    async.waterfall = function (tasks, callback) {
        callback = _once(callback || noop);
        if (!_isArray(tasks)) {
            var err = new Error('First argument to waterfall must be an array of functions');
            return callback(err);
        }
        if (!tasks.length) {
            return callback();
        }
        function wrapIterator(iterator) {
            return _restParam(function (err, args) {
                if (err) {
                    callback.apply(null, [err].concat(args));
                }
                else {
                    var next = iterator.next();
                    if (next) {
                        args.push(wrapIterator(next));
                    }
                    else {
                        args.push(callback);
                    }
                    ensureAsync(iterator).apply(null, args);
                }
            });
        }
        wrapIterator(async.iterator(tasks))();
    };

    function _parallel(eachfn, tasks, callback) {
        callback = callback || noop;
        var results = _isArrayLike(tasks) ? [] : {};

        eachfn(tasks, function (task, key, callback) {
            task(_restParam(function (err, args) {
                if (args.length <= 1) {
                    args = args[0];
                }
                results[key] = args;
                callback(err);
            }));
        }, function (err) {
            callback(err, results);
        });
    }

    async.parallel = function (tasks, callback) {
        _parallel(async.eachOf, tasks, callback);
    };

    async.parallelLimit = function(tasks, limit, callback) {
        _parallel(_eachOfLimit(limit), tasks, callback);
    };

    async.series = function(tasks, callback) {
        _parallel(async.eachOfSeries, tasks, callback);
    };

    async.iterator = function (tasks) {
        function makeCallback(index) {
            function fn() {
                if (tasks.length) {
                    tasks[index].apply(null, arguments);
                }
                return fn.next();
            }
            fn.next = function () {
                return (index < tasks.length - 1) ? makeCallback(index + 1): null;
            };
            return fn;
        }
        return makeCallback(0);
    };

    async.apply = _restParam(function (fn, args) {
        return _restParam(function (callArgs) {
            return fn.apply(
                null, args.concat(callArgs)
            );
        });
    });

    function _concat(eachfn, arr, fn, callback) {
        var result = [];
        eachfn(arr, function (x, index, cb) {
            fn(x, function (err, y) {
                result = result.concat(y || []);
                cb(err);
            });
        }, function (err) {
            callback(err, result);
        });
    }
    async.concat = doParallel(_concat);
    async.concatSeries = doSeries(_concat);

    async.whilst = function (test, iterator, callback) {
        callback = callback || noop;
        if (test()) {
            var next = _restParam(function(err, args) {
                if (err) {
                    callback(err);
                } else if (test.apply(this, args)) {
                    iterator(next);
                } else {
                    callback.apply(null, [null].concat(args));
                }
            });
            iterator(next);
        } else {
            callback(null);
        }
    };

    async.doWhilst = function (iterator, test, callback) {
        var calls = 0;
        return async.whilst(function() {
            return ++calls <= 1 || test.apply(this, arguments);
        }, iterator, callback);
    };

    async.until = function (test, iterator, callback) {
        return async.whilst(function() {
            return !test.apply(this, arguments);
        }, iterator, callback);
    };

    async.doUntil = function (iterator, test, callback) {
        return async.doWhilst(iterator, function() {
            return !test.apply(this, arguments);
        }, callback);
    };

    async.during = function (test, iterator, callback) {
        callback = callback || noop;

        var next = _restParam(function(err, args) {
            if (err) {
                callback(err);
            } else {
                args.push(check);
                test.apply(this, args);
            }
        });

        var check = function(err, truth) {
            if (err) {
                callback(err);
            } else if (truth) {
                iterator(next);
            } else {
                callback(null);
            }
        };

        test(check);
    };

    async.doDuring = function (iterator, test, callback) {
        var calls = 0;
        async.during(function(next) {
            if (calls++ < 1) {
                next(null, true);
            } else {
                test.apply(this, arguments);
            }
        }, iterator, callback);
    };

    function _queue(worker, concurrency, payload) {
        if (concurrency == null) {
            concurrency = 1;
        }
        else if(concurrency === 0) {
            throw new Error('Concurrency must not be zero');
        }
        function _insert(q, data, pos, callback) {
            if (callback != null && typeof callback !== "function") {
                throw new Error("task callback must be a function");
            }
            q.started = true;
            if (!_isArray(data)) {
                data = [data];
            }
            if(data.length === 0 && q.idle()) {
                // call drain immediately if there are no tasks
                return async.setImmediate(function() {
                    q.drain();
                });
            }
            _arrayEach(data, function(task) {
                var item = {
                    data: task,
                    callback: callback || noop
                };

                if (pos) {
                    q.tasks.unshift(item);
                } else {
                    q.tasks.push(item);
                }

                if (q.tasks.length === q.concurrency) {
                    q.saturated();
                }
            });
            async.setImmediate(q.process);
        }
        function _next(q, tasks) {
            return function(){
                workers -= 1;

                var removed = false;
                var args = arguments;
                _arrayEach(tasks, function (task) {
                    _arrayEach(workersList, function (worker, index) {
                        if (worker === task && !removed) {
                            workersList.splice(index, 1);
                            removed = true;
                        }
                    });

                    task.callback.apply(task, args);
                });
                if (q.tasks.length + workers === 0) {
                    q.drain();
                }
                q.process();
            };
        }

        var workers = 0;
        var workersList = [];
        var q = {
            tasks: [],
            concurrency: concurrency,
            payload: payload,
            saturated: noop,
            empty: noop,
            drain: noop,
            started: false,
            paused: false,
            push: function (data, callback) {
                _insert(q, data, false, callback);
            },
            kill: function () {
                q.drain = noop;
                q.tasks = [];
            },
            unshift: function (data, callback) {
                _insert(q, data, true, callback);
            },
            process: function () {
                while(!q.paused && workers < q.concurrency && q.tasks.length){

                    var tasks = q.payload ?
                        q.tasks.splice(0, q.payload) :
                        q.tasks.splice(0, q.tasks.length);

                    var data = _map(tasks, function (task) {
                        return task.data;
                    });

                    if (q.tasks.length === 0) {
                        q.empty();
                    }
                    workers += 1;
                    workersList.push(tasks[0]);
                    var cb = only_once(_next(q, tasks));
                    worker(data, cb);
                }
            },
            length: function () {
                return q.tasks.length;
            },
            running: function () {
                return workers;
            },
            workersList: function () {
                return workersList;
            },
            idle: function() {
                return q.tasks.length + workers === 0;
            },
            pause: function () {
                q.paused = true;
            },
            resume: function () {
                if (q.paused === false) { return; }
                q.paused = false;
                var resumeCount = Math.min(q.concurrency, q.tasks.length);
                // Need to call q.process once per concurrent
                // worker to preserve full concurrency after pause
                for (var w = 1; w <= resumeCount; w++) {
                    async.setImmediate(q.process);
                }
            }
        };
        return q;
    }

    async.queue = function (worker, concurrency) {
        var q = _queue(function (items, cb) {
            worker(items[0], cb);
        }, concurrency, 1);

        return q;
    };

    async.priorityQueue = function (worker, concurrency) {

        function _compareTasks(a, b){
            return a.priority - b.priority;
        }

        function _binarySearch(sequence, item, compare) {
            var beg = -1,
                end = sequence.length - 1;
            while (beg < end) {
                var mid = beg + ((end - beg + 1) >>> 1);
                if (compare(item, sequence[mid]) >= 0) {
                    beg = mid;
                } else {
                    end = mid - 1;
                }
            }
            return beg;
        }

        function _insert(q, data, priority, callback) {
            if (callback != null && typeof callback !== "function") {
                throw new Error("task callback must be a function");
            }
            q.started = true;
            if (!_isArray(data)) {
                data = [data];
            }
            if(data.length === 0) {
                // call drain immediately if there are no tasks
                return async.setImmediate(function() {
                    q.drain();
                });
            }
            _arrayEach(data, function(task) {
                var item = {
                    data: task,
                    priority: priority,
                    callback: typeof callback === 'function' ? callback : noop
                };

                q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);

                if (q.tasks.length === q.concurrency) {
                    q.saturated();
                }
                async.setImmediate(q.process);
            });
        }

        // Start with a normal queue
        var q = async.queue(worker, concurrency);

        // Override push to accept second parameter representing priority
        q.push = function (data, priority, callback) {
            _insert(q, data, priority, callback);
        };

        // Remove unshift function
        delete q.unshift;

        return q;
    };

    async.cargo = function (worker, payload) {
        return _queue(worker, 1, payload);
    };

    function _console_fn(name) {
        return _restParam(function (fn, args) {
            fn.apply(null, args.concat([_restParam(function (err, args) {
                if (typeof console === 'object') {
                    if (err) {
                        if (console.error) {
                            console.error(err);
                        }
                    }
                    else if (console[name]) {
                        _arrayEach(args, function (x) {
                            console[name](x);
                        });
                    }
                }
            })]));
        });
    }
    async.log = _console_fn('log');
    async.dir = _console_fn('dir');
    /*async.info = _console_fn('info');
    async.warn = _console_fn('warn');
    async.error = _console_fn('error');*/

    async.memoize = function (fn, hasher) {
        var memo = {};
        var queues = {};
        var has = Object.prototype.hasOwnProperty;
        hasher = hasher || identity;
        var memoized = _restParam(function memoized(args) {
            var callback = args.pop();
            var key = hasher.apply(null, args);
            if (has.call(memo, key)) {
                async.setImmediate(function () {
                    callback.apply(null, memo[key]);
                });
            }
            else if (has.call(queues, key)) {
                queues[key].push(callback);
            }
            else {
                queues[key] = [callback];
                fn.apply(null, args.concat([_restParam(function (args) {
                    memo[key] = args;
                    var q = queues[key];
                    delete queues[key];
                    for (var i = 0, l = q.length; i < l; i++) {
                        q[i].apply(null, args);
                    }
                })]));
            }
        });
        memoized.memo = memo;
        memoized.unmemoized = fn;
        return memoized;
    };

    async.unmemoize = function (fn) {
        return function () {
            return (fn.unmemoized || fn).apply(null, arguments);
        };
    };

    function _times(mapper) {
        return function (count, iterator, callback) {
            mapper(_range(count), iterator, callback);
        };
    }

    async.times = _times(async.map);
    async.timesSeries = _times(async.mapSeries);
    async.timesLimit = function (count, limit, iterator, callback) {
        return async.mapLimit(_range(count), limit, iterator, callback);
    };

    async.seq = function (/* functions... */) {
        var fns = arguments;
        return _restParam(function (args) {
            var that = this;

            var callback = args[args.length - 1];
            if (typeof callback == 'function') {
                args.pop();
            } else {
                callback = noop;
            }

            async.reduce(fns, args, function (newargs, fn, cb) {
                fn.apply(that, newargs.concat([_restParam(function (err, nextargs) {
                    cb(err, nextargs);
                })]));
            },
            function (err, results) {
                callback.apply(that, [err].concat(results));
            });
        });
    };

    async.compose = function (/* functions... */) {
        return async.seq.apply(null, Array.prototype.reverse.call(arguments));
    };


    function _applyEach(eachfn) {
        return _restParam(function(fns, args) {
            var go = _restParam(function(args) {
                var that = this;
                var callback = args.pop();
                return eachfn(fns, function (fn, _, cb) {
                    fn.apply(that, args.concat([cb]));
                },
                callback);
            });
            if (args.length) {
                return go.apply(this, args);
            }
            else {
                return go;
            }
        });
    }

    async.applyEach = _applyEach(async.eachOf);
    async.applyEachSeries = _applyEach(async.eachOfSeries);


    async.forever = function (fn, callback) {
        var done = only_once(callback || noop);
        var task = ensureAsync(fn);
        function next(err) {
            if (err) {
                return done(err);
            }
            task(next);
        }
        next();
    };

    function ensureAsync(fn) {
        return _restParam(function (args) {
            var callback = args.pop();
            args.push(function () {
                var innerArgs = arguments;
                if (sync) {
                    async.setImmediate(function () {
                        callback.apply(null, innerArgs);
                    });
                } else {
                    callback.apply(null, innerArgs);
                }
            });
            var sync = true;
            fn.apply(this, args);
            sync = false;
        });
    }

    async.ensureAsync = ensureAsync;

    async.constant = _restParam(function(values) {
        var args = [null].concat(values);
        return function (callback) {
            return callback.apply(this, args);
        };
    });

    async.wrapSync =
    async.asyncify = function asyncify(func) {
        return _restParam(function (args) {
            var callback = args.pop();
            var result;
            try {
                result = func.apply(this, args);
            } catch (e) {
                return callback(e);
            }
            // if result is Promise object
            if (_isObject(result) && typeof result.then === "function") {
                result.then(function(value) {
                    callback(null, value);
                })["catch"](function(err) {
                    callback(err.message ? err : new Error(err));
                });
            } else {
                callback(null, result);
            }
        });
    };

    // Node.js
    if (typeof module === 'object' && module.exports) {
        module.exports = async;
    }
    // AMD / RequireJS
    else if (typeof define === 'function' && define.amd) {
        define([], function () {
            return async;
        });
    }
    // included directly via <script> tag
    else {
        root.async = async;
    }

}());

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":15}],15:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}]},{},[1])(1)
});
</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46457317-5', 'auto');
</script><script>//~~WEBPATH~~javascript/closure/base.js
var fa;
//~~WEBPATH~~javascript/closure/deps.js
//~~WEBPATH~~/polymer/polymer-micro.html.js
(function(){function a(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",a):"interactive"===document.readyState||"complete"===document.readyState?a():addEventListener("DOMContentLoaded",a)})();var na=window,va=window.Polymer||{};if(!va.noUrlSettings)for(var wa=location.search.slice(1).split("\x26"),Da=0,Ga;Da<wa.length&&(Ga=wa[Da]);Da++)Ga=Ga.split("\x3d"),Ga[0]&&(va[Ga[0]]=Ga[1]||!0);va.wantShadow="shadow"===va.dom;va.hasShadow=!!Element.prototype.createShadowRoot;
va.nativeShadow=va.hasShadow&&!window.ShadowDOMPolyfill;va.useShadow=va.wantShadow&&va.hasShadow;va.hasNativeImports="import"in document.createElement("link");va.useNativeImports=va.hasNativeImports;va.useNativeCustomElements=!window.CustomElements||window.CustomElements.useNative;va.useNativeShadow=va.useShadow&&va.nativeShadow;va.usePolyfillProto=!va.useNativeCustomElements&&!Object.__proto__;
va.hasNativeCSSProperties=!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)");va.useNativeCSSProperties=va.hasNativeCSSProperties&&va.lazyRegister&&va.useNativeCSSProperties;va.isIE=navigator.userAgent.match("Trident");va.passiveTouchGestures=va.passiveTouchGestures||!1;na.Polymer={Settings:va};
(function(){function a(d){var e=Polymer.Base;d.extends&&(e=Polymer.Base._getExtendedPrototype(d.extends));d=Polymer.Base.chainObject(d,e);d.registerCallback();return d}var b=window.Polymer;window.Polymer=function(d){"function"===typeof d&&(d=d.prototype);d||(d={});d=a(d);var e=d===d.constructor.prototype?d.constructor:null,g={prototype:d};d.extends&&(g.extends=d.extends);Polymer.telemetry._registrate(d);d=document.registerElement(d.is,g);return e||d};if(b)for(var c in b)Polymer[c]=b[c];Polymer.Class=
function(d){d.factoryImpl||(d.factoryImpl=function(){});return a(d).constructor}})();Polymer.telemetry={registrations:[],_regLog:function(a){console.log("["+a.is+"]: registered")},_registrate:function(a){this.registrations.push(a);Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}};Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript||{}).ownerDocument}});
Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(a){this._ready?a():this._callbacks.push(a)},_makeReady:function(){this._ready=!0;for(var a=0;a<this._callbacks.length;a++)this._callbacks[a]();this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})},_afterNextRenderQueue:[],_waitingNextRender:!1,afterNextRender:function(a,b,c){this._watchNextRender();this._afterNextRenderQueue.push([a,b,c])},hasRendered:function(){return this._ready},
_watchNextRender:function(){if(!this._waitingNextRender){this._waitingNextRender=!0;var a=function(){Polymer.RenderStatus._flushNextRender()};this._ready?requestAnimationFrame(a):this.whenReady(a)}},_flushNextRender:function(){var a=this;setTimeout(function(){a._flushRenderCallbacks(a._afterNextRenderQueue);a._afterNextRenderQueue=[];a._waitingNextRender=!1})},_flushRenderCallbacks:function(a){for(var b=0,c;b<a.length;b++)c=a[b],c[1].apply(c[0],c[2]||Polymer.nar)}};
window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender();Polymer.ImportStatus=Polymer.RenderStatus;Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady;
(function(){var a=Polymer.Settings;Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(d){this.mixin(this,d)},registerCallback:function(){if("max"!==a.lazyRegister){this._desugarBehaviors();for(var d=0,e;d<this.behaviors.length;d++)e=this.behaviors[d],e.beforeRegister&&e.beforeRegister.call(this)}this.beforeRegister&&this.beforeRegister();this._registerFeatures();a.lazyRegister||this.ensureRegisterFinished()},createdCallback:function(){if(a.disableUpgradeEnabled){if(this.hasAttribute("disable-upgrade")){this._propertySetter=
b;this._configValue=null;this.__data__={};return}this.__hasInitialized=!0}this.__initialize()},__initialize:function(){this.__hasRegisterFinished||this._ensureRegisterFinished(this.__proto__);Polymer.telemetry.instanceCount++;this.root=this;for(var d=0,e;d<this.behaviors.length;d++)e=this.behaviors[d],e.created&&e.created.call(this);this.created&&this.created();this._initFeatures()},ensureRegisterFinished:function(){this._ensureRegisterFinished(this)},_ensureRegisterFinished:function(d){if(d.__hasRegisterFinished!==
d.is||!d.is){if("max"===a.lazyRegister){d._desugarBehaviors();for(var e=0,g;e<d.behaviors.length;e++)g=d.behaviors[e],g.beforeRegister&&g.beforeRegister.call(d)}d.__hasRegisterFinished=d.is;d._finishRegisterFeatures&&d._finishRegisterFeatures();for(e=0;e<d.behaviors.length;e++)g=d.behaviors[e],g.registered&&g.registered.call(d);d.registered&&d.registered();a.usePolyfillProto&&d!==this&&d.extend(this,d)}},attachedCallback:function(){var d=this;Polymer.RenderStatus.whenReady(function(){d.isAttached=
!0;for(var e=0,g;e<d.behaviors.length;e++)g=d.behaviors[e],g.attached&&g.attached.call(d);d.attached&&d.attached()})},detachedCallback:function(){var d=this;Polymer.RenderStatus.whenReady(function(){d.isAttached=!1;for(var e=0,g;e<d.behaviors.length;e++)g=d.behaviors[e],g.detached&&g.detached.call(d);d.detached&&d.detached()})},attributeChangedCallback:function(d,e,g){this._attributeChangedImpl(d);for(var h=0,k;h<this.behaviors.length;h++)k=this.behaviors[h],k.attributeChanged&&k.attributeChanged.call(this,
d,e,g);this.attributeChanged&&this.attributeChanged(d,e,g)},_attributeChangedImpl:function(d){this._setAttributeToProperty(this,d)},extend:function(d,e){if(d&&e)for(var g=Object.getOwnPropertyNames(e),h=0,k;h<g.length&&(k=g[h]);h++)this.copyOwnProperty(k,e,d);return d||e},mixin:function(d,e){for(var g in e)d[g]=e[g];return d},copyOwnProperty:function(d,e,g){(e=Object.getOwnPropertyDescriptor(e,d))&&Object.defineProperty(g,d,e)},_logger:function(d,e){1===e.length&&Array.isArray(e[0])&&(e=e[0]);switch(d){case "log":case "warn":case "error":console[d].apply(console,
e)}},_log:function(){this._logger("log",Array.prototype.slice.call(arguments,0))},_warn:function(){this._logger("warn",Array.prototype.slice.call(arguments,0))},_error:function(){this._logger("error",Array.prototype.slice.call(arguments,0))},_logf:function(){return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments,0))}};Polymer.Base._logPrefix=window.chrome&&!/edge/i.test(navigator.userAgent)||/firefox/i.test(navigator.userAgent)?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:
["[%s::%s]:"];Polymer.Base.chainObject=function(d,e){d&&e&&d!==e&&(Object.__proto__||(d=Polymer.Base.extend(Object.create(e),d)),d.__proto__=e);return d};Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype);Polymer.BaseDescriptors={};if(a.disableUpgradeEnabled){var b=function(d,e){this.__data__[d]=e};var c=Polymer.Base.attributeChangedCallback;Polymer.Base.attributeChangedCallback=function(d,e,g){this.__hasInitialized||"disable-upgrade"!==d||(this.__hasInitialized=!0,this._propertySetter=
Polymer.Bind._modelApi._propertySetter,this._configValue=Polymer.Base._configValue,this.__initialize());c.call(this,d,e,g)}}Polymer.instanceof=window.CustomElements?CustomElements.instanceof:function(d,e){return d instanceof e};Polymer.isInstance=function(d){return!(!d||!d.__isPolymerInstance__)};Polymer.telemetry.instanceCount=0})();
(function(){function a(){return document.createElement("dom-module")}var b={},c={};a.prototype=Object.create(HTMLElement.prototype);Polymer.Base.mixin(a.prototype,{createdCallback:function(){this.register()},register:function(e){if(e=e||this.id||this.getAttribute("name")||this.getAttribute("is"))this.id=e,b[e]=this,c[e.toLowerCase()]=this},import:function(e,g){if(e){var h=b[e]||c[e.toLowerCase()];if(!h){if(d){h=document._currentScript||document.currentScript;h=(h&&h.ownerDocument||document).querySelectorAll("dom-module");
for(var k=h.length-1,l;0<=k&&(l=h[k])&&!l.__upgraded__;k--)CustomElements.upgrade(l)}h=b[e]||c[e.toLowerCase()]}h&&g&&(h=h.querySelector(g));return h}}});Object.defineProperty(a.prototype,"constructor",{value:a,configurable:!0,writable:!0});var d=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",a)})();
Polymer.Base._addFeature({_prepIs:function(){if(!this.is){var a=(document._currentScript||document.currentScript).parentNode;"dom-module"===a.localName&&(this.is=a.id||a.getAttribute("name")||a.getAttribute("is"))}this.is&&(this.is=this.is.toLowerCase())}});
Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(a){var b=[];a=this._flattenBehaviorsList(a);for(var c=a.length-1;0<=c;c--){var d=a[c];-1===b.indexOf(d)&&(this._mixinBehavior(d),b.unshift(d))}return b},_flattenBehaviorsList:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d instanceof Array?b=b.concat(this._flattenBehaviorsList(d)):d?b.push(d):this._warn(this._logf("_flattenBehaviorsList",
"behavior is null, check for missing or 404 import"))}return b},_mixinBehavior:function(a){for(var b=Object.getOwnPropertyNames(a),c=a._noAccessors,d=0,e;d<b.length&&(e=b[d]);d++)Polymer.Base._behaviorProperties[e]||this.hasOwnProperty(e)||(c?this[e]=a[e]:this.copyOwnProperty(e,a,this))},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(a){for(var b=0,c=a.length;b<c;b++)this._prepBehavior(a[b]);this._prepBehavior(this)},_marshalBehaviors:function(){for(var a=
0;a<this.behaviors.length;a++)this._marshalBehavior(this.behaviors[a]);this._marshalBehavior(this)}});Polymer.Base._behaviorProperties={hostAttributes:!0,beforeRegister:!0,registered:!0,properties:!0,observers:!0,listeners:!0,created:!0,attached:!0,detached:!0,attributeChanged:!0,ready:!0,_noAccessors:!0};
Polymer.Base._addFeature({_getExtendedPrototype:function(a){return this._getExtendedNativePrototype(a)},_nativePrototypes:{},_getExtendedNativePrototype:function(a){var b=this._nativePrototypes[a];if(!b){b=Object.create(this.getNativePrototype(a));for(var c=Object.getOwnPropertyNames(Polymer.Base),d=0,e;d<c.length&&(e=c[d]);d++)Polymer.BaseDescriptors[e]||(b[e]=Polymer.Base[e]);Object.defineProperties(b,Polymer.BaseDescriptors);this._nativePrototypes[a]=b}return b},getNativePrototype:function(a){return Object.getPrototypeOf(document.createElement(a))}});
Polymer.Base._addFeature({_prepConstructor:function(){function a(){return this._factory(arguments)}this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];this.hasOwnProperty("extends")&&(a.extends=this.extends);Object.defineProperty(this,"constructor",{value:a,writable:!0,configurable:!0});a.prototype=this},_factory:function(a){var b=document.createElement.apply(document,this._factoryArgs);this.factoryImpl&&this.factoryImpl.apply(b,a);return b}});Polymer.nob=Object.create(null);
Polymer.Base._addFeature({getPropertyInfo:function(a){var b=this._getPropertyInfo(a,this.properties);if(!b)for(var c=0;c<this.behaviors.length;c++)if(b=this._getPropertyInfo(a,this.behaviors[c].properties))return b;return b||Polymer.nob},_getPropertyInfo:function(a,b){var c=b&&b[a];"function"===typeof c&&(c=b[a]={type:c});c&&(c.defined=!0);return c},_prepPropertyInfo:function(){this._propertyInfo={};for(var a=0;a<this.behaviors.length;a++)this._addPropertyInfo(this._propertyInfo,this.behaviors[a].properties);
this._addPropertyInfo(this._propertyInfo,this.properties);this._addPropertyInfo(this._propertyInfo,this._propertyEffects)},_addPropertyInfo:function(a,b){if(b){var c;for(c in b){var d=a[c];var e=b[c];if("_"!==c[0]||e.readOnly)a[c]?(d.type||(d.type=e.type),d.readOnly||(d.readOnly=e.readOnly)):a[c]={type:"function"===typeof e?e:e.type,readOnly:e.readOnly,attribute:Polymer.CaseMap.camelToDashCase(c)}}}}});var Ha={configurable:!0,writable:!0,enumerable:!0,value:{}};
Polymer.BaseDescriptors.properties=Ha;Object.defineProperty(Polymer.Base,"properties",Ha);Polymer.CaseMap={_caseMap:{},_rx:{dashToCamel:/-[a-z]/g,camelToDash:/([A-Z])/g},dashToCamelCase:function(a){return this._caseMap[a]||(this._caseMap[a]=0>a.indexOf("-")?a:a.replace(this._rx.dashToCamel,function(b){return b[1].toUpperCase()}))},camelToDashCase:function(a){return this._caseMap[a]||(this._caseMap[a]=a.replace(this._rx.camelToDash,"-$1").toLowerCase())}};
Polymer.Base._addFeature({_addHostAttributes:function(a){this._aggregatedAttributes||(this._aggregatedAttributes={});a&&this.mixin(this._aggregatedAttributes,a)},_marshalHostAttributes:function(){this._aggregatedAttributes&&this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(a,b){for(var c in b)this.hasAttribute(c)||"class"===c||this.serializeValueToAttribute(b[c],c,this)},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(a){if(this.hasAttributes())for(var b in this._propertyInfo){var c=
this._propertyInfo[b];this.hasAttribute(c.attribute)&&this._setAttributeToProperty(a,c.attribute,b,c)}},_setAttributeToProperty:function(a,b,c,d){this._serializing||(c=c||Polymer.CaseMap.dashToCamelCase(b),(d=d||this._propertyInfo&&this._propertyInfo[c])&&!d.readOnly&&(b=this.getAttribute(b),a[c]=this.deserialize(b,d.type)))},_serializing:!1,reflectPropertyToAttribute:function(a,b,c){this._serializing=!0;c=void 0===c?this[a]:c;this.serializeValueToAttribute(c,b||Polymer.CaseMap.camelToDashCase(a));
this._serializing=!1},serializeValueToAttribute:function(a,b,c){a=this.serialize(a);c=c||this;void 0===a?c.removeAttribute(b):c.setAttribute(b,a)},deserialize:function(a,b){switch(b){case Number:a=Number(a);break;case Boolean:a=null!=a;break;case Object:try{a=JSON.parse(a)}catch(c){}break;case Array:try{a=JSON.parse(a)}catch(c){a=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:a=new Date(a)}return a},serialize:function(a){switch(typeof a){case "boolean":return a?
"":void 0;case "object":if(a instanceof Date)return a.toString();if(a)try{return JSON.stringify(a)}catch(b){return""}default:return null!=a?a:void 0}}});Polymer.version="1.11.3";Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this._prepBehaviors();this._prepConstructor();this._prepPropertyInfo()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_marshalBehavior:function(){},_initFeatures:function(){this._marshalHostAttributes();this._marshalBehaviors()}});
</script>











<script>//~~WEBPATH~~/polymer/polymer-mini.html.js
(function(){function a(m,n){return m.replace(g,function(q,p,t,r){return p+"'"+b(t.replace(/["']/g,""),n)+"'"+r})}function b(m,n){if(m&&k.test(m))return m;n=n.body.__urlResolver||(n.body.__urlResolver=n.createElement("a"));n.href=m;return n.href||m}function c(m){return m.substring(0,m.lastIndexOf("/")+1)}var d,e,g=/(url\()([^)]*)(\))/g,h={"*":["href","src","style","url"],form:["action"]},k=/(^\/)|(^#)|(^[\w-\d]*:)/,l=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:a,resolveAttrs:function(m,n){for(var q in h)for(var p=
h[q],t=0,r=p.length,v,u,w;t<r&&(v=p[t]);t++)("*"===q||m.localName===q)&&(w=(u=m.attributes[v])&&u.value)&&0>w.search(l)&&(u.value="style"===v?a(w,n):b(w,n))},resolveUrl:function(m,n){d||(d=document.implementation.createHTMLDocument("temp"),e=d.createElement("base"),d.head.appendChild(e));e.href=n;return b(m,d)},pathFromUrl:c};Polymer.rootPath=Polymer.Settings.rootPath||c(document.baseURI||window.location.href)})();
Polymer.Base._addFeature({_prepTemplate:function(){var a;void 0===this._template&&(this._template=(a=Polymer.DomModule.import(this.is))&&a.querySelector("template"));if(a){var b=a.getAttribute("assetpath")||"";a=Polymer.ResolveUrl.resolveUrl(b,a.ownerDocument.baseURI);this._importPath=Polymer.ResolveUrl.pathFromUrl(a)}else this._importPath="";this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,
"Move inside simple \x3ctemplate\x3e."));this._template&&!this._template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(this._template)},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(a){return document.importNode(a._content||a.content,!0)}});
(function(){var a=Polymer.Base.attachedCallback,b=Polymer.Base.detachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_registerHost:function(c){(this.dataHost=c=c||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1])&&c._clients&&c._clients.push(this);this._clients=null;this._clientsReadied=!1},_beginHosting:function(){Polymer.Base._hostStack.push(this);this._clients||(this._clients=[])},_endHosting:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._readied=
!1;this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady();this._template&&(this._setupRoot(),this._readyClients());this._clientsReadied=!0;this._clients=null;this._afterClientsReady();this._readySelf()},_readyClients:function(){this._beginDistribute();var c=this._clients;if(c)for(var d=0,e=c.length,g;d<e&&(g=c[d]);d++)g._ready();this._finishDistribute()},_readySelf:function(){for(var c=0,d;c<this.behaviors.length;c++)d=
this.behaviors[c],d.ready&&d.ready.call(this);this.ready&&this.ready();this._readied=!0;this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),a.call(this)):this._attachedPending=!0},detachedCallback:function(){this._readied?b.call(this):this._attachedPending=!1}})})();
Polymer.ArraySplice=function(){function a(c,d,e){return{index:c,removed:d,addedCount:e}}function b(){}b.prototype={calcEditDistances:function(c,d,e,g,h,k){k=k-h+1;e=e-d+1;for(var l=Array(k),m=0;m<k;m++)l[m]=Array(e),l[m][0]=m;for(var n=0;n<e;n++)l[0][n]=n;for(m=1;m<k;m++)for(n=1;n<e;n++)if(this.equals(c[d+n-1],g[h+m-1]))l[m][n]=l[m-1][n-1];else{var q=l[m-1][n]+1,p=l[m][n-1]+1;l[m][n]=q<p?q:p}return l},spliceOperationsFromEditDistances:function(c){for(var d=c.length-1,e=c[0].length-1,g=c[d][e],h=[];0<
d||0<e;)if(0==d)h.push(2),e--;else if(0==e)h.push(3),d--;else{var k=c[d-1][e-1],l=c[d-1][e],m=c[d][e-1];var n=l<m?l<k?l:k:m<k?m:k;n==k?(k==g?h.push(0):(h.push(1),g=k),d--,e--):n==l?(h.push(3),d--,g=l):(h.push(2),e--,g=m)}h.reverse();return h},calcSplices:function(c,d,e,g,h,k){var l=0,m=0,n=Math.min(e-d,k-h);0==d&&0==h&&(l=this.sharedPrefix(c,g,n));e==c.length&&k==g.length&&(m=this.sharedSuffix(c,g,n-l));d+=l;h+=l;e-=m;k-=m;if(0==e-d&&0==k-h)return[];if(d==e){for(c=a(d,[],0);h<k;)c.removed.push(g[h++]);
return[c]}if(h==k)return[a(d,[],e-d)];k=this.spliceOperationsFromEditDistances(this.calcEditDistances(c,d,e,g,h,k));c=void 0;e=[];for(l=0;l<k.length;l++)switch(k[l]){case 0:c&&(e.push(c),c=void 0);d++;h++;break;case 1:c||(c=a(d,[],0));c.addedCount++;d++;c.removed.push(g[h]);h++;break;case 2:c||(c=a(d,[],0));c.addedCount++;d++;break;case 3:c||(c=a(d,[],0)),c.removed.push(g[h]),h++}c&&e.push(c);return e},sharedPrefix:function(c,d,e){for(var g=0;g<e;g++)if(!this.equals(c[g],d[g]))return g;return e},
sharedSuffix:function(c,d,e){for(var g=c.length,h=d.length,k=0;k<e&&this.equals(c[--g],d[--h]);)k++;return k},calculateSplices:function(c,d){return this.calcSplices(c,0,c.length,d,0,d.length)},equals:function(c,d){return c===d}};return new b}();
Polymer.domInnerHTML=function(){function a(k){switch(k){case "\x26":return"\x26amp;";case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";case '"':return"\x26quot;";case "\u00a0":return"\x26nbsp;"}}function b(k){for(var l={},m=0;m<k.length;m++)l[k[m]]=!0;return l}function c(k,l){k instanceof HTMLTemplateElement&&(k=k.content);for(var m="",n=Polymer.dom(k).childNodes,q=0,p=n.length,t;q<p&&(t=n[q]);q++){a:{var r=t;var v=k;var u=l;switch(r.nodeType){case Node.ELEMENT_NODE:for(var w=r.localName,x=
"\x3c"+w,A=r.attributes,y=0;v=A[y];y++)x+=" "+v.name+'\x3d"'+v.value.replace(d,a)+'"';x+="\x3e";r=g[w]?x:x+c(r,u)+"\x3c/"+w+"\x3e";break a;case Node.TEXT_NODE:r=r.data;r=v&&h[v.localName]?r:r.replace(e,a);break a;case Node.COMMENT_NODE:r="\x3c!--"+r.data+"--\x3e";break a;default:throw console.error(r),Error("not implemented");}}m+=r}return m}var d=/[&\u00A0"]/g,e=/[&\u00A0<>]/g,g=b("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),h=b("style script xmp iframe noembed noframes plaintext noscript".split(" "));
return{getInnerHTML:c}}();
(function(){var a=Element.prototype.insertBefore,b=Element.prototype.appendChild,c=Element.prototype.removeChild;Polymer.TreeApi={arrayCopyChildNodes:function(d){var e=[],g=0;for(d=d.firstChild;d;d=d.nextSibling)e[g++]=d;return e},arrayCopyChildren:function(d){var e=[],g=0;for(d=d.firstElementChild;d;d=d.nextElementSibling)e[g++]=d;return e},arrayCopy:function(d){for(var e=d.length,g=Array(e),h=0;h<e;h++)g[h]=d[h];return g}};Polymer.TreeApi.Logical={hasParentNode:function(d){return!(!d.__dom||!d.__dom.parentNode)},
hasChildNodes:function(d){return!(!d.__dom||void 0===d.__dom.childNodes)},getChildNodes:function(d){return this.hasChildNodes(d)?this._getChildNodes(d):d.childNodes},_getChildNodes:function(d){if(!d.__dom.childNodes){d.__dom.childNodes=[];for(var e=d.__dom.firstChild;e;e=e.__dom.nextSibling)d.__dom.childNodes.push(e)}return d.__dom.childNodes},getParentNode:function(d){return d.__dom&&void 0!==d.__dom.parentNode?d.__dom.parentNode:d.parentNode},getFirstChild:function(d){return d.__dom&&void 0!==d.__dom.firstChild?
d.__dom.firstChild:d.firstChild},getLastChild:function(d){return d.__dom&&void 0!==d.__dom.lastChild?d.__dom.lastChild:d.lastChild},getNextSibling:function(d){return d.__dom&&void 0!==d.__dom.nextSibling?d.__dom.nextSibling:d.nextSibling},getPreviousSibling:function(d){return d.__dom&&void 0!==d.__dom.previousSibling?d.__dom.previousSibling:d.previousSibling},getFirstElementChild:function(d){return d.__dom&&void 0!==d.__dom.firstChild?this._getFirstElementChild(d):d.firstElementChild},_getFirstElementChild:function(d){for(d=
d.__dom.firstChild;d&&d.nodeType!==Node.ELEMENT_NODE;)d=d.__dom.nextSibling;return d},getLastElementChild:function(d){return d.__dom&&void 0!==d.__dom.lastChild?this._getLastElementChild(d):d.lastElementChild},_getLastElementChild:function(d){for(d=d.__dom.lastChild;d&&d.nodeType!==Node.ELEMENT_NODE;)d=d.__dom.previousSibling;return d},getNextElementSibling:function(d){return d.__dom&&void 0!==d.__dom.nextSibling?this._getNextElementSibling(d):d.nextElementSibling},_getNextElementSibling:function(d){for(d=
d.__dom.nextSibling;d&&d.nodeType!==Node.ELEMENT_NODE;)d=d.__dom.nextSibling;return d},getPreviousElementSibling:function(d){return d.__dom&&void 0!==d.__dom.previousSibling?this._getPreviousElementSibling(d):d.previousElementSibling},_getPreviousElementSibling:function(d){for(d=d.__dom.previousSibling;d&&d.nodeType!==Node.ELEMENT_NODE;)d=d.__dom.previousSibling;return d},saveChildNodes:function(d){if(!this.hasChildNodes(d)){d.__dom=d.__dom||{};d.__dom.firstChild=d.firstChild;d.__dom.lastChild=d.lastChild;
d.__dom.childNodes=[];for(var e=d.firstChild;e;e=e.nextSibling)e.__dom=e.__dom||{},e.__dom.parentNode=d,d.__dom.childNodes.push(e),e.__dom.nextSibling=e.nextSibling,e.__dom.previousSibling=e.previousSibling}},recordInsertBefore:function(d,e,g){e.__dom.childNodes=null;if(d.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(d=d.firstChild;d;d=d.nextSibling)this._linkNode(d,e,g);else this._linkNode(d,e,g)},_linkNode:function(d,e,g){d.__dom=d.__dom||{};e.__dom=e.__dom||{};g&&(g.__dom=g.__dom||{});d.__dom.previousSibling=
g?g.__dom.previousSibling:e.__dom.lastChild;d.__dom.previousSibling&&(d.__dom.previousSibling.__dom.nextSibling=d);d.__dom.nextSibling=g||null;d.__dom.nextSibling&&(d.__dom.nextSibling.__dom.previousSibling=d);d.__dom.parentNode=e;g?g===e.__dom.firstChild&&(e.__dom.firstChild=d):(e.__dom.lastChild=d,e.__dom.firstChild||(e.__dom.firstChild=d));e.__dom.childNodes=null},recordRemoveChild:function(d,e){d.__dom=d.__dom||{};e.__dom=e.__dom||{};d===e.__dom.firstChild&&(e.__dom.firstChild=d.__dom.nextSibling);
d===e.__dom.lastChild&&(e.__dom.lastChild=d.__dom.previousSibling);var g=d.__dom.previousSibling,h=d.__dom.nextSibling;g&&(g.__dom.nextSibling=h);h&&(h.__dom.previousSibling=g);d.__dom.parentNode=d.__dom.previousSibling=d.__dom.nextSibling=void 0;e.__dom.childNodes=null}};Polymer.TreeApi.Composed={getChildNodes:function(d){return Polymer.TreeApi.arrayCopyChildNodes(d)},getParentNode:function(d){return d.parentNode},clearChildNodes:function(d){d.textContent=""},insertBefore:function(d,e,g){return a.call(d,
e,g||null)},appendChild:function(d,e){return b.call(d,e)},removeChild:function(d,e){return c.call(d,e)}}})();
Polymer.DomApi=function(){function a(h){this.node=d?a.wrap(h):h}var b=Polymer.Settings,c=Polymer.TreeApi,d=b.hasShadow&&!b.nativeShadow;a.wrap=window.wrap?window.wrap:function(h){return h};a.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(h){if(this.node.contains(h))return!0;var k=h;for(h=h.ownerDocument;k&&k!==h&&k!==this.node;)k=Polymer.dom(k).parentNode||k.host;return k===this.node},queryDistributedElements:function(h){for(var k=this.getEffectiveChildNodes(),l=[],m=0,n=k.length,
q;m<n&&(q=k[m]);m++)q.nodeType===Node.ELEMENT_NODE&&a.matchesSelector.call(q,h)&&l.push(q);return l},getEffectiveChildNodes:function(){for(var h=[],k=this.childNodes,l=0,m=k.length,n;l<m&&(n=k[l]);l++)if(n.localName===e)for(var q=g(n).getDistributedNodes(),p=0;p<q.length;p++)h.push(q[p]);else h.push(n);return h},observeNodes:function(h){if(h)return this.observer||(this.observer=this.node.localName===e?new a.DistributedNodesObserver(this):new a.EffectiveNodesObserver(this)),this.observer.addListener(h)},
unobserveNodes:function(h){this.observer&&this.observer.removeListener(h)},notifyObserver:function(){this.observer&&this.observer.notify()},_query:function(h,k,l){k=k||this.node;var m=[];this._queryElements(c.Logical.getChildNodes(k),h,l,m);return m},_queryElements:function(h,k,l,m){for(var n=0,q=h.length,p;n<q&&(p=h[n]);n++)if(p.nodeType===Node.ELEMENT_NODE&&this._queryElement(p,k,l,m))return!0},_queryElement:function(h,k,l,m){var n=k(h);n&&m.push(h);if(l&&l(n))return n;this._queryElements(c.Logical.getChildNodes(h),
k,l,m)}};var e=a.CONTENT="content",g=a.factory=function(h){h=h||document;h.__domApi||(h.__domApi=new a.ctor(h));return h.__domApi};a.hasApi=function(h){return!!h.__domApi};a.ctor=a;Polymer.dom=function(h,k){return h instanceof Event?Polymer.EventApi.factory(h):a.factory(h,k)};b=Element.prototype;a.matchesSelector=b.matches||b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector;return a}();
(function(){var a=Polymer.DomApi,b=a.factory,c=Polymer.TreeApi,d=Polymer.domInnerHTML.getInnerHTML,e=a.CONTENT;if(!Polymer.Settings.useShadow){var g=Element.prototype.cloneNode,h=Document.prototype.importNode;Polymer.Base.mixin(a.prototype,{_lazyDistribute:function(k){k.shadyRoot&&k.shadyRoot._distributionClean&&(k.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(k.debounce("_distribute",k._distributeContent)))},appendChild:function(k){return this.insertBefore(k)},insertBefore:function(k,
l){if(l&&c.Logical.getParentNode(l)!==this.node)throw Error("The ref_node to be inserted before is not a child of this node");if(k.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var m=c.Logical.getParentNode(k);m?(a.hasApi(m)&&b(m).notifyObserver(),this._removeNode(k)):this._removeOwnerShadyRoot(k)}this._addNode(k,l)||(l&&(l=l.localName===e?this._firstComposedNode(l):l),m=this.node._isShadyRoot?this.node.host:this.node,l?c.Composed.insertBefore(m,k,l):c.Composed.appendChild(m,k));this.notifyObserver();return k},
_addNode:function(k,l){var m=this.getOwnerRoot();if(m){var n=this._maybeAddInsertionPoint(k,this.node);m._invalidInsertionPoints||(m._invalidInsertionPoints=n);this._addNodeToHost(m.host,k)}c.Logical.hasChildNodes(this.node)&&c.Logical.recordInsertBefore(k,this.node,l);if(l=this._maybeDistribute(k)||this.node.shadyRoot)if(k.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;k.firstChild;)c.Composed.removeChild(k,k.firstChild);else(m=c.Composed.getParentNode(k))&&c.Composed.removeChild(m,k);return l},removeChild:function(k){if(c.Logical.getParentNode(k)!==
this.node)throw Error("The node to be removed is not a child of this node: "+k);if(!this._removeNode(k)){var l=this.node._isShadyRoot?this.node.host:this.node;l===c.Composed.getParentNode(k)&&c.Composed.removeChild(l,k)}this.notifyObserver();return k},_removeNode:function(k){var l=c.Logical.hasParentNode(k)&&c.Logical.getParentNode(k),m=this._ownerShadyRootForNode(k);if(l){var n=b(k)._maybeDistributeParent();c.Logical.recordRemoveChild(k,l);m&&this._removeDistributedChildren(m,k)&&(m._invalidInsertionPoints=
!0,this._lazyDistribute(m.host))}this._removeOwnerShadyRoot(k);m&&this._removeNodeFromHost(m.host,k);return n},replaceChild:function(k,l){this.insertBefore(k,l);this.removeChild(l);return k},_hasCachedOwnerRoot:function(k){return void 0!==k._ownerShadyRoot},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(k){if(k){var l=k._ownerShadyRoot;void 0===l&&(l=k._isShadyRoot?k:(l=c.Logical.getParentNode(k))?l._isShadyRoot?l:this._ownerShadyRootForNode(l):
null,l||document.documentElement.contains(k))&&(k._ownerShadyRoot=l);return l}},_maybeDistribute:function(k){var l=k.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!k.__noContent&&b(k).querySelector(e),m=l&&c.Logical.getParentNode(l).nodeType!==Node.DOCUMENT_FRAGMENT_NODE;(k=l||k.localName===e)&&(l=this.getOwnerRoot())&&this._lazyDistribute(l.host);(l=this._nodeNeedsDistribution(this.node))&&this._lazyDistribute(this.node);return l||k&&!m},_maybeAddInsertionPoint:function(k,l){if(k.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||
k.__noContent)k.localName===e&&(c.Logical.saveChildNodes(l),c.Logical.saveChildNodes(k),t=!0);else for(var m=b(k).querySelectorAll(e),n=0,q,p;n<m.length&&(q=m[n]);n++){p=c.Logical.getParentNode(q);p===k&&(p=l);p=this._maybeAddInsertionPoint(q,p);var t=t||p}return t},_updateInsertionPoints:function(k){k=k.shadyRoot._insertionPoints=b(k.shadyRoot).querySelectorAll(e);for(var l=0,m;l<k.length;l++)m=k[l],c.Logical.saveChildNodes(m),c.Logical.saveChildNodes(c.Logical.getParentNode(m))},_nodeNeedsDistribution:function(k){return k&&
k.shadyRoot&&a.hasInsertionPoint(k.shadyRoot)},_addNodeToHost:function(k,l){k._elementAdd&&k._elementAdd(l)},_removeNodeFromHost:function(k,l){k._elementRemove&&k._elementRemove(l)},_removeDistributedChildren:function(k,l){k=k._insertionPoints;for(var m=0;m<k.length;m++){var n=k[m];if(this._contains(l,n)){n=b(n).getDistributedNodes();for(var q=0;q<n.length;q++){var p=!0;var t=n[q],r=c.Composed.getParentNode(t);r&&c.Composed.removeChild(r,t)}}}return p},_contains:function(k,l){for(;l;){if(l==k)return!0;
l=c.Logical.getParentNode(l)}},_removeOwnerShadyRoot:function(k){if(this._hasCachedOwnerRoot(k))for(var l=c.Logical.getChildNodes(k),m=0,n=l.length,q;m<n&&(q=l[m]);m++)this._removeOwnerShadyRoot(q);k._ownerShadyRoot=void 0},_firstComposedNode:function(k){for(var l=b(k).getDistributedNodes(),m=0,n=l.length,q,p;m<n&&(q=l[m]);m++)if(p=b(q).getDestinationInsertionPoints(),p[p.length-1]===k)return q},querySelector:function(k){return this._query(function(l){return a.matchesSelector.call(l,k)},this.node,
function(l){return!!l})[0]||null},querySelectorAll:function(k){return this._query(function(l){return a.matchesSelector.call(l,k)},this.node)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(k,l){this.node.setAttribute(k,l);this._maybeDistributeParent()},removeAttribute:function(k){this.node.removeAttribute(k);
this._maybeDistributeParent()},_maybeDistributeParent:function(){if(this._nodeNeedsDistribution(this.parentNode))return this._lazyDistribute(this.parentNode),!0},cloneNode:function(k){var l=g.call(this.node,!1);if(k){k=this.childNodes;for(var m=b(l),n=0,q;n<k.length;n++)q=b(k[n]).cloneNode(!0),m.appendChild(q)}return l},importNode:function(k,l){var m=this.node instanceof Document?this.node:this.node.ownerDocument,n=h.call(m,k,!1);if(l){k=c.Logical.getChildNodes(k);l=b(n);for(var q=0,p;q<k.length;q++)p=
b(m).importNode(k[q],!0),l.appendChild(p)}return n},_getComposedInnerHTML:function(){return d(this.node,!0)}});Object.defineProperties(a.prototype,{activeElement:{get:function(){var k=document.activeElement;if(!k)return null;var l=!!this.node._isShadyRoot;if(!(this.node===document||l&&this.node.host!==k&&this.node.host.contains(k)))return null;for(l=b(k).getOwnerRoot();l&&l!==this.node;)k=l.host,l=b(k).getOwnerRoot();return this.node===document?l?null:k:l===this.node?k:null},configurable:!0},childNodes:{get:function(){var k=
c.Logical.getChildNodes(this.node);return Array.isArray(k)?k:c.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return c.Logical.hasChildNodes(this.node)?Array.prototype.filter.call(this.childNodes,function(k){return k.nodeType===Node.ELEMENT_NODE}):c.arrayCopyChildren(this.node)},configurable:!0},parentNode:{get:function(){return c.Logical.getParentNode(this.node)},configurable:!0},firstChild:{get:function(){return c.Logical.getFirstChild(this.node)},configurable:!0},lastChild:{get:function(){return c.Logical.getLastChild(this.node)},
configurable:!0},nextSibling:{get:function(){return c.Logical.getNextSibling(this.node)},configurable:!0},previousSibling:{get:function(){return c.Logical.getPreviousSibling(this.node)},configurable:!0},firstElementChild:{get:function(){return c.Logical.getFirstElementChild(this.node)},configurable:!0},lastElementChild:{get:function(){return c.Logical.getLastElementChild(this.node)},configurable:!0},nextElementSibling:{get:function(){return c.Logical.getNextElementSibling(this.node)},configurable:!0},
previousElementSibling:{get:function(){return c.Logical.getPreviousElementSibling(this.node)},configurable:!0},textContent:{get:function(){var k=this.node.nodeType;if(k===Node.TEXT_NODE||k===Node.COMMENT_NODE)return this.node.textContent;k=[];for(var l=0,m=this.childNodes,n;n=m[l];l++)n.nodeType!==Node.COMMENT_NODE&&k.push(n.textContent);return k.join("")},set:function(k){var l=this.node.nodeType;l===Node.TEXT_NODE||l===Node.COMMENT_NODE?this.node.textContent=k:(this._clear(),k&&this.appendChild(document.createTextNode(k)))},
configurable:!0},innerHTML:{get:function(){var k=this.node.nodeType;return k===Node.TEXT_NODE||k===Node.COMMENT_NODE?null:d(this.node)},set:function(k){var l=this.node.nodeType;if(l!==Node.TEXT_NODE||l!==Node.COMMENT_NODE)for(this._clear(),l=document.createElement("div"),l.innerHTML=k,k=c.arrayCopyChildNodes(l),l=0;l<k.length;l++)this.appendChild(k[l])},configurable:!0}});a.hasInsertionPoint=function(k){return!(!k||!k._insertionPoints.length)}}})();
(function(){var a=Polymer.TreeApi,b=Polymer.DomApi;if(Polymer.Settings.useShadow){Polymer.Base.mixin(b.prototype,{querySelectorAll:function(e){return a.arrayCopy(this.node.querySelectorAll(e))},getOwnerRoot:function(){for(var e=this.node;e;){if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host)return e;e=e.parentNode}},importNode:function(e,g){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(e,g)},getDestinationInsertionPoints:function(){var e=this.node.getDestinationInsertionPoints&&
this.node.getDestinationInsertionPoints();return e?a.arrayCopy(e):[]},getDistributedNodes:function(){var e=this.node.getDistributedNodes&&this.node.getDistributedNodes();return e?a.arrayCopy(e):[]}});Object.defineProperties(b.prototype,{activeElement:{get:function(){var e=b.wrap(this.node),g=e.activeElement;return e.contains(g)?g:null},configurable:!0},childNodes:{get:function(){return a.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return a.arrayCopyChildren(this.node)},
configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(e){return this.node.textContent=e},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(e){return this.node.innerHTML=e},configurable:!0}});var c=function(e){b.prototype[e]=function(){return this.node[e].apply(this.node,arguments)}};(function(e){for(var g=0;g<e.length;g++)c(e[g])})("cloneNode appendChild insertBefore removeChild replaceChild setAttribute removeAttribute querySelector".split(" "));
var d=function(e){Object.defineProperty(b.prototype,e,{get:function(){return this.node[e]},configurable:!0})};(function(e){for(var g=0;g<e.length;g++)d(e[g])})("parentNode firstChild lastChild nextSibling previousSibling firstElementChild lastElementChild nextElementSibling previousElementSibling".split(" "))}})();
Polymer.Base.mixin(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){this._flushGuard=0;for(this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(;this._debouncers.length;)this._debouncers.shift().complete();this._finishDebouncer&&this._finishDebouncer.complete();this._prepareFlush();this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},
_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var a=0;a<this._staticFlushList.length;a++)this._staticFlushList[a]()},addStaticFlush:function(a){this._staticFlushList.push(a)},removeStaticFlush:function(a){a=this._staticFlushList.indexOf(a);0<=a&&this._staticFlushList.splice(a,1)},addDebouncer:function(a){this._debouncers.push(a);this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}});
Polymer.EventApi=function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.Event=function(c){this.event=c};a.Event.prototype=b.useShadow?{get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){var c=this.event.path;Array.isArray(c)||(c=Array.prototype.slice.call(c));return c}}:{get rootTarget(){return this.event.target},get localTarget(){var c=this.event.currentTarget;c=c&&Polymer.dom(c).getOwnerRoot();for(var d=this.path,e=0;e<d.length;e++)if(Polymer.dom(d[e]).getOwnerRoot()===
c)return d[e]},get path(){if(!this.event._path){for(var c=[],d=this.rootTarget;d;){c.push(d);var e=Polymer.dom(d).getDestinationInsertionPoints();if(e.length){for(d=0;d<e.length-1;d++)c.push(e[d]);d=e[e.length-1]}else d=Polymer.dom(d).parentNode||d.host}c.push(window);this.event._path=c}return this.event._path}};return{factory:function(c){c.__eventApi||(c.__eventApi=new a.Event(c));return c.__eventApi}}}();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings.useShadow;Object.defineProperty(a.prototype,"classList",{get:function(){this._classList||(this._classList=new a.ClassList(this));return this._classList},configurable:!0});a.ClassList=function(c){this.domApi=c;this.node=c.node};a.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments);this._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments);this._distributeParent()},
toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments);this._distributeParent()},_distributeParent:function(){b||this.domApi._maybeDistributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}})();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.EffectiveNodesObserver=function(e){this.domApi=e;this.node=this.domApi.node;this._listeners=[]};a.EffectiveNodesObserver.prototype={addListener:function(e){this._isSetup||(this._setup(),this._isSetup=!0);e={fn:e,_nodes:[]};this._listeners.push(e);this._scheduleNotify();return e},removeListener:function(e){var g=this._listeners.indexOf(e);0<=g&&(this._listeners.splice(g,1),e._nodes=[]);this._hasListeners()||(this._cleanup(),this._isSetup=!1)},
_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return!!this._listeners.length},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop();this._debouncer=Polymer.Debounce(this._debouncer,this._notify);this._debouncer.context=this;Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(){this._beforeCallListeners();
this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(e){for(var g=0,h;g<e.length&&(h=e[g]);g++)this._isContent(h)&&(h.__observeNodesMap=h.__observeNodesMap||new WeakMap,h.__observeNodesMap.has(this)||h.__observeNodesMap.set(this,this._observeContent(h)))},_observeContent:function(e){var g=this;e=Polymer.dom(e).observeNodes(function(){g._scheduleNotify()});
e._avoidChangeCalculation=!0;return e},_unobserveContentElements:function(e){for(var g=0,h,k;g<e.length&&(h=e[g]);g++)this._isContent(h)&&(k=h.__observeNodesMap&&h.__observeNodesMap.get(this))&&(Polymer.dom(h).unobserveNodes(k),h.__observeNodesMap.delete(this))},_isContent:function(e){return"content"===e.localName},_callListeners:function(){for(var e=this._listeners,g=this._getEffectiveNodes(),h=0,k;h<e.length&&(k=e[h]);h++){var l=this._generateListenerInfo(k,g);(l||k._alwaysNotify)&&this._callListener(k,
l)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},_generateListenerInfo:function(e,g){if(e._avoidChangeCalculation)return!0;for(var h={target:this.node,addedNodes:[],removedNodes:[]},k=Polymer.ArraySplice.calculateSplices(g,e._nodes),l=0,m;l<k.length&&(m=k[l]);l++)for(var n=0,q;n<m.removed.length&&(q=m.removed[n]);n++)h.removedNodes.push(q);l=0;for(m;l<k.length&&(m=k[l]);l++)for(n=m.index;n<m.index+m.addedCount;n++)h.addedNodes.push(g[n]);e._nodes=g;if(h.addedNodes.length||
h.removedNodes.length)return h},_callListener:function(e,g){return e.fn.call(this.node,g)},enableShadowAttributeTracking:function(){}};if(b.useShadow){var c=a.EffectiveNodesObserver.prototype._setup,d=a.EffectiveNodesObserver.prototype._cleanup;Polymer.Base.mixin(a.EffectiveNodesObserver.prototype,{_setup:function(){if(!this._observer){var e=this;this._mutationHandler=function(g){g&&g.length&&e._scheduleNotify()};this._observer=new MutationObserver(this._mutationHandler);this._boundFlush=function(){e._flush()};
Polymer.dom.addStaticFlush(this._boundFlush);this._observer.observe(this.node,{childList:!0})}c.call(this)},_cleanup:function(){this._observer.disconnect();this._mutationHandler=this._observer=null;Polymer.dom.removeStaticFlush(this._boundFlush);d.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){if(this._observer){this._makeContentListenersAlwaysNotify();this._observer.disconnect();this._observer.observe(this.node,
{childList:!0,attributes:!0,subtree:!0});var e=this.domApi.getOwnerRoot();(e=e&&e.host)&&Polymer.dom(e).observer&&Polymer.dom(e).observer.enableShadowAttributeTracking()}},_makeContentListenersAlwaysNotify:function(){for(var e=0,g;e<this._listeners.length;e++)g=this._listeners[e],g._alwaysNotify=g._isContentListener}})}})();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.DistributedNodesObserver=function(c){a.EffectiveNodesObserver.call(this,c)};a.DistributedNodesObserver.prototype=Object.create(a.EffectiveNodesObserver.prototype);Polymer.Base.mixin(a.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}});b.useShadow&&Polymer.Base.mixin(a.DistributedNodesObserver.prototype,{_setup:function(){if(!this._observer){var c=
this.domApi.getOwnerRoot();if(c=c&&c.host){var d=this;this._observer=Polymer.dom(c).observeNodes(function(){d._scheduleNotify()});this._observer._isContentListener=!0;this._hasAttrSelect()&&Polymer.dom(c).observer.enableShadowAttributeTracking()}}},_hasAttrSelect:function(){var c=this.node.getAttribute("select");return c&&c.match(/[[.]+/)},_cleanup:function(){var c=this.domApi.getOwnerRoot();(c=c&&c.host)&&Polymer.dom(c).unobserveNodes(this._observer);this._observer=null}})})();
(function(){function a(h,k){k._distributedNodes.push(h);var l=h._destinationInsertionPoints;l?l.push(k):h._destinationInsertionPoints=[k]}function b(h){for(var k=d.Logical.getChildNodes(h),l=0,m;l<k.length;l++)if(m=k[l],m.localName&&"content"===m.localName)return h.domHost}var c=Polymer.DomApi,d=Polymer.TreeApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||!!this._template},_setupShady:function(){this.shadyRoot=null;this.__domApi||(this.__domApi=null);this.__dom||
(this.__dom=null);this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&d.Logical.saveChildNodes(this)},_setupRoot:function(){if(this._useContent&&(this._createLocalRoot(),!this.dataHost)){var h=d.Logical.getChildNodes(this);if(g&&h)for(var k=0;k<h.length;k++)CustomElements.upgrade(h[k])}},_createLocalRoot:function(){this.shadyRoot=this.root;this.shadyRoot._distributionClean=!1;this.shadyRoot._hasDistributed=!1;this.shadyRoot._isShadyRoot=!0;this.shadyRoot._dirtyRoots=
[];var h=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];d.Logical.saveChildNodes(this.shadyRoot);for(var k=0,l;k<h.length;k++)l=h[k],d.Logical.saveChildNodes(l),d.Logical.saveChildNodes(l.parentNode);this.shadyRoot.host=this},distributeContent:function(h){if(this.shadyRoot){this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||h;for(h=this;h&&b(h);)h=h.domHost;Polymer.dom(this)._lazyDistribute(h)}},_distributeContent:function(){this._useContent&&
!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&c.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var h=this.shadyRoot._dirtyRoots,k=0,l=h.length,
m;k<l&&(m=h[k]);k++)m._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){this.shadyRoot._distributionClean=!0;if(c.hasInsertionPoint(this.shadyRoot)){this._composeTree();for(var h=this.shadyRoot,k=0,l;k<h._insertionPoints.length;k++)l=h._insertionPoints[k],c.hasApi(l)&&Polymer.dom(l).notifyObserver()}else this.shadyRoot._hasDistributed?(h=this._composeNode(this),this._updateChildNodes(this,h)):(d.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot));
this.shadyRoot._hasDistributed||c.hasApi(this)&&Polymer.dom(this).notifyObserver();this.shadyRoot._hasDistributed=!0}},elementMatches:function(h,k){return c.matchesSelector.call(k||this,h)},_resetDistribution:function(){for(var h=d.Logical.getChildNodes(this),k=0;k<h.length;k++){var l=h[k];l._destinationInsertionPoints&&(l._destinationInsertionPoints=void 0);if("content"==l.localName){var m=l._distributedNodes;if(m)for(var n=0;n<m.length;n++){var q=m[n]._destinationInsertionPoints;q&&q.splice(q.indexOf(l)+
1,q.length)}}}h=this.shadyRoot._insertionPoints;for(k=0;k<h.length;k++)h[k]._distributedNodes=[]},_collectPool:function(){for(var h=[],k=d.Logical.getChildNodes(this),l=0;l<k.length;l++){var m=k[l];"content"==m.localName?h.push.apply(h,m._distributedNodes):h.push(m)}return h},_distributePool:function(h,k){h=h._insertionPoints;for(var l=0,m=h.length,n;l<m&&(n=h[l]);l++){this._distributeInsertionPoint(n,k);var q=d.Logical.getParentNode(n);q&&q.shadyRoot&&c.hasInsertionPoint(q.shadyRoot)&&q.shadyRoot._distributionClean&&
(q.shadyRoot._distributionClean=!1,this.shadyRoot._dirtyRoots.push(q))}},_distributeInsertionPoint:function(h,k){for(var l=!1,m=0,n=k.length,q;m<n;m++)(q=k[m])&&this._matchesContentSelect(q,h)&&(a(q,h),k[m]=void 0,l=!0);if(!l)for(k=d.Logical.getChildNodes(h),l=0;l<k.length;l++)a(k[l],h)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var h=this.shadyRoot._insertionPoints,k=0,l=h.length,m,n;k<l&&(m=h[k]);k++)n=d.Logical.getParentNode(m),n._useContent||n===this||n===
this.shadyRoot||this._updateChildNodes(n,this._composeNode(n))},_composeNode:function(h){var k=[];h=d.Logical.getChildNodes(h.shadyRoot||h);for(var l=0;l<h.length;l++){var m=h[l];if("content"==m.localName)for(var n=m._distributedNodes,q=0;q<n.length;q++){var p=n[q],t=p._destinationInsertionPoints;t&&t[t.length-1]===m&&k.push(p)}else k.push(m)}return k},_updateChildNodes:function(h,k){for(var l=d.Composed.getChildNodes(h),m=Polymer.ArraySplice.calculateSplices(k,l),n=0,q=0,p;n<m.length&&(p=m[n]);n++){for(var t=
0,r;t<p.removed.length&&(r=p.removed[t]);t++)d.Composed.getParentNode(r)===h&&d.Composed.removeChild(h,r),l.splice(p.index+q,1);q-=p.addedCount}for(n=0;n<m.length&&(p=m[n]);n++)for(q=l[p.index],t=p.index,r;t<p.index+p.addedCount;t++)r=k[t],d.Composed.insertBefore(h,r,q),l.splice(t,0,r)},_matchesContentSelect:function(h,k){k=k.getAttribute("select");return k?(k=k.trim())?h instanceof Element&&/^(:not\()?[*.#[a-zA-Z_|]/.test(k)?this.elementMatches(k,h):!1:!0:!0},_elementAdd:function(){},_elementRemove:function(){}});
var e={get:function(){var h=Polymer.dom(this).getOwnerRoot();return h&&h.host},configurable:!0};Object.defineProperty(Polymer.Base,"domHost",e);Polymer.BaseDescriptors.domHost=e;var g=window.CustomElements&&!CustomElements.useNative})();
Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot();this.shadowRoot.appendChild(this.root);this.root=this.shadowRoot}});
Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(a,b){if(0<b)return~setTimeout(a,b);this._twiddle.textContent=this._twiddleContent++;this._callbacks.push(a);return this._currVal++},cancel:function(a){if(0>a)clearTimeout(~a);else{var b=a-this._lastVal;if(0<=b){if(!this._callbacks[b])throw"invalid async handle: "+a;this._callbacks[b]=null}}},_atEndOfMicrotask:function(){for(var a=this._callbacks.length,b=0;b<a;b++){var c=this._callbacks[b];
if(c)try{c()}catch(d){throw b++,this._callbacks.splice(0,b),this._lastVal+=b,this._twiddle.textContent=this._twiddleContent++,d;}}this._callbacks.splice(0,a);this._lastVal+=a}};(new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()})).observe(Polymer.Async._twiddle,{characterData:!0});
Polymer.Debounce=function(){function a(c){this.context=c;var d=this;this.boundComplete=function(){d.complete()}}var b=Polymer.Async;a.prototype={go:function(c,d){this.finish=function(){b.cancel(e)};var e=b.run(this.boundComplete,d);this.callback=c},stop:function(){this.finish&&(this.finish(),this.callback=this.finish=null)},complete:function(){if(this.finish){var c=this.callback;this.stop();c.call(this.context)}}};return function(c,d,e){c?c.stop():c=new a(this);c.go(d,e);return c}}();
Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(a,b,c){return this._debouncers[a]=Polymer.Debounce.call(this,this._debouncers[a],b,c)},isDebouncerActive:function(a){a=this._debouncers[a];return!(!a||!a.finish)},flushDebouncer:function(a){(a=this._debouncers[a])&&a.complete()},cancelDebouncer:function(a){(a=this._debouncers[a])&&a.stop()}});Polymer.DomModule=document.createElement("dom-module");
Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this._prepBehaviors();this._prepConstructor();this._prepTemplate();this._prepShady();this._prepPropertyInfo()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._registerHost();this._template&&(this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting());this._marshalHostAttributes();this._setupDebouncers();this._marshalBehaviors();this._tryReady()},_marshalBehavior:function(){}});
</script>






<script>//~~WEBPATH~~/polymer/polymer.html.js
(function(){Polymer.nar=[];var a=Polymer.Settings.disableUpgradeEnabled;Polymer.Annotations={parseAnnotations:function(b,c){var d=[];this._parseNodeAnnotations(b._content||b.content,d,c||b.hasAttribute("strip-whitespace"));return d},_parseNodeAnnotations:function(b,c,d){return b.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(b,c):this._parseElementAnnotations(b,c,d)},_bindingRegex:/(\[\[|{{)\s*(?:(!)\s*)?((?:[a-zA-Z_$][\w.:$\-*]*)\s*(?:\(\s*(?:(?:(?:(?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*"))\s*)(?:,\s*(?:(?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*"))\s*))*)?)\)\s*)?)(?:]]|}})/g,
_parseBindings:function(b){for(var c=this._bindingRegex,d=[],e=0,g;null!==(g=c.exec(b));){g.index>e&&d.push({literal:b.slice(e,g.index)});e=g[1][0];var h=!!g[2];g=g[3].trim();var k;if("{"==e&&0<(k=g.indexOf("::"))){var l=g.substring(k+2);g=g.substring(0,k);var m=!0}d.push({compoundIndex:d.length,value:g,mode:e,negate:h,event:l,customEvent:m});e=c.lastIndex}e&&e<b.length&&(b=b.substring(e))&&d.push({literal:b});if(d.length)return d},_literalFromParts:function(b){for(var c="",d=0;d<b.length;d++)c+=
b[d].literal||"";return c},_parseTextNodeAnnotation:function(b,c){var d=this._parseBindings(b.textContent);if(d)return b.textContent=this._literalFromParts(d)||" ",b={bindings:[{kind:"text",name:"textContent",parts:d,isCompound:1!==d.length}]},c.push(b),b},_parseElementAnnotations:function(b,c,d){var e={bindings:[],events:[]};"content"===b.localName&&(c._hasContent=!0);this._parseChildNodesAnnotations(b,e,c,d);b.attributes&&(this._parseNodeAttributeAnnotations(b,e,c),this.prepElement&&this.prepElement(b));
(e.bindings.length||e.events.length||e.id)&&c.push(e);return e},_parseChildNodesAnnotations:function(b,c,d,e){if(b.firstChild)for(var g=b.firstChild,h=0;g;){var k=g.nextSibling;"template"!==g.localName||g.hasAttribute("preserve-content")||this._parseTemplate(g,h,d,c,e);"slot"==g.localName&&(g=this._replaceSlotWithContent(g));if(g.nodeType===Node.TEXT_NODE){for(var l=k;l&&l.nodeType===Node.TEXT_NODE;)g.textContent+=l.textContent,k=l.nextSibling,b.removeChild(l),l=k;e&&!g.textContent.trim()&&(b.removeChild(g),
h--)}g.parentNode&&(g=this._parseNodeAnnotations(g,d,e))&&(g.parent=c,g.index=h);g=k;h++}},_replaceSlotWithContent:function(b){for(var c=b.ownerDocument.createElement("content");b.firstChild;)c.appendChild(b.firstChild);for(var d=b.attributes,e=0;e<d.length;e++){var g=d[e];c.setAttribute(g.name,g.value)}(d=b.getAttribute("name"))&&c.setAttribute("select","[slot\x3d'"+d+"']");b.parentNode.replaceChild(c,b);return c},_parseTemplate:function(b,c,d,e,g){var h=document.createDocumentFragment();h._notes=
this.parseAnnotations(b,g);h.appendChild(b.content);d.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:h,parent:e,index:c})},_parseNodeAttributeAnnotations:function(b,c){for(var d=Array.prototype.slice.call(b.attributes),e=d.length-1,g;g=d[e];e--){var h=g.name;g=g.value;var k;"on-"===h.slice(0,3)?(b.removeAttribute(h),c.events.push({name:h.slice(3),value:g})):(k=this._parseNodeAttributeAnnotation(b,h,g))?c.bindings.push(k):"id"===h&&(c.id=g)}},_parseNodeAttributeAnnotation:function(b,
c,d){if(d=this._parseBindings(d)){var e=c,g="property";"$"==c[c.length-1]&&(c=c.slice(0,-1),g="attribute");var h=this._literalFromParts(d);h&&"attribute"==g&&b.setAttribute(c,h);"input"===b.localName&&"value"===e&&b.setAttribute(e,"");a&&"disable-upgrade$"===e&&b.setAttribute(c,"");b.removeAttribute(e);b=Polymer.CaseMap.dashToCamelCase(c);"property"===g&&(c=b);return{kind:g,name:c,propertyName:b,parts:d,literal:h,isCompound:1!==d.length}}},findAnnotatedNode:function(b,c){var d=c.parent&&Polymer.Annotations.findAnnotatedNode(b,
c.parent);if(d)for(b=d.firstChild,d=0;b;b=b.nextSibling){if(c.index===d++)return b}else return b}}})();Polymer.Path={root:function(a){var b=a.indexOf(".");return-1===b?a:a.slice(0,b)},isDeep:function(a){return-1!==a.indexOf(".")},isAncestor:function(a,b){return 0===a.indexOf(b+".")},isDescendant:function(a,b){return 0===b.indexOf(a+".")},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b,c){return a===c||this.isAncestor(a,c)||!!b&&this.isDescendant(a,c)}};
Polymer.Base._addFeature({_prepAnnotations:function(){if(this._template){var a=this;Polymer.Annotations.prepElement=function(b){a._prepElement(b)};this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes));Polymer.Annotations.prepElement=null}else this._notes=[]},_processAnnotations:function(a){for(var b=0;b<a.length;b++){for(var c=a[b],d=0;d<c.bindings.length;d++)for(var e=
c.bindings[d],g=0;g<e.parts.length;g++){var h=e.parts[g];if(!h.literal){var k=this._parseMethod(h.value);k?h.signature=k:h.model=Polymer.Path.root(h.value)}}if(c.templateContent){this._processAnnotations(c.templateContent._notes);e=c.templateContent._parentProps=this._discoverTemplateParentProps(c.templateContent._notes);d=[];for(var l in e)e="_parent_"+l,d.push({index:c.index,kind:"property",name:e,propertyName:e,parts:[{mode:"{",model:l,value:l}]});c.bindings=c.bindings.concat(d)}}},_discoverTemplateParentProps:function(a){for(var b=
{},c=0,d;c<a.length&&(d=a[c]);c++){for(var e=0,g=d.bindings,h;e<g.length&&(h=g[e]);e++)for(var k=0,l=h.parts,m;k<l.length&&(m=l[k]);k++)if(m.signature){for(var n=m.signature.args,q=0;q<n.length;q++){var p=n[q].model;p&&(b[p]=!0)}m.signature.dynamicFn&&(b[m.signature.method]=!0)}else m.model&&(b[m.model]=!0);d.templateContent&&Polymer.Base.mixin(b,d.templateContent._parentProps)}return b},_prepElement:function(a){Polymer.ResolveUrl.resolveAttrs(a,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,
_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var a=this._notes,b=this._nodes,c=0;c<a.length;c++){var d=a[c],e=b[c];this._configureTemplateContent(d,e);this._configureCompoundBindings(d,e)}},_configureTemplateContent:function(a,b){a.templateContent&&(b._content=a.templateContent)},_configureCompoundBindings:function(a,b){a=a.bindings;for(var c=0;c<a.length;c++){var d=
a[c];if(d.isCompound){for(var e=b.__compoundStorage__||(b.__compoundStorage__={}),g=d.parts,h=Array(g.length),k=0;k<g.length;k++)h[k]=g[k].literal;g=d.name;e[g]=h;d.literal&&"property"==d.kind&&(b._configValue?b._configValue(g,d.literal):b[g]=d.literal)}}},_marshalIdNodes:function(){this.$={};for(var a=0,b=this._notes.length,c;a<b&&(c=this._notes[a]);a++)c.id&&(this.$[c.id]=this._findAnnotatedNode(this.root,c))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var a=Array(this._notes.length),
b=0;b<this._notes.length;b++)a[b]=this._findAnnotatedNode(this.root,this._notes[b]);this._nodes=a}},_marshalAnnotatedListeners:function(){for(var a=0,b=this._notes.length,c;a<b&&(c=this._notes[a]);a++)if(c.events&&c.events.length)for(var d=this._findAnnotatedNode(this.root,c),e=0,g=c.events,h;e<g.length&&(h=g[e]);e++)this.listen(d,h.name,h.value)}});
Polymer.Base._addFeature({listeners:{},_listenListeners:function(a){var b;for(b in a){if(0>b.indexOf(".")){var c=this;var d=b}else d=b.split("."),c=this.$[d[0]],d=d[1];this.listen(c,d,a[b])}},listen:function(a,b,c){var d=this._recallEventHandler(this,b,a,c);d||(d=this._createEventHandler(a,b,c));d._listening||(this._listen(a,b,d),d._listening=!0)},_boundListenerKey:function(a,b){return a+":"+b},_recordEventHandler:function(a,b,c,d,e){var g=a.__boundListeners;g||(g=a.__boundListeners=new WeakMap);
a=g.get(c);a||(a={},Polymer.Settings.isIE&&c==window||g.set(c,a));a[this._boundListenerKey(b,d)]=e},_recallEventHandler:function(a,b,c,d){if(a=a.__boundListeners)if(c=a.get(c))return c[this._boundListenerKey(b,d)]},_createEventHandler:function(a,b,c){function d(g){if(e[c])e[c](g,g.detail);else e._warn(e._logf("_createEventHandler","listener method `"+c+"` not defined"))}var e=this;d._listening=!1;this._recordEventHandler(e,b,a,c,d);return d},unlisten:function(a,b,c){if(c=this._recallEventHandler(this,
b,a,c))this._unlisten(a,b,c),c._listening=!1},_listen:function(a,b,c){a.addEventListener(b,c)},_unlisten:function(a,b,c){a.removeEventListener(b,c)}});
(function(){function a(u){var w=u.sourceCapabilities;if(!w||w.firesTouchEvents)if(u.__polymerGesturesHandled={skip:!0},"click"===u.type){if(w=Polymer.dom(u).path)for(var x=0;x<w.length;x++)if(w[x]===t.mouse.target)return;u.preventDefault();u.stopPropagation()}}function b(u){if(!(-1<l.indexOf(u))&&"touchend"!==u&&k&&q&&Polymer.Settings.passiveTouchGestures)return{passive:!0}}function c(u){for(var w=p?["click"]:l,x=0,A;x<w.length;x++)A=w[x],u?document.addEventListener(A,a,!0):document.removeEventListener(A,
a,!0)}function d(u){var w=u.type;return-1<l.indexOf(w)?"mousemove"===w?(w=void 0===u.buttons?1:u.buttons,u instanceof window.MouseEvent&&!n&&(w=m[u.which]||0),!!(w&1)):0===(void 0===u.button?0:u.button):!1}function e(u,w,x){u.movefn=w;u.upfn=x;document.addEventListener("mousemove",w);document.addEventListener("mouseup",x)}function g(u){document.removeEventListener("mousemove",u.movefn);document.removeEventListener("mouseup",u.upfn);u.movefn=null;u.upfn=null}var h=Polymer.DomApi.wrap,k="string"===
typeof document.head.style.touchAction,l=["mousedown","mousemove","mouseup","click"],m=[0,1,4,2];try{var n=1===(new MouseEvent("test",{buttons:1})).buttons}catch(u){n=!1}var q=!1;(function(){try{var u=Object.defineProperty({},"passive",{get:function(){q=!0}});window.addEventListener("test",null,u);window.removeEventListener("test",null,u)}catch(w){}})();var p=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),t={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener("touchend",
function(u){t.mouse.mouseIgnoreJob||c(!0);t.mouse.target=Polymer.dom(u).rootTarget;t.mouse.mouseIgnoreJob=Polymer.Debounce(t.mouse.mouseIgnoreJob,function(){c();t.mouse.target=null;t.mouse.mouseIgnoreJob=null},2500)},q?{passive:!0}:!1);var r={gestures:{},recognizers:[],deepTargetFind:function(u,w){for(var x=document.elementFromPoint(u,w),A=x;A&&A.shadowRoot;)(A=A.shadowRoot.elementFromPoint(u,w))&&(x=A);return x},findOriginalTarget:function(u){return u.path?u.path[0]:u.target},handleNative:function(u){var w=
u.type,x=h(u.currentTarget).__polymerGestures;if(x&&(x=x[w])){if(!u.__polymerGesturesHandled&&(u.__polymerGesturesHandled={},"touch"===w.slice(0,5))){var A=u.changedTouches[0];"touchstart"===w&&1===u.touches.length&&(t.touch.id=A.identifier);if(t.touch.id!==A.identifier)return;k||("touchstart"===w||"touchmove"===w)&&r.handleTouchAction(u)}A=u.__polymerGesturesHandled;if(!A.skip){for(var y=r.recognizers,B=0,F;B<y.length;B++)F=y[B],x[F.name]&&!A[F.name]&&F.flow&&-1<F.flow.start.indexOf(u.type)&&F.reset&&
F.reset();B=0;for(F;B<y.length;B++)F=y[B],x[F.name]&&!A[F.name]&&(A[F.name]=!0,F[w](u))}}},handleTouchAction:function(u){var w=u.changedTouches[0],x=u.type;if("touchstart"===x)t.touch.x=w.clientX,t.touch.y=w.clientY,t.touch.scrollDecided=!1;else if("touchmove"===x&&!t.touch.scrollDecided){t.touch.scrollDecided=!0;x=Polymer.dom(u).path;for(var A="auto",y=0,B;y<x.length;y++)if(B=x[y],B.__polymerGesturesTouchAction){A=B.__polymerGesturesTouchAction;break}x=A;A=!1;y=Math.abs(t.touch.x-w.clientX);w=Math.abs(t.touch.y-
w.clientY);u.cancelable&&("none"===x?A=!0:"pan-x"===x?A=w>y:"pan-y"===x&&(A=y>w));A?u.preventDefault():r.prevent("track")}},add:function(u,w,x){u=h(u);var A=this.gestures[w],y=A.deps,B=A.name,F=u.__polymerGestures;F||(u.__polymerGestures=F={});for(var K=0,L,N;K<y.length;K++)L=y[K],p&&-1<l.indexOf(L)&&"click"!==L||((N=F[L])||(F[L]=N={_count:0}),0===N._count&&u.addEventListener(L,this.handleNative,b(L)),N[B]=(N[B]||0)+1,N._count=(N._count||0)+1);u.addEventListener(w,x);A.touchAction&&this.setTouchAction(u,
A.touchAction)},remove:function(u,w,x){u=h(u);var A=this.gestures[w],y=A.deps;A=A.name;var B=u.__polymerGestures;if(B)for(var F=0,K,L;F<y.length;F++)K=y[F],(L=B[K])&&L[A]&&(L[A]=(L[A]||1)-1,L._count=(L._count||1)-1,0===L._count&&u.removeEventListener(K,this.handleNative,b(K)));u.removeEventListener(w,x)},register:function(u){this.recognizers.push(u);for(var w=0;w<u.emits.length;w++)this.gestures[u.emits[w]]=u},findRecognizerByEvent:function(u){for(var w=0,x;w<this.recognizers.length;w++){x=this.recognizers[w];
for(var A=0,y;A<x.emits.length;A++)if(y=x.emits[A],y===u)return x}return null},setTouchAction:function(u,w){k&&(u.style.touchAction=w);u.__polymerGesturesTouchAction=w},fire:function(u,w,x){Polymer.Base.fire(w,x,{node:u,bubbles:!0,cancelable:!0}).defaultPrevented&&(u=x.preventer||x.sourceEvent)&&u.preventDefault&&u.preventDefault()},prevent:function(u){u=this.findRecognizerByEvent(u);u.info&&(u.info.prevent=!0)},resetMouseCanceller:function(){t.mouse.mouseIgnoreJob&&t.mouse.mouseIgnoreJob.complete()}};
r.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){g(this.info)},mousedown:function(u){if(d(u)){var w=r.findOriginalTarget(u),x=this;e(this.info,function(A){d(A)||(x.fire("up",w,A),g(x.info))},function(A){d(A)&&x.fire("up",w,A);g(x.info)});this.fire("down",w,u)}},touchstart:function(u){this.fire("down",r.findOriginalTarget(u),u.changedTouches[0],u)},
touchend:function(u){this.fire("up",r.findOriginalTarget(u),u.changedTouches[0],u)},fire:function(u,w,x,A){r.fire(w,u,{x:x.clientX,y:x.clientY,sourceEvent:x,preventer:A,prevent:function(y){return r.prevent(y)}})}});r.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(u){2<this.moves.length&&this.moves.shift();
this.moves.push(u)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start";this.info.started=!1;this.info.moves=[];this.info.x=0;this.info.y=0;this.info.prevent=!1;g(this.info)},hasMovedEnough:function(u,w){if(this.info.prevent)return!1;if(this.info.started)return!0;w=Math.abs(this.info.y-w);return 5<=Math.abs(this.info.x-u)||5<=w},mousedown:function(u){if(d(u)){var w=r.findOriginalTarget(u),x=this,A=function(y){var B=y.clientX,F=y.clientY;x.hasMovedEnough(B,F)&&(x.info.state=
x.info.started?"mouseup"===y.type?"end":"track":"start","start"===x.info.state&&r.prevent("tap"),x.info.addMove({x:B,y:F}),d(y)||(x.info.state="end",g(x.info)),x.fire(w,y),x.info.started=!0)};e(this.info,A,function(y){x.info.started&&A(y);g(x.info)});this.info.x=u.clientX;this.info.y=u.clientY}},touchstart:function(u){u=u.changedTouches[0];this.info.x=u.clientX;this.info.y=u.clientY},touchmove:function(u){var w=r.findOriginalTarget(u);u=u.changedTouches[0];var x=u.clientX,A=u.clientY;this.hasMovedEnough(x,
A)&&("start"===this.info.state&&r.prevent("tap"),this.info.addMove({x:x,y:A}),this.fire(w,u),this.info.state="track",this.info.started=!0)},touchend:function(u){var w=r.findOriginalTarget(u),x=u.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:x.clientX,y:x.clientY}),this.fire(w,x,u))},fire:function(u,w,x){var A=this.info.moves[this.info.moves.length-2],y=this.info.moves[this.info.moves.length-1],B=y.x-this.info.x,F=y.y-this.info.y,K=0;if(A){var L=y.x-A.x;K=y.y-A.y}return r.fire(u,
"track",{state:this.info.state,x:w.clientX,y:w.clientY,dx:B,dy:F,ddx:L,ddy:K,sourceEvent:w,preventer:x,hover:function(){return r.deepTargetFind(w.clientX,w.clientY)}})}});r.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN;this.info.y=NaN;this.info.prevent=!1},save:function(u){this.info.x=u.clientX;this.info.y=u.clientY},mousedown:function(u){d(u)&&
this.save(u)},click:function(u){d(u)&&this.forward(u)},touchstart:function(u){this.save(u.changedTouches[0],u)},touchend:function(u){this.forward(u.changedTouches[0],u)},forward:function(u,w){var x=Math.abs(u.clientX-this.info.x),A=Math.abs(u.clientY-this.info.y),y=r.findOriginalTarget(u);if(!(x=isNaN(x)||isNaN(A)||25>=x&&25>=A))if("click"===u.type)if(0===u.detail)x=!0;else{x=r.findOriginalTarget(u).getBoundingClientRect();A=u.pageX;var B=u.pageY;x=!(A>=x.left&&A<=x.right&&B>=x.top&&B<=x.bottom)}else x=
!1;x&&(this.info.prevent||r.fire(y,"tap",{x:u.clientX,y:u.clientY,sourceEvent:u,preventer:w}))}});var v={x:"pan-x",y:"pan-y",none:"none",all:"auto"};Polymer.Base._addFeature({_setupGestures:function(){this.__polymerGestures=null},_listen:function(u,w,x){r.gestures[w]?r.add(u,w,x):u.addEventListener(w,x)},_unlisten:function(u,w,x){r.gestures[w]?r.remove(u,w,x):u.removeEventListener(w,x)},setScrollDirection:function(u,w){r.setTouchAction(w||this,v[u]||"auto")}});Polymer.Gestures=r})();
(function(){Polymer.Base._addFeature({$$:function(b){return Polymer.dom(this.root).querySelector(b)},toggleClass:function(b,c,d){d=d||this;1==arguments.length&&(c=!d.classList.contains(b));c?Polymer.dom(d).classList.add(b):Polymer.dom(d).classList.remove(b)},toggleAttribute:function(b,c,d){d=d||this;1==arguments.length&&(c=!d.hasAttribute(b));c?Polymer.dom(d).setAttribute(b,""):Polymer.dom(d).removeAttribute(b)},classFollows:function(b,c,d){d&&Polymer.dom(d).classList.remove(b);c&&Polymer.dom(c).classList.add(b)},
attributeFollows:function(b,c,d){d&&Polymer.dom(d).removeAttribute(b);c&&Polymer.dom(c).setAttribute(b,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){return Polymer.dom(this).getEffectiveChildNodes().filter(function(b){return b.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var b=this.getEffectiveChildNodes(),c=[],d=0,e;e=b[d];d++)e.nodeType!==Node.COMMENT_NODE&&c.push(Polymer.dom(e).textContent);return c.join("")},
queryEffectiveChildren:function(b){return(b=Polymer.dom(this).queryDistributedElements(b))&&b[0]},queryAllEffectiveChildren:function(b){return Polymer.dom(this).queryDistributedElements(b)},getContentChildNodes:function(b){return(b=Polymer.dom(this.root).querySelector(b||"content"))?Polymer.dom(b).getDistributedNodes():[]},getContentChildren:function(b){return this.getContentChildNodes(b).filter(function(c){return c.nodeType===Node.ELEMENT_NODE})},fire:function(b,c,d){d=d||Polymer.nob;var e=d.node||
this;c=null===c||void 0===c?{}:c;var g=d._useCache;d=this._getEvent(b,void 0===d.bubbles?!0:d.bubbles,!!d.cancelable,g);d.detail=c;g&&(this.__eventCache[b]=null);e.dispatchEvent(d);g&&(this.__eventCache[b]=d);return d},__eventCache:{},_getEvent:function(b,c,d,e){(e=e&&this.__eventCache[b])&&e.bubbles==c&&e.cancelable==d||(e=new Event(b,{bubbles:!!c,cancelable:d}));return e},async:function(b,c){var d=this;return Polymer.Async.run(function(){b.call(d)},c)},cancelAsync:function(b){Polymer.Async.cancel(b)},
arrayDelete:function(b,c){if(Array.isArray(b)){if(c=b.indexOf(c),0<=c)return b.splice(c,1)}else if(c=this._get(b).indexOf(c),0<=c)return this.splice(b,c,1)},transform:function(b,c){c=c||this;c.style.webkitTransform=b;c.style.transform=b},translate3d:function(b,c,d,e){this.transform("translate3d("+b+","+c+","+d+")",e||this)},importHref:function(b,c,d,e){function g(q){q.target.__firedError=!0;q.target.removeEventListener("load",h);q.target.removeEventListener("error",g);return d.call(n,q)}function h(q){q.target.__firedLoad=
!0;q.target.removeEventListener("load",h);q.target.removeEventListener("error",g);return c.call(n,q)}var k=document.createElement("link");k.rel="import";k.href=b;b=Polymer.Base.importHref.imported=Polymer.Base.importHref.imported||{};var l=b[k.href],m=l||k,n=this;c&&m.addEventListener("load",h);d&&m.addEventListener("error",g);l?(l.__firedLoad&&l.dispatchEvent(new Event("load")),l.__firedError&&l.dispatchEvent(new Event("error"))):(b[k.href]=k,e&&k.setAttribute("async",""),document.head.appendChild(k));
return m},create:function(b,c){b=document.createElement(b);if(c)for(var d in c)b[d]=c[d];return b},isLightDescendant:function(b){return this!==b&&this.contains(b)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(b).getOwnerRoot()},isLocalDescendant:function(b){return this.root===Polymer.dom(b).getOwnerRoot()}});if(!Polymer.Settings.useNativeCustomElements){var a=Polymer.Base.importHref;Polymer.Base.importHref=function(b,c,d,e){CustomElements.ready=!1;return a.call(this,b,function(g){CustomElements.upgradeDocumentTree(document);
CustomElements.ready=!0;if(c)return c.call(this,g)},d,e)}}})();
Polymer.Bind={prepareModel:function(a){Polymer.Base.mixin(a,this._modelApi)},_modelApi:{_notifyChange:function(a,b,c){c=void 0===c?this[a]:c;b=b||Polymer.CaseMap.camelToDashCase(a)+"-changed";this.fire(b,{value:c},{bubbles:!1,cancelable:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_propertySetter:function(a,b,c,d){var e=this.__data__[a];e===b||e!==e&&b!==b||(this.__data__[a]=b,"object"==typeof b&&this._clearPath(a),this._propertyChanged&&this._propertyChanged(a,b,e),c&&
this._effectEffects(a,b,c,e,d));return e},__setProperty:function(a,b,c,d){d=d||this;var e=d._propertyEffects&&d._propertyEffects[a];e?d._propertySetter(a,b,e,c):d[a]!==b&&(d[a]=b)},_effectEffects:function(a,b,c,d,e){b=0;for(var g=c.length,h;b<g&&(h=c[b]);b++)h.fn.call(this,a,this[a],h.effect,d,e)},_clearPath:function(a){for(var b in this.__data__)Polymer.Path.isDescendant(a,b)&&(this.__data__[b]=void 0)}},ensurePropertyEffects:function(a,b){a._propertyEffects||(a._propertyEffects={});var c=a._propertyEffects[b];
c||(c=a._propertyEffects[b]=[]);return c},addPropertyEffect:function(a,b,c,d){a=this.ensurePropertyEffects(a,b);c={kind:c,effect:d,fn:Polymer.Bind["_"+c+"Effect"]};a.push(c);return c},createBindings:function(a){var b=a._propertyEffects;if(b)for(var c in b){var d=b[c];d.sort(this._sortPropertyEffects);this._createAccessors(a,c,d)}},_sortPropertyEffects:function(){var a={compute:0,annotation:1,annotatedComputation:2,reflect:3,notify:4,observer:5,complexObserver:6,"function":7};return function(b,c){return a[b.kind]-
a[c.kind]}}(),_createAccessors:function(a,b,c){function d(h){this._propertySetter(b,h,c)}var e={get:function(){return this.__data__[b]}},g=a.getPropertyInfo&&a.getPropertyInfo(b);g&&g.readOnly?g.computed||(a["_set"+this.upper(b)]=d):e.set=d;Object.defineProperty(a,b,e)},upper:function(a){return a[0].toUpperCase()+a.substring(1)},_addAnnotatedListener:function(a,b,c,d,e,g){a._bindListeners||(a._bindListeners=[]);g=this._notedListenerFactory(c,d,Polymer.Path.isDeep(d),g);e=e||Polymer.CaseMap.camelToDashCase(c)+
"-changed";a._bindListeners.push({index:b,property:c,path:d,changedFn:g,event:e})},_isEventBogus:function(a,b){return a.path&&a.path[0]!==b},_notedListenerFactory:function(a,b,c,d){return function(e,g,h){h?(e=Polymer.Path.translate(a,b,h),this._notifyPath(e,g)):(g=e[a],d&&(g=!g),c?this.__data__[b]!=g&&this.set(b,g):this[b]=g)}},prepareInstance:function(a){a.__data__=Object.create(null)},setupBindListeners:function(a){for(var b=a._bindListeners,c=0,d=b.length,e;c<d&&(e=b[c]);c++)this._addNotifyListener(a._nodes[e.index],
a,e.event,e.changedFn)},_addNotifyListener:function(a,b,c,d){a.addEventListener(c,function(e){return b._notifyListener(d,e)})}};
Polymer.Base.mixin(Polymer.Bind,{_shouldAddListener:function(a){return a.name&&"attribute"!=a.kind&&"text"!=a.kind&&!a.isCompound&&"{"===a.parts[0].mode},_annotationEffect:function(a,b,c){a!=c.value&&(b=this._get(c.value),this.__data__[c.value]=b);this._applyEffectValue(c,b)},_reflectEffect:function(a,b,c){this.reflectPropertyToAttribute(a,c.attribute,b)},_notifyEffect:function(a,b,c,d,e){e||this._notifyChange(a,c.event,b)},_functionEffect:function(a,b,c,d,e){c.call(this,a,b,d,e)},_observerEffect:function(a,
b,c,d){(a=this[c.method])?a.call(this,b,d):this._warn(this._logf("_observerEffect","observer method `"+c.method+"` not defined"))},_complexObserverEffect:function(a,b,c){var d=this[c.method];d?(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))&&d.apply(this,a):c.dynamicFn||this._warn(this._logf("_complexObserverEffect","observer method `"+c.method+"` not defined"))},_computeEffect:function(a,b,c){var d=this[c.method];if(d){if(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))d=d.apply(this,a),this.__setProperty(c.name,
d)}else c.dynamicFn||this._warn(this._logf("_computeEffect","compute method `"+c.method+"` not defined"))},_annotatedComputationEffect:function(a,b,c){var d=this._rootDataHost||this,e=d[c.method];if(e){if(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))d=e.apply(d,a),this._applyEffectValue(c,d)}else c.dynamicFn||d._warn(d._logf("_annotatedComputationEffect","compute method `"+c.method+"` not defined"))},_marshalArgs:function(a,b,c,d){var e=[],g=b.args;b=1<g.length||b.dynamicFn;for(var h=0,k=g.length;h<
k;h++){var l=g[h],m=l.name;if(l.literal)var n=l.value;else c===m?n=d:(n=a[m],void 0===n&&l.structured&&(n=Polymer.Base._get(m,a)));if(b&&void 0===n)return;l.wildcard?(l=Polymer.Path.isAncestor(c,m),e[h]={path:l?c:m,value:l?d:n,base:n}):e[h]=n}return e}});
Polymer.Base._addFeature({_addPropertyEffect:function(a,b,c){a=Polymer.Bind.addPropertyEffect(this,a,b,c);a.pathFn=this["_"+a.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this);this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(a){if(a)for(var b in a){var c=a[b];c.observer&&this._addObserverEffect(b,c.observer);c.computed&&(c.readOnly=!0,this._addComputedEffect(b,c.computed));c.notify&&this._addPropertyEffect(b,
"notify",{event:Polymer.CaseMap.camelToDashCase(b)+"-changed"});if(c.reflectToAttribute){var d=Polymer.CaseMap.camelToDashCase(b);"-"===d[0]?this._warn(this._logf("_addPropertyEffects","Property "+b+" cannot be reflected to attribute "+d+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(b,"reflect",{attribute:d})}c.readOnly&&Polymer.Bind.ensurePropertyEffects(this,b)}},_addComputedEffect:function(a,b){b=this._parseMethod(b);
for(var c=b.dynamicFn,d=0,e;d<b.args.length&&(e=b.args[d]);d++)this._addPropertyEffect(e.model,"compute",{method:b.method,args:b.args,trigger:e,name:a,dynamicFn:c});c&&this._addPropertyEffect(b.method,"compute",{method:b.method,args:b.args,trigger:null,name:a,dynamicFn:c})},_addObserverEffect:function(a,b){this._addPropertyEffect(a,"observer",{method:b,property:a})},_addComplexObserverEffects:function(a){if(a)for(var b=0,c;b<a.length&&(c=a[b]);b++)this._addComplexObserverEffect(c)},_addComplexObserverEffect:function(a){var b=
this._parseMethod(a);if(!b)throw Error("Malformed observer expression '"+a+"'");a=b.dynamicFn;for(var c=0,d;c<b.args.length&&(d=b.args[c]);c++)this._addPropertyEffect(d.model,"complexObserver",{method:b.method,args:b.args,trigger:d,dynamicFn:a});a&&this._addPropertyEffect(b.method,"complexObserver",{method:b.method,args:b.args,trigger:null,dynamicFn:a})},_addAnnotationEffects:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)for(var d=c.bindings,e=0,g;e<d.length&&(g=d[e]);e++)this._addAnnotationEffect(g,
b)},_addAnnotationEffect:function(a,b){Polymer.Bind._shouldAddListener(a)&&Polymer.Bind._addAnnotatedListener(this,b,a.name,a.parts[0].value,a.parts[0].event,a.parts[0].negate);for(var c=0;c<a.parts.length;c++){var d=a.parts[c];d.signature?this._addAnnotatedComputationEffect(a,d,b):d.literal||("attribute"===a.kind&&"-"===a.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+a.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(d.model,
"annotation",{kind:a.kind,index:b,name:a.name,propertyName:a.propertyName,value:d.value,isCompound:a.isCompound,compoundIndex:d.compoundIndex,event:d.event,customEvent:d.customEvent,negate:d.negate}))}},_addAnnotatedComputationEffect:function(a,b,c){var d=b.signature;if(d.static)this.__addAnnotatedComputationEffect("__static__",c,a,b,null);else{for(var e=0,g;e<d.args.length&&(g=d.args[e]);e++)g.literal||this.__addAnnotatedComputationEffect(g.model,c,a,b,g);d.dynamicFn&&this.__addAnnotatedComputationEffect(d.method,
c,a,b,null)}},__addAnnotatedComputationEffect:function(a,b,c,d,e){this._addPropertyEffect(a,"annotatedComputation",{index:b,isCompound:c.isCompound,compoundIndex:d.compoundIndex,kind:c.kind,name:c.name,negate:d.negate,method:d.signature.method,args:d.signature.args,trigger:e,dynamicFn:d.signature.dynamicFn})},_parseMethod:function(a){var b=a.match(/([^\s]+?)\(([\s\S]*)\)/);if(b){a={method:b[1],static:!0};this.getPropertyInfo(a.method)!==Polymer.nob&&(a.static=!1,a.dynamicFn=!0);if(b[2].trim())return b=
b[2].replace(/\\,/g,"\x26comma;").split(","),this._parseArgs(b,a);a.args=Polymer.nar;return a}},_parseArgs:function(a,b){b.args=a.map(function(c){c=this._parseArg(c);c.literal||(b.static=!1);return c},this);return b},_parseArg:function(a){a=a.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1");var b={name:a},c=a[0];"-"===c&&(c=a[1]);"0"<=c&&"9">=c&&(c="#");switch(c){case "'":case '"':b.value=a.slice(1,-1);b.literal=!0;break;case "#":b.value=Number(a),b.literal=!0}b.literal||(b.model=Polymer.Path.root(a),
b.structured=Polymer.Path.isDeep(a),b.structured&&(b.wildcard=".*"==a.slice(-2),b.wildcard&&(b.name=a.slice(0,-2))));return b},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this);this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(a,b){var c=this._nodes[a.index],d=a.name;b=this._computeFinalAnnotationValue(c,d,b,a);"attribute"==a.kind?this.serializeValueToAttribute(b,d,c):(a=c._propertyInfo&&c._propertyInfo[d])&&a.readOnly||this.__setProperty(d,
b,Polymer.Settings.suppressBindingNotifications,c)},_computeFinalAnnotationValue:function(a,b,c,d){d.negate&&(c=!c);if(d.isCompound){var e=a.__compoundStorage__[b];e[d.compoundIndex]=c;c=e.join("")}"attribute"!==d.kind&&("className"===b&&(c=this._scopeElementClass(a,c)),"textContent"===b||"input"==a.localName&&"value"==b)&&(c=void 0==c?"":c);return c},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}});
(function(){var a=Polymer.Settings.usePolyfillProto,b=!!Object.getOwnPropertyDescriptor(document.documentElement,"properties");Polymer.Base._addFeature({_setupConfigure:function(c){this._config={};this._handlers=[];this._aboveConfig=null;if(c)for(var d in c)void 0!==c[d]&&(this._config[d]=c[d])},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(c){this._setAttributeToProperty(this._clientsReadied?this:this._config,c)},_configValue:function(c,d){var e=
this._propertyInfo[c];e&&e.readOnly||(this._config[c]=d)},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences();this._configureInstanceProperties();this._aboveConfig=this.mixin({},this._config);for(var c={},d=0;d<this.behaviors.length;d++)this._configureProperties(this.behaviors[d].properties,c);this._configureProperties(b?this.__proto__.properties:this.properties,c);this.mixin(c,this._aboveConfig);this._config=c;this._clients&&this._clients.length&&
this._distributeConfig(this._config)},_configureInstanceProperties:function(){for(var c in this._propertyEffects)!a&&this.hasOwnProperty(c)&&(this._configValue(c,this[c]),delete this[c])},_configureProperties:function(c,d){for(var e in c){var g=c[e];void 0!==g.value&&(g=g.value,"function"==typeof g&&(g=g.call(this,this._config)),d[e]=g)}},_distributeConfig:function(c){var d=this._propertyEffects;if(d)for(var e in c){var g=d[e];if(g)for(var h=0,k=g.length,l;h<k&&(l=g[h]);h++)if("annotation"===l.kind){var m=
this._nodes[l.effect.index],n=l.effect.propertyName,q="attribute"==l.effect.kind,p=m._propertyEffects&&m._propertyEffects[n];!m._configValue||!p&&q||(p=e===l.effect.value?c[e]:this._get(l.effect.value,c),p=this._computeFinalAnnotationValue(m,n,p,l.effect),q&&(p=m.deserialize(this.serialize(p),m._propertyInfo[n].type)),m._configValue(n,p))}}},_afterClientsReady:function(){this.importPath=this._importPath;this.rootPath=Polymer.rootPath;this._executeStaticEffects();this._applyConfig(this._config,this._aboveConfig);
this._flushHandlers()},_applyConfig:function(c,d){for(var e in c)void 0===this[e]&&this.__setProperty(e,c[e],e in d)},_notifyListener:function(c,d){if(!Polymer.Bind._isEventBogus(d,d.target)){if(d.detail){var e=d.detail.value;var g=d.detail.path}if(this._clientsReadied)return c.call(this,d.target,e,g);this._queueHandler([c,d.target,e,g])}},_queueHandler:function(c){this._handlers.push(c)},_flushHandlers:function(){for(var c=this._handlers,d=0,e=c.length,g;d<e&&(g=c[d]);d++)g[0].call(this,g[1],g[2],
g[3]);this._handlers=[]}})})();
(function(){var a=Polymer.Path;Polymer.Base._addFeature({notifyPath:function(b,c,d){var e={},g=this._get(b,this,e);1===arguments.length&&(c=g);e.path&&this._notifyPath(e.path,c,d)},_notifyPath:function(b,c,d){var e=this._propertySetter(b,c);if(e!==c&&(e===e||c===c))return this._pathEffector(b,c),d||this._notifyPathUp(b,c),!0},_getPathParts:function(b){if(Array.isArray(b)){for(var c=[],d=0;d<b.length;d++)for(var e=b[d].toString().split("."),g=0;g<e.length;g++)c.push(e[g]);return c}return b.toString().split(".")},
set:function(b,c,d){var e=d||this,g=this._getPathParts(b),h=g[g.length-1];if(1<g.length){for(b=0;b<g.length-1;b++){var k=g[b];l&&"#"==k[0]?e=Polymer.Collection.get(l).getItem(k):(e=e[k],l&&parseInt(k,10)==k&&(g[b]=Polymer.Collection.get(l).getKey(e)));if(!e)return;var l=Array.isArray(e)?e:null}if(l)if(k=Polymer.Collection.get(l),"#"==h[0]){var m=h;var n=k.getItem(m);h=l.indexOf(n);k.setItem(m,c)}else parseInt(h,10)==h&&(n=e[h],m=k.getKey(n),g[b]=m,k.setItem(m,c));e[h]=c;d||this._notifyPath(g.join("."),
c)}else e[b]=c},get:function(b,c){return this._get(b,c)},_get:function(b,c,d){c=c||this;b=this._getPathParts(b);for(var e,g=0;g<b.length;g++){if(!c)return;var h=b[g];e&&"#"==h[0]?c=Polymer.Collection.get(e).getItem(h):(c=c[h],d&&e&&parseInt(h,10)==h&&(b[g]=Polymer.Collection.get(e).getKey(c)));e=Array.isArray(c)?c:null}d&&(d.path=b.join("."));return c},_pathEffector:function(b,c){var d=a.root(b);if(d=this._propertyEffects&&this._propertyEffects[d])for(var e=0,g;e<d.length&&(g=d[e]);e++){var h=g.pathFn;
h&&h.call(this,b,c,g.effect)}this._boundPaths&&this._notifyBoundPaths(b,c)},_annotationPathEffect:function(b,c,d){if(a.matches(d.value,!1,b))Polymer.Bind._annotationEffect.call(this,b,c,d);else if(!d.negate&&a.isDescendant(d.value,b)){var e=this._nodes[d.index];e&&e._notifyPath&&(b=a.translate(d.value,d.name,b),e._notifyPath(b,c,!0))}},_complexObserverPathEffect:function(b,c,d){a.matches(d.trigger.name,d.trigger.wildcard,b)&&Polymer.Bind._complexObserverEffect.call(this,b,c,d)},_computePathEffect:function(b,
c,d){a.matches(d.trigger.name,d.trigger.wildcard,b)&&Polymer.Bind._computeEffect.call(this,b,c,d)},_annotatedComputationPathEffect:function(b,c,d){a.matches(d.trigger.name,d.trigger.wildcard,b)&&Polymer.Bind._annotatedComputationEffect.call(this,b,c,d)},linkPaths:function(b,c){this._boundPaths=this._boundPaths||{};c?this._boundPaths[b]=c:this.unlinkPaths(b)},unlinkPaths:function(b){this._boundPaths&&delete this._boundPaths[b]},_notifyBoundPaths:function(b,c){for(var d in this._boundPaths){var e=this._boundPaths[d];
a.isDescendant(d,b)?this._notifyPath(a.translate(d,e,b),c):a.isDescendant(e,b)&&this._notifyPath(a.translate(e,d,b),c)}},_notifyPathUp:function(b,c){var d=a.root(b);d=Polymer.CaseMap.camelToDashCase(d)+this._EVENT_CHANGED;this.fire(d,{path:b,value:c},{bubbles:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_EVENT_CHANGED:"-changed",notifySplices:function(b,c){var d={};b=this._get(b,this,d);this._notifySplices(b,d.path,c)},_notifySplices:function(b,c,d){d={keySplices:Polymer.Collection.applySplices(b,
d),indexSplices:d};var e=c+".splices";this._notifyPath(e,d);this._notifyPath(c+".length",b.length);this.__data__[e]={keySplices:null,indexSplices:null}},_notifySplice:function(b,c,d,e,g){this._notifySplices(b,c,[{index:d,addedCount:e,removed:g,object:b,type:"splice"}])},push:function(b){var c={},d=this._get(b,this,c),e=Array.prototype.slice.call(arguments,1),g=d.length,h=d.push.apply(d,e);e.length&&this._notifySplice(d,c.path,g,e.length,[]);return h},pop:function(b){var c={},d=this._get(b,this,c),
e=!!d.length,g=d.pop.apply(d,Array.prototype.slice.call(arguments,1));e&&this._notifySplice(d,c.path,d.length,0,[g]);return g},splice:function(b,c){var d={},e=this._get(b,this,d);(c=0>c?e.length-Math.floor(-c):Math.floor(c))||(c=0);var g=Array.prototype.slice.call(arguments,1),h=e.splice.apply(e,g);((g=Math.max(g.length-2,0))||h.length)&&this._notifySplice(e,d.path,c,g,h);return h},shift:function(b){var c={},d=this._get(b,this,c),e=!!d.length,g=d.shift.apply(d,Array.prototype.slice.call(arguments,
1));e&&this._notifySplice(d,c.path,0,0,[g]);return g},unshift:function(b){var c={},d=this._get(b,this,c),e=Array.prototype.slice.call(arguments,1),g=d.unshift.apply(d,e);e.length&&this._notifySplice(d,c.path,0,e.length,[]);return g},prepareModelNotifyPath:function(b){this.mixin(b,{fire:Polymer.Base.fire,_getEvent:Polymer.Base._getEvent,__eventCache:Polymer.Base.__eventCache,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,
_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})})();
Polymer.Base._addFeature({resolveUrl:function(a){return Polymer.ResolveUrl.resolveUrl(a,this._importPath)}});
Polymer.CssParse={parse:function(a){a=this._clean(a);return this._parseCss(this._lex(a),a)},_clean:function(a){return a.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(a){for(var b={start:0,end:a.length},c=b,d=0,e=a.length;d<e;d++)switch(a[d]){case this.OPEN_BRACE:c.rules||(c.rules=[]);var g=c;c={start:d+1,parent:g,previous:g.rules[g.rules.length-1]};g.rules.push(c);break;case this.CLOSE_BRACE:c.end=d+1,c=c.parent||b}return b},_parseCss:function(a,b){var c=b.substring(a.start,
a.end-1);a.parsedCssText=a.cssText=c.trim();a.parent&&(c=b.substring(a.previous?a.previous.end:a.parent.start,a.start-1),c=this._expandUnicodeEscapes(c),c=c.replace(this._rx.multipleSpaces," "),c=c.substring(c.lastIndexOf(";")+1),c=a.parsedSelector=a.selector=c.trim(),a.atRule=0===c.indexOf(this.AT_START),a.atRule?0===c.indexOf(this.MEDIA_START)?a.type=this.types.MEDIA_RULE:c.match(this._rx.keyframesRule)&&(a.type=this.types.KEYFRAMES_RULE,a.keyframesName=a.selector.split(this._rx.multipleSpaces).pop()):
a.type=0===c.indexOf(this.VAR_START)?this.types.MIXIN_RULE:this.types.STYLE_RULE);if(c=a.rules)for(var d=0,e=c.length,g;d<e&&(g=c[d]);d++)this._parseCss(g,b);return a},_expandUnicodeEscapes:function(a){return a.replace(/\\([0-9a-f]{1,6})\s/gi,function(b,c){b=c;for(c=6-b.length;c--;)b="0"+b;return"\\"+b})},stringify:function(a,b,c){c=c||"";var d="";if(a.cssText||a.rules){var e=a.rules;if(e&&!this._hasMixinRules(e))for(var g=0,h=e.length,k;g<h&&(k=e[g]);g++)d=this.stringify(k,b,d);else d=b?a.cssText:
this.removeCustomProps(a.cssText),(d=d.trim())&&(d="  "+d+"\n")}d&&(a.selector&&(c+=a.selector+" "+this.OPEN_BRACE+"\n"),c+=d,a.selector&&(c+=this.CLOSE_BRACE+"\n\n"));return c},_hasMixinRules:function(a){return 0===a[0].selector.indexOf(this.VAR_START)},removeCustomProps:function(a){a=this.removeCustomPropAssignment(a);return this.removeCustomPropApply(a)},removeCustomPropAssignment:function(a){return a.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(a){return a.replace(this._rx.mixinApply,
"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1E3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},
VAR_START:"--",MEDIA_START:"@media",AT_START:"@"};
Polymer.StyleUtil=function(){var a=Polymer.Settings;return{unscopedStyleImports:new WeakMap,SHADY_UNSCOPED_ATTR:"shady-unscoped",NATIVE_VARIABLES:Polymer.Settings.useNativeCSSProperties,MODULE_STYLES_SELECTOR:"style, link[rel\x3dimport][type~\x3dcss], template",INCLUDE_ATTR:"include",toCssText:function(b,c){"string"===typeof b&&(b=this.parser.parse(b));c&&this.forEachRule(b,c);return this.parser.stringify(b,this.NATIVE_VARIABLES)},forRulesInStyles:function(b,c,d){if(b)for(var e=0,g=b.length,h;e<g&&
(h=b[e]);e++)this.forEachRuleInStyle(h,c,d)},forActiveRulesInStyles:function(b,c,d){if(b)for(var e=0,g=b.length,h;e<g&&(h=b[e]);e++)this.forEachRuleInStyle(h,c,d,!0)},rulesForStyle:function(b){!b.__cssRules&&b.textContent&&(b.__cssRules=this.parser.parse(b.textContent));return b.__cssRules},isKeyframesSelector:function(b){return b.parent&&b.parent.type===this.ruleTypes.KEYFRAMES_RULE},forEachRuleInStyle:function(b,c,d,e){var g=this.rulesForStyle(b),h,k;c&&(h=function(l){c(l,b)});d&&(k=function(l){d(l,
b)});this.forEachRule(g,h,k,e)},forEachRule:function(b,c,d,e){if(b){var g=!1;if(e&&b.type===this.ruleTypes.MEDIA_RULE){var h=b.selector.match(this.rx.MEDIA_MATCH);h&&(window.matchMedia(h[1]).matches||(g=!0))}b.type===this.ruleTypes.STYLE_RULE?c(b):d&&b.type===this.ruleTypes.KEYFRAMES_RULE?d(b):b.type===this.ruleTypes.MIXIN_RULE&&(g=!0);if((b=b.rules)&&!g){g=0;h=b.length;for(var k;g<h&&(k=b[g]);g++)this.forEachRule(k,c,d,e)}}},applyCss:function(b,c,d,e){b=this.createScopeStyle(b,c);return this.applyStyle(b,
d,e)},applyStyle:function(b,c,d){c=c||document.head;d=d&&d.nextSibling||c.firstChild;this.__lastHeadApplyNode=b;return c.insertBefore(b,d)},createScopeStyle:function(b,c){var d=document.createElement("style");c&&d.setAttribute("scope",c);d.textContent=b;return d},__lastHeadApplyNode:null,applyStylePlaceHolder:function(b){b=document.createComment(" Shady DOM styles for "+b+" ");var c=document.head;c.insertBefore(b,(this.__lastHeadApplyNode?this.__lastHeadApplyNode.nextSibling:null)||c.firstChild);
return this.__lastHeadApplyNode=b},cssFromModules:function(b,c){b=b.trim().split(/\s+/);for(var d="",e=0;e<b.length;e++)d+=this.cssFromModule(b[e],c);return d},cssFromModule:function(b,c){var d=Polymer.DomModule.import(b);d&&!d._cssText&&(d._cssText=this.cssFromElement(d));!d&&c&&console.warn("Could not find style data in module named",b);return d&&d._cssText||""},cssFromElement:function(b){for(var c="",d=Polymer.TreeApi.arrayCopy((b.content||b).querySelectorAll(this.MODULE_STYLES_SELECTOR)),e=0,
g;e<d.length;e++)if(g=d[e],"template"===g.localName)g.hasAttribute("preserve-content")||(c+=this.cssFromElement(g));else if("style"===g.localName){var h=g.getAttribute(this.INCLUDE_ATTR);h&&(c+=this.cssFromModules(h,!0));g=g.__appliedElement||g;g.parentNode.removeChild(g);h=this.resolveCss(g.textContent,b.ownerDocument);!a.useNativeShadow&&g.hasAttribute(this.SHADY_UNSCOPED_ATTR)?(g.textContent=h,document.head.insertBefore(g,document.head.firstChild)):c+=h}else g.import&&g.import.body&&(h=this.resolveCss(g.import.body.textContent,
g.import),!a.useNativeShadow&&g.hasAttribute(this.SHADY_UNSCOPED_ATTR)?this.unscopedStyleImports.has(g.import)||(this.unscopedStyleImports.set(g.import,!0),g=document.createElement("style"),g.setAttribute(this.SHADY_UNSCOPED_ATTR,""),g.textContent=h,document.head.insertBefore(g,document.head.firstChild)):c+=h);return c},styleIncludesToTemplate:function(b){b=b.content.querySelectorAll("style[include]");for(var c=0,d;c<b.length;c++)d=b[c],d.parentNode.insertBefore(this._includesToFragment(d.getAttribute("include")),
d)},_includesToFragment:function(b){b=b.trim().split(" ");for(var c=document.createDocumentFragment(),d=0;d<b.length;d++){var e=Polymer.DomModule.import(b[d],"template");e&&this._addStylesToFragment(c,e.content)}return c},_addStylesToFragment:function(b,c){c=c.querySelectorAll("style");for(var d=0,e;d<c.length;d++){e=c[d];var g=e.getAttribute("include");g&&b.appendChild(this._includesToFragment(g));e.textContent&&b.appendChild(e.cloneNode(!0))}},isTargetedBuild:function(b){return a.useNativeShadow?
"shadow"===b:"shady"===b},cssBuildTypeForModule:function(b){if(b=Polymer.DomModule.import(b))return this.getCssBuildType(b)},getCssBuildType:function(b){return b.getAttribute("css-build")},_findMatchingParen:function(b,c){for(var d=0,e=b.length;c<e;c++)switch(b[c]){case "(":d++;break;case ")":if(0===--d)return c}return-1},processVariableAndFallback:function(b,c){var d=b.indexOf("var(");if(-1===d)return c(b,"","","");var e=this._findMatchingParen(b,d+3),g=b.substring(d+4,e);d=b.substring(0,d);b=this.processVariableAndFallback(b.substring(e+
1),c);var h=g.indexOf(",");if(-1===h)return c(d,g.trim(),"",b);e=g.substring(0,h).trim();g=g.substring(h+1).trim();return c(d,e,g,b)},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,VAR_CONSUMED:/(--[\w-]+)\s*([:,;)]|$)/gi,ANIMATION_MATCH:/(animation\s*:)|(animation-name\s*:)/,MEDIA_MATCH:/@media[^(]*(\([^)]*\))/,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s\x3e+~])"},
resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}();
Polymer.StyleTransformer=function(){var a=Polymer.StyleUtil,b=Polymer.Settings,c={dom:function(H,O,P,D){this._transformDom(H,O||"",P,D)},_transformDom:function(H,O,P,D){H.setAttribute&&this.element(H,O,P,D);H=Polymer.dom(H).childNodes;for(var R=0;R<H.length;R++)this._transformDom(H[R],O,P,D)},element:function(H,O,P,D){P?D?H.removeAttribute(d):H.setAttribute(d,O):O&&(H.classList?D?(H.classList.remove(d),H.classList.remove(O)):(H.classList.add(d),H.classList.add(O)):H.getAttribute&&(P=H.getAttribute(A),
D?P&&H.setAttribute(A,P.replace(d,"").replace(O,"")):H.setAttribute(A,(P?P+" ":"")+d+" "+O)))},elementStyles:function(H,O){var P=H._styles,D="",R=H.__cssBuild;R=b.useNativeShadow||"shady"===R;if(R){var U=this;var I=function(Y){Y.selector=U._slottedToContent(Y.selector);Y.selector=Y.selector.replace(m,":host \x3e *");Y.selector=U._dirShadowTransform(Y.selector);O&&O(Y)}}for(var J=0,S=P.length,X;J<S&&(X=P[J]);J++){var M=a.rulesForStyle(X);D+=R?a.toCssText(M,I):this.css(M,H.is,H.extends,O,H._scopeCssViaAttr)+
"\n\n"}return D.trim()},css:function(H,O,P,D,R){var U=this._calcHostScope(O,P);O=this._calcElementScope(O,R);var I=this;return a.toCssText(H,function(J){J.isScoped||(I.rule(J,O,U),J.isScoped=!0);D&&D(J,O,U)})},_calcElementScope:function(H,O){return H?O?u+H+w:v+H:""},_calcHostScope:function(H,O){return O?"[is\x3d"+H+"]":H},rule:function(H,O,P){this._transformRule(H,this._transformComplexSelector,O,P)},_transformRule:function(H,O,P,D){H.selector=H.transformedSelector=this._transformRuleCss(H,O,P,D)},
_splitSelectorList:function(H){for(var O=[],P="",D=0;0<=D&&D<H.length;D++)if("("===H[D]){var R=a._findMatchingParen(H,D);P+=H.slice(D,R+1);D=R}else H[D]===g?(O.push(P),P=""):P+=H[D];P&&O.push(P);0===O.length&&O.push(H);return O},_transformRuleCss:function(H,O,P,D){var R=this._splitSelectorList(H.selector);if(!a.isKeyframesSelector(H)){H=0;for(var U=R.length,I;H<U&&(I=R[H]);H++)R[H]=O.call(this,I,P,D)}return R.join(g)},_ensureScopedDir:function(H){var O=H.match(L);O&&""===O[1]&&O[0].length===H.length&&
(H="*"+H);return H},_additionalDirSelectors:function(H,O,P){return H&&O?g+(P||"")+" "+H+" "+O:""},_transformComplexSelector:function(H,O,P){var D=!1,R=!1,U=!1,I=this;H=H.trim();H=this._slottedToContent(H);H=H.replace(m,":host \x3e *");H=H.replace(y,l+" $1");H=this._ensureScopedDir(H);H=H.replace(h,function(J,S,X){D?X=X.replace(r," "):(J=I._transformCompoundSelector(X,S,O,P),D=D||J.stop,R=R||J.hostContext,U=U||J.dir,S=J.combinator,X=J.value);return S+X});R&&(H=H.replace(p,function(J,S,X,M){J=S+X+" "+
P+M+g+" "+S+P+X+M;U&&(J+=I._additionalDirSelectors(X,M,P));return J}));return H},_transformDir:function(H){H=H.replace(Q,W);return H=H.replace(L,N)},_transformCompoundSelector:function(H,O,P,D){var R=H.search(r),U=!1,I=!1;H.match(L)&&(H=this._transformDir(H),I=!0);0<=H.indexOf(q)?U=!0:0<=H.indexOf(l)?H=this._transformHostSelector(H,D):0!==R&&(H=P?this._transformSimpleSelector(H,P):H);0<=H.indexOf(t)&&(O="");if(0<=R){H=H.replace(r," ");var J=!0}return{value:H,combinator:O,stop:J,hostContext:U,dir:I}},
_transformSimpleSelector:function(H,O){H=H.split(x);H[0]+=O;return H.join(x)},_transformHostSelector:function(H,O){var P=H.match(n);return(P=P&&P[2].trim()||"")?P[0].match(k)?H.replace(n,function(D,R,U){return O+U}):P.split(k)[0]===O?P:B:H.replace(l,O)},documentRule:function(H){H.selector=H.parsedSelector;this.normalizeRootSelector(H);b.useNativeShadow||this._transformRule(H,this._transformDocumentSelector)},normalizeRootSelector:function(H){H.selector=H.selector.replace(m,"html");var O=this._splitSelectorList(H.selector);
O=O.filter(function(P){return!P.match(K)});H.selector=O.join(g)},_transformDocumentSelector:function(H){return this._transformComplexSelector(H,e)},_slottedToContent:function(H){return H.replace(F,t+"\x3e $1")},_dirShadowTransform:function(H){return H.match(/:dir\(/)?this._splitSelectorList(H).map(function(O){O=this._ensureScopedDir(O);O=this._transformDir(O);var P=p.exec(O);P&&(O+=this._additionalDirSelectors(P[2],P[3],""));return O},this).join(g):H},SCOPE_NAME:"style-scope"},d=c.SCOPE_NAME,e=":not(["+
d+"]):not(."+d+")",g=",",h=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g,k=/[[.:#*]/,l=":host",m=":root",n=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,q=":host-context",p=/(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,t="::content",r=/::content|::shadow|\/deep\//,v=".",u="["+d+"~\x3d",w="]",x=":",A="class",y=new RegExp("^("+t+")"),B="should_not_match",F=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g,K=/:host(?:\s*>\s*\*)?/,L=/(.*):dir\((ltr|rtl)\)/,N=':host-context([dir\x3d"$2"]) $1',
Q=/:host\(:dir\((rtl|ltr)\)\)/g,W=':host-context([dir\x3d"$1"])';return c}();
Polymer.StyleExtends=function(){var a=Polymer.StyleUtil;return{hasExtends:function(b){return!!b.match(this.rx.EXTEND)},transform:function(b){b=a.rulesForStyle(b);var c=this;a.forEachRule(b,function(d){c._mapRuleOntoParent(d);if(d.parent)for(var e;e=c.rx.EXTEND.exec(d.cssText);)(e=c._findExtendor(e[1],d))&&c._extendRule(d,e);d.cssText=d.cssText.replace(c.rx.EXTEND,"")});return a.toCssText(b,function(d){d.selector.match(c.rx.STRIP)&&(d.cssText="")},!0)},_mapRuleOntoParent:function(b){if(b.parent){for(var c=
b.parent.map||(b.parent.map={}),d=b.selector.split(","),e=0,g;e<d.length;e++)g=d[e],c[g.trim()]=b;return c}},_findExtendor:function(b,c){return c.parent&&c.parent.map&&c.parent.map[b]||this._findExtendor(b,c.parent)},_extendRule:function(b,c){b.parent!==c.parent&&this._cloneAndAddRuleToParent(c,b.parent);b.extends=b.extends||[];b.extends.push(c);c.selector=c.selector.replace(this.rx.STRIP,"");c.selector=(c.selector&&c.selector+",\n")+b.selector;c.extends&&c.extends.forEach(function(d){this._extendRule(b,
d)},this)},_cloneAndAddRuleToParent:function(b,c){b=Object.create(b);b.parent=c;b.extends&&(b.extends=b.extends.slice());c.rules.push(b)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}();
Polymer.ApplyShim=function(){function a(v,u){v=v.trim();t[v]={properties:u,dependants:{}}}function b(v){v=v.trim();return t[v]}function c(v){v=v.split(";");for(var u,w,x={},A=0,y;A<v.length;A++)if(u=v[A])if(y=u.split(":"),1<y.length){w=u=y[0].trim();y=y.slice(1).join(":");var B=p.exec(y);B&&(y=B[1]?r._getInitialValueForProperty(w):"apply-shim-inherit");w=y;x[u]=w}return x}function d(v){var u=r.__currentElementProto;u=u&&u.is;for(var w in v.dependants)w!==u&&(v.dependants[w].__applyShimInvalid=!0)}
function e(v,u,w,x){w&&k.processVariableAndFallback(w,function(H,O){O&&b(O)&&(x="@apply "+O+";")});if(!x)return v;var A=h(x),y=v.slice(0,v.indexOf("--")),B=A=c(A),F=b(u),K=F&&F.properties;K?(B=Object.create(K),B=Polymer.Base.mixin(B,A)):a(u,B);var L=[],N,Q=!1;for(N in B){var W=A[N];void 0===W&&(W="initial");!K||N in K||(Q=!0);L.push(u+"_-_"+N+": "+W)}Q&&d(F);F&&(F.properties=B);w&&(y=v+";"+y);return y+L.join("; ")+";"}function g(v,u,w){return"var("+u+",var("+w+"))"}function h(v){for(var u;u=l.exec(v);){var w=
u[0],x=u[1];u=u.index;var A=v.slice(0,u+w.indexOf("@apply"));v=v.slice(u+w.length);var y=c(A),B;w=void 0;x=x.replace(q,"");var F=[];var K=b(x);K||(a(x,{}),K=b(x));if(K)for(w in(B=r.__currentElementProto)&&(K.dependants[B.is]=B),K.properties)K=y&&y[w],B=[w,": var(",x,"_-_",w],K&&B.push(",",K),B.push(")"),F.push(B.join(""));w=F.join("; ");v=[A,w,v].join("");l.lastIndex=u+w.length}return v}var k=Polymer.StyleUtil,l=k.rx.MIXIN_MATCH,m=k.rx.VAR_ASSIGN,n=/var\(\s*(--[^,]*),\s*(--[^)]*)\)/g,q=/;\s*/m,p=
/^\s*(initial)|(inherit)\s*$/,t={},r={_measureElement:null,_map:t,_separator:"_-_",transform:function(v,u){this.__currentElementProto=u;k.forRulesInStyles(v,this._boundFindDefinitions);k.forRulesInStyles(v,this._boundFindApplications);u&&(u.__applyShimInvalid=!1);this.__currentElementProto=null},_findDefinitions:function(v){var u=v.parsedCssText;u=u.replace(n,g);u=u.replace(m,e);v.cssText=u;":root"===v.selector&&(v.selector=":host \x3e *")},_findApplications:function(v){v.cssText=h(v.cssText)},transformRule:function(v){this._findDefinitions(v);
this._findApplications(v)},_getInitialValueForProperty:function(v){this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement));return window.getComputedStyle(this._measureElement).getPropertyValue(v)}};r._boundTransformRule=r.transformRule.bind(r);r._boundFindDefinitions=r._findDefinitions.bind(r);r._boundFindApplications=r._findApplications.bind(r);return r}();
(function(){var a=Polymer.Base._prepElement,b=Polymer.Settings.useNativeShadow,c=Polymer.StyleUtil,d=Polymer.StyleTransformer,e=Polymer.StyleExtends,g=Polymer.ApplyShim,h=Polymer.Settings;Polymer.Base._addFeature({_prepElement:function(k){this._encapsulateStyle&&"shady"!==this.__cssBuild&&d.element(k,this.is,this._scopeCssViaAttr);a.call(this,k)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!b);b||(this._scopeStyle=c.applyStylePlaceHolder(this.is));this.__cssBuild=
c.cssBuildTypeForModule(this.is)},_prepShimStyles:function(){if(this._template){var k=c.isTargetedBuild(this.__cssBuild);h.useNativeCSSProperties&&"shadow"===this.__cssBuild&&k?h.preserveStyleIncludes&&c.styleIncludesToTemplate(this._template):(this._styles=this._styles||this._collectStyles(),h.useNativeCSSProperties&&!this.__cssBuild&&g.transform(this._styles,this),k=h.useNativeCSSProperties&&k?this._styles.length&&this._styles[0].textContent.trim():d.elementStyles(this),this._prepStyleProperties(),
!this._needsStyleProperties()&&k&&c.applyCss(k,this.is,b?this._template.content:null,this._scopeStyle))}else this._styles=[]},_collectStyles:function(){var k=[],l="",m=this.styleModules;if(m)for(var n=0,q=m.length,p;n<q&&(p=m[n]);n++)l+=c.cssFromModule(p);l+=c.cssFromModule(this.is);m=this._template&&this._template.parentNode;!this._template||m&&m.id.toLowerCase()===this.is||(l+=c.cssFromElement(this._template));l&&(m=document.createElement("style"),m.textContent=l,e.hasExtends(m.textContent)&&e.transform(m),
k.push(m));return k},_elementAdd:function(k){this._encapsulateStyle&&(k.__styleScoped?k.__styleScoped=!1:d.dom(k,this.is,this._scopeCssViaAttr))},_elementRemove:function(k){this._encapsulateStyle&&d.dom(k,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(k,l){if(!b){var m=this,n=function(q){if(q.nodeType===Node.ELEMENT_NODE){var p=q.getAttribute("class");q.setAttribute("class",m._scopeElementClass(q,p));q=q.querySelectorAll("*");for(var t=0,r;t<q.length&&(r=q[t]);t++)p=r.getAttribute("class"),
r.setAttribute("class",m._scopeElementClass(r,p))}};n(k);if(l)return l=new MutationObserver(function(q){for(var p=0,t;p<q.length&&(t=q[p]);p++)if(t.addedNodes)for(var r=0;r<t.addedNodes.length;r++)n(t.addedNodes[r])}),l.observe(k,{childList:!0,subtree:!0}),l}}})})();
Polymer.StyleProperties=function(){var a=Polymer.DomApi.matchesSelector,b=Polymer.StyleUtil,c=Polymer.StyleTransformer,d=navigator.userAgent.match("Trident"),e=Polymer.Settings;return{decorateStyles:function(g,h){var k=this,l={},m=[],n=0,q=c._calcHostScope(h.is,h.extends);b.forRulesInStyles(g,function(t,r){k.decorateRule(t);t.index=n++;k.whenHostOrRootRule(h,t,r,function(v){t.parent.type===b.ruleTypes.MEDIA_RULE&&(h.__notStyleScopeCacheable=!0);v.isHost&&(v=v.selector.split(" ").some(function(u){return 0===
u.indexOf(q)&&u.length!==q.length}),h.__notStyleScopeCacheable=h.__notStyleScopeCacheable||v)});k.collectPropertiesInCssText(t.propertyInfo.cssText,l)},function(t){m.push(t)});g._keyframes=m;g=[];for(var p in l)g.push(p);return g},decorateRule:function(g){if(g.propertyInfo)return g.propertyInfo;var h={},k={};this.collectProperties(g,k)&&(h.properties=k,g.rules=null);h.cssText=this.collectCssText(g);return g.propertyInfo=h},collectProperties:function(g,h){var k=g.propertyInfo;if(k){if(k.properties)return Polymer.Base.mixin(h,
k.properties),!0}else{k=this.rx.VAR_ASSIGN;for(var l=g.parsedCssText,m;g=k.exec(l);)m=(g[2]||g[3]).trim(),"inherit"!==m&&(h[g[1].trim()]=m),m=!0;return m}},collectCssText:function(g){return this.collectConsumingCssText(g.parsedCssText)},collectConsumingCssText:function(g){return g.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(g,h){for(var k;k=this.rx.VAR_CONSUMED.exec(g);){var l=k[1];":"!==k[2]&&(h[l]=!0)}},reify:function(g){for(var h=Object.getOwnPropertyNames(g),
k=0,l;k<h.length;k++)l=h[k],g[l]=this.valueForProperty(g[l],g)},valueForProperty:function(g,h){if(g)if(0<=g.indexOf(";"))g=this.valueForProperties(g,h);else{var k=this;g=b.processVariableAndFallback(g,function(l,m,n,q){(m=k.valueForProperty(h[m],h))&&"initial"!==m?"apply-shim-inherit"===m&&(m="inherit"):m=k.valueForProperty(h[n]||n,h)||n;return l+(m||"")+q})}return g&&g.trim()||""},valueForProperties:function(g,h){g=g.split(";");for(var k=0,l,m;k<g.length;k++)if(l=g[k]){this.rx.MIXIN_MATCH.lastIndex=
0;if(m=this.rx.MIXIN_MATCH.exec(l))l=this.valueForProperty(h[m[1]],h);else if(m=l.indexOf(":"),-1!==m){var n=l.substring(m);n=n.trim();n=this.valueForProperty(n,h)||n;l=l.substring(0,m)+n}g[k]=l&&l.lastIndexOf(";")===l.length-1?l.slice(0,-1):l||""}return g.join(";")},applyProperties:function(g,h){var k="";g.propertyInfo||this.decorateRule(g);g.propertyInfo.cssText&&(k=this.valueForProperties(g.propertyInfo.cssText,h));g.cssText=k},applyKeyframeTransforms:function(g,h){var k=g.cssText,l=g.cssText;
null==g.hasAnimations&&(g.hasAnimations=this.rx.ANIMATION_MATCH.test(k));if(g.hasAnimations)if(null==g.keyframeNamesToTransform){g.keyframeNamesToTransform=[];for(var m in h)l=h[m],l=l(k),k!==l&&(k=l,g.keyframeNamesToTransform.push(m))}else{for(m=0;m<g.keyframeNamesToTransform.length;++m)l=h[g.keyframeNamesToTransform[m]],k=l(k);l=k}g.cssText=l},propertyDataFromStyles:function(g,h){var k={},l=this,m=[];b.forActiveRulesInStyles(g,function(n){n.propertyInfo||l.decorateRule(n);var q=n.transformedSelector||
n.parsedSelector;h&&n.propertyInfo.properties&&q&&a.call(h,q)&&(l.collectProperties(n,k),n=n.index,q=parseInt(n/32),m[q]=(m[q]||0)|1<<n%32)});return{properties:k,key:m}},_rootSelector:/:root|:host\s*>\s*\*/,_checkRoot:function(g,h){return!!h.match(this._rootSelector)||"html"===g&&-1<h.indexOf("html")},whenHostOrRootRule:function(g,h,k,l){h.propertyInfo||self.decorateRule(h);if(h.propertyInfo.properties){var m=g.is?c._calcHostScope(g.is,g.extends):"html",n=h.parsedSelector,q=this._checkRoot(m,n),p=
!q&&0===n.indexOf(":host");"shady"===(g.__cssBuild||k.__cssBuild)&&(q=n===m+" \x3e *."+m||-1<n.indexOf("html"),p=!q&&0===n.indexOf(m));if(q||p)k=m,p&&(e.useNativeShadow&&!h.transformedSelector&&(h.transformedSelector=c._transformRuleCss(h,c._transformComplexSelector,g.is,m)),k=h.transformedSelector||h.parsedSelector),q&&"html"===m&&(k=h.transformedSelector||h.parsedSelector),l({selector:k,isHost:p,isRoot:q})}},hostAndRootPropertiesForScope:function(g){var h={},k={},l=this;b.forActiveRulesInStyles(g._styles,
function(m,n){l.whenHostOrRootRule(g,m,n,function(q){a.call(g._element||g,q.selector)&&(q.isHost?l.collectProperties(m,h):l.collectProperties(m,k))})});return{rootProps:k,hostProps:h}},transformStyles:function(g,h,k){var l=this,m=c._calcHostScope(g.is,g.extends),n=new RegExp(this.rx.HOST_PREFIX+(g.extends?"\\"+m.slice(0,-1)+"\\]":m)+this.rx.HOST_SUFFIX),q=this._elementKeyframeTransforms(g,k);return c.elementStyles(g,function(p){l.applyProperties(p,h);e.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(p)||
!p.cssText||(l.applyKeyframeTransforms(p,q),l._scopeSelector(p,n,m,g._scopeCssViaAttr,k))})},_elementKeyframeTransforms:function(g,h){g=g._styles._keyframes;var k={};if(!e.useNativeShadow&&g)for(var l=0,m=g[l];l<g.length;m=g[++l])this._scopeKeyframes(m,h),k[m.keyframesName]=this._keyframesRuleTransformer(m);return k},_keyframesRuleTransformer:function(g){return function(h){return h.replace(g.keyframesNameRx,g.transformedKeyframesName)}},_scopeKeyframes:function(g,h){g.keyframesNameRx=new RegExp("\\b"+
g.keyframesName+"(?!\\B|-)","g");g.transformedKeyframesName=g.keyframesName+"-"+h;g.transformedSelector=g.transformedSelector||g.selector;g.selector=g.transformedSelector.replace(g.keyframesName,g.transformedKeyframesName)},_hasDirOrHostContext:function(g){return/:host-context|:dir/.test(g)},_scopeSelector:function(g,h,k,l,m){g.transformedSelector=g.transformedSelector||g.selector;m=c._calcElementScope(m,l);l=c._calcElementScope(k,l);for(var n=g.transformedSelector.split(","),q=this._hasDirOrHostContext(g.parsedSelector),
p=0,t=n.length,r;p<t&&(r=n[p]);p++)n[p]=r.match(h)?r.replace(k,m):q?r.replace(l,m+" "+l):m+" "+r;g.selector=n.join(",")},applyElementScopeSelector:function(g,h,k,l){var m=l?g.getAttribute(c.SCOPE_NAME):g.getAttribute("class")||"";h=k?m.replace(k,h):(m?m+" ":"")+this.XSCOPE_NAME+" "+h;m!==h&&(l?g.setAttribute(c.SCOPE_NAME,h):g.setAttribute("class",h))},applyElementStyle:function(g,h,k,l){h=l?l.textContent||"":this.transformStyles(g,h,k);var m=g._customStyle;m&&!e.useNativeShadow&&m!==l&&(m._useCount--,
0>=m._useCount&&m.parentNode&&m.parentNode.removeChild(m));e.useNativeShadow?g._customStyle?(g._customStyle.textContent=h,l=g._customStyle):h&&(l=b.applyCss(h,k,g.root,g._scopeStyle)):l?l.parentNode||(d&&-1<h.indexOf("@media")&&(l.textContent=h),b.applyStyle(l,null,g._scopeStyle)):h&&(l=b.applyCss(h,k,null,g._scopeStyle));l&&(l._useCount=l._useCount||0,g._customStyle!=l&&l._useCount++,g._customStyle=l);return l},mixinCustomStyle:function(g,h){var k,l;for(l in h)if((k=h[l])||0===k)g[l]=k},updateNativeStyleProperties:function(g,
h){var k=g.__customStyleProperties;if(k)for(var l=0;l<k.length;l++)g.style.removeProperty(k[l]);k=[];for(var m in h)null!==h[m]&&(g.style.setProperty(m,h[m]),k.push(m));g.__customStyleProperties=k},rx:b.rx,XSCOPE_NAME:"x-scope"}}();Polymer.StyleCache=function(){this.cache={}};
Polymer.StyleCache.prototype={MAX:100,store:function(a,b,c,d){b.keyValues=c;b.styles=d;a=this.cache[a]=this.cache[a]||[];a.push(b);a.length>this.MAX&&a.shift()},retrieve:function(a,b,c){if(a=this.cache[a])for(var d=a.length-1,e;0<=d;d--)if(e=a[d],c===e.styles&&this._objectsEqual(b,e.keyValues))return e},clear:function(){this.cache={}},_objectsEqual:function(a,b){var c;for(c in a){var d=a[c];var e=b[c];if("object"===typeof d&&d?!this._objectsStrictlyEqual(d,e):d!==e)return!1}return Array.isArray(a)?
a.length===b.length:!0},_objectsStrictlyEqual:function(a,b){return this._objectsEqual(a,b)&&this._objectsEqual(b,a)}};
Polymer.StyleDefaults=function(){var a=Polymer.StyleProperties,b=Polymer.Settings.useNativeCSSProperties;return{_styles:[],_properties:null,customStyle:{},_styleCache:new Polymer.StyleCache,_element:Polymer.DomApi.wrap(document.documentElement),addStyle:function(c){this._styles.push(c);this._properties=null},get _styleProperties(){this._properties||(a.decorateStyles(this._styles,this),this._styles._scopeStyleProperties=null,this._properties=a.hostAndRootPropertiesForScope(this).rootProps,a.mixinCustomStyle(this._properties,
this.customStyle),a.reify(this._properties));return this._properties},hasStyleProperties:function(){return!!this._properties},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(c){this._properties=null;c&&Polymer.Base.mixin(this.customStyle,c);this._styleCache.clear();c=0;for(var d;c<this._styles.length;c++)d=this._styles[c],d=d.__importElement||d,d._apply();b&&a.updateNativeStyleProperties(document.documentElement,this.customStyle)}}}();
(function(){var a=Polymer.Base.serializeValueToAttribute,b=Polymer.StyleProperties,c=Polymer.StyleTransformer,d=Polymer.StyleDefaults,e=Polymer.Settings.useNativeShadow,g=Polymer.Settings.useNativeCSSProperties;Polymer.Base._addFeature({_prepStyleProperties:function(){g||(this._ownStylePropertyNames=this._styles&&this._styles.length?b.decorateStyles(this._styles,this):null)},customStyle:null,getComputedStyleValue:function(m){g||this._styleProperties||this._computeStyleProperties();return!g&&this._styleProperties&&
this._styleProperties[m]||getComputedStyle(this).getPropertyValue(m)},_setupStyleProperties:function(){this.customStyle={};this._customStyle=this._ownStyleProperties=this._scopeSelector=this._styleProperties=this._styleCache=null},_needsStyleProperties:function(){return!(g||!this._ownStylePropertyNames||!this._ownStylePropertyNames.length)},_validateApplyShim:function(){if(this.__applyShimInvalid){Polymer.ApplyShim.transform(this._styles,this.__proto__);var m=c.elementStyles(this);if(e){var n=this._template.content.querySelector("style");
n&&(n.textContent=m)}else if(n=this._scopeStyle&&this._scopeStyle.nextSibling)n.textContent=m}},_beforeAttached:function(){this._scopeSelector&&!this.__stylePropertiesInvalid||!this._needsStyleProperties()||(this.__stylePropertiesInvalid=!1,this._updateStyleProperties())},_findStyleHost:function(){for(var m=this;m=Polymer.dom(m).getOwnerRoot();){if(Polymer.isInstance(m.host))return m.host;m=m.host}return d},_updateStyleProperties:function(){var m=this._findStyleHost();m._styleProperties||m._computeStyleProperties();
m._styleCache||(m._styleCache=new Polymer.StyleCache);var n=b.propertyDataFromStyles(m._styles,this),q=!this.__notStyleScopeCacheable;if(q){n.key.customStyle=this.customStyle;var p=m._styleCache.retrieve(this.is,n.key,this._styles)}var t=!!p;t?this._styleProperties=p._styleProperties:this._computeStyleProperties(n.properties);this._computeOwnStyleProperties();t||(p=h.retrieve(this.is,this._ownStyleProperties,this._styles));var r=!!p&&!t;p=this._applyStyleProperties(p);t||(p=p&&e?p.cloneNode(!0):p,
p={style:p,_scopeSelector:this._scopeSelector,_styleProperties:this._styleProperties},q&&(n.key.customStyle={},this.mixin(n.key.customStyle,this.customStyle),m._styleCache.store(this.is,p,n.key,this._styles)),r||h.store(this.is,Object.create(p),this._ownStyleProperties,this._styles))},_computeStyleProperties:function(m){var n=this._findStyleHost();n._styleProperties||n._computeStyleProperties();var q=Object.create(n._styleProperties),p=b.hostAndRootPropertiesForScope(this);this.mixin(q,p.hostProps);
m=m||b.propertyDataFromStyles(n._styles,this).properties;this.mixin(q,m);this.mixin(q,p.rootProps);b.mixinCustomStyle(q,this.customStyle);b.reify(q);this._styleProperties=q},_computeOwnStyleProperties:function(){for(var m={},n=0,q;n<this._ownStylePropertyNames.length;n++)q=this._ownStylePropertyNames[n],m[q]=this._styleProperties[q];this._ownStyleProperties=m},_scopeCount:0,_applyStyleProperties:function(m){var n=this._scopeSelector;this._scopeSelector=m?m._scopeSelector:this.is+"-"+this.__proto__._scopeCount++;
m=b.applyElementStyle(this,this._styleProperties,this._scopeSelector,m&&m.style);e||b.applyElementScopeSelector(this,this._scopeSelector,n,this._scopeCssViaAttr);return m},serializeValueToAttribute:function(m,n,q){q=q||this;if("class"===n&&!e){var p=q===this?this.domHost||this.dataHost:this;p&&(m=p._scopeElementClass(q,m))}q=this.shadyRoot&&this.shadyRoot._hasDistributed?Polymer.dom(q):q;a.call(this,m,n,q)},_scopeElementClass:function(m,n){e||this._scopeCssViaAttr||(n=(n?n+" ":"")+k+" "+this.is+(m._scopeSelector?
" "+l+" "+m._scopeSelector:""));return n},updateStyles:function(m){m&&this.mixin(this.customStyle,m);g?b.updateNativeStyleProperties(this,this.customStyle):(this.isAttached?this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null:this.__stylePropertiesInvalid=!0,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(m){m=m||this.root;m=Polymer.dom(m)._query(function(t){return t.shadyRoot||t.shadowRoot});for(var n=0,q=m.length,
p;n<q&&(p=m[n]);n++)p.updateStyles&&p.updateStyles()}});Polymer.updateStyles=function(m){d.updateStyles(m);Polymer.Base._updateRootStyles(document)};var h=new Polymer.StyleCache;Polymer.customStyleCache=h;var k=c.SCOPE_NAME,l=b.XSCOPE_NAME})();
Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this.factoryImpl&&this._prepConstructor();this._prepStyles()},_finishRegisterFeatures:function(){this._prepTemplate();this._prepShimStyles();this._prepAnnotations();this._prepEffects();this._prepBehaviors();this._prepPropertyInfo();this._prepBindings();this._prepShady()},_prepBehavior:function(a){this._addPropertyEffects(a.properties);this._addComplexObserverEffects(a.observers);this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._setupGestures();
this._setupConfigure(this.__data__);this._setupStyleProperties();this._setupDebouncers();this._setupShady();this._registerHost();this._template&&(this._validateApplyShim(),this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting(),this._marshalAnnotationReferences());this._marshalInstanceEffects();this._marshalBehaviors();this._marshalHostAttributes();this._marshalAttributes();this._tryReady()},_marshalBehavior:function(a){a.listeners&&this._listenListeners(a.listeners)}});
(function(){var a=Polymer.StyleProperties,b=Polymer.StyleUtil,c=Polymer.CssParse,d=Polymer.StyleDefaults,e=Polymer.StyleTransformer,g=Polymer.ApplyShim,h=Polymer.Debounce,k=Polymer.Settings,l;Polymer({is:"custom-style",extends:"style",_template:null,properties:{include:String},ready:function(){this.__appliedElement=this.__appliedElement||this;this.__cssBuild=b.getCssBuildType(this);this.__appliedElement!==this&&(this.__appliedElement.__cssBuild=this.__cssBuild);this.ownerDocument!==window.document&&
this.__appliedElement===this&&document.head.appendChild(this);this._tryApply()},attached:function(){this._tryApply()},_tryApply:function(){if(!this._appliesToDocument&&this.parentNode&&"dom-module"!==this.parentNode.localName){this._appliesToDocument=!0;var m=this.__appliedElement;k.useNativeCSSProperties||(this.__needsUpdateStyles=d.hasStyleProperties(),d.addStyle(m));if(m.textContent||this.include)this._apply(!0);else{var n=this,q=new MutationObserver(function(){q.disconnect();n._apply(!0)});q.observe(m,
{childList:!0})}}},_updateStyles:function(){Polymer.updateStyles()},_apply:function(m){var n=this.__appliedElement;this.include&&(n.textContent=b.cssFromModules(this.include,!0)+n.textContent);if(n.textContent){var q=this.__cssBuild,p=b.isTargetedBuild(q);if(!k.useNativeCSSProperties||!p){var t=b.rulesForStyle(n);p||(b.forEachRule(t,function(v){e.documentRule(v)}),k.useNativeCSSProperties&&!q&&g.transform([n]));if(k.useNativeCSSProperties)n.textContent=b.toCssText(t);else{var r=this;n=function(){r._flushCustomProperties()};
m?Polymer.RenderStatus.whenReady(n):n()}}}},_flushCustomProperties:function(){this.__needsUpdateStyles?(this.__needsUpdateStyles=!1,l=h(l,this._updateStyles)):this._applyCustomProperties()},_applyCustomProperties:function(){var m=this.__appliedElement;this._computeStyleProperties();var n=this._styleProperties,q=b.rulesForStyle(m);q&&(m.textContent=b.toCssText(q,function(p){var t=p.cssText=p.parsedCssText;p.propertyInfo&&p.propertyInfo.cssText&&(t=c.removeCustomPropAssignment(t),p.cssText=a.valueForProperties(t,
n))}))}})})();
Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(a){this._templatized=a;a._content||(a._content=a.content);if(a._content._ctor)this.ctor=a._content._ctor,this._prepParentProperties(this.ctor.prototype,a);else{var b=Object.create(Polymer.Base);this._customPrepAnnotations(b,a);this._prepParentProperties(b,a);b._prepEffects();this._customPrepEffects(b);b._prepBehaviors();b._prepPropertyInfo();
b._prepBindings();b._notifyPathUp=this._notifyPathUpImpl;b._scopeElementClass=this._scopeElementClassImpl;b.listen=this._listenImpl;b._showHideChildren=this._showHideChildrenImpl;b.__setPropertyOrig=this.__setProperty;b.__setProperty=this.__setPropertyImpl;var c=this._constructorImpl,d=function(e,g){c.call(this,e,g)};d.prototype=b;b.constructor=d;this.ctor=a._content._ctor=d}},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(a){for(var b=
this._children,c=0;c<b.length;c++){var d=b[c];!!a!=!!d.__hideTemplateChildren__&&(d.nodeType===Node.TEXT_NODE?a?(d.__polymerTextContent__=d.textContent,d.textContent=""):d.textContent=d.__polymerTextContent__:d.style&&(a?(d.__polymerDisplay__=d.style.display,d.style.display="none"):d.style.display=d.__polymerDisplay__));d.__hideTemplateChildren__=a}},__setPropertyImpl:function(a,b,c,d){d&&d.__hideTemplateChildren__&&"textContent"==a&&(a="__polymerTextContent__");this.__setPropertyOrig(a,b,c,d)},_debounceTemplate:function(a){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",
a))},_flushTemplates:function(){Polymer.dom.flush()},_customPrepEffects:function(a){var b=a._parentProps,c;for(c in b)a._addPropertyEffect(c,"function",this._createHostPropEffector(c));for(c in this._instanceProps)a._addPropertyEffect(c,"function",this._createInstancePropEffector(c))},_customPrepAnnotations:function(a,b){var c=(a._template=document.createElement("template"))._content=b._content;if(!c._notes){var d=a._rootDataHost;d&&(Polymer.Annotations.prepElement=function(){d._prepElement()});c._notes=
Polymer.Annotations.parseAnnotations(b);Polymer.Annotations.prepElement=null;this._processAnnotations(c._notes)}a._notes=c._notes;a._parentProps=c._parentProps},_prepParentProperties:function(a,b){var c=this._parentProps=a._parentProps;if(this._forwardParentProp&&c){var d=a._parentPropProto,e;if(!d){for(e in this._instanceProps)delete c[e];d=a._parentPropProto=Object.create(null);b!=this&&(Polymer.Bind.prepareModel(d),Polymer.Base.prepareModelNotifyPath(d));for(e in c)a=this._parentPropPrefix+e,c=
[{kind:"function",effect:this._createForwardPropEffector(e),fn:Polymer.Bind._functionEffect},{kind:"notify",fn:Polymer.Bind._notifyEffect,effect:{event:Polymer.CaseMap.camelToDashCase(a)+"-changed"}}],d._propertyEffects=d._propertyEffects||{},d._propertyEffects[a]=c,Polymer.Bind._createAccessors(d,a,c)}var g=this;b!=this&&(Polymer.Bind.prepareInstance(b),b._forwardParentProp=function(h,k){g._forwardParentProp(h,k)});this._extendTemplate(b,d);b._pathEffector=function(h,k,l){return g._pathEffectorImpl(h,
k,l)}}},_createForwardPropEffector:function(a){return function(b,c){this._forwardParentProp(a,c)}},_createHostPropEffector:function(a){var b=this._parentPropPrefix;return function(c,d){this.dataHost._templatized[b+a]=d}},_createInstancePropEffector:function(a){return function(b,c,d,e){e||this.dataHost._forwardInstanceProp(this,a,c)}},_extendTemplate:function(a,b){var c=Object.getOwnPropertyNames(b);b._propertySetter&&(a._propertySetter=b._propertySetter);for(var d=0,e;d<c.length&&(e=c[d]);d++){var g=
a[e];g&&"_propertyEffects"==e?(g=Polymer.Base.mixin({},g),a._propertyEffects=Polymer.Base.mixin(g,b._propertyEffects)):(Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(b,e)),void 0!==g&&a._propertySetter(e,g))}},_showHideChildren:function(){},_forwardInstancePath:function(){},_forwardInstanceProp:function(){},_notifyPathUpImpl:function(a,b){var c=this.dataHost,d=Polymer.Path.root(a);c._forwardInstancePath.call(c,this,a,b);d in c._parentProps&&c._templatized._notifyPath(c._parentPropPrefix+
a,b)},_pathEffectorImpl:function(a,b,c){if(this._forwardParentPath&&0===a.indexOf(this._parentPropPrefix)){var d=a.substring(this._parentPropPrefix.length);Polymer.Path.root(d)in this._parentProps&&this._forwardParentPath(d,b)}Polymer.Base._pathEffector.call(this._templatized,a,b,c)},_constructorImpl:function(a,b){this._rootDataHost=b._getRootDataHost();this._setupConfigure(a);this._registerHost(b);this._beginHosting();this.root=this.instanceTemplate(this._template);this.root.__noContent=!this._notes._hasContent;
this.root.__styleScoped=!0;this._endHosting();this._marshalAnnotatedNodes();this._marshalInstanceEffects();this._marshalAnnotatedListeners();a=[];for(var c=this.root.firstChild;c;c=c.nextSibling)a.push(c),c._templateInstance=this;this._children=a;b.__hideTemplateChildren__&&this._showHideChildren(!0);this._tryReady()},_listenImpl:function(a,b,c){var d=this,e=this._rootDataHost,g=e._createEventHandler(a,b,c);e._listen(a,b,function(h){h.model=d;g(h)})},_scopeElementClassImpl:function(a,b){var c=this._rootDataHost;
return c?c._scopeElementClass(a,b):b},stamp:function(a){a=a||{};if(this._parentProps){var b=this._templatized,c;for(c in this._parentProps)void 0===a[c]&&(a[c]=b[this._parentPropPrefix+c])}return new this.ctor(a,this)},modelForElement:function(a){for(var b;a;)if(b=a._templateInstance)if(b.dataHost!=this)a=b.dataHost;else return b;else a=a.parentNode}};Polymer({is:"dom-template",extends:"template",_template:null,behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}});
Polymer._collections=new WeakMap;Polymer.Collection=function(a){Polymer._collections.set(a,this);this.userArray=a;this.store=a.slice();this.initMap()};function Ia(a){if(a&&"#"==a[0])return a.slice(1)}function Ka(a,b){b&&"object"==typeof b?a.omap.delete(b):delete a.pmap[b]}
Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var a=this.omap=new WeakMap,b=this.pmap={},c=this.store,d=0;d<c.length;d++){var e=c[d];e&&"object"==typeof e?a.set(e,d):b[e]=d}},add:function(a){var b=this.store.push(a)-1;a&&"object"==typeof a?this.omap.set(a,b):this.pmap[a]=b;return"#"+b},removeKey:function(a){if(a=Ia(a))Ka(this,this.store[a]),delete this.store[a]},remove:function(a){a=this.getKey(a);this.removeKey(a);return a},getKey:function(a){a=a&&"object"==
typeof a?this.omap.get(a):this.pmap[a];if(void 0!=a)return"#"+a},getKeys:function(){return Object.keys(this.store).map(function(a){return"#"+a})},setItem:function(a,b){if(a=Ia(a)){var c=this.store[a];c&&Ka(this,c);b&&"object"==typeof b?this.omap.set(b,a):this.pmap[b]=a;this.store[a]=b}},getItem:function(a){if(a=Ia(a))return this.store[a]},getItems:function(){var a=[],b=this.store,c;for(c in b)a.push(b[c]);return a}};Polymer.Collection.get=function(a){return Polymer._collections.get(a)||new Polymer.Collection(a)};
Polymer.Collection.applySplices=function(a,b){a=Polymer._collections.get(a);if(a){for(var c={},d=0,e;d<b.length&&(e=b[d]);d++){e.addedKeys=[];for(var g=0;g<e.removed.length;g++){var h=a.getKey(e.removed[g]);c[h]=c[h]?null:-1}for(g=0;g<e.addedCount;g++){var k=a.userArray[e.index+g];h=a.getKey(k);h=void 0===h?a.add(k):h;c[h]=c[h]?null:1;e.addedKeys.push(h)}}b=[];e=[];for(h in c)0>c[h]&&(a.removeKey(h),b.push(h)),0<c[h]&&e.push(h);h=[{removed:b,added:e}]}else h=null;return h};
function DomRepeatElement(){}fa=DomRepeatElement.prototype;fa.ctor=function(){};fa.stamp=function(){};fa.templatize=function(){};fa.modelForElement=function(){};fa._debounceTemplate=function(){};fa._setRenderedItemCount=function(){};
Polymer({is:"dom-repeat",extends:"template",_template:null,properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!Polymer.Settings.suppressTemplateNotifications,readOnly:!0},initialCount:{type:Number,observer:"_initializeChunking"},targetFramerate:{type:Number,value:20},
notifyDomChange:{type:Boolean},_targetFrameTime:{type:Number,computed:"_computeFrameTime(targetFramerate)"}},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[];this._pool=[];this._limit=Infinity;var a=this;this._boundRenderChunk=function(){a._renderChunk()}},detached:function(){this.__isDetached=!0;for(var a=0;a<this._instances.length;a++)this._detachInstance(a)},attached:function(){if(this.__isDetached){this.__isDetached=!1;var a=Polymer.dom(this).parentNode;
if(a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;a=Polymer.dom(a);for(var c=0;c<this._instances.length;c++)this._attachInstance(c,a,b)}},ready:function(){this._instanceProps={__key__:!0};this._instanceProps[this.as]=!0;this._instanceProps[this.indexAs]=!0;this.ctor||this.templatize(this)},_sortChanged:function(a){var b=this._getRootDataHost();this._sortFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)});this._needFullRefresh=!0;this.items&&this._debounceTemplate(this._render)},
_filterChanged:function(a){var b=this._getRootDataHost();this._filterFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)});this._needFullRefresh=!0;this.items&&this._debounceTemplate(this._render)},_computeFrameTime:function(a){return Math.ceil(1E3/a)},_initializeChunking:function(){this.initialCount&&(this._chunkCount=this._limit=this.initialCount,this._lastChunkTime=performance.now())},_tryRenderChunk:function(){this.items&&this._limit<this.items.length&&this.debounce("renderChunk",
this._requestRenderChunk)},_requestRenderChunk:function(){requestAnimationFrame(this._boundRenderChunk)},_renderChunk:function(){var a=performance.now();this._chunkCount=Math.round(this._targetFrameTime/(a-this._lastChunkTime)*this._chunkCount)||1;this._limit+=this._chunkCount;this._lastChunkTime=a;this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(a){if("items"==a.path)Array.isArray(this.items)?
this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._initializeChunking(),this._debounceTemplate(this._render);else if("items.splices"==a.path)this._keySplices=this._keySplices.concat(a.value.keySplices),this._indexSplices=this._indexSplices.concat(a.value.indexSplices),this._debounceTemplate(this._render);else{var b=
a.path.slice(6);this._forwardItemPath(b,a.value);this._checkObservedPaths(b)}},_checkObservedPaths:function(a){if(this._observePaths){a=a.substring(a.indexOf(".")+1);for(var b=this._observePaths,c=0;c<b.length;c++)if(0===a.indexOf(b[c])){this._needFullRefresh=!0;this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render);break}}},render:function(){this._needFullRefresh=!0;this._debounceTemplate(this._render);this._flushTemplates()},_render:function(){this._needFullRefresh?
(this._applyFullRefresh(),this._needFullRefresh=!1):this._keySplices.length&&(this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices));this._keySplices=[];this._indexSplices=[];for(var a=this._keyToInstIdx={},b=this._instances.length-1;0<=b;b--){var c=this._instances[b];c.isPlaceholder&&b<this._limit?c=this._insertInstance(b,c.__key__):!c.isPlaceholder&&b>=this._limit&&(c=this._downgradeInstance(b,c.__key__));
a[c.__key__]=b;c.isPlaceholder||c.__setProperty(this.indexAs,b,!0)}this._pool.length=0;this._setRenderedItemCount(this._instances.length);Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change");this._tryRenderChunk()},_applyFullRefresh:function(){var a=this.collection;if(this._sortFn)var b=a?a.getKeys():[];else{b=[];var c=this.items;if(c)for(var d=0;d<c.length;d++)b.push(a.getKey(c[d]))}var e=this;this._filterFn&&(b=b.filter(function(h){return e._filterFn(a.getItem(h))}));
this._sortFn&&b.sort(function(h,k){return e._sortFn(a.getItem(h),a.getItem(k))});for(d=0;d<b.length;d++){c=b[d];var g=this._instances[d];g?(g.__key__=c,!g.isPlaceholder&&d<this._limit&&g.__setProperty(this.as,a.getItem(c),!0)):d<this._limit?this._insertInstance(d,c):this._insertPlaceholder(d,c)}for(b=this._instances.length-1;b>=d;b--)this._detachAndRemoveInstance(b)},_numericSort:function(a,b){return a-b},_applySplicesUserSort:function(a){for(var b=this.collection,c={},d,e=0,g;e<a.length&&(g=a[e]);e++){for(var h=
0;h<g.removed.length;h++)d=g.removed[h],c[d]=c[d]?null:-1;for(h=0;h<g.added.length;h++)d=g.added[h],c[d]=c[d]?null:1}g=[];a=[];for(d in c)-1===c[d]&&g.push(this._keyToInstIdx[d]),1===c[d]&&a.push(d);if(g.length)for(g.sort(this._numericSort),e=g.length-1;0<=e;e--)c=g[e],void 0!==c&&this._detachAndRemoveInstance(c);var k=this;if(a.length)for(this._filterFn&&(a=a.filter(function(l){return k._filterFn(b.getItem(l))})),a.sort(function(l,m){return k._sortFn(b.getItem(l),b.getItem(m))}),e=c=0;e<a.length;e++)c=
this._insertRowUserSort(c,a[e])},_insertRowUserSort:function(a,b){for(var c=this.collection,d=c.getItem(b),e=this._instances.length-1,g=-1;a<=e;){var h=a+e>>1,k=this._sortFn(c.getItem(this._instances[h].__key__),d);if(0>k)a=h+1;else if(0<k)e=h-1;else{g=h;break}}0>g&&(g=e+1);this._insertPlaceholder(g,b);return g},_applySplicesArrayOrder:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++){for(var d=0;d<c.removed.length;d++)this._detachAndRemoveInstance(c.index);for(d=0;d<c.addedKeys.length;d++)this._insertPlaceholder(c.index+
d,c.addedKeys[d])}},_detachInstance:function(a){a=this._instances[a];if(!a.isPlaceholder){for(var b=0;b<a._children.length;b++){var c=a._children[b];Polymer.dom(a.root).appendChild(c)}return a}},_attachInstance:function(a,b,c){a=this._instances[a];a.isPlaceholder||b.insertBefore(a.root,c)},_detachAndRemoveInstance:function(a){var b=this._detachInstance(a);b&&this._pool.push(b);this._instances.splice(a,1)},_insertPlaceholder:function(a,b){this._instances.splice(a,0,{isPlaceholder:!0,__key__:b})},_stampInstance:function(a,
b){var c={__key__:b};c[this.as]=this.collection.getItem(b);c[this.indexAs]=a;return this.stamp(c)},_insertInstance:function(a,b){var c=this._pool.pop();c?(c.__setProperty(this.as,this.collection.getItem(b),!0),c.__setProperty("__key__",b,!0)):c=this._stampInstance(a,b);b=(b=this._instances[a+1])&&!b.isPlaceholder?b._children[0]:this;var d=Polymer.dom(this).parentNode;d.localName==this.is&&(b==this&&(b=d),d=Polymer.dom(d).parentNode);Polymer.dom(d).insertBefore(c.root,b);return this._instances[a]=
c},_downgradeInstance:function(a,b){var c=this._detachInstance(a);c&&this._pool.push(c);c={isPlaceholder:!0,__key__:b};return this._instances[a]=c},_showHideChildren:function(a){for(var b=0;b<this._instances.length;b++)this._instances[b].isPlaceholder||this._instances[b]._showHideChildren(a)},_forwardInstanceProp:function(a,b,c){b==this.as&&(a=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(a.__key__)):a[this.indexAs],this.set("items."+a,c))},_forwardInstancePath:function(a,
b,c){0===b.indexOf(this.as+".")&&this._notifyPath("items."+a.__key__+"."+b.slice(this.as.length+1),c)},_forwardParentProp:function(a,b){for(var c=this._instances,d=0,e;d<c.length&&(e=c[d]);d++)e.isPlaceholder||e.__setProperty(a,b,!0)},_forwardParentPath:function(a,b){for(var c=this._instances,d=0,e;d<c.length&&(e=c[d]);d++)e.isPlaceholder||e._notifyPath(a,b,!0)},_forwardItemPath:function(a,b){if(this._keyToInstIdx){var c=a.indexOf("."),d=this._instances[this._keyToInstIdx[a.substring(0,0>c?a.length:
c)]];d&&!d.isPlaceholder&&(0<=c?(a=this.as+"."+a.substring(c+1),d._notifyPath(a,b,!0)):d.__setProperty(this.as,b,!0))}},itemForElement:function(a){return(a=this.modelForElement(a))&&a[this.as]},keyForElement:function(a){return(a=this.modelForElement(a))&&a.__key__},indexForElement:function(a){return(a=this.modelForElement(a))&&a[this.indexAs]}});
Polymer({is:"array-selector",_template:null,properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var a=0;a<this.selected.length;a++)this.unlinkPaths("selected."+a);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");if(this.multi){if(!this.selected||this.selected.length)this.selected=
[],this._selectedColl=Polymer.Collection.get(this.selected)}else this._selectedColl=this.selected=null;this.selectedItem=null},isSelected:function(a){return this.multi?void 0!==this._selectedColl.getKey(a):this.selected==a},deselect:function(a){if(this.multi){if(this.isSelected(a)){var b=this._selectedColl.getKey(a);this.arrayDelete("selected",a);this.unlinkPaths("selected."+b)}}else this.selectedItem=this.selected=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem")},select:function(a){var b=
Polymer.Collection.get(this.items).getKey(a);this.multi?this.isSelected(a)?this.toggle&&this.deselect(a):(this.push("selected",a),a=this._selectedColl.getKey(a),this.linkPaths("selected."+a,"items."+b)):this.toggle&&a==this.selected?this.deselect():(this.selectedItem=this.selected=a,this.linkPaths("selected","items."+b),this.linkPaths("selectedItem","items."+b))}});
Polymer({is:"dom-if",extends:"template",_template:null,properties:{"if":{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"},notifyDomChange:{type:Boolean}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){var a=this.parentNode;a&&a.localName==this.is&&(a=Polymer.dom(a).parentNode);a&&(a.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Polymer.Settings.hasShadow&&a instanceof ShadowRoot)||this._teardownInstance()},
attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance();!this.restamp&&this._instance&&this._showHideChildren();this.if!=this._lastIf&&(Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){var a=Polymer.dom(this).parentNode;
if(a&&a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;if(a)if(this._instance){var c=this._instance._children;if(c&&c.length&&Polymer.dom(b).previousSibling!==c[c.length-1])for(var d=0,e;d<c.length&&(e=c[d]);d++)Polymer.dom(a).insertBefore(e,b)}else this._instance=this.stamp(),c=this._instance.root,Polymer.dom(a).insertBefore(c,b)},_teardownInstance:function(){if(this._instance){var a=this._instance._children;if(a&&a.length)for(var b=Polymer.dom(Polymer.dom(a[0]).parentNode),
c=0,d;c<a.length&&(d=a[c]);c++)b.removeChild(d);this._instance=null}},_showHideChildren:function(){var a=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(a)},_forwardParentProp:function(a,b){this._instance&&this._instance.__setProperty(a,b,!0)},_forwardParentPath:function(a,b){this._instance&&this._instance._notifyPath(a,b,!0)}});
Polymer({is:"dom-bind",properties:{notifyDomChange:{type:Boolean}},extends:"template",_template:null,created:function(){var a=this;Polymer.RenderStatus.whenReady(function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){a._markImportsReady()}):a._markImportsReady()})},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0;this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var a=
Polymer.dom(this).parentNode;if(a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;Polymer.dom(a).insertBefore(this.root,b)},_removeChildren:function(){if(this._children)for(var a=0;a<this._children.length;a++)this.root.appendChild(this._children[a])},_initFeatures:function(){},_scopeElementClass:function(a,b){return this.dataHost?this.dataHost._scopeElementClass(a,b):b},_configureInstanceProperties:function(){},_prepConfigure:function(){var a={},b;for(b in this._propertyEffects)a[b]=
this[b];var c=this._setupConfigure;this._setupConfigure=function(){c.call(this,a)}},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady();this._children||(this._template=this,this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),this._prepPropertyInfo(),Polymer.Base._initFeatures.call(this),this._children=Polymer.TreeApi.arrayCopyChildNodes(this.root));this._insertChildren();
Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change")}});
</script>















<script>//~~WEBPATH~~/iron-meta/iron-meta.html.js
(function(){Polymer.IronMeta=function(b){Polymer.IronMeta[" "](b);this.type=b&&b.type||"default";this.key=b&&b.key;b&&"value"in b&&(this.value=b.value)};Polymer.IronMeta[" "]=function(){};Polymer.IronMeta.types={};Polymer.IronMeta.prototype={get value(){var b=this.type,c=this.key;if(b&&c)return Polymer.IronMeta.types[b]&&Polymer.IronMeta.types[b][c]},set value(b){var c=this.type,d=this.key;c&&d&&(c=Polymer.IronMeta.types[c]=Polymer.IronMeta.types[c]||{},null==b?delete c[d]:c[d]=b)},get list(){if(this.type){var b=
Polymer.IronMeta.types[this.type];return b?Object.keys(b).map(function(c){return a[this.type][c]},this):[]}},byKey:function(b){this.key=b;return this.value}};var a=Polymer.IronMeta.types;Polymer({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function(b,c,d){b=new Polymer.IronMeta({type:b,
key:c});void 0!==d&&d!==b.value?b.value=d:this.value!==b.value&&(this.value=b.value);return b},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(b){b&&(this.value=this)},byKey:function(b){return(new Polymer.IronMeta({type:this.type,key:b})).value}})})();
</script>




<script>//~~WEBPATH~~/iron-flex-layout/iron-flex-layout.html.js
var La=document.createElement("style");La.textContent="[hidden] { display: none !important; }";document.head.appendChild(La);
</script>
<custom-style>
  <style is="custom-style">
    [hidden] {
      display: none !important;
    }
  </style>
</custom-style>

<custom-style>
  <style is="custom-style">
    html {

      --layout: {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      };

      --layout-inline: {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      };

      --layout-horizontal: {
        @apply --layout;

        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      };

      --layout-horizontal-reverse: {
        @apply --layout;

        -ms-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
      };

      --layout-vertical: {
        @apply --layout;

        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      };

      --layout-vertical-reverse: {
        @apply --layout;

        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      };

      --layout-wrap: {
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
      };

      --layout-wrap-reverse: {
        -ms-flex-wrap: wrap-reverse;
        -webkit-flex-wrap: wrap-reverse;
        flex-wrap: wrap-reverse;
      };

      --layout-flex-auto: {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;
      };

      --layout-flex-none: {
        -ms-flex: none;
        -webkit-flex: none;
        flex: none;
      };

      --layout-flex: {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      };

      --layout-flex-2: {
        -ms-flex: 2;
        -webkit-flex: 2;
        flex: 2;
      };

      --layout-flex-3: {
        -ms-flex: 3;
        -webkit-flex: 3;
        flex: 3;
      };

      --layout-flex-4: {
        -ms-flex: 4;
        -webkit-flex: 4;
        flex: 4;
      };

      --layout-flex-5: {
        -ms-flex: 5;
        -webkit-flex: 5;
        flex: 5;
      };

      --layout-flex-6: {
        -ms-flex: 6;
        -webkit-flex: 6;
        flex: 6;
      };

      --layout-flex-7: {
        -ms-flex: 7;
        -webkit-flex: 7;
        flex: 7;
      };

      --layout-flex-8: {
        -ms-flex: 8;
        -webkit-flex: 8;
        flex: 8;
      };

      --layout-flex-9: {
        -ms-flex: 9;
        -webkit-flex: 9;
        flex: 9;
      };

      --layout-flex-10: {
        -ms-flex: 10;
        -webkit-flex: 10;
        flex: 10;
      };

      --layout-flex-11: {
        -ms-flex: 11;
        -webkit-flex: 11;
        flex: 11;
      };

      --layout-flex-12: {
        -ms-flex: 12;
        -webkit-flex: 12;
        flex: 12;
      };

      /* alignment in cross axis */

      --layout-start: {
        -ms-flex-align: start;
        -webkit-align-items: flex-start;
        align-items: flex-start;
      };

      --layout-center: {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      };

      --layout-end: {
        -ms-flex-align: end;
        -webkit-align-items: flex-end;
        align-items: flex-end;
      };

      --layout-baseline: {
        -ms-flex-align: baseline;
        -webkit-align-items: baseline;
        align-items: baseline;
      };

      /* alignment in main axis */

      --layout-start-justified: {
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
      };

      --layout-center-justified: {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      };

      --layout-end-justified: {
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;
      };

      --layout-around-justified: {
        -ms-flex-pack: distribute;
        -webkit-justify-content: space-around;
        justify-content: space-around;
      };

      --layout-justified: {
        -ms-flex-pack: justify;
        -webkit-justify-content: space-between;
        justify-content: space-between;
      };

      --layout-center-center: {
        @apply --layout-center;
        @apply --layout-center-justified;
      };

      /* self alignment */

      --layout-self-start: {
        -ms-align-self: flex-start;
        -webkit-align-self: flex-start;
        align-self: flex-start;
      };

      --layout-self-center: {
        -ms-align-self: center;
        -webkit-align-self: center;
        align-self: center;
      };

      --layout-self-end: {
        -ms-align-self: flex-end;
        -webkit-align-self: flex-end;
        align-self: flex-end;
      };

      --layout-self-stretch: {
        -ms-align-self: stretch;
        -webkit-align-self: stretch;
        align-self: stretch;
      };

      --layout-self-baseline: {
        -ms-align-self: baseline;
        -webkit-align-self: baseline;
        align-self: baseline;
      };

      /* multi-line alignment in main axis */

      --layout-start-aligned: {
        -ms-flex-line-pack: start;  /* IE10 */
        -ms-align-content: flex-start;
        -webkit-align-content: flex-start;
        align-content: flex-start;
      };

      --layout-end-aligned: {
        -ms-flex-line-pack: end;  /* IE10 */
        -ms-align-content: flex-end;
        -webkit-align-content: flex-end;
        align-content: flex-end;
      };

      --layout-center-aligned: {
        -ms-flex-line-pack: center;  /* IE10 */
        -ms-align-content: center;
        -webkit-align-content: center;
        align-content: center;
      };

      --layout-between-aligned: {
        -ms-flex-line-pack: justify;  /* IE10 */
        -ms-align-content: space-between;
        -webkit-align-content: space-between;
        align-content: space-between;
      };

      --layout-around-aligned: {
        -ms-flex-line-pack: distribute;  /* IE10 */
        -ms-align-content: space-around;
        -webkit-align-content: space-around;
        align-content: space-around;
      };

      /*******************************
                Other Layout
      *******************************/

      --layout-block: {
        display: block;
      };

      --layout-invisible: {
        visibility: hidden !important;
      };

      --layout-relative: {
        position: relative;
      };

      --layout-fit: {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-scroll: {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
      };

      --layout-fullbleed: {
        margin: 0;
        height: 100vh;
      };

      /* fixed position */

      --layout-fixed-top: {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
      };

      --layout-fixed-right: {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
      };

      --layout-fixed-bottom: {
        position: fixed;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-fixed-left: {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
      };

    }
  </style>
</custom-style>




<dom-module id="iron-icon">
  <template>
    <style>
      :host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;

        vertical-align: middle;

        fill: var(--iron-icon-fill-color, currentcolor);
        stroke: var(--iron-icon-stroke-color, none);

        width: var(--iron-icon-width, 24px);
        height: var(--iron-icon-height, 24px);
        @apply --iron-icon;
      }

      :host([hidden]) {
        display: none;
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/iron-icon/iron-icon.html.js
Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(a){a=(a||"").split(":");this._iconName=a.pop();this._iconsetName=a.pop()||this._DEFAULT_ICONSET;this._updateIcon()},_srcChanged:function(){this._updateIcon()},
_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),""===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&((this._iconset=this._meta.byKey(this._iconsetName))?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon"))):(this._iconset&&
this._iconset.removeIcon(this),this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}});
</script>

</dom-module>





<script>//~~WEBPATH~~/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html.js
(function(){function a(p,t){var r="";if(p)if(p=p.toLowerCase()," "===p||n.test(p))r="space";else if(q.test(p))r="esc";else if(1==p.length){if(!t||k.test(p))r=p}else r=m.test(p)?p.replace("arrow",""):"multiply"==p?"*":p;return r}function b(p,t){var r=p.hasModifiers;if(t.key)r=a(t.key,r);else if(t.detail&&t.detail.key)r=a(t.detail.key,r);else{r=t.keyIdentifier;var v="";r&&(r in e?v=e[r]:l.test(r)?(r=parseInt(r.replace("U+","0x"),16),v=String.fromCharCode(r).toLowerCase()):v=r.toLowerCase());(r=v)||
(r=t.keyCode,v="",Number(r)&&(v=65<=r&&90>=r?String.fromCharCode(32+r):112<=r&&123>=r?"f"+(r-112+1):48<=r&&57>=r?String(r-48):96<=r&&105>=r?String(r-96):g[r]),r=v);r=r||""}return r===p.key&&(!p.hasModifiers||!!t.shiftKey===!!p.shiftKey&&!!t.ctrlKey===!!p.ctrlKey&&!!t.altKey===!!p.altKey&&!!t.metaKey===!!p.metaKey)}function c(p){return 1===p.length?{combo:p,key:p,event:"keydown"}:p.split("+").reduce(function(t,r){var v=r.split(":");r=v[0];v=v[1];r in h?(t[h[r]]=!0,t.hasModifiers=!0):(t.key=r,t.event=
v||"keydown");return t},{combo:p.split(":").shift()})}function d(p){return p.trim().split(" ").map(function(t){return c(t)})}var e={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},g={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},h={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},k=/[a-z0-9*]/,l=/U\+/,m=/^arrow/,n=/^space(bar)?/,q=/^escape$/;
Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},
addOwnKeyBinding:function(p,t){this._imperativeKeyBindings[p]=t;this._prepKeyBindings();this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={};this._prepKeyBindings();this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(p,t){t=d(t);for(var r=0;r<t.length;++r)if(b(t[r],p))return!0;return!1},_collectKeyBindings:function(){var p=this.behaviors.map(function(t){return t.keyBindings});-1===p.indexOf(this.keyBindings)&&p.push(this.keyBindings);return p},
_prepKeyBindings:function(){this._keyBindings={};this._collectKeyBindings().forEach(function(r){for(var v in r)this._addKeyBinding(v,r[v])},this);for(var p in this._imperativeKeyBindings)this._addKeyBinding(p,this._imperativeKeyBindings[p]);for(var t in this._keyBindings)this._keyBindings[t].sort(function(r,v){r=r[0].hasModifiers;return r===v[0].hasModifiers?0:r?-1:1})},_addKeyBinding:function(p,t){d(p).forEach(function(r){this._keyBindings[r.event]=this._keyBindings[r.event]||[];this._keyBindings[r.event].push([r,
t])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners();this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(p){var t=this._onKeyBindingEvent.bind(this,this._keyBindings[p]);this._boundKeyHandlers.push([this.keyEventTarget,p,t]);this.keyEventTarget.addEventListener(p,t)},this)},_unlistenKeyEventListeners:function(){for(var p,t,r;this._boundKeyHandlers.length;)p=this._boundKeyHandlers.pop(),
t=p[0],r=p[1],p=p[2],t.removeEventListener(r,p)},_onKeyBindingEvent:function(p,t){this.stopKeyboardEventPropagation&&t.stopPropagation();if(!t.defaultPrevented)for(var r=0;r<p.length;r++){var v=p[r][0],u=p[r][1];if(b(v,t)&&(this._triggerKeyHandler(v,u,t),t.defaultPrevented))break}},_triggerKeyHandler:function(p,t,r){var v=Object.create(p);v.keyboardEvent=r;p=new CustomEvent(p.event,{detail:v,cancelable:!0});this[t].call(this,p);p.defaultPrevented&&r.preventDefault()}}})();
</script>



<script>//~~WEBPATH~~/iron-behaviors/iron-control-state.html.js
Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function(){return!this.shadowRoot&&!Polymer.Element}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",
this._boundFocusBlurHandler,!0);this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(a){if(Polymer.Element)this._setFocused("focus"===a.type);else if(a.target===this)this._setFocused("focus"===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false");
this.style.pointerEvents=a?"none":"";a?(this._oldTabIndex=this.getAttribute("tabindex"),this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(null===this._oldTabIndex?this.removeAttribute("tabindex"):this.setAttribute("tabindex",this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};
</script>


<script>//~~WEBPATH~~/iron-behaviors/iron-button-state.html.js
Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},
observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(a){this._detectKeyboardFocus(a);a||this._setPressed(!1)},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==
a&&(this.active=a,this.fire("change"))},_downHandler:function(){this._setPointerDown(!0);this._setPressed(!0);this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1);this._setPressed(!1)},_spaceKeyDownHandler:function(a){a=a.detail.keyboardEvent;var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||(a.preventDefault(),a.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){a=Polymer.dom(a.detail.keyboardEvent).localTarget;this.isLightDescendant(a)||
(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?"true":"false"):this.removeAttribute(this.ariaActiveAttribute);this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):
this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}};Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];
</script>








<dom-module id="paper-ripple">

  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }
    </style>

    <div id="background"></div>
    <div id="waves"></div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/paper-ripple/paper-ripple.html.js
(function(){function a(d){this.element=d;this.width=this.boundingRect.width;this.height=this.boundingRect.height;this.size=Math.max(this.width,this.height)}function b(d){this.element=d;this.color=window.getComputedStyle(d).color;this.wave=document.createElement("div");this.waveContainer=document.createElement("div");this.wave.style.backgroundColor=this.color;this.wave.classList.add("wave");this.waveContainer.classList.add("wave-container");Polymer.dom(this.waveContainer).appendChild(this.wave);this.resetInteractionState()}
var c={distance:function(d,e,g,h){d-=g;e-=h;return Math.sqrt(d*d+e*e)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};a.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(d,e){var g=c.distance(d,e,0,0),h=c.distance(d,e,this.width,0),k=c.distance(d,e,0,this.height);d=c.distance(d,e,this.width,this.height);return Math.max(g,h,k,d)}};b.MAX_RADIUS=300;b.prototype={get recenters(){return this.element.recenters},
get center(){return this.element.center},get mouseDownElapsed(){if(!this.mouseDownStart)return 0;var d=c.now()-this.mouseDownStart;this.mouseUpStart&&(d-=this.mouseUpElapsed);return d},get mouseUpElapsed(){return this.mouseUpStart?c.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1E3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1E3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},
get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var d=1.1*Math.min(Math.sqrt(this.containerMetrics.width*this.containerMetrics.width+this.containerMetrics.height*this.containerMetrics.height),b.MAX_RADIUS)+5;return Math.abs(d*(1-Math.pow(80,-(this.mouseInteractionSeconds/(1.1-d/b.MAX_RADIUS*.2)))))},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){return Math.max(0,
Math.min(.3*this.mouseUpElapsedSeconds,this.opacity))},get isOpacityFullyDecayed(){return.01>this.opacity&&this.radius>=Math.min(this.maxRadius,b.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,b.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?
this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.slideDistance=this.yEnd=this.xEnd=this.yStart=this.xStart=this.mouseUpStart=this.mouseDownStart=this.maxRadius=0;this.containerMetrics=new a(this.element)},draw:function(){this.wave.style.opacity=this.opacity;var d=this.radius/
(this.containerMetrics.size/2);var e=this.xNow-this.containerMetrics.width/2;var g=this.yNow-this.containerMetrics.height/2;this.waveContainer.style.webkitTransform="translate("+e+"px, "+g+"px)";this.waveContainer.style.transform="translate3d("+e+"px, "+g+"px, 0)";this.wave.style.webkitTransform="scale("+d+","+d+")";this.wave.style.transform="scale3d("+d+","+d+",1)"},downAction:function(d){var e=this.containerMetrics.width/2,g=this.containerMetrics.height/2;this.resetInteractionState();this.mouseDownStart=
c.now();this.center?(this.xStart=e,this.yStart=g,this.slideDistance=c.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=d?d.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=d?d.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2);this.recenters&&(this.xEnd=e,this.yEnd=g,this.slideDistance=c.distance(this.xStart,this.yStart,this.xEnd,this.yEnd));this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,
this.yStart);this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px";this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px";this.waveContainer.style.width=this.containerMetrics.size+"px";this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(){this.isMouseDown&&(this.mouseUpStart=c.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}};Polymer({is:"paper-ripple",
behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},
get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){var d=this.keyEventTarget=11==this.parentNode.nodeType?Polymer.dom(this).getOwnerRoot().host:this.parentNode;this.listen(d,"up","uiUpAction");this.listen(d,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction");this.unlisten(this.keyEventTarget,"down","uiDownAction");this.keyEventTarget=
null},get shouldKeepAnimating(){for(var d=0;d<this.ripples.length;++d)if(!this.ripples[d].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null);this.async(function(){this.upAction()},1)},uiDownAction:function(d){this.noink||this.downAction(d)},downAction:function(d){this.holdDown&&0<this.ripples.length||(this.addRipple().downAction(d),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(d){this.noink||this.upAction(d)},upAction:function(d){this.holdDown||
(this.ripples.forEach(function(e){e.upAction(d)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1;this.$.background.style.backgroundColor=null;this.fire("transitionend")},addRipple:function(){var d=new b(this);Polymer.dom(this.$.waves).appendChild(d.waveContainer);this.$.background.style.backgroundColor=d.color;this.ripples.push(d);this._setAnimating(!0);return d},removeRipple:function(d){var e=this.ripples.indexOf(d);0>e||(this.ripples.splice(e,1),d.remove(),
this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var d;for(d=0;d<this.ripples.length;++d){var e=this.ripples[d];e.draw();this.$.background.style.opacity=e.outerOpacity;e.isOpacityFullyDecayed&&!e.isRestingAtMaxRadius&&this.removeRipple(e)}if(this.shouldKeepAnimating||0!==this.ripples.length)window.requestAnimationFrame(this._boundAnimate);else this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction();this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},
_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(d,e){void 0!==e&&(d?this.downAction():this.upAction())}})})();
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-ripple-behavior.html.js
Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a);this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple();this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;b&&Polymer.dom(b).appendChild(this._ripple);if(a){b=
Polymer.dom(this._rippleContainer||this);var c=Polymer.dom(a).rootTarget;b.deepContains(c)&&this._ripple.uiDownAction(a)}}},getRipple:function(){this.ensureRipple();return this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-inky-focus-behavior.html.js
Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(a){a&&this.ensureRipple();this.hasRipple()&&(this._ripple.holdDown=a)},_createRipple:function(){var a=Polymer.PaperRippleBehavior._createRipple();a.id="ink";a.setAttribute("center","");a.classList.add("circle");return a}};Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];
</script>




<custom-style>
  <style is="custom-style">
    html {

      /* Material Design color palette for Google products */

      --google-red-100: #f4c7c3;
      --google-red-300: #e67c73;
      --google-red-500: #db4437;
      --google-red-700: #c53929;

      --google-blue-100: #c6dafc;
      --google-blue-300: #7baaf7;
      --google-blue-500: #4285f4;
      --google-blue-700: #3367d6;

      --google-green-100: #b7e1cd;
      --google-green-300: #57bb8a;
      --google-green-500: #0f9d58;
      --google-green-700: #0b8043;

      --google-yellow-100: #fce8b2;
      --google-yellow-300: #f7cb4d;
      --google-yellow-500: #f4b400;
      --google-yellow-700: #f09300;

      --google-grey-100: #f5f5f5;
      --google-grey-300: #e0e0e0;
      --google-grey-500: #9e9e9e;
      --google-grey-700: #616161;

      /* Material Design color palette from online spec document */

      --paper-red-50: #ffebee;
      --paper-red-100: #ffcdd2;
      --paper-red-200: #ef9a9a;
      --paper-red-300: #e57373;
      --paper-red-400: #ef5350;
      --paper-red-500: #f44336;
      --paper-red-600: #e53935;
      --paper-red-700: #d32f2f;
      --paper-red-800: #c62828;
      --paper-red-900: #b71c1c;
      --paper-red-a100: #ff8a80;
      --paper-red-a200: #ff5252;
      --paper-red-a400: #ff1744;
      --paper-red-a700: #d50000;

      --paper-pink-50: #fce4ec;
      --paper-pink-100: #f8bbd0;
      --paper-pink-200: #f48fb1;
      --paper-pink-300: #f06292;
      --paper-pink-400: #ec407a;
      --paper-pink-500: #e91e63;
      --paper-pink-600: #d81b60;
      --paper-pink-700: #c2185b;
      --paper-pink-800: #ad1457;
      --paper-pink-900: #880e4f;
      --paper-pink-a100: #ff80ab;
      --paper-pink-a200: #ff4081;
      --paper-pink-a400: #f50057;
      --paper-pink-a700: #c51162;

      --paper-purple-50: #f3e5f5;
      --paper-purple-100: #e1bee7;
      --paper-purple-200: #ce93d8;
      --paper-purple-300: #ba68c8;
      --paper-purple-400: #ab47bc;
      --paper-purple-500: #9c27b0;
      --paper-purple-600: #8e24aa;
      --paper-purple-700: #7b1fa2;
      --paper-purple-800: #6a1b9a;
      --paper-purple-900: #4a148c;
      --paper-purple-a100: #ea80fc;
      --paper-purple-a200: #e040fb;
      --paper-purple-a400: #d500f9;
      --paper-purple-a700: #aa00ff;

      --paper-deep-purple-50: #ede7f6;
      --paper-deep-purple-100: #d1c4e9;
      --paper-deep-purple-200: #b39ddb;
      --paper-deep-purple-300: #9575cd;
      --paper-deep-purple-400: #7e57c2;
      --paper-deep-purple-500: #673ab7;
      --paper-deep-purple-600: #5e35b1;
      --paper-deep-purple-700: #512da8;
      --paper-deep-purple-800: #4527a0;
      --paper-deep-purple-900: #311b92;
      --paper-deep-purple-a100: #b388ff;
      --paper-deep-purple-a200: #7c4dff;
      --paper-deep-purple-a400: #651fff;
      --paper-deep-purple-a700: #6200ea;

      --paper-indigo-50: #e8eaf6;
      --paper-indigo-100: #c5cae9;
      --paper-indigo-200: #9fa8da;
      --paper-indigo-300: #7986cb;
      --paper-indigo-400: #5c6bc0;
      --paper-indigo-500: #3f51b5;
      --paper-indigo-600: #3949ab;
      --paper-indigo-700: #303f9f;
      --paper-indigo-800: #283593;
      --paper-indigo-900: #1a237e;
      --paper-indigo-a100: #8c9eff;
      --paper-indigo-a200: #536dfe;
      --paper-indigo-a400: #3d5afe;
      --paper-indigo-a700: #304ffe;

      --paper-blue-50: #e3f2fd;
      --paper-blue-100: #bbdefb;
      --paper-blue-200: #90caf9;
      --paper-blue-300: #64b5f6;
      --paper-blue-400: #42a5f5;
      --paper-blue-500: #2196f3;
      --paper-blue-600: #1e88e5;
      --paper-blue-700: #1976d2;
      --paper-blue-800: #1565c0;
      --paper-blue-900: #0d47a1;
      --paper-blue-a100: #82b1ff;
      --paper-blue-a200: #448aff;
      --paper-blue-a400: #2979ff;
      --paper-blue-a700: #2962ff;

      --paper-light-blue-50: #e1f5fe;
      --paper-light-blue-100: #b3e5fc;
      --paper-light-blue-200: #81d4fa;
      --paper-light-blue-300: #4fc3f7;
      --paper-light-blue-400: #29b6f6;
      --paper-light-blue-500: #03a9f4;
      --paper-light-blue-600: #039be5;
      --paper-light-blue-700: #0288d1;
      --paper-light-blue-800: #0277bd;
      --paper-light-blue-900: #01579b;
      --paper-light-blue-a100: #80d8ff;
      --paper-light-blue-a200: #40c4ff;
      --paper-light-blue-a400: #00b0ff;
      --paper-light-blue-a700: #0091ea;

      --paper-cyan-50: #e0f7fa;
      --paper-cyan-100: #b2ebf2;
      --paper-cyan-200: #80deea;
      --paper-cyan-300: #4dd0e1;
      --paper-cyan-400: #26c6da;
      --paper-cyan-500: #00bcd4;
      --paper-cyan-600: #00acc1;
      --paper-cyan-700: #0097a7;
      --paper-cyan-800: #00838f;
      --paper-cyan-900: #006064;
      --paper-cyan-a100: #84ffff;
      --paper-cyan-a200: #18ffff;
      --paper-cyan-a400: #00e5ff;
      --paper-cyan-a700: #00b8d4;

      --paper-teal-50: #e0f2f1;
      --paper-teal-100: #b2dfdb;
      --paper-teal-200: #80cbc4;
      --paper-teal-300: #4db6ac;
      --paper-teal-400: #26a69a;
      --paper-teal-500: #009688;
      --paper-teal-600: #00897b;
      --paper-teal-700: #00796b;
      --paper-teal-800: #00695c;
      --paper-teal-900: #004d40;
      --paper-teal-a100: #a7ffeb;
      --paper-teal-a200: #64ffda;
      --paper-teal-a400: #1de9b6;
      --paper-teal-a700: #00bfa5;

      --paper-green-50: #e8f5e9;
      --paper-green-100: #c8e6c9;
      --paper-green-200: #a5d6a7;
      --paper-green-300: #81c784;
      --paper-green-400: #66bb6a;
      --paper-green-500: #4caf50;
      --paper-green-600: #43a047;
      --paper-green-700: #388e3c;
      --paper-green-800: #2e7d32;
      --paper-green-900: #1b5e20;
      --paper-green-a100: #b9f6ca;
      --paper-green-a200: #69f0ae;
      --paper-green-a400: #00e676;
      --paper-green-a700: #00c853;

      --paper-light-green-50: #f1f8e9;
      --paper-light-green-100: #dcedc8;
      --paper-light-green-200: #c5e1a5;
      --paper-light-green-300: #aed581;
      --paper-light-green-400: #9ccc65;
      --paper-light-green-500: #8bc34a;
      --paper-light-green-600: #7cb342;
      --paper-light-green-700: #689f38;
      --paper-light-green-800: #558b2f;
      --paper-light-green-900: #33691e;
      --paper-light-green-a100: #ccff90;
      --paper-light-green-a200: #b2ff59;
      --paper-light-green-a400: #76ff03;
      --paper-light-green-a700: #64dd17;

      --paper-lime-50: #f9fbe7;
      --paper-lime-100: #f0f4c3;
      --paper-lime-200: #e6ee9c;
      --paper-lime-300: #dce775;
      --paper-lime-400: #d4e157;
      --paper-lime-500: #cddc39;
      --paper-lime-600: #c0ca33;
      --paper-lime-700: #afb42b;
      --paper-lime-800: #9e9d24;
      --paper-lime-900: #827717;
      --paper-lime-a100: #f4ff81;
      --paper-lime-a200: #eeff41;
      --paper-lime-a400: #c6ff00;
      --paper-lime-a700: #aeea00;

      --paper-yellow-50: #fffde7;
      --paper-yellow-100: #fff9c4;
      --paper-yellow-200: #fff59d;
      --paper-yellow-300: #fff176;
      --paper-yellow-400: #ffee58;
      --paper-yellow-500: #ffeb3b;
      --paper-yellow-600: #fdd835;
      --paper-yellow-700: #fbc02d;
      --paper-yellow-800: #f9a825;
      --paper-yellow-900: #f57f17;
      --paper-yellow-a100: #ffff8d;
      --paper-yellow-a200: #ffff00;
      --paper-yellow-a400: #ffea00;
      --paper-yellow-a700: #ffd600;

      --paper-amber-50: #fff8e1;
      --paper-amber-100: #ffecb3;
      --paper-amber-200: #ffe082;
      --paper-amber-300: #ffd54f;
      --paper-amber-400: #ffca28;
      --paper-amber-500: #ffc107;
      --paper-amber-600: #ffb300;
      --paper-amber-700: #ffa000;
      --paper-amber-800: #ff8f00;
      --paper-amber-900: #ff6f00;
      --paper-amber-a100: #ffe57f;
      --paper-amber-a200: #ffd740;
      --paper-amber-a400: #ffc400;
      --paper-amber-a700: #ffab00;

      --paper-orange-50: #fff3e0;
      --paper-orange-100: #ffe0b2;
      --paper-orange-200: #ffcc80;
      --paper-orange-300: #ffb74d;
      --paper-orange-400: #ffa726;
      --paper-orange-500: #ff9800;
      --paper-orange-600: #fb8c00;
      --paper-orange-700: #f57c00;
      --paper-orange-800: #ef6c00;
      --paper-orange-900: #e65100;
      --paper-orange-a100: #ffd180;
      --paper-orange-a200: #ffab40;
      --paper-orange-a400: #ff9100;
      --paper-orange-a700: #ff6500;

      --paper-deep-orange-50: #fbe9e7;
      --paper-deep-orange-100: #ffccbc;
      --paper-deep-orange-200: #ffab91;
      --paper-deep-orange-300: #ff8a65;
      --paper-deep-orange-400: #ff7043;
      --paper-deep-orange-500: #ff5722;
      --paper-deep-orange-600: #f4511e;
      --paper-deep-orange-700: #e64a19;
      --paper-deep-orange-800: #d84315;
      --paper-deep-orange-900: #bf360c;
      --paper-deep-orange-a100: #ff9e80;
      --paper-deep-orange-a200: #ff6e40;
      --paper-deep-orange-a400: #ff3d00;
      --paper-deep-orange-a700: #dd2c00;

      --paper-brown-50: #efebe9;
      --paper-brown-100: #d7ccc8;
      --paper-brown-200: #bcaaa4;
      --paper-brown-300: #a1887f;
      --paper-brown-400: #8d6e63;
      --paper-brown-500: #795548;
      --paper-brown-600: #6d4c41;
      --paper-brown-700: #5d4037;
      --paper-brown-800: #4e342e;
      --paper-brown-900: #3e2723;

      --paper-grey-50: #fafafa;
      --paper-grey-100: #f5f5f5;
      --paper-grey-200: #eeeeee;
      --paper-grey-300: #e0e0e0;
      --paper-grey-400: #bdbdbd;
      --paper-grey-500: #9e9e9e;
      --paper-grey-600: #757575;
      --paper-grey-700: #616161;
      --paper-grey-800: #424242;
      --paper-grey-900: #212121;

      --paper-blue-grey-50: #eceff1;
      --paper-blue-grey-100: #cfd8dc;
      --paper-blue-grey-200: #b0bec5;
      --paper-blue-grey-300: #90a4ae;
      --paper-blue-grey-400: #78909c;
      --paper-blue-grey-500: #607d8b;
      --paper-blue-grey-600: #546e7a;
      --paper-blue-grey-700: #455a64;
      --paper-blue-grey-800: #37474f;
      --paper-blue-grey-900: #263238;

      /* opacity for dark text on a light background */
      --dark-divider-opacity: 0.12;
      --dark-disabled-opacity: 0.38; /* or hint text or icon */
      --dark-secondary-opacity: 0.54;
      --dark-primary-opacity: 0.87;

      /* opacity for light text on a dark background */
      --light-divider-opacity: 0.12;
      --light-disabled-opacity: 0.3; /* or hint text or icon */
      --light-secondary-opacity: 0.7;
      --light-primary-opacity: 1.0;

    }

  </style>
</custom-style>




<custom-style>
  <style is="custom-style">
    html {
      /*
       * You can use these generic variables in your elements for easy theming.
       * For example, if all your elements use `--primary-text-color` as its main
       * color, then switching from a light to a dark theme is just a matter of
       * changing the value of `--primary-text-color` in your application.
       */
      --primary-text-color: var(--light-theme-text-color);
      --primary-background-color: var(--light-theme-background-color);
      --secondary-text-color: var(--light-theme-secondary-color);
      --disabled-text-color: var(--light-theme-disabled-color);
      --divider-color: var(--light-theme-divider-color);
      --error-color: var(--paper-deep-orange-a700);

      /*
       * Primary and accent colors. Also see color.html for more colors.
       */
      --primary-color: var(--paper-indigo-500);
      --light-primary-color: var(--paper-indigo-100);
      --dark-primary-color: var(--paper-indigo-700);

      --accent-color: var(--paper-pink-a200);
      --light-accent-color: var(--paper-pink-a100);
      --dark-accent-color: var(--paper-pink-a400);


      /*
       * Material Design Light background theme
       */
      --light-theme-background-color: #ffffff;
      --light-theme-base-color: #000000;
      --light-theme-text-color: var(--paper-grey-900);
      --light-theme-secondary-color: #737373;  /* for secondary text and icons */
      --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
      --light-theme-divider-color: #dbdbdb;

      /*
       * Material Design Dark background theme
       */
      --dark-theme-background-color: var(--paper-grey-900);
      --dark-theme-base-color: #ffffff;
      --dark-theme-text-color: #ffffff;
      --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
      --dark-theme-disabled-color: #646464;  /* disabled/hint text */
      --dark-theme-divider-color: #3c3c3c;

      /*
       * Deprecated values because of their confusing names.
       */
      --text-primary-color: var(--dark-theme-text-color);
      --default-primary-color: var(--primary-color);
    }
  </style>
</custom-style>




<dom-module id="paper-icon-button">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        line-height: 1;

        width: 40px;
        height: 40px;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        /* Because of polymer/2558, this style has lower specificity than * */
        box-sizing: border-box !important;

        @apply --paper-icon-button;
      }

      :host #ink {
        color: var(--paper-icon-button-ink-color, var(--primary-text-color));
        opacity: 0.6;
      }

      :host([disabled]) {
        color: var(--paper-icon-button-disabled-text, var(--disabled-text-color));
        pointer-events: none;
        cursor: auto;

        @apply --paper-icon-button-disabled;
      }

      :host(:hover) {
        @apply --paper-icon-button-hover;
      }

      iron-icon {
        --iron-icon-width: 100%;
        --iron-icon-height: 100%;
      }
    </style>

    <iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon>
  </template>

  <script>//~~WEBPATH~~/paper-icon-button/paper-icon-button.html.js
Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(a,b){var c=this.getAttribute("aria-label");c&&b!=c||this.setAttribute("aria-label",a)}});
</script>
</dom-module>







<script>//~~WEBPATH~~/neon-animation/neon-animatable-behavior.html.js
Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(a,
b){for(var c in b)a[c]=b[c]},_cloneConfig:function(a){var b={isClone:!0};this._copyProperties(b,a);return b},_getAnimationConfigRecursive:function(a,b,c){if(this.animationConfig)if(this.animationConfig.value&&"function"===typeof this.animationConfig.value)this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));else{var d=a?this.animationConfig[a]:this.animationConfig;Array.isArray(d)||(d=[d]);if(d)for(var e,g=0;e=
d[g];g++)if(e.animatable)e.animatable._getAnimationConfigRecursive(e.type||a,b,c);else if(e.id){var h=b[e.id];h?(h.isClone||(b[e.id]=this._cloneConfig(h),h=b[e.id]),this._copyProperties(h,e)):b[e.id]=e}else c.push(e)}},getAnimationConfig:function(a){var b={},c=[];this._getAnimationConfigRecursive(a,b,c);for(var d in b)c.push(b[d]);return c}};
</script>


<script>//~~WEBPATH~~/neon-animation/neon-animation-runner-behavior.html.js
Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(a){var b=[],c=[];if(0<a.length)for(var d,e=0;d=a[e];e++){var g=document.createElement(d.name);if(g.isNeonAnimation){var h=null;g.configure||(g.configure=function(){return null});h=g.configure(d);c.push({result:h,config:d,neonAnimation:g})}else console.warn(this.is+":",d.name,"not found!")}for(a=0;a<c.length;a++){h=c[a].result;d=c[a].config;g=c[a].neonAnimation;try{"function"!=typeof h.cancel&&(h=document.timeline.play(h))}catch(k){h=
null,console.warn("Couldnt play","(",d.name,").",k)}h&&b.push({neonAnimation:g,config:d,animation:h})}return b},_shouldComplete:function(a){for(var b=!0,c=0;c<a.length;c++)if("finished"!=a[c].animation.playState){b=!1;break}return b},_complete:function(a){for(var b=0;b<a.length;b++)a[b].neonAnimation.complete(a[b].config);for(b=0;b<a.length;b++)a[b].animation.cancel()},playAnimation:function(a,b){var c=this.getAnimationConfig(a);if(c){this._active=this._active||{};this._active[a]&&(this._complete(this._active[a]),
delete this._active[a]);var d=this._configureAnimations(c);if(0==d.length)this.fire("neon-animation-finish",b,{bubbles:!1});else for(this._active[a]=d,c=0;c<d.length;c++)d[c].animation.onfinish=function(){this._shouldComplete(d)&&(this._complete(d),delete this._active[a],this.fire("neon-animation-finish",b,{bubbles:!1}))}.bind(this)}},cancelAnimation:function(){for(var a in this._active){var b=this._active[a],c;for(c in b)b[c].animation&&b[c].animation.cancel&&b[c].animation.cancel()}this._active=
{}}};Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];
</script>





<script>//~~WEBPATH~~/neon-animation/neon-animation-behavior.html.js
Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"both"}}}},isNeonAnimation:!0,created:function(){document.body.animate||console.warn("No web animations detected. This element will not function without a web animations polyfill.")},timingFromConfig:function(a){if(a.timing)for(var b in a.timing)this.animationTiming[b]=a.timing[b];return this.animationTiming},setPrefixedProperty:function(a,b,c){for(var d=
{transform:["webkitTransform"],transformOrigin:["mozTransformOrigin","webkitTransformOrigin"]}[b],e,g=0;e=d[g];g++)a.style[e]=c;a.style[b]=c},complete:function(){}};
</script>





<script>//~~WEBPATH~~/neon-animation/animations/fade-in-animation.html.js
Polymer({is:"fade-in-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){return this._effect=new KeyframeEffect(a.node,[{opacity:"0"},{opacity:"1"}],this.timingFromConfig(a))}});
</script>







<script>//~~WEBPATH~~/neon-animation/animations/fade-out-animation.html.js
Polymer({is:"fade-out-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){return this._effect=new KeyframeEffect(a.node,[{opacity:"1"},{opacity:"0"}],this.timingFromConfig(a))}});
</script>




<dom-module id="paper-tooltip">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        outline: none;
        z-index: 1002;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: default;
      }

      #tooltip {
        display: block;
        outline: none;
        @apply --paper-font-common-base;
        font-size: 10px;
        line-height: 1;

        background-color: var(--paper-tooltip-background, #616161);
        opacity: var(--paper-tooltip-opacity, 0.9);
        color: var(--paper-tooltip-text-color, white);

        padding: 8px;
        border-radius: 2px;

        @apply --paper-tooltip;
      }

      /* Thanks IE 10. */
      .hidden {
        display: none !important;
      }
    </style>

    <div id="tooltip" class="hidden">
      <slot></slot>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-tooltip/paper-tooltip.html.js
Polymer({is:"paper-tooltip",hostAttributes:{role:"tooltip",tabindex:-1},behaviors:[Polymer.NeonAnimationRunnerBehavior],properties:{for:{type:String,observer:"_findTarget"},manualMode:{type:Boolean,value:!1,observer:"_manualModeChanged"},position:{type:String,value:"bottom"},fitToVisibleBounds:{type:Boolean,value:!1},offset:{type:Number,value:14},marginTop:{type:Number,value:14},animationDelay:{type:Number,value:500},animationConfig:{type:Object,value:function(){return{entry:[{name:"fade-in-animation",
node:this,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:this}]}}},_showing:{type:Boolean,value:!1}},listeners:{"neon-animation-finish":"_onAnimationFinish"},get target(){var a=Polymer.dom(this).parentNode,b=Polymer.dom(this).getOwnerRoot();return this.for?Polymer.dom(b).querySelector("#"+this.for):a?a.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:a:null},attached:function(){this._findTarget()},detached:function(){this.manualMode||this._removeListeners()},show:function(){if(!this._showing){if(""===
Polymer.dom(this).textContent.trim()){for(var a=!0,b=Polymer.dom(this).getEffectiveChildNodes(),c=0;c<b.length;c++)if(""!==b[c].textContent.trim()){a=!1;break}if(a)return}this.cancelAnimation();this._showing=!0;this.toggleClass("hidden",!1,this.$.tooltip);this.updatePosition();this.animationConfig.entry[0].timing=this.animationConfig.entry[0].timing||{};this.animationConfig.entry[0].timing.delay=this.animationDelay;this._animationPlaying=!0;this.playAnimation("entry")}},hide:function(){this._showing&&
(this._animationPlaying?(this.cancelAnimation(),this._showing=!1,this._onAnimationFinish()):(this._showing=!1,this._animationPlaying=!0,this.playAnimation("exit")))},updatePosition:function(){if(this._target&&this.offsetParent){var a=this.offset;14!=this.marginTop&&14==this.offset&&(a=this.marginTop);var b=this.offsetParent.getBoundingClientRect(),c=this._target.getBoundingClientRect(),d=this.getBoundingClientRect(),e=(c.width-d.width)/2,g=(c.height-d.height)/2,h=c.left-b.left,k=c.top-b.top;switch(this.position){case "top":var l=
h+e;var m=k-d.height-a;break;case "bottom":l=h+e;m=k+c.height+a;break;case "left":l=h-d.width-a;m=k+g;break;case "right":l=h+c.width+a,m=k+g}this.fitToVisibleBounds?(b.left+l+d.width>window.innerWidth?(this.style.right="0px",this.style.left="auto"):(this.style.left=Math.max(0,l)+"px",this.style.right="auto"),b.top+m+d.height>window.innerHeight?(this.style.bottom=b.height+"px",this.style.top="auto"):(this.style.top=Math.max(-b.top,m)+"px",this.style.bottom="auto")):(this.style.left=l+"px",this.style.top=
m+"px")}},_addListeners:function(){this._target&&(this.listen(this._target,"mouseenter","show"),this.listen(this._target,"focus","show"),this.listen(this._target,"mouseleave","hide"),this.listen(this._target,"blur","hide"),this.listen(this._target,"tap","hide"));this.listen(this,"mouseenter","hide")},_findTarget:function(){this.manualMode||this._removeListeners();this._target=this.target;this.manualMode||this._addListeners()},_manualModeChanged:function(){this.manualMode?this._removeListeners():this._addListeners()},
_onAnimationFinish:function(){this._animationPlaying=!1;this._showing||this.toggleClass("hidden",!0,this.$.tooltip)},_removeListeners:function(){this._target&&(this.unlisten(this._target,"mouseenter","show"),this.unlisten(this._target,"focus","show"),this.unlisten(this._target,"mouseleave","hide"),this.unlisten(this._target,"blur","hide"),this.unlisten(this._target,"tap","hide"));this.unlisten(this,"mouseenter","hide")}});
</script>
</dom-module>


<dom-module id="vz-projector-styles">
<template>
<style>
:host {
  --paper-input-container-label: {
    font-size: 14px;
  };
  --paper-input-container-input: {
    font-size: 14px;
  };
  /* TODO: Figure out why this doesn't work */
  --paper-dropdown-menu-input: {
    font-size: 14px;
  };
}

paper-button {
  background: #e3e3e3;
  margin-left: 0;
  text-transform: none;
}

paper-dropdown-menu paper-item {
  font-size: 13px;
}

paper-tooltip {
  max-width: 200px;
  --paper-tooltip: {
    font-size: 12px;
  };
}

paper-checkbox {
  --paper-checkbox-checked-color: #880E4F;
}

paper-toggle-button {
  --paper-toggle-button-checked-bar-color:  #880E4F;
  --paper-toggle-button-checked-button-color:  #880E4F;
  --paper-toggle-button-checked-ink-color: #880E4F;
}

paper-icon-button {
  border-radius: 50%;
}

paper-icon-button[active] {
  color: white;
  background-color: #880E4F;
}

.slider {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  justify-content: space-between;
}

.slider span {
  width: 35px;
  text-align: right;
}

.slider label {
  align-items: center;
  display: flex;
}

.help-icon {
  height: 15px;
  left: 2px;
  min-width: 15px;
  min-height: 15px;
  margin: 0;
  padding: 0;
  top: -2px;
  width: 15px;
}

.ink-panel {
  display: flex;
  flex-direction: column;
  font-size: 14px;
}

.ink-panel h4 {
  border-bottom: 1px solid #ddd;
  font-size: 14px;
  font-weight: 500;
  margin: 0;
  margin-bottom: 10px;
  padding-bottom: 5px;
}

.ink-panel-header {
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  height: 50px;
}

.ink-panel-content {
  display: none;
  height: 100%;
}

.ink-panel-content.active {
  display: block;
}

.ink-panel-content h3 {
  font-weight: 500;
  font-size: 14px;
  margin-top: 20px;
  margin-bottom: 5px;
  text-transform: uppercase;
}

.ink-panel-header h3 {
  font-weight: 500;
  font-size: 14px;
  margin: 0;
  padding: 0 24px;
  text-transform: uppercase;
}


/* - Tabs */
.ink-tab-group {
  align-items: center;
  box-sizing: border-box;
  display: flex;
  height: 100%;
  justify-content: space-around;
}

.ink-tab-group .projection-tab {
  color: rgba(0, 0, 0, 0.5);
  cursor: pointer;
  font-weight: 300;
  line-height: 49px;
  padding: 0 12px;
  text-align: center;
  text-transform: uppercase;
}

.ink-tab-group .projection-tab:hover {
  color: black;
}

.ink-tab-group .projection-tab.active {
  border-bottom: 2px solid black;
  color: black;
  font-weight: 500;
}

h4 {
  margin: 30px 0 10px 0;
}

.dismiss-dialog-note {
  margin-top: 25px;
  font-size: 11px;
  text-align: right;
}
</style>
</template>
</dom-module>




<script>//~~WEBPATH~~/iron-resizable-behavior/iron-resizable-behavior.html.js
(function(){var a=new Set;Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[];this._boundNotifyResize=this.notifyResize.bind(this);this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?
this._parentResizable.stopResizeNotificationsFor(this):(a.delete(this),window.removeEventListener("resize",this._boundNotifyResize));this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(b){this.resizerShouldNotify(b)&&this._notifyDescendant(b)},this),this._fireResize())},assignParentResizable:function(b){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this);(this._parentResizable=b)&&-1===b._interestedResizables.indexOf(this)&&
(b._interestedResizables.push(this),b._subscribeIronResize(this))},stopResizeNotificationsFor:function(b){var c=this._interestedResizables.indexOf(b);-1<c&&(this._interestedResizables.splice(c,1),this._unsubscribeIronResize(b))},_subscribeIronResize:function(b){b.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(b){b.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(){return!0},_onDescendantIronResize:function(b){this._notifyingDescendant?
b.stopPropagation():Polymer.Settings.useShadow||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(b){var c=Polymer.dom(b).rootTarget;c!==this&&(c.assignParentResizable(this),this._notifyDescendant(c),b.stopPropagation())},_parentResizableChanged:function(b){b&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(b){this.isAttached&&(this._notifyingDescendant=!0,b.notifyResize(),
this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var b=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function d(){document.removeEventListener("readystatechange",d);b()})}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach(function(c){c!==this&&c._findParent()},this):(a.forEach(function(c){c!==this&&c._findParent()},this),window.addEventListener("resize",
this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null);this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0});this._parentResizable?a.delete(this):a.add(this)}}})();
</script>




<dom-module id="iron-collapse">

  <template>

    <style>
      :host {
        display: block;
        transition-duration: var(--iron-collapse-transition-duration, 300ms);
        /* Safari 10 needs this property prefixed to correctly apply the custom property */
        -webkit-transition-duration: var(--iron-collapse-transition-duration, 300ms);
        overflow: visible;
      }

      :host(.iron-collapse-closed) {
        display: none;
      }

      :host(:not(.iron-collapse-opened)) {
        overflow: hidden;
      }
    </style>

    <slot></slot>

  </template>

</dom-module>

<script>//~~WEBPATH~~/iron-collapse/iron-collapse.html.js
Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":
"max-height"},hostAttributes:{role:"group","aria-hidden":"true"},listeners:{transitionend:"_onTransitionEnd"},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){a="auto"===a?"":a;b=b&&!this.noAnimation&&this.isAttached&&this._desiredSize!==a;this._desiredSize=a;this._updateTransition(!1);b&&(b=this._calcSize(),""===a&&(this.style[this._dimensionMax]="",a=this._calcSize()),this.style[this._dimensionMax]=b,this.scrollTop=
this.scrollTop,this._updateTransition(!0),b=a!==b);this.style[this._dimensionMax]=a;b||this._transitionEnd()},enableTransition:function(a){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead.");this.noAnimation=!a},_updateTransition:function(a){this.style.transitionDuration=a&&!this.noAnimation?"":"0s"},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;this.style["maxWidth"===this._dimensionMax?"maxHeight":"maxWidth"]="";this.updateSize(this.opened?
"auto":"0px",!1)},_openedChanged:function(){this.setAttribute("aria-hidden",!this.opened);this._setTransitioning(!0);this.toggleClass("iron-collapse-closed",!1);this.toggleClass("iron-collapse-opened",!1);this.updateSize(this.opened?"auto":"0px",!0);this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize;this.toggleClass("iron-collapse-closed",!this.opened);this.toggleClass("iron-collapse-opened",this.opened);this._updateTransition(!1);this.notifyResize();
this._setTransitioning(!1)},_onTransitionEnd:function(a){Polymer.dom(a).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}});
</script>





<script>//~~WEBPATH~~/iron-iconset-svg/iron-iconset-svg.html.js
Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new Polymer.IronMeta({type:"iconset",key:null,value:null})},attached:function(){this.style.display="none"},getIconNames:function(){this._icons=this._createIconMap();return Object.keys(this._icons).map(function(a){return this.name+":"+a},this)},applyIcon:function(a,b){this.removeIcon(a);
if(b=this._cloneIcon(b,this.rtlMirroring&&this._targetIsRTL(a))){var c=Polymer.dom(a.root||a);c.insertBefore(b,c.childNodes[0]);return a._svgIcon=b}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a.root||a).removeChild(a._svgIcon),a._svgIcon=null)},_targetIsRTL:function(a){null==this.__targetIsRTL&&(this.useGlobalRtlAttribute?this.__targetIsRTL="rtl"===(document.body&&document.body.hasAttribute("dir")?document.body:document.documentElement).getAttribute("dir"):(a&&a.nodeType!==Node.ELEMENT_NODE&&
(a=a.host),this.__targetIsRTL=a&&"rtl"===window.getComputedStyle(a).direction));return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null;this._meta.key=this.name;this._meta.value=this;this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var a=Object.create(null);Polymer.dom(this).querySelectorAll("[id]").forEach(function(b){a[b.id]=b});return a},_cloneIcon:function(a,b){this._icons=this._icons||this._createIconMap();return this._prepareSvgClone(this._icons[a],
this.size,b)},_prepareSvgClone:function(a,b,c){if(a){a=a.cloneNode(!0);var d=document.createElementNS("http://www.w3.org/2000/svg","svg");b=a.getAttribute("viewBox")||"0 0 "+b+" "+b;var e="pointer-events: none; display: block; width: 100%; height: 100%;";c&&a.hasAttribute("mirror-in-rtl")&&(e+="-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;");d.setAttribute("viewBox",b);d.setAttribute("preserveAspectRatio","xMidYMid meet");d.setAttribute("focusable","false");d.style.cssText=
e;d.appendChild(a).removeAttribute("id");return d}return null}});
</script>

<iron-iconset-svg name="image" size="24">
<svg><defs>
<g id="add-a-photo"><path d="M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z" /></g>
<g id="add-to-photos"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z" /></g>
<g id="adjust"><path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z" /></g>
<g id="assistant"><path d="M19 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5.12 10.88L12 17l-1.88-4.12L6 11l4.12-1.88L12 5l1.88 4.12L18 11l-4.12 1.88z" /></g>
<g id="assistant-photo"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z" /></g>
<g id="audiotrack"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z" /></g>
<g id="blur-circular"><path d="M10 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM7 9.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm3 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-3-3c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm3-6c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-1.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm3 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-4c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm2-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-3.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" /></g>
<g id="blur-linear"><path d="M5 17.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 13c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zM3 21h18v-2H3v2zM5 9.5c.83 0 1.5-.67 1.5-1.5S5.83 6.5 5 6.5 3.5 7.17 3.5 8 4.17 9.5 5 9.5zm0 4c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 17c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8-.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM3 3v2h18V3H3zm14 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm0 4c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM13 9c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1z" /></g>
<g id="blur-off"><path d="M14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-.2 4.48l.2.02c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5l.02.2c.09.67.61 1.19 1.28 1.28zM14 3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-4 0c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm11 7c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8 8c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-4 13.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM2.5 5.27l3.78 3.78L6 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1c0-.1-.03-.19-.06-.28l2.81 2.81c-.71.11-1.25.73-1.25 1.47 0 .83.67 1.5 1.5 1.5.74 0 1.36-.54 1.47-1.25l2.81 2.81c-.09-.03-.18-.06-.28-.06-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1c0-.1-.03-.19-.06-.28l3.78 3.78L20 20.23 3.77 4 2.5 5.27zM10 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm11-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM3 9.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 11c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5z" /></g>
<g id="blur-on"><path d="M6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3 .5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm15 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-11 10c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-17c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 5.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm8 .5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3 8.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM14 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-4-12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0 8.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4-4.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-4c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" /></g>
<g id="brightness-1"><circle cx="12" cy="12" r="10" /></g>
<g id="brightness-2"><path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z" /></g>
<g id="brightness-3"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z" /></g>
<g id="brightness-4"><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6z" /></g>
<g id="brightness-5"><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" /></g>
<g id="brightness-6"><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z" /></g>
<g id="brightness-7"><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z" /></g>
<g id="broken-image"><path d="M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2zm-3 6.42l3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4 4-3.99z" /></g>
<g id="brush"><path d="M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z" /></g>
<g id="burst-mode"><path d="M1 5h2v14H1zm4 0h2v14H5zm17 0H10c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zM11 17l2.5-3.15L15.29 16l2.5-3.22L21 17H11z" /></g>
<g id="camera"><path d="M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0l-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z" /></g>
<g id="camera-alt"><circle cx="12" cy="12" r="3.2" /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="camera-front"><path d="M10 20H5v2h5v2l3-3-3-3v2zm4 0v2h5v-2h-5zM12 8c1.1 0 2-.9 2-2s-.9-2-2-2-1.99.9-1.99 2S10.9 8 12 8zm5-8H7C5.9 0 5 .9 5 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM7 2h10v10.5c0-1.67-3.33-2.5-5-2.5s-5 .83-5 2.5V2z" /></g>
<g id="camera-rear"><path d="M10 20H5v2h5v2l3-3-3-3v2zm4 0v2h5v-2h-5zm3-20H7C5.9 0 5 .9 5 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm-5 6c-1.11 0-2-.9-2-2s.89-2 1.99-2 2 .9 2 2C14 5.1 13.1 6 12 6z" /></g>
<g id="camera-roll"><path d="M14 5c0-1.1-.9-2-2-2h-1V2c0-.55-.45-1-1-1H6c-.55 0-1 .45-1 1v1H4c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2h8V5h-8zm-2 13h-2v-2h2v2zm0-9h-2V7h2v2zm4 9h-2v-2h2v2zm0-9h-2V7h2v2zm4 9h-2v-2h2v2zm0-9h-2V7h2v2z" /></g>
<g id="center-focus-strong"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-7 7H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4z" /></g>
<g id="center-focus-weak"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="collections"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" /></g>
<g id="collections-bookmark"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 10l-2.5-1.5L15 12V4h5v8z" /></g>
<g id="color-lens"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="colorize"><path d="M20.71 5.63l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z" /></g>
<g id="compare"><path d="M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="control-point"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="control-point-duplicate"><path d="M16 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM2 12c0-2.79 1.64-5.2 4.01-6.32V3.52C2.52 4.76 0 8.09 0 12s2.52 7.24 6.01 8.48v-2.16C3.64 17.2 2 14.79 2 12zm13-9c-4.96 0-9 4.04-9 9s4.04 9 9 9 9-4.04 9-9-4.04-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z" /></g>
<g id="crop"><path d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z" /></g>
<g id="crop-16-9"><path d="M19 6H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H5V8h14v8z" /></g>
<g id="crop-3-2"><path d="M19 4H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H5V6h14v12z" /></g>
<g id="crop-5-4"><path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z" /></g>
<g id="crop-7-5"><path d="M19 7H5c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm0 8H5V9h14v6z" /></g>
<g id="crop-din"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="crop-free"><path d="M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z" /></g>
<g id="crop-landscape"><path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z" /></g>
<g id="crop-original"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z" /></g>
<g id="crop-portrait"><path d="M17 3H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7V5h10v14z" /></g>
<g id="crop-rotate"><path d="M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z" /></g>
<g id="crop-square"><path d="M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z" /></g>
<g id="dehaze"><path d="M2 15.5v2h20v-2H2zm0-5v2h20v-2H2zm0-5v2h20v-2H2z" /></g>
<g id="details"><path d="M3 4l9 16 9-16H3zm3.38 2h11.25L12 16 6.38 6z" /></g>
<g id="edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="exposure"><path d="M15 17v2h2v-2h2v-2h-2v-2h-2v2h-2v2h2zm5-15H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM5 5h6v2H5V5zm15 15H4L20 4v16z" /></g>
<g id="exposure-neg-1"><path d="M4 11v2h8v-2H4zm15 7h-2V7.38L14 8.4V6.7L18.7 5h.3v13z" /></g>
<g id="exposure-neg-2"><path d="M15.05 16.29l2.86-3.07c.38-.39.72-.79 1.04-1.18.32-.39.59-.78.82-1.17.23-.39.41-.78.54-1.17s.19-.79.19-1.18c0-.53-.09-1.02-.27-1.46-.18-.44-.44-.81-.78-1.11-.34-.31-.77-.54-1.26-.71-.51-.16-1.08-.24-1.72-.24-.69 0-1.31.11-1.85.32-.54.21-1 .51-1.36.88-.37.37-.65.8-.84 1.3-.18.47-.27.97-.28 1.5h2.14c.01-.31.05-.6.13-.87.09-.29.23-.54.4-.75.18-.21.41-.37.68-.49.27-.12.6-.18.96-.18.31 0 .58.05.81.15.23.1.43.25.59.43.16.18.28.4.37.65.08.25.13.52.13.81 0 .22-.03.43-.08.65-.06.22-.15.45-.29.7-.14.25-.32.53-.56.83-.23.3-.52.65-.88 1.03l-4.17 4.55V18H21v-1.71h-5.95zM2 11v2h8v-2H2z" /></g>
<g id="exposure-plus-1"><path d="M10 7H8v4H4v2h4v4h2v-4h4v-2h-4V7zm10 11h-2V7.38L15 8.4V6.7L19.7 5h.3v13z" /></g>
<g id="exposure-plus-2"><path d="M16.05 16.29l2.86-3.07c.38-.39.72-.79 1.04-1.18.32-.39.59-.78.82-1.17.23-.39.41-.78.54-1.17.13-.39.19-.79.19-1.18 0-.53-.09-1.02-.27-1.46-.18-.44-.44-.81-.78-1.11-.34-.31-.77-.54-1.26-.71-.51-.16-1.08-.24-1.72-.24-.69 0-1.31.11-1.85.32-.54.21-1 .51-1.36.88-.37.37-.65.8-.84 1.3-.18.47-.27.97-.28 1.5h2.14c.01-.31.05-.6.13-.87.09-.29.23-.54.4-.75.18-.21.41-.37.68-.49.27-.12.6-.18.96-.18.31 0 .58.05.81.15.23.1.43.25.59.43.16.18.28.4.37.65.08.25.13.52.13.81 0 .22-.03.43-.08.65-.06.22-.15.45-.29.7-.14.25-.32.53-.56.83-.23.3-.52.65-.88 1.03l-4.17 4.55V18H22v-1.71h-5.95zM8 7H6v4H2v2h4v4h2v-4h4v-2H8V7z" /></g>
<g id="exposure-zero"><path d="M16.14 12.5c0 1-.1 1.85-.3 2.55-.2.7-.48 1.27-.83 1.7-.36.44-.79.75-1.3.95-.51.2-1.07.3-1.7.3-.62 0-1.18-.1-1.69-.3-.51-.2-.95-.51-1.31-.95-.36-.44-.65-1.01-.85-1.7-.2-.7-.3-1.55-.3-2.55v-2.04c0-1 .1-1.85.3-2.55.2-.7.48-1.26.84-1.69.36-.43.8-.74 1.31-.93C10.81 5.1 11.38 5 12 5c.63 0 1.19.1 1.7.29.51.19.95.5 1.31.93.36.43.64.99.84 1.69.2.7.3 1.54.3 2.55v2.04zm-2.11-2.36c0-.64-.05-1.18-.13-1.62-.09-.44-.22-.79-.4-1.06-.17-.27-.39-.46-.64-.58-.25-.13-.54-.19-.86-.19-.32 0-.61.06-.86.18s-.47.31-.64.58c-.17.27-.31.62-.4 1.06s-.13.98-.13 1.62v2.67c0 .64.05 1.18.14 1.62.09.45.23.81.4 1.09s.39.48.64.61.54.19.87.19c.33 0 .62-.06.87-.19s.46-.33.63-.61c.17-.28.3-.64.39-1.09.09-.45.13-.99.13-1.62v-2.66z" /></g>
<g id="filter"><path d="M15.96 10.29l-2.75 3.54-1.96-2.36L8.5 15h11l-3.54-4.71zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-1"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 10h2V5h-4v2h2v8zm7-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-2"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-4-4h-4v-2h2c1.1 0 2-.89 2-2V7c0-1.11-.9-2-2-2h-4v2h4v2h-2c-1.1 0-2 .89-2 2v4h6v-2z" /></g>
<g id="filter-3"><path d="M21 1H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm14 8v-1.5c0-.83-.67-1.5-1.5-1.5.83 0 1.5-.67 1.5-1.5V7c0-1.11-.9-2-2-2h-4v2h4v2h-2v2h2v2h-4v2h4c1.1 0 2-.89 2-2z" /></g>
<g id="filter-4"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm12 10h2V5h-2v4h-2V5h-2v6h4v4zm6-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-5"><path d="M21 1H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm14 8v-2c0-1.11-.9-2-2-2h-2V7h4V5h-6v6h4v2h-4v2h4c1.1 0 2-.89 2-2z" /></g>
<g id="filter-6"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2h2c1.1 0 2-.89 2-2v-2c0-1.11-.9-2-2-2h-2V7h4V5h-4c-1.1 0-2 .89-2 2v6c0 1.11.9 2 2 2zm0-4h2v2h-2v-2z" /></g>
<g id="filter-7"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2l4-8V5h-6v2h4l-4 8h2z" /></g>
<g id="filter-8"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2h2c1.1 0 2-.89 2-2v-1.5c0-.83-.67-1.5-1.5-1.5.83 0 1.5-.67 1.5-1.5V7c0-1.11-.9-2-2-2h-2c-1.1 0-2 .89-2 2v1.5c0 .83.67 1.5 1.5 1.5-.83 0-1.5.67-1.5 1.5V13c0 1.11.9 2 2 2zm0-8h2v2h-2V7zm0 4h2v2h-2v-2z" /></g>
<g id="filter-9"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM15 5h-2c-1.1 0-2 .89-2 2v2c0 1.11.9 2 2 2h2v2h-4v2h4c1.1 0 2-.89 2-2V7c0-1.11-.9-2-2-2zm0 4h-2V7h2v2z" /></g>
<g id="filter-9-plus"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 7V8c0-1.11-.9-2-2-2h-1c-1.1 0-2 .89-2 2v1c0 1.11.9 2 2 2h1v1H9v2h3c1.1 0 2-.89 2-2zm-3-3V8h1v1h-1zm10-8H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 8h-2V7h-2v2h-2v2h2v2h2v-2h2v6H7V3h14v6z" /></g>
<g id="filter-b-and-w"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16l-7-8v8H5l7-8V5h7v14z" /></g>
<g id="filter-center-focus"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="filter-drama"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.61 5.64 5.36 8.04 2.35 8.36 0 10.9 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4h2c0-2.76-1.86-5.08-4.4-5.78C8.61 6.88 10.2 6 12 6c3.03 0 5.5 2.47 5.5 5.5v.5H19c1.65 0 3 1.35 3 3s-1.35 3-3 3z" /></g>
<g id="filter-frames"><path d="M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM18 8H6v10h12" /></g>
<g id="filter-hdr"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" /></g>
<g id="filter-none"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-tilt-shift"><path d="M11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zm7.32.19C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62l1.42-1.43zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zM15 12c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3zm3.31 4.9l1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89zM13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62zm-7.32-.19C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43z" /></g>
<g id="filter-vintage"><path d="M18.7 12.4c-.28-.16-.57-.29-.86-.4.29-.11.58-.24.86-.4 1.92-1.11 2.99-3.12 3-5.19-1.79-1.03-4.07-1.11-6 0-.28.16-.54.35-.78.54.05-.31.08-.63.08-.95 0-2.22-1.21-4.15-3-5.19C10.21 1.85 9 3.78 9 6c0 .32.03.64.08.95-.24-.2-.5-.39-.78-.55-1.92-1.11-4.2-1.03-6 0 0 2.07 1.07 4.08 3 5.19.28.16.57.29.86.4-.29.11-.58.24-.86.4-1.92 1.11-2.99 3.12-3 5.19 1.79 1.03 4.07 1.11 6 0 .28-.16.54-.35.78-.54-.05.32-.08.64-.08.96 0 2.22 1.21 4.15 3 5.19 1.79-1.04 3-2.97 3-5.19 0-.32-.03-.64-.08-.95.24.2.5.38.78.54 1.92 1.11 4.2 1.03 6 0-.01-2.07-1.08-4.08-3-5.19zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /></g>
<g id="flare"><path d="M7 11H1v2h6v-2zm2.17-3.24L7.05 5.64 5.64 7.05l2.12 2.12 1.41-1.41zM13 1h-2v6h2V1zm5.36 6.05l-1.41-1.41-2.12 2.12 1.41 1.41 2.12-2.12zM17 11v2h6v-2h-6zm-5-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm2.83 7.24l2.12 2.12 1.41-1.41-2.12-2.12-1.41 1.41zm-9.19.71l1.41 1.41 2.12-2.12-1.41-1.41-2.12 2.12zM11 23h2v-6h-2v6z" /></g>
<g id="flash-auto"><path d="M3 2v12h3v9l7-12H9l4-9H3zm16 0h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9L19 2zm-2.15 5.65L18 4l1.15 3.65h-2.3z" /></g>
<g id="flash-off"><path d="M3.27 3L2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73 3.27 3zM17 10h-4l4-8H7v2.18l8.46 8.46L17 10z" /></g>
<g id="flash-on"><path d="M7 2v11h3v9l7-12h-4l4-8z" /></g>
<g id="flip"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" /></g>
<g id="gradient"><path d="M11 9h2v2h-2zm-2 2h2v2H9zm4 0h2v2h-2zm2-2h2v2h-2zM7 9h2v2H7zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z" /></g>
<g id="grain"><path d="M10 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-4 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="grid-off"><path d="M8 4v1.45l2 2V4h4v4h-3.45l2 2H14v1.45l2 2V10h4v4h-3.45l2 2H20v1.45l2 2V4c0-1.1-.9-2-2-2H4.55l2 2H8zm8 0h4v4h-4V4zM1.27 1.27L0 2.55l2 2V20c0 1.1.9 2 2 2h15.46l2 2 1.27-1.27L1.27 1.27zM10 12.55L11.45 14H10v-1.45zm-6-6L5.45 8H4V6.55zM8 20H4v-4h4v4zm0-6H4v-4h3.45l.55.55V14zm6 6h-4v-4h3.45l.55.54V20zm2 0v-1.46L17.46 20H16z" /></g>
<g id="grid-on"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z" /></g>
<g id="hdr-off"><path d="M17.5 15v-2h1.1l.9 2H21l-.9-2.1c.5-.2.9-.8.9-1.4v-1c0-.8-.7-1.5-1.5-1.5H16v4.9l1.1 1.1h.4zm0-4.5h2v1h-2v-1zm-4.5 0v.4l1.5 1.5v-1.9c0-.8-.7-1.5-1.5-1.5h-1.9l1.5 1.5h.4zm-3.5-1l-7-7-1.1 1L6.9 9h-.4v2h-2V9H3v6h1.5v-2.5h2V15H8v-4.9l1.5 1.5V15h3.4l7.6 7.6 1.1-1.1-12.1-12z" /></g>
<g id="hdr-on"><path d="M21 11.5v-1c0-.8-.7-1.5-1.5-1.5H16v6h1.5v-2h1.1l.9 2H21l-.9-2.1c.5-.3.9-.8.9-1.4zm-1.5 0h-2v-1h2v1zm-13-.5h-2V9H3v6h1.5v-2.5h2V15H8V9H6.5v2zM13 9H9.5v6H13c.8 0 1.5-.7 1.5-1.5v-3c0-.8-.7-1.5-1.5-1.5zm0 4.5h-2v-3h2v3z" /></g>
<g id="hdr-strong"><path d="M17 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zM5 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="hdr-weak"><path d="M5 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm12-2c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /></g>
<g id="healing"><path d="M17.73 12.02l3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34c-.39-.39-1.02-.39-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41l-3.99-3.98zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62-3.62 3.63zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2.66 9.34l-3.63-3.62 3.63-3.63 3.62 3.62-3.62 3.63z" /></g>
<g id="image"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="image-aspect-ratio"><path d="M16 10h-2v2h2v-2zm0 4h-2v2h2v-2zm-8-4H6v2h2v-2zm4 0h-2v2h2v-2zm8-6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z" /></g>
<g id="iso"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5.5 7.5h2v-2H9v2h2V9H9v2H7.5V9h-2V7.5zM19 19H5L19 5v14zm-2-2v-1.5h-5V17h5z" /></g>
<g id="landscape"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" /></g>
<g id="leak-add"><path d="M6 3H3v3c1.66 0 3-1.34 3-3zm8 0h-2c0 4.97-4.03 9-9 9v2c6.08 0 11-4.93 11-11zm-4 0H8c0 2.76-2.24 5-5 5v2c3.87 0 7-3.13 7-7zm0 18h2c0-4.97 4.03-9 9-9v-2c-6.07 0-11 4.93-11 11zm8 0h3v-3c-1.66 0-3 1.34-3 3zm-4 0h2c0-2.76 2.24-5 5-5v-2c-3.87 0-7 3.13-7 7z" /></g>
<g id="leak-remove"><path d="M10 3H8c0 .37-.04.72-.12 1.06l1.59 1.59C9.81 4.84 10 3.94 10 3zM3 4.27l2.84 2.84C5.03 7.67 4.06 8 3 8v2c1.61 0 3.09-.55 4.27-1.46L8.7 9.97C7.14 11.24 5.16 12 3 12v2c2.71 0 5.19-.99 7.11-2.62l2.5 2.5C10.99 15.81 10 18.29 10 21h2c0-2.16.76-4.14 2.03-5.69l1.43 1.43C14.55 17.91 14 19.39 14 21h2c0-1.06.33-2.03.89-2.84L19.73 21 21 19.73 4.27 3 3 4.27zM14 3h-2c0 1.5-.37 2.91-1.02 4.16l1.46 1.46C13.42 6.98 14 5.06 14 3zm5.94 13.12c.34-.08.69-.12 1.06-.12v-2c-.94 0-1.84.19-2.66.52l1.6 1.6zm-4.56-4.56l1.46 1.46C18.09 12.37 19.5 12 21 12v-2c-2.06 0-3.98.58-5.62 1.56z" /></g>
<g id="lens"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" /></g>
<g id="linked-camera"><circle cx="12" cy="14" r="3.2" /><path d="M16 3.33c2.58 0 4.67 2.09 4.67 4.67H22c0-3.31-2.69-6-6-6v1.33M16 6c1.11 0 2 .89 2 2h1.33c0-1.84-1.49-3.33-3.33-3.33V6" /><path d="M17 9c0-1.11-.89-2-2-2V4H9L7.17 6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9h-5zm-5 10c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="looks"><path d="M12 10c-3.86 0-7 3.14-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.86-3.14-7-7-7zm0-4C5.93 6 1 10.93 1 17h2c0-4.96 4.04-9 9-9s9 4.04 9 9h2c0-6.07-4.93-11-11-11z" /></g>
<g id="looks-3"><path d="M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15c0 1.11-.9 2-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4c1.1 0 2 .89 2 2v1.5z" /></g>
<g id="looks-4"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z" /></g>
<g id="looks-5"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2H9v-2h4v-2H9V7h6v2z" /></g>
<g id="looks-6"><path d="M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2h-2c-1.1 0-2-.89-2-2V9c0-1.11.9-2 2-2h4v2z" /></g>
<g id="looks-one"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z" /></g>
<g id="looks-two"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8c0 1.11-.9 2-2 2h-2v2h4v2H9v-4c0-1.11.9-2 2-2h2V9H9V7h4c1.1 0 2 .89 2 2v2z" /></g>
<g id="loupe"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10h8c1.1 0 2-.9 2-2v-8c0-5.51-4.49-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="monochrome-photos"><path d="M20 5h-3.2L15 3H9L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 14h-8v-1c-2.8 0-5-2.2-5-5s2.2-5 5-5V7h8v12zm-3-6c0-2.8-2.2-5-5-5v1.8c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2V18c2.8 0 5-2.2 5-5zm-8.2 0c0 1.8 1.4 3.2 3.2 3.2V9.8c-1.8 0-3.2 1.4-3.2 3.2z" /></g>
<g id="movie-creation"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" /></g>
<g id="movie-filter"><path d="M18 4l2 3h-3l-2-3h-2l2 3h-3l-2-3H8l2 3H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4zm-6.75 11.25L10 18l-1.25-2.75L6 14l2.75-1.25L10 10l1.25 2.75L14 14l-2.75 1.25zm5.69-3.31L16 14l-.94-2.06L13 11l2.06-.94L16 8l.94 2.06L19 11l-2.06.94z" /></g>
<g id="music-note"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" /></g>
<g id="nature"><path d="M13 16.12c3.47-.41 6.17-3.36 6.17-6.95 0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H5v2h14v-2h-6v-3.88z" /></g>
<g id="nature-people"><path d="M22.17 9.17c0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H6v-3h1v-4c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v4h1v5h16v-2h-3v-3.88c3.47-.41 6.17-3.36 6.17-6.95zM4.5 11c.83 0 1.5-.67 1.5-1.5S5.33 8 4.5 8 3 8.67 3 9.5 3.67 11 4.5 11z" /></g>
<g id="navigate-before"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="navigate-next"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
<g id="palette"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="panorama"><path d="M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z" /></g>
<g id="panorama-fish-eye"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="panorama-horizontal"><path d="M20 6.54v10.91c-2.6-.77-5.28-1.16-8-1.16-2.72 0-5.4.39-8 1.16V6.54c2.6.77 5.28 1.16 8 1.16 2.72.01 5.4-.38 8-1.16M21.43 4c-.1 0-.2.02-.31.06C18.18 5.16 15.09 5.7 12 5.7c-3.09 0-6.18-.55-9.12-1.64-.11-.04-.22-.06-.31-.06-.34 0-.57.23-.57.63v14.75c0 .39.23.62.57.62.1 0 .2-.02.31-.06 2.94-1.1 6.03-1.64 9.12-1.64 3.09 0 6.18.55 9.12 1.64.11.04.21.06.31.06.33 0 .57-.23.57-.63V4.63c0-.4-.24-.63-.57-.63z" /></g>
<g id="panorama-vertical"><path d="M19.94 21.12c-1.1-2.94-1.64-6.03-1.64-9.12 0-3.09.55-6.18 1.64-9.12.04-.11.06-.22.06-.31 0-.34-.23-.57-.63-.57H4.63c-.4 0-.63.23-.63.57 0 .1.02.2.06.31C5.16 5.82 5.71 8.91 5.71 12c0 3.09-.55 6.18-1.64 9.12-.05.11-.07.22-.07.31 0 .33.23.57.63.57h14.75c.39 0 .63-.24.63-.57-.01-.1-.03-.2-.07-.31zM6.54 20c.77-2.6 1.16-5.28 1.16-8 0-2.72-.39-5.4-1.16-8h10.91c-.77 2.6-1.16 5.28-1.16 8 0 2.72.39 5.4 1.16 8H6.54z" /></g>
<g id="panorama-wide-angle"><path d="M12 6c2.45 0 4.71.2 7.29.64.47 1.78.71 3.58.71 5.36 0 1.78-.24 3.58-.71 5.36-2.58.44-4.84.64-7.29.64s-4.71-.2-7.29-.64C4.24 15.58 4 13.78 4 12c0-1.78.24-3.58.71-5.36C7.29 6.2 9.55 6 12 6m0-2c-2.73 0-5.22.24-7.95.72l-.93.16-.25.9C2.29 7.85 2 9.93 2 12s.29 4.15.87 6.22l.25.89.93.16c2.73.49 5.22.73 7.95.73s5.22-.24 7.95-.72l.93-.16.25-.89c.58-2.08.87-4.16.87-6.23s-.29-4.15-.87-6.22l-.25-.89-.93-.16C17.22 4.24 14.73 4 12 4z" /></g>
<g id="photo"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="photo-album"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4zm0 15l3-3.86 2.14 2.58 3-3.86L18 19H6z" /></g>
<g id="photo-camera"><circle cx="12" cy="12" r="3.2" /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="photo-filter"><path d="M19.02 10v9H5V5h9V3H5.02c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2zM17 10l.94-2.06L20 7l-2.06-.94L17 4l-.94 2.06L14 7l2.06.94zm-3.75.75L12 8l-1.25 2.75L8 12l2.75 1.25L12 16l1.25-2.75L16 12z" /></g>
<g id="photo-library"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" /></g>
<g id="photo-size-select-actual"><path d="M21 3H3C2 3 1 4 1 5v14c0 1.1.9 2 2 2h18c1 0 2-1 2-2V5c0-1-1-2-2-2zM5 17l3.5-4.5 2.5 3.01L14.5 11l4.5 6H5z" /></g>
<g id="photo-size-select-large"><path d="M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8l2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z" /></g>
<g id="photo-size-select-small"><path d="M23 15h-2v2h2v-2zm0-4h-2v2h2v-2zm0 8h-2v2c1 0 2-1 2-2zM15 3h-2v2h2V3zm8 4h-2v2h2V7zm-2-4v2h2c0-1-1-2-2-2zM3 21h8v-6H1v4c0 1.1.9 2 2 2zM3 7H1v2h2V7zm12 12h-2v2h2v-2zm4-16h-2v2h2V3zm0 16h-2v2h2v-2zM3 3C2 3 1 4 1 5h2V3zm0 8H1v2h2v-2zm8-8H9v2h2V3zM7 3H5v2h2V3z" /></g>
<g id="picture-as-pdf"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z" /></g>
<g id="portrait"><path d="M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25zm4.5 4c0-1.5-3-2.25-4.5-2.25s-4.5.75-4.5 2.25V17h9v-.75zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="remove-red-eye"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="rotate-90-degrees-ccw"><path d="M7.34 6.41L.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zm15.67-6.26C17.61 4.88 15.3 4 13 4V.76L8.76 5 13 9.24V6c1.79 0 3.58.68 4.95 2.05 2.73 2.73 2.73 7.17 0 9.9C16.58 19.32 14.79 20 13 20c-.97 0-1.94-.21-2.84-.61l-1.49 1.49C10.02 21.62 11.51 22 13 22c2.3 0 4.61-.88 6.36-2.64 3.52-3.51 3.52-9.21 0-12.72z" /></g>
<g id="rotate-left"><path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z" /></g>
<g id="rotate-right"><path d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z" /></g>
<g id="slideshow"><path d="M10 8v8l5-4-5-4zm9-5H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="straighten"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z" /></g>
<g id="style"><path d="M2.53 19.65l1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z" /></g>
<g id="switch-camera"><path d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5L5.5 12 9 8.5V11h6V8.5l3.5 3.5-3.5 3.5z" /></g>
<g id="switch-video"><path d="M18 9.5V6c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-3.5l4 4v-13l-4 4zm-5 6V13H7v2.5L3.5 12 7 8.5V11h6V8.5l3.5 3.5-3.5 3.5z" /></g>
<g id="tag-faces"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" /></g>
<g id="texture"><path d="M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z" /></g>
<g id="timelapse"><path d="M16.24 7.76C15.07 6.59 13.54 6 12 6v6l-4.24 4.24c2.34 2.34 6.14 2.34 8.49 0 2.34-2.34 2.34-6.14-.01-8.48zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="timer"><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" /></g>
<g id="timer-10"><path d="M0 7.72V9.4l3-1V18h2V6h-.25L0 7.72zm23.78 6.65c-.14-.28-.35-.53-.63-.74-.28-.21-.61-.39-1.01-.53s-.85-.27-1.35-.38c-.35-.07-.64-.15-.87-.23-.23-.08-.41-.16-.55-.25-.14-.09-.23-.19-.28-.3-.05-.11-.08-.24-.08-.39 0-.14.03-.28.09-.41.06-.13.15-.25.27-.34.12-.1.27-.18.45-.24s.4-.09.64-.09c.25 0 .47.04.66.11.19.07.35.17.48.29.13.12.22.26.29.42.06.16.1.32.1.49h1.95c0-.39-.08-.75-.24-1.09-.16-.34-.39-.63-.69-.88-.3-.25-.66-.44-1.09-.59C21.49 9.07 21 9 20.46 9c-.51 0-.98.07-1.39.21-.41.14-.77.33-1.06.57-.29.24-.51.52-.67.84-.16.32-.23.65-.23 1.01s.08.69.23.96c.15.28.36.52.64.73.27.21.6.38.98.53.38.14.81.26 1.27.36.39.08.71.17.95.26s.43.19.57.29c.13.1.22.22.27.34.05.12.07.25.07.39 0 .32-.13.57-.4.77-.27.2-.66.29-1.17.29-.22 0-.43-.02-.64-.08-.21-.05-.4-.13-.56-.24-.17-.11-.3-.26-.41-.44-.11-.18-.17-.41-.18-.67h-1.89c0 .36.08.71.24 1.05.16.34.39.65.7.93.31.27.69.49 1.15.66.46.17.98.25 1.58.25.53 0 1.01-.06 1.44-.19.43-.13.8-.31 1.11-.54.31-.23.54-.51.71-.83.17-.32.25-.67.25-1.06-.02-.4-.09-.74-.24-1.02zm-9.96-7.32c-.34-.4-.75-.7-1.23-.88-.47-.18-1.01-.27-1.59-.27-.58 0-1.11.09-1.59.27-.48.18-.89.47-1.23.88-.34.41-.6.93-.79 1.59-.18.65-.28 1.45-.28 2.39v1.92c0 .94.09 1.74.28 2.39.19.66.45 1.19.8 1.6.34.41.75.71 1.23.89.48.18 1.01.28 1.59.28.59 0 1.12-.09 1.59-.28.48-.18.88-.48 1.22-.89.34-.41.6-.94.78-1.6.18-.65.28-1.45.28-2.39v-1.92c0-.94-.09-1.74-.28-2.39-.18-.66-.44-1.19-.78-1.59zm-.92 6.17c0 .6-.04 1.11-.12 1.53-.08.42-.2.76-.36 1.02-.16.26-.36.45-.59.57-.23.12-.51.18-.82.18-.3 0-.58-.06-.82-.18s-.44-.31-.6-.57c-.16-.26-.29-.6-.38-1.02-.09-.42-.13-.93-.13-1.53v-2.5c0-.6.04-1.11.13-1.52.09-.41.21-.74.38-1 .16-.25.36-.43.6-.55.24-.11.51-.17.81-.17.31 0 .58.06.81.17.24.11.44.29.6.55.16.25.29.58.37.99.08.41.13.92.13 1.52v2.51z" /></g>
<g id="timer-3"><path d="M11.61 12.97c-.16-.24-.36-.46-.62-.65-.25-.19-.56-.35-.93-.48.3-.14.57-.3.8-.5.23-.2.42-.41.57-.64.15-.23.27-.46.34-.71.08-.24.11-.49.11-.73 0-.55-.09-1.04-.28-1.46-.18-.42-.44-.77-.78-1.06-.33-.28-.73-.5-1.2-.64-.45-.13-.97-.2-1.53-.2-.55 0-1.06.08-1.52.24-.47.17-.87.4-1.2.69-.33.29-.6.63-.78 1.03-.2.39-.29.83-.29 1.29h1.98c0-.26.05-.49.14-.69.09-.2.22-.38.38-.52.17-.14.36-.25.58-.33.22-.08.46-.12.73-.12.61 0 1.06.16 1.36.47.3.31.44.75.44 1.32 0 .27-.04.52-.12.74-.08.22-.21.41-.38.57-.17.16-.38.28-.63.37-.25.09-.55.13-.89.13H6.72v1.57H7.9c.34 0 .64.04.91.11.27.08.5.19.69.35.19.16.34.36.44.61.1.24.16.54.16.87 0 .62-.18 1.09-.53 1.42-.35.33-.84.49-1.45.49-.29 0-.56-.04-.8-.13-.24-.08-.44-.2-.61-.36-.17-.16-.3-.34-.39-.56-.09-.22-.14-.46-.14-.72H4.19c0 .55.11 1.03.32 1.45.21.42.5.77.86 1.05s.77.49 1.24.63.96.21 1.48.21c.57 0 1.09-.08 1.58-.23.49-.15.91-.38 1.26-.68.36-.3.64-.66.84-1.1.2-.43.3-.93.3-1.48 0-.29-.04-.58-.11-.86-.08-.25-.19-.51-.35-.76zm9.26 1.4c-.14-.28-.35-.53-.63-.74-.28-.21-.61-.39-1.01-.53s-.85-.27-1.35-.38c-.35-.07-.64-.15-.87-.23-.23-.08-.41-.16-.55-.25-.14-.09-.23-.19-.28-.3-.05-.11-.08-.24-.08-.39s.03-.28.09-.41c.06-.13.15-.25.27-.34.12-.1.27-.18.45-.24s.4-.09.64-.09c.25 0 .47.04.66.11.19.07.35.17.48.29.13.12.22.26.29.42.06.16.1.32.1.49h1.95c0-.39-.08-.75-.24-1.09-.16-.34-.39-.63-.69-.88-.3-.25-.66-.44-1.09-.59-.43-.15-.92-.22-1.46-.22-.51 0-.98.07-1.39.21-.41.14-.77.33-1.06.57-.29.24-.51.52-.67.84-.16.32-.23.65-.23 1.01s.08.68.23.96c.15.28.37.52.64.73.27.21.6.38.98.53.38.14.81.26 1.27.36.39.08.71.17.95.26s.43.19.57.29c.13.1.22.22.27.34.05.12.07.25.07.39 0 .32-.13.57-.4.77-.27.2-.66.29-1.17.29-.22 0-.43-.02-.64-.08-.21-.05-.4-.13-.56-.24-.17-.11-.3-.26-.41-.44-.11-.18-.17-.41-.18-.67h-1.89c0 .36.08.71.24 1.05.16.34.39.65.7.93.31.27.69.49 1.15.66.46.17.98.25 1.58.25.53 0 1.01-.06 1.44-.19.43-.13.8-.31 1.11-.54.31-.23.54-.51.71-.83.17-.32.25-.67.25-1.06-.02-.4-.09-.74-.24-1.02z" /></g>
<g id="timer-off"><path d="M19.04 4.55l-1.42 1.42C16.07 4.74 14.12 4 12 4c-1.83 0-3.53.55-4.95 1.48l1.46 1.46C9.53 6.35 10.73 6 12 6c3.87 0 7 3.13 7 7 0 1.27-.35 2.47-.94 3.49l1.45 1.45C20.45 16.53 21 14.83 21 13c0-2.12-.74-4.07-1.97-5.61l1.42-1.42-1.41-1.42zM15 1H9v2h6V1zm-4 8.44l2 2V8h-2v1.44zM3.02 4L1.75 5.27 4.5 8.03C3.55 9.45 3 11.16 3 13c0 4.97 4.02 9 9 9 1.84 0 3.55-.55 4.98-1.5l2.5 2.5 1.27-1.27-7.71-7.71L3.02 4zM12 20c-3.87 0-7-3.13-7-7 0-1.28.35-2.48.95-3.52l9.56 9.56c-1.03.61-2.23.96-3.51.96z" /></g>
<g id="tonality"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93s3.05-7.44 7-7.93v15.86zm2-15.86c1.03.13 2 .45 2.87.93H13v-.93zM13 7h5.24c.25.31.48.65.68 1H13V7zm0 3h6.74c.08.33.15.66.19 1H13v-1zm0 9.93V19h2.87c-.87.48-1.84.8-2.87.93zM18.24 17H13v-1h5.92c-.2.35-.43.69-.68 1zm1.5-3H13v-1h6.93c-.04.34-.11.67-.19 1z" /></g>
<g id="transform"><path d="M22 18v-2H8V4h2L7 1 4 4h2v2H2v2h4v8c0 1.1.9 2 2 2h8v2h-2l3 3 3-3h-2v-2h4zM10 8h6v6h2V8c0-1.1-.9-2-2-2h-6v2z" /></g>
<g id="tune"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z" /></g>
<g id="view-comfy"><path d="M3 9h4V5H3v4zm0 5h4v-4H3v4zm5 0h4v-4H8v4zm5 0h4v-4h-4v4zM8 9h4V5H8v4zm5-4v4h4V5h-4zm5 9h4v-4h-4v4zM3 19h4v-4H3v4zm5 0h4v-4H8v4zm5 0h4v-4h-4v4zm5 0h4v-4h-4v4zm0-14v4h4V5h-4z" /></g>
<g id="view-compact"><path d="M3 19h6v-7H3v7zm7 0h12v-7H10v7zM3 5v6h19V5H3z" /></g>
<g id="vignette"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 15c-4.42 0-8-2.69-8-6s3.58-6 8-6 8 2.69 8 6-3.58 6-8 6z" /></g>
<g id="wb-auto"><path d="M6.85 12.65h2.3L8 9l-1.15 3.65zM22 7l-1.2 6.29L19.3 7h-1.6l-1.49 6.29L15 7h-.76C12.77 5.17 10.53 4 8 4c-4.42 0-8 3.58-8 8s3.58 8 8 8c3.13 0 5.84-1.81 7.15-4.43l.1.43H17l1.5-6.1L20 16h1.75l2.05-9H22zm-11.7 9l-.7-2H6.4l-.7 2H3.8L7 7h2l3.2 9h-1.9z" /></g>
<g id="wb-cloudy"><path d="M19.36 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96z" /></g>
<g id="wb-incandescent"><path d="M3.55 18.54l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8zM11 22.45h2V19.5h-2v2.95zM4 10.5H1v2h3v-2zm11-4.19V1.5H9v4.81C7.21 7.35 6 9.28 6 11.5c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19zm5 4.19v2h3v-2h-3zm-2.76 7.66l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4z" /></g>
<g id="wb-iridescent"><path d="M5 14.5h14v-6H5v6zM11 .55V3.5h2V.55h-2zm8.04 2.5l-1.79 1.79 1.41 1.41 1.8-1.79-1.42-1.41zM13 22.45V19.5h-2v2.95h2zm7.45-3.91l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zM3.55 4.46l1.79 1.79 1.41-1.41-1.79-1.79-1.41 1.41zm1.41 15.49l1.79-1.8-1.41-1.41-1.79 1.79 1.41 1.42z" /></g>
<g id="wb-sunny"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z" /></g>
</defs></svg>
</iron-iconset-svg>



<iron-iconset-svg name="icons" size="24">
<svg><defs>
<g id="3d-rotation"><path d="M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z" /></g>
<g id="accessibility"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z" /></g>
<g id="accessible"><circle cx="12" cy="4" r="2" /><path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z" /></g>
<g id="account-balance"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z" /></g>
<g id="account-balance-wallet"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="account-box"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z" /></g>
<g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" /></g>
<g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" /></g>
<g id="add-alert"><path d="M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z" /></g>
<g id="add-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" /></g>
<g id="add-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" /></g>
<g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="add-shopping-cart"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z" /></g>
<g id="alarm"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" /></g>
<g id="alarm-add"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z" /></g>
<g id="alarm-off"><path d="M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z" /></g>
<g id="alarm-on"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z" /></g>
<g id="all-out"><path d="M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z" /></g>
<g id="android"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z" /></g>
<g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z" /></g>
<g id="apps"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z" /></g>
<g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z" /></g>
<g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></g>
<g id="arrow-downward"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z" /></g>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z" /></g>
<g id="arrow-drop-down-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z" /></g>
<g id="arrow-drop-up"><path d="M7 14l5-5 5 5z" /></g>
<g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" /></g>
<g id="arrow-upward"><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z" /></g>
<g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" /></g>
<g id="assessment"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" /></g>
<g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></g>
<g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z" /></g>
<g id="assignment-late"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" /></g>
<g id="assignment-return"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z" /></g>
<g id="assignment-returned"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z" /></g>
<g id="assignment-turned-in"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" /></g>
<g id="attachment"><path d="M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z" /></g>
<g id="autorenew"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" /></g>
<g id="backspace"><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z" /></g>
<g id="backup"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" /></g>
<g id="block"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z" /></g>
<g id="book"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" /></g>
<g id="bookmark"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" /></g>
<g id="bookmark-border"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" /></g>
<g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z" /></g>
<g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" /></g>
<g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z" /></g>
<g id="camera-enhance"><path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z" /></g>
<g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z" /></g>
<g id="card-giftcard"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" /></g>
<g id="card-membership"><path d="M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z" /></g>
<g id="card-travel"><path d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z" /></g>
<g id="change-history"><path d="M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z" /></g>
<g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" /></g>
<g id="check-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></g>
<g id="check-box-outline-blank"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></g>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
<g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z" /></g>
<g id="class"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" /></g>
<g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></g>
<g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></g>
<g id="cloud"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" /></g>
<g id="cloud-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z" /></g>
<g id="cloud-done"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z" /></g>
<g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z" /></g>
<g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z" /></g>
<g id="cloud-queue"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z" /></g>
<g id="cloud-upload"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" /></g>
<g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z" /></g>
<g id="compare-arrows"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z" /></g>
<g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" /></g>
<g id="content-cut"><path d="M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z" /></g>
<g id="content-paste"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" /></g>
<g id="copyright"><path d="M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="create-new-folder"><path d="M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z" /></g>
<g id="credit-card"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" /></g>
<g id="dashboard"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" /></g>
<g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" /></g>
<g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" /></g>
<g id="delete-forever"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z" /></g>
<g id="delete-sweep"><path d="M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z" /></g>
<g id="description"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" /></g>
<g id="dns"><path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" /></g>
<g id="done-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z" /></g>
<g id="donut-large"><path d="M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z" /></g>
<g id="donut-small"><path d="M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z" /></g>
<g id="drafts"><path d="M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z" /></g>
<g id="eject"><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z" /></g>
<g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" /></g>
<g id="error-outline"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="euro-symbol"><path d="M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1 0 .34.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z" /></g>
<g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z" /></g>
<g id="event-seat"><path d="M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z" /></g>
<g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z" /></g>
<g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" /></g>
<g id="explore"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z" /></g>
<g id="extension"><path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z" /></g>
<g id="face"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z" /></g>
<g id="favorite"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></g>
<g id="favorite-border"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z" /></g>
<g id="feedback"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z" /></g>
<g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></g>
<g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" /></g>
<g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z" /></g>
<g id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z" /></g>
<g id="find-replace"><path d="M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z" /></g>
<g id="fingerprint"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z" /></g>
<g id="first-page"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z" /></g>
<g id="flag"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z" /></g>
<g id="flight-land"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z" /></g>
<g id="flight-takeoff"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z" /></g>
<g id="flip-to-back"><path d="M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z" /></g>
<g id="flip-to-front"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z" /></g>
<g id="folder"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" /></g>
<g id="folder-open"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z" /></g>
<g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z" /></g>
<g id="font-download"><path d="M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z" /></g>
<g id="forward"><path d="M12 8V4l8 8-8 8v-4H4V8z" /></g>
<g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" /></g>
<g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z" /></g>
<g id="g-translate"><path d="M20 5h-9.12L10 2H4c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h7l1 3h8c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM7.17 14.59c-2.25 0-4.09-1.83-4.09-4.09s1.83-4.09 4.09-4.09c1.04 0 1.99.37 2.74 1.07l.07.06-1.23 1.18-.06-.05c-.29-.27-.78-.59-1.52-.59-1.31 0-2.38 1.09-2.38 2.42s1.07 2.42 2.38 2.42c1.37 0 1.96-.87 2.12-1.46H7.08V9.91h3.95l.01.07c.04.21.05.4.05.61 0 2.35-1.61 4-3.92 4zm6.03-1.71c.33.6.74 1.18 1.19 1.7l-.54.53-.65-2.23zm.77-.76h-.99l-.31-1.04h3.99s-.34 1.31-1.56 2.74c-.52-.62-.89-1.23-1.13-1.7zM21 20c0 .55-.45 1-1 1h-7l2-2-.81-2.77.92-.92L17.79 18l.73-.73-2.71-2.68c.9-1.03 1.6-2.25 1.92-3.51H19v-1.04h-3.64V9h-1.04v1.04h-1.96L11.18 6H20c.55 0 1 .45 1 1v13z" /></g>
<g id="gavel"><path d="M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z" /></g>
<g id="gesture"><path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z" /></g>
<g id="get-app"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></g>
<g id="gif"><path d="M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z" /></g>
<g id="grade"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" /></g>
<g id="group-work"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" /></g>
<g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" /></g>
<g id="highlight-off"><path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" /></g>
<g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /></g>
<g id="hourglass-empty"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z" /></g>
<g id="hourglass-full"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z" /></g>
<g id="http"><path d="M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z" /></g>
<g id="https"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" /></g>
<g id="important-devices"><path d="M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z" /></g>
<g id="inbox"><path d="M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z" /></g>
<g id="indeterminate-check-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z" /></g>
<g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" /></g>
<g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" /></g>
<g id="input"><path d="M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z" /></g>
<g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z" /></g>
<g id="label"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z" /></g>
<g id="label-outline"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z" /></g>
<g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z" /></g>
<g id="last-page"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z" /></g>
<g id="launch"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" /></g>
<g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z" /></g>
<g id="line-style"><path d="M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z" /></g>
<g id="line-weight"><path d="M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z" /></g>
<g id="link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" /></g>
<g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z" /></g>
<g id="lock"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" /></g>
<g id="lock-open"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z" /></g>
<g id="lock-outline"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z" /></g>
<g id="low-priority"><path d="M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z" /></g>
<g id="loyalty"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z" /></g>
<g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="markunread"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="markunread-mailbox"><path d="M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z" /></g>
<g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" /></g>
<g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="motorcycle"><path d="M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z" /></g>
<g id="move-to-inbox"><path d="M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z" /></g>
<g id="next-week"><path d="M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z" /></g>
<g id="note-add"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z" /></g>
<g id="offline-pin"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z" /></g>
<g id="opacity"><path d="M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z" /></g>
<g id="open-in-browser"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z" /></g>
<g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" /></g>
<g id="open-with"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z" /></g>
<g id="pageview"><path d="M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z" /></g>
<g id="pan-tool"><path d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z" /></g>
<g id="payment"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" /></g>
<g id="perm-camera-mic"><path d="M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z" /></g>
<g id="perm-contact-calendar"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z" /></g>
<g id="perm-data-setting"><path d="M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="perm-device-information"><path d="M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z" /></g>
<g id="perm-identity"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z" /></g>
<g id="perm-media"><path d="M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z" /></g>
<g id="perm-phone-msg"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z" /></g>
<g id="perm-scan-wifi"><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z" /></g>
<g id="pets"><circle cx="4.5" cy="9.5" r="2.5" /><circle cx="9" cy="5.5" r="2.5" /><circle cx="15" cy="5.5" r="2.5" /><circle cx="19.5" cy="9.5" r="2.5" /><path d="M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z" /></g>
<g id="picture-in-picture"><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z" /></g>
<g id="picture-in-picture-alt"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z" /></g>
<g id="play-for-work"><path d="M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z" /></g>
<g id="polymer"><path d="M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z" /></g>
<g id="power-settings-new"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" /></g>
<g id="pregnant-woman"><path d="M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z" /></g>
<g id="print"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" /></g>
<g id="query-builder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></g>
<g id="question-answer"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z" /></g>
<g id="radio-button-checked"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="radio-button-unchecked"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="receipt"><path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z" /></g>
<g id="record-voice-over"><circle cx="9" cy="9" r="4" /><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z" /></g>
<g id="redeem"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" /></g>
<g id="redo"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z" /></g>
<g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" /></g>
<g id="remove"><path d="M19 13H5v-2h14v2z" /></g>
<g id="remove-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z" /></g>
<g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="remove-shopping-cart"><path d="M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z" /></g>
<g id="reorder"><path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z" /></g>
<g id="reply"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /></g>
<g id="reply-all"><path d="M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /></g>
<g id="report"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z" /></g>
<g id="report-problem"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" /></g>
<g id="restore"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" /></g>
<g id="restore-page"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z" /></g>
<g id="room"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="rounded-corner"><path d="M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z" /></g>
<g id="rowing"><path d="M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z" /></g>
<g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z" /></g>
<g id="schedule"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></g>
<g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /></g>
<g id="select-all"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" /></g>
<g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" /></g>
<g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" /></g>
<g id="settings-applications"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z" /></g>
<g id="settings-backup-restore"><path d="M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z" /></g>
<g id="settings-bluetooth"><path d="M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z" /></g>
<g id="settings-brightness"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z" /></g>
<g id="settings-cell"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z" /></g>
<g id="settings-ethernet"><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z" /></g>
<g id="settings-input-antenna"><path d="M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z" /></g>
<g id="settings-input-component"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z" /></g>
<g id="settings-input-composite"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z" /></g>
<g id="settings-input-hdmi"><path d="M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z" /></g>
<g id="settings-input-svideo"><path d="M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" /></g>
<g id="settings-overscan"><path d="M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" /></g>
<g id="settings-phone"><path d="M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z" /></g>
<g id="settings-power"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z" /></g>
<g id="settings-remote"><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z" /></g>
<g id="settings-voice"><path d="M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z" /></g>
<g id="shop"><path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z" /></g>
<g id="shop-two"><path d="M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z" /></g>
<g id="shopping-basket"><path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="shopping-cart"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="sort"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z" /></g>
<g id="speaker-notes"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z" /></g>
<g id="speaker-notes-off"><path d="M10.54 11l-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z" /></g>
<g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z" /></g>
<g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" /></g>
<g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" /></g>
<g id="star-half"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" /></g>
<g id="stars"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z" /></g>
<g id="store"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z" /></g>
<g id="subdirectory-arrow-left"><path d="M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z" /></g>
<g id="subdirectory-arrow-right"><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z" /></g>
<g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z" /></g>
<g id="supervisor-account"><path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z" /></g>
<g id="swap-horiz"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z" /></g>
<g id="swap-vert"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z" /></g>
<g id="swap-vertical-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z" /></g>
<g id="system-update-alt"><path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z" /></g>
<g id="tab"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z" /></g>
<g id="tab-unselected"><path d="M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z" /></g>
<g id="text-format"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z" /></g>
<g id="theaters"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z" /></g>
<g id="thumb-down"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z" /></g>
<g id="thumb-up"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z" /></g>
<g id="thumbs-up-down"><path d="M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z" /></g>
<g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z" /></g>
<g id="toc"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /></g>
<g id="today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" /></g>
<g id="toll"><path d="M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z" /></g>
<g id="touch-app"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" /></g>
<g id="track-changes"><path d="M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z" /></g>
<g id="translate"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" /></g>
<g id="trending-down"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z" /></g>
<g id="trending-flat"><path d="M22 12l-4-4v3H3v2h15v3z" /></g>
<g id="trending-up"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" /></g>
<g id="turned-in"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" /></g>
<g id="turned-in-not"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" /></g>
<g id="unarchive"><path d="M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z" /></g>
<g id="undo"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" /></g>
<g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z" /></g>
<g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z" /></g>
<g id="update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z" /></g>
<g id="verified-user"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" /></g>
<g id="view-agenda"><path d="M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z" /></g>
<g id="view-array"><path d="M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z" /></g>
<g id="view-carousel"><path d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z" /></g>
<g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z" /></g>
<g id="view-day"><path d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z" /></g>
<g id="view-headline"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z" /></g>
<g id="view-list"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z" /></g>
<g id="view-module"><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z" /></g>
<g id="view-quilt"><path d="M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z" /></g>
<g id="view-stream"><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z" /></g>
<g id="view-week"><path d="M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z" /></g>
<g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z" /></g>
<g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" /></g>
<g id="watch-later"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z" /></g>
<g id="weekend"><path d="M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z" /></g>
<g id="work"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" /></g>
<g id="youtube-searched-for"><path d="M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z" /></g>
<g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></g>
<g id="zoom-out"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z" /></g>
</defs></svg>
</iron-iconset-svg>







<script>//~~WEBPATH~~/paper-behaviors/paper-button-behavior.html.js
Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var a=1;this.disabled?a=0:this.active||this.pressed?a=4:this.receivedFocusFromKeyboard&&(a=3);this._setElevation(a)},_computeKeyboardClass:function(a){this.toggleClass("keyboard-focus",
a)},_spaceKeyDownHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,a);this.hasRipple()&&1>this.getRipple().ripples.length&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,a);this.hasRipple()&&this._ripple.uiUpAction()}};Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];
</script>




<custom-style>
  <style is="custom-style">
    html {

      --shadow-transition: {
        transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      };

      --shadow-none: {
        box-shadow: none;
      };

      /* from http://codepen.io/shyndman/pen/c5394ddf2e8b2a5c9185904b57421cdb */

      --shadow-elevation-2dp: {
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);
      };

      --shadow-elevation-3dp: {
        box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-4dp: {
        box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-6dp: {
        box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-8dp: {
        box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-12dp: {
        box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-16dp: {
        box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-24dp: {
        box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);
      };
    }
  </style>
</custom-style>




<dom-module id="paper-material-styles">
  <template>
    <style>
      :host, html {
        --paper-material: {
          display: block;
          position: relative;
        };
        --paper-material-elevation-1: {
          @apply --shadow-elevation-2dp;
        };
        --paper-material-elevation-2: {
          @apply --shadow-elevation-4dp;
        };
        --paper-material-elevation-3: {
          @apply --shadow-elevation-6dp;
        };
        --paper-material-elevation-4: {
          @apply --shadow-elevation-8dp;
        };
        --paper-material-elevation-5: {
          @apply --shadow-elevation-16dp;
        };
      }
      :host(.paper-material), .paper-material {
        @apply --paper-material;
      }
      :host(.paper-material[elevation="1"]), .paper-material[elevation="1"] {
        @apply --paper-material-elevation-1;
      }
      :host(.paper-material[elevation="2"]), .paper-material[elevation="2"] {
        @apply --paper-material-elevation-2;
      }
      :host(.paper-material[elevation="3"]), .paper-material[elevation="3"] {
        @apply --paper-material-elevation-3;
      }
      :host(.paper-material[elevation="4"]), .paper-material[elevation="4"] {
        @apply --paper-material-elevation-4;
      }
      :host(.paper-material[elevation="5"]), .paper-material[elevation="5"] {
        @apply --paper-material-elevation-5;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-button">
  <template strip-whitespace>
    <style include="paper-material-styles">
      /* Need to specify the same specificity as the styles imported from paper-material. */
      :host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;
        box-sizing: border-box;
        min-width: 5.14em;
        margin: 0 0.29em;
        background: transparent;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;
        font: inherit;
        text-transform: uppercase;
        outline-width: 0;
        border-radius: 3px;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        padding: 0.7em 0.57em;

        @apply --paper-font-common-base;
        @apply --paper-button;
      }

      :host([elevation="1"]) {
        @apply --paper-material-elevation-1;
      }

      :host([elevation="2"]) {
        @apply --paper-material-elevation-2;
      }

      :host([elevation="3"]) {
        @apply --paper-material-elevation-3;
      }

      :host([elevation="4"]) {
        @apply --paper-material-elevation-4;
      }

      :host([elevation="5"]) {
        @apply --paper-material-elevation-5;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host([raised].keyboard-focus) {
        font-weight: bold;
        @apply --paper-button-raised-keyboard-focus;
      }

      :host(:not([raised]).keyboard-focus) {
        font-weight: bold;
        @apply --paper-button-flat-keyboard-focus;
      }

      :host([disabled]) {
        background: none;

        color: #a8a8a8;
        cursor: auto;
        pointer-events: none;

        @apply --paper-button-disabled;
      }

      :host([raised][disabled]) {
        background: #eaeaea;
      }

      :host([animated]) {
        @apply --shadow-transition;
      }

      paper-ripple {
        color: var(--paper-button-ink-color);
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-button/paper-button.html.js
Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}});
</script>
</dom-module>








<script>//~~WEBPATH~~/iron-validatable-behavior/iron-validatable-behavior.html.js
Polymer.IronValidatableBehaviorMeta=null;
Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},_validatorMeta:{type:Object},validatorType:{type:String,value:"validator"},_validator:{type:Object,computed:"__computeValidator(validator)"}},observers:["_invalidChanged(invalid)"],registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},
hasValidator:function(){return null!=this._validator},validate:function(a){this.invalid=!this._getValidity(a);return!this.invalid},_getValidity:function(a){return this.hasValidator()?this._validator.validate(a):!0},__computeValidator:function(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)}};
</script>



<script>//~~WEBPATH~~/iron-form-element-behavior/iron-form-element-behavior.html.js
Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function(){Polymer.Element||this.fire("iron-form-element-register")},detached:function(){!Polymer.Element&&this._parentForm&&this._parentForm.fire("iron-form-element-unregister",{target:this})}};
</script>


<script>//~~WEBPATH~~/iron-checked-element-behavior/iron-checked-element-behavior.html.js
Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required",
"true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked;this.fire("iron-change")},_valueChanged:function(){if(void 0===this.value||null===this.value)this.value="on"}};Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];
</script>



<script>//~~WEBPATH~~/paper-behaviors/paper-checked-element-behavior.html.js
Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this);this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);!this.disabled&&this.isAttached&&(this.checked=this.active)}};
Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];
</script>




<dom-module id="paper-checkbox">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        white-space: nowrap;
        cursor: pointer;
        --calculated-paper-checkbox-size: var(--paper-checkbox-size, 18px);
        /* -1px is a sentinel for the default and is replaced in `attached`. */
        --calculated-paper-checkbox-ink-size: var(--paper-checkbox-ink-size, -1px);
        @apply --paper-font-common-base;
        line-height: 0;
        -webkit-tap-highlight-color: transparent;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:focus) {
        outline: none;
      }

      .hidden {
        display: none;
      }

      #checkboxContainer {
        display: inline-block;
        position: relative;
        width: var(--calculated-paper-checkbox-size);
        height: var(--calculated-paper-checkbox-size);
        min-width: var(--calculated-paper-checkbox-size);
        margin: var(--paper-checkbox-margin, initial);
        vertical-align: var(--paper-checkbox-vertical-align, middle);
        background-color: var(--paper-checkbox-unchecked-background-color, transparent);
      }

      #ink {
        position: absolute;

        /* Center the ripple in the checkbox by negative offsetting it by
         * (inkWidth - rippleWidth) / 2 */
        top: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        width: var(--calculated-paper-checkbox-ink-size);
        height: var(--calculated-paper-checkbox-ink-size);
        color: var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
      }

      #ink:dir(rtl) {
        right: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: auto;
      }

      #ink[checked] {
        color: var(--paper-checkbox-checked-ink-color, var(--primary-color));
      }

      #checkbox {
        position: relative;
        box-sizing: border-box;
        height: 100%;
        border: solid 2px;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        border-radius: 2px;
        pointer-events: none;
        -webkit-transition: background-color 140ms, border-color 140ms;
        transition: background-color 140ms, border-color 140ms;
      }

      /* checkbox checked animations */
      #checkbox.checked #checkmark {
        -webkit-animation: checkmark-expand 140ms ease-out forwards;
        animation: checkmark-expand 140ms ease-out forwards;
      }

      @-webkit-keyframes checkmark-expand {
        0% {
          -webkit-transform: scale(0, 0) rotate(45deg);
        }
        100% {
          -webkit-transform: scale(1, 1) rotate(45deg);
        }
      }

      @keyframes checkmark-expand {
        0% {
          transform: scale(0, 0) rotate(45deg);
        }
        100% {
          transform: scale(1, 1) rotate(45deg);
        }
      }

      #checkbox.checked {
        background-color: var(--paper-checkbox-checked-color, var(--primary-color));
        border-color: var(--paper-checkbox-checked-color, var(--primary-color));
      }

      #checkmark {
        position: absolute;
        width: 36%;
        height: 70%;
        border-style: solid;
        border-top: none;
        border-left: none;
        border-right-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-bottom-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-color: var(--paper-checkbox-checkmark-color, white);
        -webkit-transform-origin: 97% 86%;
        transform-origin: 97% 86%;
        box-sizing: content-box; /* protect against page-level box-sizing */
      }

      #checkmark:dir(rtl) {
        -webkit-transform-origin: 50% 14%;
        transform-origin: 50% 14%;
      }

      /* label */
      #checkboxLabel {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-checkbox-label-spacing, 8px);
        white-space: normal;
        line-height: normal;
        color: var(--paper-checkbox-label-color, var(--primary-text-color));
        @apply --paper-checkbox-label;
      }

      :host([checked]) #checkboxLabel {
        color: var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));
        @apply --paper-checkbox-label-checked;
      }

      #checkboxLabel:dir(rtl) {
        padding-right: var(--paper-checkbox-label-spacing, 8px);
        padding-left: 0;
      }

      #checkboxLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #checkbox {
        opacity: 0.5;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
      }

      :host([disabled][checked]) #checkbox {
        background-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #checkboxLabel  {
        opacity: 0.65;
      }

      /* invalid state */
      #checkbox.invalid:not(.checked) {
        border-color: var(--paper-checkbox-error-color, var(--error-color));
      }
    </style>

    <div id="checkboxContainer">
      <div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]">
        <div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div>
      </div>
    </div>

    <div id="checkboxLabel"><slot></slot></div>
  </template>

  <script>//~~WEBPATH~~/paper-checkbox/paper-checkbox.html.js
Polymer({is:"paper-checkbox",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim()){var a=this.getComputedStyleValue("--calculated-paper-checkbox-size").trim(),b="px",c=a.match(/[A-Za-z]+$/);null!==c&&(b=c[0]);a=parseFloat(a);
c=8/3*a;"px"===b&&(c=Math.floor(c),c%2!==a%2&&c++);this.updateStyles({"--paper-checkbox-ink-size":c+b})}})},_computeCheckboxClass:function(a,b){var c="";a&&(c+="checked ");b&&(c+="invalid");return c},_computeCheckmarkClass:function(a){return a?"":"hidden"},_createRipple:function(){this._rippleContainer=this.$.checkboxContainer;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});
</script>
</dom-module>







<script>//~~WEBPATH~~/iron-fit-behavior/iron-fit-behavior.html.js
Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){return this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width},
get _fitHeight(){return this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height},get _fitLeft(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().left},get _fitTop(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().top},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host);return a},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign)return"left";
if("left"===this.horizontalAlign)return"right"}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&this.positionTarget},attached:function(){"undefined"===typeof this._isRTL&&(this._isRTL="rtl"==window.getComputedStyle(this).direction);this.positionTarget=this.positionTarget||this._defaultPositionTarget;this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):(window.ShadyDOM&&ShadyDOM.flush(),
this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position();this.constrain();this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||"",maxHeight:this.sizingTarget.style.maxHeight||
"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==a.top?"top":"auto"!==a.bottom?"bottom":null,horizontally:"auto"!==a.left?"left":"auto"!==a.right?"right":null},sizedBy:{height:"none"!==b.maxHeight,width:"none"!==b.maxWidth,minWidth:parseInt(b.minWidth,10)||0,minHeight:parseInt(b.minHeight,10)||0},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,10)||0}}}},resetFit:function(){var a=
this._fitInfo||{},b;for(b in a.sizerInlineStyle)this.sizingTarget.style[b]=a.sizerInlineStyle[b];for(b in a.inlineStyle)this.style[b]=a.inlineStyle[b];this._fitInfo=null},refit:function(){var a=this.sizingTarget.scrollLeft,b=this.sizingTarget.scrollTop;this.resetFit();this.fit();this.sizingTarget.scrollLeft=a;this.sizingTarget.scrollTop=b},position:function(){if(this.__shouldPosition){this._discoverInfo();this.style.position="fixed";this.sizingTarget.style.boxSizing="border-box";this.style.left="0px";
this.style.top="0px";var a=this.getBoundingClientRect(),b=this.__getNormalizedRect(this.positionTarget),c=this.__getNormalizedRect(this.fitInto),d=this._fitInfo.margin,e=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,{width:a.width+d.left+d.right,height:a.height+d.top+d.bottom},a,b,c);b=e.left+d.left;e=e.top+d.top;var g=Math.min(c.right-d.right,b+a.width),h=Math.min(c.bottom-d.bottom,e+a.height);b=Math.max(c.left+d.left,Math.min(b,g-this._fitInfo.sizedBy.minWidth));e=Math.max(c.top+
d.top,Math.min(e,h-this._fitInfo.sizedBy.minHeight));this.sizingTarget.style.maxWidth=Math.max(g-b,this._fitInfo.sizedBy.minWidth)+"px";this.sizingTarget.style.maxHeight=Math.max(h-e,this._fitInfo.sizedBy.minHeight)+"px";this.style.left=b-a.left+"px";this.style.top=e-a.top+"px"}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo;a.positionedBy.vertically||(this.style.position="fixed",this.style.top="0px");a.positionedBy.horizontally||(this.style.position="fixed",
this.style.left="0px");this.sizingTarget.style.boxSizing="border-box";var b=this.getBoundingClientRect();a.sizedBy.height||this.__sizeDimension(b,a.positionedBy.vertically,"top","bottom","Height");a.sizedBy.width||this.__sizeDimension(b,a.positionedBy.horizontally,"left","right","Width")}},_sizeDimension:function(a,b,c,d,e){this.__sizeDimension(a,b,c,d,e)},__sizeDimension:function(a,b,c,d,e){var g=this._fitInfo,h=this.__getNormalizedRect(this.fitInto);h="Width"===e?h.width:h.height;b=b===d;var k=
"offset"+e;this.sizingTarget.style["max"+e]=h-g.margin[b?c:d]-(b?h-a[d]:a[c])-(this[k]-this.sizingTarget[k])+"px"},center:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo.positionedBy;if(!a.vertically||!a.horizontally){this.style.position="fixed";a.vertically||(this.style.top="0px");a.horizontally||(this.style.left="0px");var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.fitInto);a.vertically||(this.style.top=c.top-b.top+(c.height-b.height)/2+"px");a.horizontally||
(this.style.left=c.left-b.left+(c.width-b.width)/2+"px")}}},__getNormalizedRect:function(a){return a===document.documentElement||a===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:a.getBoundingClientRect()},__getOffscreenArea:function(a,b,c){return Math.abs(Math.min(0,a.top)+Math.min(0,c.bottom-(a.top+b.height)))*b.width+Math.abs(Math.min(0,a.left)+Math.min(0,c.right-(a.left+b.width)))*b.height},__getPosition:function(a,b,
c,d,e,g){var h=[{verticalAlign:"top",horizontalAlign:"left",top:e.top+this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:"top",horizontalAlign:"right",top:e.top+this.verticalOffset,left:e.right-c.width-this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"left",top:e.bottom-c.height-this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"right",top:e.bottom-c.height-this.verticalOffset,left:e.right-c.width-this.horizontalOffset}];
if(this.noOverlap){for(var k=0,l=h.length;k<l;k++){var m={},n;for(n in h[k])m[n]=h[k][n];h.push(m)}h[0].top=h[1].top+=e.height;h[2].top=h[3].top-=e.height;h[4].left=h[6].left+=e.width;h[5].left=h[7].left-=e.width}b="auto"===b?null:b;a="auto"===a?null:a;a&&"center"!==a||(h.push({verticalAlign:"top",horizontalAlign:"center",top:e.top+this.verticalOffset+(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset}),h.push({verticalAlign:"bottom",horizontalAlign:"center",top:e.bottom-
c.height-this.verticalOffset-(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset}));b&&"middle"!==b||(h.push({verticalAlign:"middle",horizontalAlign:"left",top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.left+this.horizontalOffset+(this.noOverlap?e.width:0)}),h.push({verticalAlign:"middle",horizontalAlign:"right",top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.right-c.width-this.horizontalOffset-(this.noOverlap?e.width:0)}));"middle"===b&&"center"===
a&&h.push({verticalAlign:"middle",horizontalAlign:"center",top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.left-d.width/2+e.width/2+this.horizontalOffset});for(k=0;k<h.length;k++){d=h[k];e=d.verticalAlign===b;l=d.horizontalAlign===a;if(!this.dynamicAlign&&!this.noOverlap&&e&&l){var q=d;break}m=(!b||e)&&(!a||l);if(this.dynamicAlign||m){d.offscreenArea=this.__getOffscreenArea(d,c,g);if(0===d.offscreenArea&&m){q=d;break}q=q||d;m=d.offscreenArea-q.offscreenArea;if(0>m||0===m&&(e||l))q=d}}return q}};
</script>








<dom-module id="iron-overlay-backdrop">

  <template>
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--iron-overlay-backdrop-background-color, #000);
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply --iron-overlay-backdrop;
      }

      :host(.opened) {
        opacity: var(--iron-overlay-backdrop-opacity, 0.6);
        pointer-events: auto;
        @apply --iron-overlay-backdrop-opened;
      }
    </style>

    <slot></slot>
  </template>

</dom-module>

<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-backdrop.html.js
Polymer({is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||
Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(a){a&&a.target===this&&this.complete()},_openedChanged:function(a){a?this.prepare():(a=window.getComputedStyle(this),"0s"!==a.transitionDuration&&0!=a.opacity||this.complete());this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null;this.toggleClass("opened",this.opened)}.bind(this)))}});
</script>


<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-manager.html.js
Polymer.IronOverlayManagerClass=function(){this._overlays=[];this._minimumZ=101;this._backdropElement=null;Polymer.Gestures.add(document.documentElement,"tap",function(){});document.addEventListener("tap",this._onCaptureClick.bind(this),!0);document.addEventListener("focus",this._onCaptureFocus.bind(this),!0);document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)};
function Ma(a,b){a=a._minimumZ;b&&(b=Number(b.style.zIndex||window.getComputedStyle(b).zIndex),b===b&&(a=b));return a}
function Na(a,b){var c=a._overlays.indexOf(b);if(0<=c){if(b=c,c=a._overlays[b]){var d=a._overlays.length-1,e=a._overlays[d];e&&!c.alwaysOnTop&&e.alwaysOnTop&&d--;if(!(b>=d)){e=Math.max(Ma(a,Qa(a)),a._minimumZ);Ma(a,c)<=e&&(c.style.zIndex=e+2);for(;b<d;)a._overlays[b]=a._overlays[b+1],b++;a._overlays[d]=c}}}else{c=a._overlays.length;d=a._overlays[c-1];e=Math.max(Ma(a,d),a._minimumZ);var g=Ma(a,b);d&&!b.alwaysOnTop&&d.alwaysOnTop&&(d.style.zIndex=e+2,c--,e=Math.max(Ma(a,a._overlays[c-1]),a._minimumZ));
g<=e&&(b.style.zIndex=e+2);a._overlays.splice(c,0,b)}Va(a)}function Wa(a,b){b=a._overlays.indexOf(b);-1!==b&&(a._overlays.splice(b,1),Va(a))}function Va(a){var b=Xa(a);if(b||a._backdropElement)a.backdropElement.style.zIndex=Ma(a,b)-1,a.backdropElement.opened=!!b,a.backdropElement.prepare()}function Qa(a){return a._overlays[a._overlays.length-1]}function Xa(a){for(var b=a._overlays.length-1;0<=b;b--)if(a._overlays[b].withBackdrop)return a._overlays[b]}
function Ya(a,b){b=b||[];for(var c=0;c<b.length;c++)if(b[c]._manager===a)return b[c]}
Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){this._backdropElement||(this._backdropElement=document.createElement("iron-overlay-backdrop"));return this._backdropElement},get deepActiveElement(){var a=document.activeElement;a&&!1!==a instanceof Element||(a=document.body);for(;a.root&&Polymer.dom(a.root).activeElement;)a=Polymer.dom(a.root).activeElement;return a},addOrRemoveOverlay:function(a){a.opened?Na(this,a):Wa(this,a)},ensureMinimumZ:function(a){this._minimumZ=
Math.max(this._minimumZ,a)},focusOverlay:function(){var a=Qa(this);a&&a._applyFocus()},getBackdrops:function(){for(var a=[],b=0;b<this._overlays.length;b++)this._overlays[b].withBackdrop&&a.push(this._overlays[b]);return a},backdropZ:function(){return Ma(this,Xa(this))-1},_onCaptureClick:function(a){var b=this._overlays.length-1;if(-1!==b)for(var c=Polymer.dom(a).path,d;(d=this._overlays[b])&&Ya(this,c)!==d;)if(d._onCaptureClick(a),d.allowClickThrough)b--;else break},_onCaptureFocus:function(a){var b=
Qa(this);b&&b._onCaptureFocus(a)},_onCaptureKeyDown:function(a){var b=Qa(this);b&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"esc")?b._onCaptureEsc(a):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"tab")&&b._onCaptureTab(a))}};Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;
</script>



<script>//~~WEBPATH~~/iron-overlay-behavior/iron-scroll-manager.html.js
(function(){var a=0,b=0,c=null,d=[],e=["wheel","mousewheel","DOMMouseScroll","touchstart","touchmove"];Polymer.IronScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(g){var h=this.currentLockingElement;if(void 0===h)return!1;if(this._hasCachedLockedElement(g))return!0;if(this._hasCachedUnlockedElement(g))return!1;(h=!!h&&h!==g&&!this._composedTreeContains(h,g))?this._lockedElementCache.push(g):this._unlockedElementCache.push(g);
return h},pushScrollLock:function(g){0<=this._lockingElements.indexOf(g)||(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(g),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(g){g=this._lockingElements.indexOf(g);-1!==g&&(this._lockingElements.splice(g,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,
_unlockedElementCache:null,_hasCachedLockedElement:function(g){return-1<this._lockedElementCache.indexOf(g)},_hasCachedUnlockedElement:function(g){return-1<this._unlockedElementCache.indexOf(g)},_composedTreeContains:function(g,h){var k,l;if(g.contains(h))return!0;g=Polymer.dom(g).querySelectorAll("content,slot");for(k=0;k<g.length;++k){var m=Polymer.dom(g[k]).getDistributedNodes();for(l=0;l<m.length;++l)if(m[l].nodeType===Node.ELEMENT_NODE&&this._composedTreeContains(m[l],h))return!0}return!1},_scrollInteractionHandler:function(g){g.cancelable&&
this._shouldPreventScrolling(g)&&g.preventDefault();g.targetTouches&&(g=g.targetTouches[0],a=g.pageX,b=g.pageY)},_boundScrollHandler:void 0,_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var g=0,h=e.length;g<h;g++)document.addEventListener(e[g],this._boundScrollHandler,{capture:!0,passive:!1})},_unlockScrollInteractions:function(){for(var g=0,h=e.length;g<h;g++)document.removeEventListener(e[g],this._boundScrollHandler,
{capture:!0,passive:!1})},_shouldPreventScrolling:function(g){var h=Polymer.dom(g).rootTarget;"touchmove"!==g.type&&c!==h&&(c=h,d=this._getScrollableNodes(Polymer.dom(g).path));if(!d.length)return!0;if("touchstart"===g.type)return!1;g=this._getScrollInfo(g);return!this._getScrollingNode(d,g.deltaX,g.deltaY)},_getScrollableNodes:function(g){for(var h=[],k=g.indexOf(this.currentLockingElement),l=0;l<=k;l++)if(g[l].nodeType===Node.ELEMENT_NODE){var m=g[l],n=m.style;"scroll"!==n.overflow&&"auto"!==n.overflow&&
(n=window.getComputedStyle(m));"scroll"!==n.overflow&&"auto"!==n.overflow||h.push(m)}return h},_getScrollingNode:function(g,h,k){if(h||k)for(var l=Math.abs(k)>=Math.abs(h),m=0;m<g.length;m++){var n=g[m];if(l?0>k?0<n.scrollTop:n.scrollTop<n.scrollHeight-n.clientHeight:0>h?0<n.scrollLeft:n.scrollLeft<n.scrollWidth-n.clientWidth)return n}},_getScrollInfo:function(g){var h={deltaX:g.deltaX,deltaY:g.deltaY};"deltaX"in g||("wheelDeltaX"in g&&"wheelDeltaY"in g?(h.deltaX=-g.wheelDeltaX,h.deltaY=-g.wheelDeltaY):
"wheelDelta"in g?(h.deltaX=0,h.deltaY=-g.wheelDelta):"axis"in g?(h.deltaX=1===g.axis?g.detail:0,h.deltaY=2===g.axis?g.detail:0):g.targetTouches&&(g=g.targetTouches[0],h.deltaX=a-g.pageX,h.deltaY=b-g.pageY));return h}}})();
</script>



<script>//~~WEBPATH~~/iron-overlay-behavior/iron-focusables-helper.html.js
(function(){var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(c){var d=[];return this._collectTabbableNodes(c,d)?this._sortByTabIndex(d):d},isFocusable:function(c){return b.call(c,"input, select, textarea, button, object")?b.call(c,":not([disabled])"):b.call(c,"a[href], area[href], iframe, [tabindex], [contentEditable]")},isTabbable:function(c){return this.isFocusable(c)&&
b.call(c,':not([tabindex\x3d"-1"])')&&this._isVisible(c)},_normalizedTabIndex:function(c){return this.isFocusable(c)?(c=c.getAttribute("tabindex")||0,Number(c)):-1},_collectTabbableNodes:function(c,d){if(c.nodeType!==Node.ELEMENT_NODE||!this._isVisible(c))return!1;var e=this._normalizedTabIndex(c),g=0<e;0<=e&&d.push(c);c="content"===c.localName||"slot"===c.localName?Polymer.dom(c).getDistributedNodes():Polymer.dom(c.root||c).children;for(e=0;e<c.length;e++)g=this._collectTabbableNodes(c[e],d)||g;
return g},_isVisible:function(c){var d=c.style;return"hidden"!==d.visibility&&"none"!==d.display?(d=window.getComputedStyle(c),"hidden"!==d.visibility&&"none"!==d.display):!1},_sortByTabIndex:function(c){var d=c.length;if(2>d)return c;var e=Math.ceil(d/2);d=this._sortByTabIndex(c.slice(0,e));c=this._sortByTabIndex(c.slice(e));return this._mergeSortByTabIndex(d,c)},_mergeSortByTabIndex:function(c,d){for(var e=[];0<c.length&&0<d.length;)this._hasLowerTabOrder(c[0],d[0])?e.push(d.shift()):e.push(c.shift());
return e.concat(c,d)},_hasLowerTabOrder:function(c,d){c=Math.max(c.tabIndex,0);d=Math.max(d.tabIndex,0);return 0===c||0===d?d>c:c>d}}})();
</script>


<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-behavior.html.js
Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},
scrollAction:{type:String},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},observers:["__updateScrollObservers(isAttached, opened, scrollAction)"],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector("[autofocus]")||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__shouldRemoveTabIndex=
this.__isAnimating=!1;this.__firstFocusableNode=this.__lastFocusableNode=null;this.__rafs={};this.__scrollTop=this.__scrollLeft=this.__restoreFocusNode=null;this.__onCaptureScroll=this.__onCaptureScroll.bind(this);this.__rootNodes=null;this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened);this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){Polymer.dom(this).unobserveNodes(this._observer);this._observer=null;for(var a in this.__rafs)null!==
this.__rafs[a]&&cancelAnimationFrame(this.__rafs[a]);this.__rafs={};Wa(this._manager,this);this.__isAnimating&&(this.opened?this._finishRenderOpened():(this._applyFocus(),this._finishRenderClosed()))},toggle:function(){this._setCanceled(!1);this.opened=!this.opened},open:function(){this._setCanceled(!1);this.opened=!0},close:function(){this._setCanceled(!1);this.opened=!1},cancel:function(a){this.fire("iron-overlay-canceled",a,{cancelable:!0}).defaultPrevented||(this._setCanceled(!0),this.opened=
!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(a){a?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true");this.isAttached&&(this.__isAnimating=!0,this.__deraf("__openedChanged",this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{};this.closingReason.canceled=
this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute("tabindex")?(this.setAttribute("tabindex","-1"),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute("tabindex"),this.__shouldRemoveTabIndex=!1);this.opened&&this.isAttached&&Va(this._manager)},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement;this._preparePositioning();this.refit();this._finishPositioning();this.noAutoFocus&&document.activeElement===
this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-opened")},_finishRenderClosed:function(){this.style.display="none";this.style.zIndex="";this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-closed",this.closingReason)},_preparePositioning:function(){this.style.transition=
this.style.webkitTransition="none";this.style.transform=this.style.webkitTransform="none";this.style.display=""},_finishPositioning:function(){this.style.display="none";this.scrollTop=this.scrollTop;this.style.transition=this.style.webkitTransition="";this.style.transform=this.style.webkitTransform="";this.style.display="";this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{if(this.restoreFocusOnClose&&this.__restoreFocusNode){var a=
this._manager.deepActiveElement;(a===document.body||Polymer.dom(this).deepContains(a))&&this.__restoreFocusNode.focus()}this.__restoreFocusNode=null;this._focusNode.blur();this._focusedChild=null}},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this.cancel(a)},_onCaptureFocus:function(a){if(this.withBackdrop){var b=Polymer.dom(a).path;-1===b.indexOf(this)?(a.stopPropagation(),this._applyFocus()):this._focusedChild=b[0]}},_onCaptureEsc:function(a){this.noCancelOnEscKey||this.cancel(a)},_onCaptureTab:function(a){if(this.withBackdrop){this.__ensureFirstLastFocusables();
var b=a.shiftKey,c=b?this.__firstFocusableNode:this.__lastFocusableNode;b=b?this.__lastFocusableNode:this.__firstFocusableNode;if(c===b)c=!0;else{var d=this._manager.deepActiveElement;c=d===c||d===this}c&&(a.preventDefault(),this._focusedChild=b,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__deraf("refit",this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||
!this.__lastFocusableNode){var a=this._focusableNodes;this.__firstFocusableNode=a[0];this.__lastFocusableNode=a[a.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),Na(this._manager,this),this._applyFocus(),this._renderOpened()):(Wa(this._manager,this),this._applyFocus(),this._renderClosed())},__deraf:function(a,b){var c=this.__rafs;null!==c[a]&&cancelAnimationFrame(c[a]);c[a]=requestAnimationFrame(function(){c[a]=null;b.call(this)}.bind(this))},__updateScrollObservers:function(a,
b,c){a&&b&&this.__isValidScrollAction(c)?("lock"===c&&(this.__saveScrollPosition(),Polymer.IronScrollManager.pushScrollLock(this)),this.__addScrollListeners()):(Polymer.IronScrollManager.removeScrollLock(this),this.__removeScrollListeners())},__addScrollListeners:function(){if(!this.__rootNodes){this.__rootNodes=[];if(Polymer.Settings.useShadow)for(var a=this;a;)a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.host&&this.__rootNodes.push(a),a=a.host||a.assignedSlot||a.parentNode;this.__rootNodes.push(document)}this.__rootNodes.forEach(function(b){b.addEventListener("scroll",
this.__onCaptureScroll,{capture:!0,passive:!0})},this)},__removeScrollListeners:function(){this.__rootNodes&&this.__rootNodes.forEach(function(a){a.removeEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})},this);this.isAttached||(this.__rootNodes=null)},__isValidScrollAction:function(a){return"lock"===a||"refit"===a||"cancel"===a},__onCaptureScroll:function(a){if(!(this.__isAnimating||0<=Polymer.dom(a).path.indexOf(this)))switch(this.scrollAction){case "lock":this.__restoreScrollPosition();
break;case "refit":this.__deraf("refit",this.refit);break;case "cancel":this.cancel(a)}},__saveScrollPosition:function(){document.scrollingElement?(this.__scrollTop=document.scrollingElement.scrollTop,this.__scrollLeft=document.scrollingElement.scrollLeft):(this.__scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this.__scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))},__restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=
this.__scrollTop,document.scrollingElement.scrollLeft=this.__scrollLeft):(document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop,document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft)}};Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl];
</script>


<script>//~~WEBPATH~~/paper-dialog-behavior/paper-dialog-behavior.html.js
Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:"dialog",tabindex:"-1"},properties:{modal:{type:Boolean,value:!1}},observers:["_modalChanged(modal, _readied)"],listeners:{tap:"_onDialogClick"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop},_modalChanged:function(a,b){b&&(a?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,
this.__prevWithBackdrop=this.withBackdrop,this.withBackdrop=this.noCancelOnEscKey=this.noCancelOnOutsideClick=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(a){this.closingReason=this.closingReason||{};this.closingReason.confirmed=a},_onDialogClick:function(a){for(var b=Polymer.dom(a).path,
c=0;c<b.indexOf(this);c++){var d=b[c];if(d.hasAttribute&&(d.hasAttribute("dialog-dismiss")||d.hasAttribute("dialog-confirm"))){this._updateClosingReasonConfirmed(d.hasAttribute("dialog-confirm"));this.close();a.stopPropagation();break}}}};Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl];
</script>





<dom-module id="paper-dialog-scrollable">

  <template>
    <style>

      :host {
        display: block;
        @apply --layout-relative;
      }

      :host(.is-scrolled:not(:first-child))::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      :host(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      .scrollable {
        padding: 0 24px;

        @apply --layout-scroll;
        @apply --paper-dialog-scrollable;
      }

      .fit {
        @apply --layout-fit;
      }
    </style>

    <div id="scrollable" class="scrollable" on-scroll="updateScrollState">
      <slot></slot>
    </div>
  </template>

</dom-module>

<script>//~~WEBPATH~~/paper-dialog-scrollable/paper-dialog-scrollable.html.js
Polymer({is:"paper-dialog-scrollable",properties:{dialogElement:{type:Object}},get scrollTarget(){return this.$.scrollable},ready:function(){this._ensureTarget();this.classList.add("no-padding")},attached:function(){this._ensureTarget();requestAnimationFrame(this.updateScrollState.bind(this))},updateScrollState:function(){this.toggleClass("is-scrolled",0<this.scrollTarget.scrollTop);this.toggleClass("can-scroll",this.scrollTarget.offsetHeight<this.scrollTarget.scrollHeight);this.toggleClass("scrolled-to-bottom",
this.scrollTarget.scrollTop+this.scrollTarget.offsetHeight>=this.scrollTarget.scrollHeight)},_ensureTarget:function(){(this.dialogElement=this.dialogElement||this.parentElement)&&this.dialogElement.behaviors&&0<=this.dialogElement.behaviors.indexOf(Polymer.PaperDialogBehaviorImpl)?(this.dialogElement.sizingTarget=this.scrollTarget,this.scrollTarget.classList.remove("fit")):this.dialogElement&&this.scrollTarget.classList.add("fit")}});
</script>








<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,500italic,700,700italic">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700">



<custom-style>
  <style is="custom-style">
    html {

      /* Shared Styles */
      --paper-font-common-base: {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-code: {
        font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-expensive-kerning: {
        text-rendering: optimizeLegibility;
      };

      --paper-font-common-nowrap: {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      };

      /* Material Font Styles */

      --paper-font-display4: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 112px;
        font-weight: 300;
        letter-spacing: -.044em;
        line-height: 120px;
      };

      --paper-font-display3: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 56px;
        font-weight: 400;
        letter-spacing: -.026em;
        line-height: 60px;
      };

      --paper-font-display2: {
        @apply --paper-font-common-base;

        font-size: 45px;
        font-weight: 400;
        letter-spacing: -.018em;
        line-height: 48px;
      };

      --paper-font-display1: {
        @apply --paper-font-common-base;

        font-size: 34px;
        font-weight: 400;
        letter-spacing: -.01em;
        line-height: 40px;
      };

      --paper-font-headline: {
        @apply --paper-font-common-base;

        font-size: 24px;
        font-weight: 400;
        letter-spacing: -.012em;
        line-height: 32px;
      };

      --paper-font-title: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
      };

      --paper-font-subhead: {
        @apply --paper-font-common-base;

        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
      };

      --paper-font-body2: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-body1: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
      };

      --paper-font-caption: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.011em;
        line-height: 20px;
      };

      --paper-font-menu: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 13px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-button: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.018em;
        line-height: 24px;
        text-transform: uppercase;
      };

      --paper-font-code2: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 700;
        line-height: 20px;
      };

      --paper-font-code1: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
      };

    }

  </style>
</custom-style>





<dom-module id="paper-dialog-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        margin: 24px 40px;

        background: var(--paper-dialog-background-color, --primary-background-color);
        color: var(--paper-dialog-color, --primary-text-color);

        @apply(--paper-font-body1);
        @apply(--shadow-elevation-16dp);
        @apply(--paper-dialog);
      }

      :host > ::content > * {
        margin-top: 20px;
        padding: 0 24px;
      }

      :host > ::content > .no-padding {
        padding: 0;
      }

      :host > ::content > *:first-child {
        margin-top: 24px;
      }

      :host > ::content > *:last-child {
        margin-bottom: 24px;
      }

      :host > ::content h2 {
        position: relative;
        margin: 0;
        @apply(--paper-font-title);

        @apply(--paper-dialog-title);
      }

      :host > ::content .buttons {
        position: relative;
        padding: 8px 8px 8px 24px;
        margin: 0;

        color: var(--paper-dialog-button-color, --primary-color);

        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
      }
    </style>
  </template>
</dom-module>



<dom-module id="paper-dialog">
  <template>
    <style include="paper-dialog-shared-styles"></style>
    <slot></slot>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-dialog/paper-dialog.html.js
Polymer({is:"paper-dialog",behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},_renderOpened:function(){this.cancelAnimation();this.playAnimation("entry")},_renderClosed:function(){this.cancelAnimation();this.playAnimation("exit")},_onNeonAnimationFinish:function(){this.opened?this._finishRenderOpened():this._finishRenderClosed()}});
</script>









<dom-module id="iron-a11y-announcer">
  <template>
    <style>
      :host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }
    </style>
    <div aria-live$="[[mode]]">[[_text]]</div>
  </template>

  <script>//~~WEBPATH~~/iron-a11y-announcer/iron-a11y-announcer.html.js
Polymer.IronA11yAnnouncer=function(){};Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this);document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(a){this._text="";this.async(function(){this._text=a},100)},_onIronAnnounce:function(a){a.detail&&a.detail.text&&this.announce(a.detail.text)}});
Polymer.IronA11yAnnouncer.instance=null;Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer"));document.body.appendChild(Polymer.IronA11yAnnouncer.instance)};
</script>
</dom-module>



<script>//~~WEBPATH~~/iron-input/iron-input.html.js
Polymer({is:"iron-input",extends:"input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{observer:"_bindValueChanged",type:String},preventInvalidInput:{type:Boolean},allowedPattern:{type:String,observer:"_allowedPatternChanged"},useV2Api:{type:Boolean,value:!1},_previousValidInput:{type:String,value:""},_patternAlreadyChecked:{type:Boolean,value:!1},_inputElement:Object},observers:["_bindValueChangedV2(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},
registered:function(){this._canDispatchEventOnDisabled()||(this._origDispatchEvent=this.dispatchEvent,this.dispatchEvent=this._dispatchEventFirefoxIE)},created:function(){Polymer.IronA11yAnnouncer.requestAvailability();if(this.useV2Api||this.hasAttribute("use-v2-api"))this._previousValidInput="",this._patternAlreadyChecked=!1},attached:function(){this.useV2Api&&(this._observer={},this._observer.__interval=setTimeout(function(){this._initSlottedInput()}.bind(this),2),this._observer.flush=function(){if(this.inputElement)return!1;
window.clearTimeout(this._observer.__interval);this._initSlottedInput();return!0}.bind(this))},detached:function(){this.useV2Api&&this._observer&&clearTimeout(this._observer)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this;this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value);this.fire("iron-input-ready")},_canDispatchEventOnDisabled:function(){var a=document.createElement("input"),b=!1;a.disabled=!0;a.addEventListener("feature-check-dispatch-event",
function(){b=!0});try{a.dispatchEvent(new Event("feature-check-dispatch-event"))}catch(c){}return b},_dispatchEventFirefoxIE:function(a){var b=this.disabled;this.disabled=!1;a=this._origDispatchEvent(a);this.disabled=b;return a},get _patternRegExp(){if(this.allowedPattern)var a=new RegExp(this.allowedPattern);else if(this.useV2Api)switch(this.inputElement.type){case "number":a=/[0-9.,e-]/}else switch(this.type){case "number":a=/[0-9.,e-]/}return a},ready:function(){this.useV2Api||(this.bindValue=
this.value)},_bindValueChangedV2:function(a,b){this.useV2Api&&b&&(void 0===a?b.value=null:a!==b.value&&(this.inputElement.value=a),this.autoValidate&&this.validate(),this.fire("bind-value-changed",{value:a}))},_bindValueChanged:function(){this.useV2Api||(this.value!==this.bindValue&&(this.value=this.bindValue||0===this.bindValue||!1===this.bindValue?this.bindValue:""),this.fire("bind-value-changed",{value:this.bindValue}))},_allowedPatternChanged:function(){this.useV2Api||(this.preventInvalidInput=
this.allowedPattern?!0:!1)},_onInput:function(){if(this.useV2Api){if(this.allowedPattern&&!this._patternAlreadyChecked){var a=this._checkPatternValidity();a||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.inputElement.value=this._previousValidInput)}this.bindValue=this._previousValidInput=this.inputElement.value}else this.preventInvalidInput&&!this._patternAlreadyChecked&&(a=this._checkPatternValidity(),a||(this._announceInvalidCharacter("Invalid string of characters not entered."),
this.value=this._previousValidInput)),this._previousValidInput=this.bindValue=this.value;this._patternAlreadyChecked=!1},_isPrintable:function(a){var b=19==a.keyCode||20==a.keyCode||45==a.keyCode||46==a.keyCode||144==a.keyCode||145==a.keyCode||32<a.keyCode&&41>a.keyCode||111<a.keyCode&&124>a.keyCode;return!(8==a.keyCode||9==a.keyCode||13==a.keyCode||27==a.keyCode)&&!(0==a.charCode&&b)},_onKeypress:function(a){if(this.useV2Api){if(!this.allowedPattern&&"number"!==this.inputElement.type)return;var b=
this._patternRegExp;if(!b||a.metaKey||a.ctrlKey||a.altKey)return;this._patternAlreadyChecked=!0;var c=String.fromCharCode(a.charCode)}else{if(!this.preventInvalidInput&&"number"!==this.type)return;b=this._patternRegExp;if(!b||a.metaKey||a.ctrlKey||a.altKey)return;this._patternAlreadyChecked=!0;c=String.fromCharCode(a.charCode)}this._isPrintable(a)&&!b.test(c)&&(a.preventDefault(),this._announceInvalidCharacter("Invalid character "+c+" not entered."))},_checkPatternValidity:function(){var a=this._patternRegExp;
if(!a)return!0;if(this.useV2Api)for(var b=0;b<this.inputElement.value.length;b++){if(!a.test(this.inputElement.value[b]))return!1}else for(b=0;b<this.value.length;b++)if(!a.test(this.value[b]))return!1;return!0},validate:function(){if(this.useV2Api){if(!this.inputElement)return this.invalid=!1,!0;var a=this.inputElement.checkValidity();a&&(this.required&&""===this.bindValue?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.bindValue)))}else(a=this.checkValidity())&&
(this.required&&""===this.value?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.value)));this.invalid=!a;this.fire("iron-input-validate");return a},_announceInvalidCharacter:function(a){this.fire("iron-announce",{text:a})}});
</script>





<script>//~~WEBPATH~~/paper-input/paper-input-behavior.html.js
Polymer.PaperInputHelper={};Polymer.PaperInputHelper.NextLabelID=1;Polymer.PaperInputHelper.NextAddonID=1;Polymer.PaperInputHelper.NextInputID=1;
Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},
validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},
_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){this.__setAutomaticNodeFindingId();return this.$.input},get _focusableElement(){return this.inputElement},registered:function(){this._typesThatHaveText="date datetime datetime-local month time week file".split(" ")},ready:function(){this.__setAutomaticNodeFindingId()},attached:function(){this._updateAriaLabelledBy();
this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(a,b){return a?a+" "+b:b},_onAddonAttached:function(a){a=a.path?a.path[0]:a.target;if(a.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,a.id);else{var b="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++;a.id=b;this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,b)}},validate:function(){return this.inputElement.validate()},
_focusBlurHandler:function(a){Polymer.IronControlState._focusBlurHandler.call(this,a);this.focused&&!this._shiftTabPressed&&this._focusableElement.focus()},_onShiftTabDown:function(){var a=this.getAttribute("tabindex");this._shiftTabPressed=!0;this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",a);this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(a){try{var b=this.inputElement.selectionStart;
this.value=a;this.inputElement.selectionStart=b;this.inputElement.selectionEnd=b}catch(c){this.value=a}},_computeAlwaysFloatLabel:function(a,b){return b||a},_updateAriaLabelledBy:function(){var a=Polymer.dom(this.root).querySelector("label");if(a){if(a.id)var b=a.id;else b="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++,a.id=b;this._ariaLabelledBy=b}else this._ariaLabelledBy=""},_onChange:function(a){this.shadowRoot&&this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})},
_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var a=document.activeElement;a instanceof HTMLElement&&a!==document.body&&a!==document.documentElement||this._focusableElement.focus()}},_generateInputId:function(){this._inputId&&""!==this._inputId||(this._inputId="input-"+Polymer.PaperInputHelper.NextInputID++)},__setAutomaticNodeFindingId:function(){this.$||(this.$={});this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId))}};
Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];
</script>





<script>//~~WEBPATH~~/paper-input/paper-input-addon-behavior.html.js
Polymer.PaperInputAddonBehavior={hostAttributes:{"add-on":""},attached:function(){this.fire("addon-attached")},update:function(){}};
</script>




<dom-module id="paper-input-char-counter">
  <template>
    <style>
      :host {
        display: inline-block;
        float: right;

        @apply --paper-font-caption;
        @apply --paper-input-char-counter;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host-context([dir="rtl"]) {
        float: left;
      }
    </style>

    <span>[[_charCounterStr]]</span>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-char-counter.html.js
Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(a){if(a.inputElement){a.value=a.value||"";var b=a.value.toString().length.toString();a.inputElement.hasAttribute("maxlength")&&(b+="/"+a.inputElement.getAttribute("maxlength"));this._charCounterStr=b}}});
</script>








<custom-style>
  <style is="custom-style">
    :root {
      --paper-input-container-shared-input-style: {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        margin: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        -webkit-appearance: none;
        text-align: inherit;
        /* TODO(b/112921796): change this to bottom */
        vertical-align: var(--paper-input-container-input-align, baseline);

        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply --paper-font-subhead;
      };

      --paper-input-container-input-style-forward: {
        @apply --paper-input-container-shared-input-style;

        font-family: inherit;
        font-weight: inherit;
        font-size: inherit;
        letter-spacing: inherit;
        word-spacing: inherit;
        line-height: inherit;
        text-shadow: inherit;
        color: inherit;
        cursor: inherit;
      };
    }
  </style>
</custom-style>

<dom-module id="paper-input-container">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        @apply --paper-input-container;
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply --paper-input-container-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      [hidden] {
        display: none !important;
      }

      .floated-label-placeholder {
        display: var(--paper-input-container-floated-label-placeholder-display, block);
        @apply --paper-font-caption;
      }

      .underline {
        position: relative;
      }

      .focused-line {
        @apply --layout-fit;
        border-bottom:
            var(--paper-input-container-underline-focus-height, 2px)
            solid
            var(--paper-input-container-underline-focus-color,
                var(--paper-input-container-focus-color,
                var(--primary-color)));

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);
        display: var(--paper-input-container-underline-focus-display);

        @apply --paper-input-container-underline-focus;
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .underline.is-invalid .focused-line {
        border-bottom:
            var(--paper-input-container-underline-focus-height, 2px)
            solid
            var(--paper-input-container-underline-invalid-focus-color,
                var(--paper-input-container-invalid-color,
                var(--error-color)));
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;
        display: var(--paper-input-container-underline-focus-display);

        @apply --paper-transition-easing;
      }

      .unfocused-line {
        @apply --layout-fit;
        border-bottom:
            var(--paper-input-container-underline-height, 1px)
            solid
            var(--paper-input-container-underline-color,
                var(--paper-input-container-color,
                var(--secondary-text-color)));
        display: var(--paper-input-container-underline-display);

        @apply --paper-input-container-underline;
      }

      :host([disabled]) .unfocused-line {
        border-bottom:
            var(--paper-input-container-underline-height, 1px)
            dashed
            var(--paper-input-container-underline-color,
                var(--paper-input-container-color,
                var(--secondary-text-color)));
        display: var(--paper-input-container-underline-disabled-display);
        height: 1px;

        @apply --paper-input-container-underline-disabled;
      }

      .label-and-input-container {
        @apply --layout-flex-auto;
        @apply --layout-relative;

        width: 100%;
        max-width: 100%;
      }

      .input-content {
        @apply --layout-horizontal;
        @apply --layout-center;

        position: relative;
      }

      .input-content .label-and-input-container ::slotted([slot="label"]) {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, var(--secondary-text-color));
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply --paper-font-common-nowrap;
        @apply --paper-font-subhead;
        @apply --paper-input-container-label;
        @apply --paper-transition-easing;
      }

      .input-content.label-is-floating .label-and-input-container ::slotted([slot="label"]) {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply --paper-input-container-label-floating;
      }

      :host(:dir(rtl)) .input-content.label-is-floating .label-and-input-container ::slotted([slot="label"]) {
        right: 0;
        left: auto;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted .label-and-input-container ::slotted([slot="label"]) {
        color: var(--paper-input-container-focus-color, var(--primary-color));

        @apply --paper-input-container-label-focus;
      }

      .input-content.is-invalid .label-and-input-container ::slotted([slot="label"]) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .input-content.label-is-hidden .label-and-input-container ::slotted([slot="label"]) {
        visibility: hidden;
      }

      .input-content .label-and-input-container ::slotted([slot="input"]) {
        /* we do not use @apply --paper-input-container-shared-input-style; here because the polymer
         * 1 apply shim seems to fail in very specific conditions and simply does not apply.
         */
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        margin: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        -webkit-appearance: none;
        text-align: inherit;
        /* TODO(b/112921796): change this to bottom */
        vertical-align: var(--paper-input-container-input-align, baseline);

        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply --paper-font-subhead;
        /* Firefox sets a min-width on the input, which can cause layout issues */
        min-width: 0;
        resize: none;
        @apply --paper-input-container-input;

        /* Polymer 1 used content tags where you could style inside distributed shadow roots such as
         * the textarea within iron-autogrow-textarea. This seems to have been fixed with slot tags.
         * This applies those custom styles inside that shadow root.
         */
        --iron-autogrow-textarea-textarea: {
          /* (See note above) we include it here because the polymer 1 apply shim never seems to
           * fail in this case. We also NEED to apply it here so that the CSS variables can be
           * defined in the context of this element.
           */
          @apply --paper-input-container-shared-input-style;
          /* The apply shim doesn't apply the nested color custom property,
          so we have to re-apply it here. */
          color: var(--paper-input-container-input-color, var(--primary-text-color));
          @apply --paper-input-container-input;
        };
      }

      .input-content .label-and-input-container ::slotted([slot="input"])::-webkit-outer-spin-button,
      .input-content .label-and-input-container ::slotted([slot="input"])::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      .input-content.focused .label-and-input-container ::slotted([slot="input"]) {
        @apply --paper-input-container-input-focus;
      }

      .input-content.is-invalid .label-and-input-container ::slotted([slot="input"]) {
        @apply --paper-input-container-input-invalid;
      }

      .input-content ::slotted([slot="prefix"]) {
        @apply --paper-font-subhead;
        @apply --layout-flex-none;
        @apply --paper-input-prefix;
      }

      .input-content ::slotted([slot="suffix"]) {
        @apply --paper-font-subhead;
        @apply --layout-flex-none;

        @apply --paper-input-suffix;
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::slotted(input) {
        min-width: 0;
      }

      .input-content ::slotted(input)::-webkit-outer-spin-button,
      .input-content ::slotted(input)::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::slotted(*) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .add-on-content.is-highlighted ::slotted(*) {
        color: var(--paper-input-container-focus-color, var(--primary-color));
      }
    </style>

    <template is="dom-if" if="[[!noLabelFloat]]">
      <div class="floated-label-placeholder" aria-hidden="true">&nbsp;</div>
    </template>

    <div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]">
      <slot name="prefix" id="prefix"></slot>

      <div class="label-and-input-container" id="labelAndInputContainer">
        <slot name="label"></slot>
        
        <slot name="input"></slot><slot name="after-input"></slot>
      </div>

      <slot name="suffix" id="suffix"></slot>
    </div>

    <div class$="[[_computeUnderlineClass(focused,invalid)]]">
      <div class="unfocused-line"></div>
      <div class="focused-line"></div>
    </div>

    <div class$="[[_computeAddOnContentClass(focused,invalid)]]">
      <slot id="addOnContent" name="add-on"></slot>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-container.html.js
Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},
_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},
get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]);this.addEventListener("focus",this._boundOnFocus,!0);this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput);""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):
this._handleValue(this._inputElement)},_onAddonAttached:function(a){this._addons||(this._addons=[]);a=a.target;-1===this._addons.indexOf(a)&&(this._addons.push(a),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1);this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(a){this._handleValueAndAutoValidate(a.target)},_onValueChanged:function(a){this._handleValueAndAutoValidate(a.target)},_handleValue:function(a){var b=
this._inputElementValue;b||0===b||"number"===a.type&&!a.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1;this.updateAddons({inputElement:a,value:b,invalid:this.invalid})},_handleValueAndAutoValidate:function(a){this.autoValidate&&(this.invalid=!(a.validate?a.validate(this._inputElementValue):a.checkValidity()));this._handleValue(a)},_onIronInputValidate:function(){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},
updateAddons:function(a){for(var b,c=0;b=this._addons[c];c++)b.update(a)},_computeInputContentClass:function(a,b,c,d,e){var g="input-content";a?e&&(g+=" label-is-hidden"):(a=this.querySelector("label"),b||e?(g+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",d?g+=" is-invalid":c&&(g+=" label-is-highlighted")):a&&(this.$.labelAndInputContainer.style.position="relative"));c&&(g+=" focused");return g},_computeUnderlineClass:function(a,b){var c="underline";b?c+=" is-invalid":
a&&(c+=" is-highlighted");return c},_computeAddOnContentClass:function(a,b){var c="add-on-content";b?c+=" is-invalid":a&&(c+=" is-highlighted");return c}});
</script>








<dom-module id="paper-input-error">
  <template>
    <style>
      :host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, var(--error-color));

        @apply --paper-font-caption;
        @apply --paper-input-error;
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      };
    </style>

    <slot></slot>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-error.html.js
Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(a){this._setInvalid(a.invalid)}});
</script>




<dom-module id="paper-input">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <slot name="prefix" slot="prefix"></slot>

      <label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label>

      <input is="iron-input" slot="input" class="input-element" id$="[[_inputId]]" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabindex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]">

      <slot name="suffix" slot="suffix"></slot>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter slot="add-on"></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input.html.js
Polymer({is:"paper-input",behaviors:[Polymer.IronFormElementBehavior,Polymer.PaperInputBehavior]});
</script>









<script>//~~WEBPATH~~/paper-item/paper-item-behavior.html.js
Polymer.PaperItemBehaviorImpl={hostAttributes:{role:"option",tabindex:"0"}};Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];
</script>






<dom-module id="paper-item-shared-styles">
  <template>
    <style>
      :host, .paper-item {
        display: block;
        position: relative;
        min-height: var(--paper-item-min-height, 48px);
        padding: 0px 16px;
      }

      .paper-item {
        @apply --paper-font-subhead;
        border:none;
        outline: none;
        background: white;
        width: 100%;
        text-align: left;
      }

      :host([hidden]), .paper-item[hidden] {
        display: none !important;
      }

      :host(.iron-selected), .paper-item.iron-selected {
        font-weight: var(--paper-item-selected-weight, bold);

        @apply --paper-item-selected;
      }

      :host([disabled]), .paper-item[disabled] {
        color: var(--paper-item-disabled-color, var(--disabled-text-color));

        @apply --paper-item-disabled;
      }

      :host(:focus), .paper-item:focus {
        position: relative;
        outline: 0;

        @apply --paper-item-focused;
      }

      :host(:focus):before, .paper-item:focus:before {
        @apply --layout-fit;

        background: currentColor;
        content: '';
        opacity: var(--dark-divider-opacity);
        pointer-events: none;

        @apply --paper-item-focused-before;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-item">
  <template>
    <style include="paper-item-shared-styles">
      :host {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-subhead;

        @apply --paper-item;
      }
    </style>
    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-item/paper-item.html.js
Polymer({is:"paper-item",behaviors:[Polymer.PaperItemBehavior]});
</script>
</dom-module>







<script>//~~WEBPATH~~/iron-selector/iron-selection.html.js
Polymer.IronSelection=function(a){this.selection=[];this.selectCallback=a};function Za(a,b,c){if(null!=b&&c!==a.isSelected(b)){if(c)a.selection.push(b);else{var d=a.selection.indexOf(b);0<=d&&a.selection.splice(d,1)}a.selectCallback&&a.selectCallback(b,c)}}
Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&Za(this,b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(Za(this,this.get(),!1),Za(this,a,!0))},toggle:function(a){Za(this,a,!this.isSelected(a))}};
</script>


<script>//~~WEBPATH~~/iron-selector/iron-selectable.html.js
Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,
"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:["_updateAttrForSelected(attrForSelected)","_updateSelected(selected)","_checkFallback(fallbackSelection)"],created:function(){this._bindFilterItem=this._filterItem.bind(this);this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this);this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer);this._removeListener(this.activateEvent)},
indexOf:function(a){return this.items?this.items.indexOf(a):-1},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length;a=(Number(this._valueToIndex(this.selected))-1+a)%a;this.selected=this._indexToValue(a)},selectNext:function(){var a=(Number(this._valueToIndex(this.selected))+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&"function"===typeof this._observer.flush?
this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,"_activateHandler")},_removeListener:function(a){this.unlisten(this,a,"_activateHandler")},_activateEventChanged:function(a,b){this._removeListener(b);this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||"*");a=Array.prototype.filter.call(a,this._bindFilterItem);
this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var a=this._valueToItem(this.selected);a?this._selection.select(a):this._selection.clear();this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},
_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected)for(var b=0,c;c=this.items[b];b++){if(this._valueForItem(c)==a)return b}else return Number(a)},_indexToValue:function(a){if(this.attrForSelected){if(a=this.items[a])return this._valueForItem(a)}else return a},_valueForItem:function(a){if(!a)return null;if(!this.attrForSelected)return a=this.indexOf(a),-1===a?null:a;var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];
return void 0!=b?b:a.getAttribute(this.attrForSelected)},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a);this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a);this._selectionChange();this.fire("iron-"+(b?"select":"deselect"),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(b){this._updateItems();this._updateSelected();this.fire("iron-items-changed",
b,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){a=a.target;for(var b=this.items;a&&a!=this;){var c=b.indexOf(a);if(0<=c){b=this._indexToValue(c);this._itemActivate(b,a);break}a=a.parentNode}},_itemActivate:function(a,b){this.fire("iron-activate",{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};
</script>


<script>//~~WEBPATH~~/iron-selector/iron-multi-selectable.html.js
Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:"multiChanged"},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:["_updateSelected(selectedValues.splices)"],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a;this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||
null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=
a||[];a=(this._valuesToItems(a)||[]).filter(function(c){return null!==c&&void 0!==c});this._selection.clear(a);for(var b=0;b<a.length;b++)Za(this._selection,a[b],!0);this.fallbackSelection&&!this._selection.get().length&&this._valueToItem(this.fallbackSelection)&&this.select(this.fallbackSelection)},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&void 0!==a?(this._setSelectedItems([a]),this._setSelectedItem(a)):
(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push("selectedValues",a):this.splice("selectedValues",b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(b){return this._valueToItem(b)},this)}};Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];
</script>



<script>//~~WEBPATH~~/iron-menu-behavior/iron-menu-behavior.html.js
Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:"_focusedItemChanged",readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:"_disabledChanged"}},_MODIFIER_KEYS:"Alt AltGraph CapsLock Control Fn FnLock Hyper Meta NumLock OS ScrollLock Shift Super Symbol SymbolLock".split(" "),_SEARCH_RESET_TIMEOUT_MS:1E3,_previousTabIndex:0,hostAttributes:{role:"menu"},observers:["_updateMultiselectable(multi)"],listeners:{focus:"_onFocus",keydown:"_onKeydown",
"iron-items-changed":"_onIronItemsChanged"},keyBindings:{up:"_onUpKey",down:"_onDownKey",esc:"_onEscKey","shift+tab:keydown":"_onShiftTabDown"},attached:function(){this._resetTabindices()},select:function(a){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var b=this._valueToItem(a);b&&b.hasAttribute("disabled")||(this._setFocusedItem(b),Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments))},_resetTabindices:function(){var a=this.multi?
this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(b){b.setAttribute("tabindex",b===a?"0":"-1")},this)},_updateMultiselectable:function(a){a?this.setAttribute("aria-multiselectable","true"):this.removeAttribute("aria-multiselectable")},_focusWithKeyboardEvent:function(a){if(-1===this._MODIFIER_KEYS.indexOf(a.key)){this.cancelDebouncer("_clearSearchText");var b=this._searchText||"";b+=(a.key&&1==a.key.length?a.key:String.fromCharCode(a.keyCode)).toLocaleLowerCase();
a=b.length;for(var c=0,d;d=this.items[c];c++)if(!d.hasAttribute("disabled")){var e=this.attrForItemTitle||"textContent";e=(d[e]||d.getAttribute(e)||"").trim();if(!(e.length<a)&&e.slice(0,a).toLocaleLowerCase()==b){this._setFocusedItem(d);break}}this._searchText=b;this.debounce("_clearSearchText",this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)}},_clearSearchText:function(){this._searchText=""},_focusPrevious:function(){for(var a=this.items.length,b=Number(this.indexOf(this.focusedItem)),c=1;c<
a+1;c++){var d=this.items[(b-c+a)%a];if(!d.hasAttribute("disabled")){var e=Polymer.dom(d).getOwnerRoot()||document;this._setFocusedItem(d);if(Polymer.dom(e).activeElement==d)break}}},_focusNext:function(){for(var a=this.items.length,b=Number(this.indexOf(this.focusedItem)),c=1;c<a+1;c++){var d=this.items[(b+c)%a];if(!d.hasAttribute("disabled")){var e=Polymer.dom(d).getOwnerRoot()||document;this._setFocusedItem(d);if(Polymer.dom(e).activeElement==d)break}}},_applySelection:function(a,b){b?a.setAttribute("aria-selected",
"true"):a.removeAttribute("aria-selected");Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function(a,b){b&&b.setAttribute("tabindex","-1");!a||a.hasAttribute("disabled")||this.disabled||(a.setAttribute("tabindex","0"),a.focus())},_onIronItemsChanged:function(a){a.detail.addedNodes.length&&this._resetTabindices()},_onShiftTabDown:function(){var a=this.getAttribute("tabindex");Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0;this._setFocusedItem(null);this.setAttribute("tabindex",
"-1");this.async(function(){this.setAttribute("tabindex",a);Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function(a){!Polymer.IronMenuBehaviorImpl._shiftTabPressed&&(a=Polymer.dom(a).rootTarget,a===this||"undefined"===typeof a.tabIndex||this.isLightDescendant(a))&&(this._defaultFocusAsync=this.async(function(){var b=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null);b?this._setFocusedItem(b):this.items[0]&&this._focusNext()}))},_onUpKey:function(a){this._focusPrevious();
a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this._focusNext();a.detail.keyboardEvent.preventDefault()},_onEscKey:function(){var a=this.focusedItem;a&&a.blur()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,"up down esc")||this._focusWithKeyboardEvent(a);a.stopPropagation()},_activateHandler:function(a){Polymer.IronSelectableBehavior._activateHandler.call(this,a);a.stopPropagation()},_disabledChanged:function(a){a?(this._previousTabIndex=this.hasAttribute("tabindex")?this.tabIndex:
0,this.removeAttribute("tabindex")):this.hasAttribute("tabindex")||this.setAttribute("tabindex",this._previousTabIndex)}};Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1;Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl];
</script>





<dom-module id="paper-listbox">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-listbox-background-color, var(--primary-background-color));
        color: var(--paper-listbox-color, var(--primary-text-color));

        @apply --paper-listbox;
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-listbox/paper-listbox.html.js
Polymer({is:"paper-listbox",behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:"listbox"}});
</script>
</dom-module>





<script>//~~WEBPATH~~/paper-spinner/paper-spinner-behavior.html.js
Polymer.PaperSpinnerBehavior={properties:{active:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"__activeChanged"},alt:{type:String,value:"loading",observer:"__altChanged"},__coolingDown:{type:Boolean,value:!1}},__computeContainerClasses:function(a,b){return[a||b?"active":"",b?"cooldown":""].join(" ")},__activeChanged:function(a,b){this.__setAriaHidden(!a);this.__coolingDown=!a&&b},__altChanged:function(a){"loading"===a?this.alt=this.getAttribute("aria-label")||a:(this.__setAriaHidden(""===
a),this.setAttribute("aria-label",a))},__setAriaHidden:function(a){a?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")},__reset:function(){this.__coolingDown=this.active=!1}};
</script>

<dom-module id="paper-spinner-styles">
  <template>
    <style>
      /*
      /**************************/
      /* STYLES FOR THE SPINNER */
      /**************************/

      /*
       * Constants:
       *      ARCSIZE     = 270 degrees (amount of circle the arc takes up)
       *      ARCTIME     = 1333ms (time it takes to expand and contract arc)
       *      ARCSTARTROT = 216 degrees (how much the start location of the arc
       *                                should rotate each time, 216 gives us a
       *                                5 pointed star shape (it's 360/5 * 3).
       *                                For a 7 pointed star, we might do
       *                                360/7 * 3 = 154.286)
       *      SHRINK_TIME = 400ms
       */

      :host {
        display: inline-block;
        position: relative;
        width: 28px;
        height: 28px;

        /* 360 * ARCTIME / (ARCSTARTROT + (360-ARCSIZE)) */
        --paper-spinner-container-rotation-duration: 1568ms;

        /* ARCTIME */
        --paper-spinner-expand-contract-duration: 1333ms;

        /* 4 * ARCTIME */
        --paper-spinner-full-cycle-duration: 5332ms;

        /* SHRINK_TIME */
        --paper-spinner-cooldown-duration: 400ms;
      }

      #spinnerContainer {
        width: 100%;
        height: 100%;

        /* The spinner does not have any contents that would have to be
         * flipped if the direction changes. Always use ltr so that the
         * style works out correctly in both cases. */
        direction: ltr;
      }

      #spinnerContainer.active {
        -webkit-animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;
        animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;
      }

      @-webkit-keyframes container-rotate {
        to { -webkit-transform: rotate(360deg) }
      }

      @keyframes container-rotate {
        to { transform: rotate(360deg) }
      }

      .spinner-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        white-space: nowrap;
        color: var(--paper-spinner-color, var(--google-blue-500));
      }

      .layer-1 {
        color: var(--paper-spinner-layer-1-color, var(--google-blue-500));
      }

      .layer-2 {
        color: var(--paper-spinner-layer-2-color, var(--google-red-500));
      }

      .layer-3 {
        color: var(--paper-spinner-layer-3-color, var(--google-yellow-500));
      }

      .layer-4 {
        color: var(--paper-spinner-layer-4-color, var(--google-green-500));
      }

      /**
       * IMPORTANT NOTE ABOUT CSS ANIMATION PROPERTIES (keanulee):
       *
       * iOS Safari (tested on iOS 8.1) does not handle animation-delay very well - it doesn't
       * guarantee that the animation will start _exactly_ after that value. So we avoid using
       * animation-delay and instead set custom keyframes for each color (as layer-2undant as it
       * seems).
       */
      .active .spinner-layer {
        -webkit-animation-name: fill-unfill-rotate;
        -webkit-animation-duration: var(--paper-spinner-full-cycle-duration);
        -webkit-animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        -webkit-animation-iteration-count: infinite;
        animation-name: fill-unfill-rotate;
        animation-duration: var(--paper-spinner-full-cycle-duration);
        animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        animation-iteration-count: infinite;
        opacity: 1;
      }

      .active .spinner-layer.layer-1 {
        -webkit-animation-name: fill-unfill-rotate, layer-1-fade-in-out;
        animation-name: fill-unfill-rotate, layer-1-fade-in-out;
      }

      .active .spinner-layer.layer-2 {
        -webkit-animation-name: fill-unfill-rotate, layer-2-fade-in-out;
        animation-name: fill-unfill-rotate, layer-2-fade-in-out;
      }

      .active .spinner-layer.layer-3 {
        -webkit-animation-name: fill-unfill-rotate, layer-3-fade-in-out;
        animation-name: fill-unfill-rotate, layer-3-fade-in-out;
      }

      .active .spinner-layer.layer-4 {
        -webkit-animation-name: fill-unfill-rotate, layer-4-fade-in-out;
        animation-name: fill-unfill-rotate, layer-4-fade-in-out;
      }

      @-webkit-keyframes fill-unfill-rotate {
        12.5% { -webkit-transform: rotate(135deg) } /* 0.5 * ARCSIZE */
        25%   { -webkit-transform: rotate(270deg) } /* 1   * ARCSIZE */
        37.5% { -webkit-transform: rotate(405deg) } /* 1.5 * ARCSIZE */
        50%   { -webkit-transform: rotate(540deg) } /* 2   * ARCSIZE */
        62.5% { -webkit-transform: rotate(675deg) } /* 2.5 * ARCSIZE */
        75%   { -webkit-transform: rotate(810deg) } /* 3   * ARCSIZE */
        87.5% { -webkit-transform: rotate(945deg) } /* 3.5 * ARCSIZE */
        to    { -webkit-transform: rotate(1080deg) } /* 4   * ARCSIZE */
      }

      @keyframes fill-unfill-rotate {
        12.5% { transform: rotate(135deg) } /* 0.5 * ARCSIZE */
        25%   { transform: rotate(270deg) } /* 1   * ARCSIZE */
        37.5% { transform: rotate(405deg) } /* 1.5 * ARCSIZE */
        50%   { transform: rotate(540deg) } /* 2   * ARCSIZE */
        62.5% { transform: rotate(675deg) } /* 2.5 * ARCSIZE */
        75%   { transform: rotate(810deg) } /* 3   * ARCSIZE */
        87.5% { transform: rotate(945deg) } /* 3.5 * ARCSIZE */
        to    { transform: rotate(1080deg) } /* 4   * ARCSIZE */
      }

      @-webkit-keyframes layer-1-fade-in-out {
        0% { opacity: 1 }
        25% { opacity: 1 }
        26% { opacity: 0 }
        89% { opacity: 0 }
        90% { opacity: 1 }
        to { opacity: 1 }
      }

      @keyframes layer-1-fade-in-out {
        0% { opacity: 1 }
        25% { opacity: 1 }
        26% { opacity: 0 }
        89% { opacity: 0 }
        90% { opacity: 1 }
        to { opacity: 1 }
      }

      @-webkit-keyframes layer-2-fade-in-out {
        0% { opacity: 0 }
        15% { opacity: 0 }
        25% { opacity: 1 }
        50% { opacity: 1 }
        51% { opacity: 0 }
        to { opacity: 0 }
      }

      @keyframes layer-2-fade-in-out {
        0% { opacity: 0 }
        15% { opacity: 0 }
        25% { opacity: 1 }
        50% { opacity: 1 }
        51% { opacity: 0 }
        to { opacity: 0 }
      }

      @-webkit-keyframes layer-3-fade-in-out {
        0% { opacity: 0 }
        40% { opacity: 0 }
        50% { opacity: 1 }
        75% { opacity: 1 }
        76% { opacity: 0 }
        to { opacity: 0 }
      }

      @keyframes layer-3-fade-in-out {
        0% { opacity: 0 }
        40% { opacity: 0 }
        50% { opacity: 1 }
        75% { opacity: 1 }
        76% { opacity: 0 }
        to { opacity: 0 }
      }

      @-webkit-keyframes layer-4-fade-in-out {
        0% { opacity: 0 }
        65% { opacity: 0 }
        75% { opacity: 1 }
        90% { opacity: 1 }
        to { opacity: 0 }
      }

      @keyframes layer-4-fade-in-out {
        0% { opacity: 0 }
        65% { opacity: 0 }
        75% { opacity: 1 }
        90% { opacity: 1 }
        to { opacity: 0 }
      }

      .circle-clipper {
        display: inline-block;
        position: relative;
        width: 50%;
        height: 100%;
        overflow: hidden;
      }

      /**
       * Patch the gap that appear between the two adjacent div.circle-clipper while the
       * spinner is rotating (appears on Chrome 50, Safari 9.1.1, and Edge).
       */
      .spinner-layer::after {
        left: 45%;
        width: 10%;
        border-top-style: solid;
      }

      .spinner-layer::after,
      .circle-clipper::after {
        content: '';
        box-sizing: border-box;
        position: absolute;
        top: 0;
        border-width: var(--paper-spinner-stroke-width, 3px);
        border-radius: 50%;
      }

      .circle-clipper::after {
        bottom: 0;
        width: 200%;
        border-style: solid;
        border-bottom-color: transparent !important;
      }

      .circle-clipper.left::after {
        left: 0;
        border-right-color: transparent !important;
        -webkit-transform: rotate(129deg);
        transform: rotate(129deg);
      }

      .circle-clipper.right::after {
        left: -100%;
        border-left-color: transparent !important;
        -webkit-transform: rotate(-129deg);
        transform: rotate(-129deg);
      }

      .active .gap-patch::after,
      .active .circle-clipper::after {
        -webkit-animation-duration: var(--paper-spinner-expand-contract-duration);
        -webkit-animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        -webkit-animation-iteration-count: infinite;
        animation-duration: var(--paper-spinner-expand-contract-duration);
        animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        animation-iteration-count: infinite;
      }

      .active .circle-clipper.left::after {
        -webkit-animation-name: left-spin;
        animation-name: left-spin;
      }

      .active .circle-clipper.right::after {
        -webkit-animation-name: right-spin;
        animation-name: right-spin;
      }

      @-webkit-keyframes left-spin {
        0% { -webkit-transform: rotate(130deg) }
        50% { -webkit-transform: rotate(-5deg) }
        to { -webkit-transform: rotate(130deg) }
      }

      @keyframes left-spin {
        0% { transform: rotate(130deg) }
        50% { transform: rotate(-5deg) }
        to { transform: rotate(130deg) }
      }

      @-webkit-keyframes right-spin {
        0% { -webkit-transform: rotate(-130deg) }
        50% { -webkit-transform: rotate(5deg) }
        to { -webkit-transform: rotate(-130deg) }
      }

      @keyframes right-spin {
        0% { transform: rotate(-130deg) }
        50% { transform: rotate(5deg) }
        to { transform: rotate(-130deg) }
      }

      #spinnerContainer.cooldown {
        -webkit-animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
        animation: container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
      }

      @-webkit-keyframes fade-out {
        0% { opacity: 1 }
        to { opacity: 0 }
      }

      @keyframes fade-out {
        0% { opacity: 1 }
        to { opacity: 0 }
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-spinner-lite">
  <template strip-whitespace>
    <style include="paper-spinner-styles"></style>

    <div id="spinnerContainer" class-name="[[__computeContainerClasses(active, __coolingDown)]]" on-animationend="__reset" on-webkit-animation-end="__reset">
      <div class="spinner-layer">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-spinner/paper-spinner-lite.html.js
Polymer({is:"paper-spinner-lite",behaviors:[Polymer.PaperSpinnerBehavior]});
</script>
</dom-module>








<dom-module id="paper-toast">
  <template>
    <style>
      :host {
        display: block;
        position: fixed;
        background-color: var(--paper-toast-background-color, #323232);
        color: var(--paper-toast-color, #f1f1f1);
        min-height: 48px;
        min-width: 288px;
        padding: 16px 24px;
        box-sizing: border-box;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
        border-radius: 2px;
        margin: 12px;
        font-size: 14px;
        cursor: default;
        -webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
        transition: transform 0.3s, opacity 0.3s;
        opacity: 0;
        -webkit-transform: translateY(100px);
        transform: translateY(100px);
        @apply --paper-font-common-base;
      }

      :host(.capsule) {
        border-radius: 24px;
      }

      :host(.fit-bottom) {
        width: 100%;
        min-width: 0;
        border-radius: 0;
        margin: 0;
      }

      :host(.paper-toast-open) {
        opacity: 1;
        -webkit-transform: translateY(0px);
        transform: translateY(0px);
      }
    </style>

    <span id="label">{{text}}</span>
    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-toast/paper-toast.html.js
(function(){var a=null;Polymer({is:"paper-toast",behaviors:[Polymer.IronOverlayBehavior],properties:{fitInto:{type:Object,value:window,observer:"_onFitIntoChanged"},horizontalAlign:{type:String,value:"left"},verticalAlign:{type:String,value:"bottom"},duration:{type:Number,value:3E3},text:{type:String,value:""},noCancelOnOutsideClick:{type:Boolean,value:!0},noAutoFocus:{type:Boolean,value:!0}},listeners:{transitionend:"__onTransitionEnd"},get visible(){Polymer.Base._warn("`visible` is deprecated, use `opened` instead");
return this.opened},get _canAutoClose(){return 0<this.duration&&Infinity!==this.duration},created:function(){this._autoClose=null;Polymer.IronA11yAnnouncer.requestAvailability()},show:function(b){"string"==typeof b&&(b={text:b});for(var c in b)0===c.indexOf("_")?Polymer.Base._warn('The property "'+c+'" is private and was not set.'):c in this?this[c]=b[c]:Polymer.Base._warn('The property "'+c+'" is not valid.');this.open()},hide:function(){this.close()},__onTransitionEnd:function(b){b&&b.target===
this&&"opacity"===b.propertyName&&(this.opened?this._finishRenderOpened():this._finishRenderClosed())},_openedChanged:function(){null!==this._autoClose&&(this.cancelAsync(this._autoClose),this._autoClose=null);this.opened?(a&&a!==this&&a.close(),a=this,this.fire("iron-announce",{text:this.text}),this._canAutoClose&&(this._autoClose=this.async(this.close,this.duration))):a===this&&(a=null);Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments)},_renderOpened:function(){this.classList.add("paper-toast-open")},
_renderClosed:function(){this.classList.remove("paper-toast-open")},_onFitIntoChanged:function(b){this.positionTarget=b}})})();
</script>
</dom-module>









<dom-module id="paper-toggle-button">
  <template strip-whitespace>

    <style>
      :host {
        display: inline-block;
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--paper-font-common-base);
      }

      :host([disabled]) {
        pointer-events: none;
      }

      :host(:focus) {
        outline:none;
      }

      .toggle-bar {
        position: absolute;
        height: 100%;
        width: 100%;
        border-radius: 8px;
        pointer-events: none;
        opacity: 0.4;
        transition: background-color linear .08s;
        background-color: var(--paper-toggle-button-unchecked-bar-color, #000000);

        @apply(--paper-toggle-button-unchecked-bar);
      }

      .toggle-button {
        position: absolute;
        top: -3px;
        left: 0;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);
        transition: -webkit-transform linear .08s, background-color linear .08s;
        transition: transform linear .08s, background-color linear .08s;
        will-change: transform;
        background-color: var(--paper-toggle-button-unchecked-button-color, --paper-grey-50);

        @apply(--paper-toggle-button-unchecked-button);
      }

      .toggle-button.dragging {
        -webkit-transition: none;
        transition: none;
      }

      :host([checked]:not([disabled])) .toggle-bar {
        opacity: 0.5;
        background-color: var(--paper-toggle-button-checked-bar-color, --primary-color);

        @apply(--paper-toggle-button-checked-bar);
      }

      :host([disabled]) .toggle-bar {
        background-color: #000;
        opacity: 0.12;
      }

      :host([checked]) .toggle-button {
        -webkit-transform: translate(16px, 0);
        transform: translate(16px, 0);
      }

      :host([checked]:not([disabled])) .toggle-button {
        background-color: var(--paper-toggle-button-checked-button-color, --primary-color);

        @apply(--paper-toggle-button-checked-button);
      }

      :host([disabled]) .toggle-button {
        background-color: #bdbdbd;
        opacity: 1;
      }

      .toggle-ink {
        position: absolute;
        top: -14px;
        left: -14px;
        right: auto;
        bottom: auto;
        width: 48px;
        height: 48px;
        opacity: 0.5;
        pointer-events: none;
        color: var(--paper-toggle-button-unchecked-ink-color, --primary-text-color);
      }

      :host([checked]) .toggle-ink {
        color: var(--paper-toggle-button-checked-ink-color, --primary-color);
      }

      .toggle-container {
        display: inline-block;
        position: relative;
        width: 36px;
        height: 14px;
        /* The toggle button has an absolute position of -3px; The extra 1px
        /* accounts for the toggle button shadow box. */
        margin: 4px 1px;
      }

      .toggle-label {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-toggle-button-label-spacing, 8px);
        pointer-events: none;
        color: var(--paper-toggle-button-label-color, --primary-text-color);
      }

      /* invalid state */
      :host([invalid]) .toggle-bar {
        background-color: var(--paper-toggle-button-invalid-bar-color, --error-color);
      }

      :host([invalid]) .toggle-button {
        background-color: var(--paper-toggle-button-invalid-button-color, --error-color);
      }

      :host([invalid]) .toggle-ink {
        color: var(--paper-toggle-button-invalid-ink-color, --error-color);
      }
    </style>

    <div class="toggle-container">
      <div id="toggleBar" class="toggle-bar"></div>
      <div id="toggleButton" class="toggle-button"></div>
    </div>

    <div class="toggle-label"><slot></slot></div>

  </template>

  <script>//~~WEBPATH~~/paper-toggle-button/paper-toggle-button.html.js
Polymer({is:"paper-toggle-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"button","aria-pressed":"false",tabindex:0},properties:{},listeners:{track:"_ontrack"},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){this.setScrollDirection("y")})},_ontrack:function(a){a=a.detail;"start"===a.state?this._trackStart(a):"track"===a.state?this._trackMove(a):"end"===a.state&&this._trackEnd(a)},_trackStart:function(){this._width=this.$.toggleBar.offsetWidth/
2;this._trackChecked=this.checked;this.$.toggleButton.classList.add("dragging")},_trackMove:function(a){a=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+a:a));this.translate3d(this._x+"px",0,0,this.$.toggleButton);this._userActivate(this._x>this._width/2)},_trackEnd:function(){this.$.toggleButton.classList.remove("dragging");this.transform("",this.$.toggleButton)},_createRipple:function(){this._rippleContainer=this.$.toggleButton;var a=Polymer.PaperRippleBehavior._createRipple();
a.id="ink";a.setAttribute("recenters","");a.classList.add("circle","toggle-ink");return a}});
</script>
</dom-module>



<script>//~~WEBPATH~~/tf-imports/three.js
/*

 The MIT License

 Copyright (c) 2010-2013 three.js authors

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
*/
var f={REVISION:"77"};"function"===typeof define&&define.amd?define("three",f):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=f);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});
void 0===Object.assign&&(Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b});
Object.assign(f,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,
MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,
CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,
ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:f.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,
RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3E3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,
RGBADepthPacking:3201});f.Color=function(a,b,c){void 0===b&&void 0===c?a=this.set(a):(this.r=a,this.g=b,this.b=c,a=this);return a};function bb(a,b){b=Math.floor(b);a.r=(b>>16&255)/255;a.g=(b>>8&255)/255;a.b=(b&255)/255}
function cb(a,b){function c(k){void 0!==k&&1>parseFloat(k)&&console.warn("THREE.Color: Alpha component of "+b+" will be ignored.")}var d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var e=d[2];switch(d[1]){case "rgb":case "rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){a.r=Math.min(255,parseInt(d[1],10))/255;a.g=Math.min(255,parseInt(d[2],10))/255;a.b=Math.min(255,parseInt(d[3],10))/255;c(d[5]);return}if(d=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){a.r=
Math.min(100,parseInt(d[1],10))/100;a.g=Math.min(100,parseInt(d[2],10))/100;a.b=Math.min(100,parseInt(d[3],10))/100;c(d[5]);return}break;case "hsl":case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){e=parseFloat(d[1])/360;var g=parseInt(d[2],10)/100,h=parseInt(d[3],10)/100;c(d[5]);a.setHSL(e,g,h);return}}}else if(d=/^#([A-Fa-f0-9]+)$/.exec(b)){d=d[1];e=d.length;if(3===e){a.r=parseInt(d.charAt(0)+d.charAt(0),16)/255;a.g=parseInt(d.charAt(1)+d.charAt(1),
16)/255;a.b=parseInt(d.charAt(2)+d.charAt(2),16)/255;return}if(6===e){a.r=parseInt(d.charAt(0)+d.charAt(1),16)/255;a.g=parseInt(d.charAt(2)+d.charAt(3),16)/255;a.b=parseInt(d.charAt(4)+d.charAt(5),16)/255;return}}b&&0<b.length&&(d=f.ColorKeywords[b],void 0!==d?bb(a,d):console.warn("THREE.Color: Unknown color "+b))}function db(a){return 255*a.r<<16^255*a.g<<8^255*a.b<<0}
f.Color.prototype={constructor:f.Color,r:1,g:1,b:1,set:function(a){a instanceof f.Color?this.copy(a):"number"===typeof a?bb(this,a):"string"===typeof a&&cb(this,a);return this},setScalar:function(a){this.b=this.g=this.r=a},setHSL:function(){function a(b,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?b+6*(c-b)*d:.5>d?c:d<2/3?b+6*(c-b)*(2/3-d):b}return function(b,c,d){b=f.Math.euclideanModulo(b,1);c=f.Math.clamp(c,0,1);d=f.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=
a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(){var a=
this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHexString:function(){return("000000"+db(this).toString(16)).slice(-6)},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=0,e=0,g=0;d=this.r;e=this.g;var h=this.b,k=Math.max(d,e,h),l=Math.min(d,e,h),m;g=(l+k)/2;if(l===k)l=m=0;else{var n=
k-l;l=.5>=g?n/(k+l):n/(2-k-l);switch(k){case d:m=(e-h)/n+(e<h?6:0);break;case e:m=(h-d)/n+2;break;case h:m=(d-e)/n+4}m/=6}d=m+a;e=l+b;g+=c;this.setHSL(d,e,g);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=
a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}};
f.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
function eb(a,b,c){if(!1===b instanceof f.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=Math.cos(b._x/2),e=Math.cos(b._y/2),g=Math.cos(b._z/2),h=Math.sin(b._x/2),k=Math.sin(b._y/2),l=Math.sin(b._z/2);b=b.order;"XYZ"===b?(a._x=h*e*g+d*k*l,a._y=d*k*g-h*e*l,a._z=d*e*l+h*k*g,a._w=d*e*g-h*k*l):"YXZ"===b?(a._x=h*e*g+d*k*l,a._y=d*k*g-h*e*l,a._z=d*e*l-h*k*g,a._w=d*e*g+h*k*l):"ZXY"===b?(a._x=h*e*g-d*k*l,a._y=d*k*g+h*e*l,a._z=d*e*
l+h*k*g,a._w=d*e*g-h*k*l):"ZYX"===b?(a._x=h*e*g-d*k*l,a._y=d*k*g+h*e*l,a._z=d*e*l-h*k*g,a._w=d*e*g+h*k*l):"YZX"===b?(a._x=h*e*g+d*k*l,a._y=d*k*g+h*e*l,a._z=d*e*l-h*k*g,a._w=d*e*g-h*k*l):"XZY"===b&&(a._x=h*e*g-d*k*l,a._y=d*k*g-h*e*l,a._z=d*e*l+h*k*g,a._w=d*e*g+h*k*l);if(!1!==c)a.onChangeCallback();return a}function jb(a,b,c){c/=2;var d=Math.sin(c);a._x=b.x*d;a._y=b.y*d;a._z=b.z*d;a._w=Math.cos(c);a.onChangeCallback();return a}
function kb(a,b,c){var d=b._x,e=b._y,g=b._z;b=b._w;var h=c._x,k=c._y,l=c._z;c=c._w;a._x=d*c+b*h+e*l-g*k;a._y=e*c+b*k+g*h-d*l;a._z=g*c+b*l+d*k-e*h;a._w=b*c-d*h-e*k-g*l;a.onChangeCallback();return a}
f.Quaternion.prototype={constructor:f.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=
a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],h=b[9],k=b[2],l=b[6];b=b[10];var m=c+g+b;0<m?(c=.5/Math.sqrt(m+1),this._w=.25/c,this._x=(l-h)*c,this._y=(d-k)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(l-h)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+k)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-k)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(h+l)/c):(c=2*Math.sqrt(1+b-
c-g),this._w=(e-a)/c,this._x=(d+k)/c,this._y=(h+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new f.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):lb(a,c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this.normalize()},dot:function(a){return this._x*
a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
kb(this,a,b)):kb(this,this,a)},premultiply:function(a){return kb(this,a,this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,h=g*a._w+c*a._x+d*a._y+e*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,h=-h):this.copy(a);if(1<=h)return this._w=g,this._x=c,this._y=d,this._z=e,this;a=Math.sqrt(1-h*h);if(.001>Math.abs(a))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),
this;var k=Math.atan2(a,h);h=Math.sin((1-b)*k)/a;b=Math.sin(b*k)/a;this._w=g*h+this._w*b;this._x=c*h+this._x*b;this._y=d*h+this._y*b;this._z=e*h+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;
a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};
Object.assign(f.Quaternion,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,g,h){var k=c[d+0],l=c[d+1],m=c[d+2];c=c[d+3];d=e[g+0];var n=e[g+1],q=e[g+2];e=e[g+3];if(c!==e||k!==d||l!==n||m!==q){g=1-h;var p=k*d+l*n+m*q+c*e,t=0<=p?1:-1,r=1-p*p;r>Number.EPSILON&&(r=Math.sqrt(r),p=Math.atan2(r,p*t),g=Math.sin(g*p)/r,h=Math.sin(h*p)/r);t*=h;k=k*g+d*t;l=l*g+n*t;m=m*g+q*t;c=c*g+e*t;g===1-h&&(h=1/Math.sqrt(k*k+l*l+m*m+c*c),k*=h,l*=h,m*=h,c*=h)}a[b]=k;a[b+1]=l;a[b+2]=m;a[b+
3]=c}});f.Vector2=function(a,b){this.x=a||0;this.y=b||0};
f.Vector2.prototype={constructor:f.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},
addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,
this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===
a&&(a=new f.Vector2,b=new f.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},
toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}};f.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
function lb(a,b,c){var d=b.x,e=b.y;b=b.z;var g=c.x,h=c.y;c=c.z;a.x=e*c-b*h;a.y=b*g-d*c;a.z=d*h-e*g;return a}function mb(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,h=b.y,k=b.z;b=b.w;var l=b*c+h*e-k*d,m=b*d+k*c-g*e,n=b*e+g*d-h*c;c=-g*c-h*d-k*e;a.x=l*b+c*-g+m*-k-n*-h;a.y=m*b+c*-h+n*-g-l*-k;a.z=n*b+c*-k+l*-h-m*-g;return a}function rb(a,b){var c=a.x,d=a.y,e=a.z;b=b.elements;a.x=b[0]*c+b[3]*d+b[6]*e;a.y=b[1]*c+b[4]*d+b[7]*e;a.z=b[2]*c+b[5]*d+b[8]*e;return a}
function sb(a,b){var c=a.x,d=a.y,e=a.z;b=b.elements;var g=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);a.x=(b[0]*c+b[4]*d+b[8]*e+b[12])*g;a.y=(b[1]*c+b[5]*d+b[9]*e+b[13])*g;a.z=(b[2]*c+b[6]*d+b[10]*e+b[14])*g;return a}function tb(a,b){var c=a.x,d=a.y,e=a.z;b=b.elements;a.x=b[0]*c+b[4]*d+b[8]*e;a.y=b[1]*c+b[5]*d+b[9]*e;a.z=b[2]*c+b[6]*d+b[10]*e;a.normalize()}function zb(a,b){var c=a.x,d=a.y,e=a.z;a.x=d*b.z-e*b.y;a.y=e*b.x-c*b.z;a.z=c*b.y-d*b.x;return a}
function Ab(a,b,c){if("number"===typeof b){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var d=b;b=c;c=d}return a.fromArray(b.elements,4*c)}function Bb(a,b){return Ab(a,b,3)}
f.Vector3.prototype={constructor:f.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,
b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},
multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},applyEuler:function(){var a;return function(b){!1===b instanceof f.Euler&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");
void 0===a&&(a=new f.Quaternion);return mb(this,eb(a,b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new f.Quaternion);return mb(this,jb(a,b,c))}}(),applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},project:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Cb(a,b.projectionMatrix,a.getInverse(b.matrixWorld));return sb(this,
a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Cb(a,b.matrixWorld,a.getInverse(b.projectionMatrix));return sb(this,a)}}(),divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},
clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new f.Vector3,b=new f.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);
return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*
a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new f.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new f.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new f.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=
this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(f.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;
a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};f.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
f.Vector4.prototype={constructor:f.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);
this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=
a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],g=a[5],h=a[9];var k=a[2];var l=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-k)&&
.01>Math.abs(h-l)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+k)&&.1>Math.abs(h+l)&&.1>Math.abs(b+g+m-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;g=(g+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+k)/4;h=(h+l)/4;b>g&&b>m?.01>b?(l=0,c=k=.707106781):(l=Math.sqrt(b),k=c/l,c=d/l):g>m?.01>g?(l=.707106781,k=0,c=.707106781):(k=Math.sqrt(g),l=c/k,c=h/k):.01>m?(k=l=.707106781,c=0):(c=Math.sqrt(m),l=d/c,k=h/c);this.set(l,k,c,a);return this}a=Math.sqrt((l-h)*(l-h)+(d-k)*(d-k)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(l-
h)/a;this.y=(d-k)/a;this.z=(e-c)/a;this.w=Math.acos((b+g+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));
this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new f.Vector4,b=new f.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=
a.array[b+3];return this}};f.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||f.Euler.DefaultOrder};f.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");f.Euler.DefaultOrder="XYZ";
f.Euler.prototype={constructor:f.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,
this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=f.Math.clamp,e=a.elements;a=e[0];var g=e[4],h=e[8],k=e[1],l=e[5],m=e[9],n=e[2],q=e[6];e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(q,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=
Math.atan2(h,e),this._z=Math.atan2(k,l)):(this._y=Math.atan2(-n,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(q,-1,1)),.99999>Math.abs(q)?(this._y=Math.atan2(-n,e),this._z=Math.atan2(-g,l)):(this._y=0,this._z=Math.atan2(k,a))):"ZYX"===b?(this._y=Math.asin(-d(n,-1,1)),.99999>Math.abs(n)?(this._x=Math.atan2(q,e),this._z=Math.atan2(k,a)):(this._x=0,this._z=Math.atan2(-g,l))):"YZX"===b?(this._z=Math.asin(d(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-m,l),this._y=Math.atan2(-n,a)):(this._x=0,this._y=
Math.atan2(h,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(q,l),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Matrix4);Db(a,b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,
a.z,b||this._order)},reorder:function(){var a=new f.Quaternion;return function(b){eb(a,this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?
a.set(this._x,this._y,this._z):new f.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};f.Line3=function(a,b){this.start=void 0!==a?a:new f.Vector3;this.end=void 0!==b?b:new f.Vector3};function Eb(a,b){return(b||new f.Vector3).subVectors(a.end,a.start)}
f.Line3.prototype={constructor:f.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new f.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){return Eb(this,b||new f.Vector3).multiplyScalar(a).add(this.start)},
closestPointToPointParameter:function(){var a=new f.Vector3,b=new f.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=f.Math.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);return Eb(this,c||new f.Vector3).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&
a.end.equals(this.end)}};f.Box2=function(a,b){this.min=void 0!==a?a:new f.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new f.Vector2(-Infinity,-Infinity)};
f.Box2.prototype={constructor:f.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new f.Vector2;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},
makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new f.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new f.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new f.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?
!1:!0},clampPoint:function(a,b){return(b||new f.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new f.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};
f.Box3=function(a,b){this.min=void 0!==a?a:new f.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new f.Vector3(-Infinity,-Infinity,-Infinity)};function Fb(a,b){for(var c=Infinity,d=Infinity,e=Infinity,g=-Infinity,h=-Infinity,k=-Infinity,l=0,m=b.length;l<m;l+=3){var n=b[l],q=b[l+1],p=b[l+2];n<c&&(c=n);q<d&&(d=q);p<e&&(e=p);n>g&&(g=n);q>h&&(h=q);p>k&&(k=p)}a.min.set(c,d,e);a.max.set(g,h,k)}
f.Box3.prototype={constructor:f.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new f.Vector3;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(){var a=new f.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(d){var e=
d.geometry;if(void 0!==e)if(e instanceof f.Geometry){var g=e.vertices;e=0;for(var h=g.length;e<h;e++)a.copy(g[e]),a.applyMatrix4(d.matrixWorld),c.expandByPoint(a)}else if(e instanceof f.BufferGeometry&&void 0!==e.attributes.position)for(g=e.attributes.position.array,e=0,h=g.length;e<h;e+=3)a.fromArray(g,e),a.applyMatrix4(d.matrixWorld),c.expandByPoint(a)});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},
makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new f.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new f.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);
return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new f.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/
(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new f.Vector3);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=
a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new f.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new f.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),
getBoundingSphere:function(){var a=new f.Vector3;return function(b){b=b||new f.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3,new f.Vector3];return function(b){if(this.isEmpty())return this;
a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),
translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};f.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};function Gb(a,b){b=b.elements;a.set(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10]);return a.getInverse(a).transpose()}
f.Matrix3.prototype={constructor:f.Matrix3,set:function(a,b,c,d,e,g,h,k,l){var m=this.elements;m[0]=a;m[1]=d;m[2]=h;m[3]=b;m[4]=e;m[5]=k;m[6]=c;m[7]=g;m[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Vector3);void 0===
c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),rb(a,this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),rb(a,this),b.setXYZ(a.x,a.y,a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=
this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],l=a[7];a=a[8];return b*g*a-b*h*l-c*e*a+c*h*k+d*e*l-d*g*k},getInverse:function(a,b){a instanceof f.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var c=a.elements;a=this.elements;var d=c[0],e=c[1],g=c[2],h=c[3],k=c[4],l=c[5],m=c[6],n=c[7];c=c[8];var q=c*k-l*n,p=l*m-c*h,t=n*h-k*m,r=d*q+e*p+g*t;if(0===r){if(b)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");
return this.identity()}b=1/r;a[0]=q*b;a[1]=(g*n-c*e)*b;a[2]=(l*e-g*k)*b;a[3]=p*b;a[4]=(c*d-g*m)*b;a[5]=(g*h-l*d)*b;a[6]=t*b;a[7]=(e*m-n*d)*b;a[8]=(k*d-e*h)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},transposeIntoArray:function(a){var b=this.elements;
a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};f.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
function Cb(a,b,c){var d=b.elements,e=c.elements;c=a.elements;b=d[0];var g=d[4],h=d[8],k=d[12],l=d[1],m=d[5],n=d[9],q=d[13],p=d[2],t=d[6],r=d[10],v=d[14],u=d[3],w=d[7],x=d[11];d=d[15];var A=e[0],y=e[4],B=e[8],F=e[12],K=e[1],L=e[5],N=e[9],Q=e[13],W=e[2],H=e[6],O=e[10],P=e[14],D=e[3],R=e[7],U=e[11];e=e[15];c[0]=b*A+g*K+h*W+k*D;c[4]=b*y+g*L+h*H+k*R;c[8]=b*B+g*N+h*O+k*U;c[12]=b*F+g*Q+h*P+k*e;c[1]=l*A+m*K+n*W+q*D;c[5]=l*y+m*L+n*H+q*R;c[9]=l*B+m*N+n*O+q*U;c[13]=l*F+m*Q+n*P+q*e;c[2]=p*A+t*K+r*W+v*D;c[6]=
p*y+t*L+r*H+v*R;c[10]=p*B+t*N+r*O+v*U;c[14]=p*F+t*Q+r*P+v*e;c[3]=u*A+w*K+x*W+d*D;c[7]=u*y+w*L+x*H+d*R;c[11]=u*B+w*N+x*O+d*U;c[15]=u*F+w*Q+x*P+d*e;return a}function Db(a,b){var c=a.elements,d=b.x,e=b.y,g=b.z,h=b.w,k=d+d,l=e+e,m=g+g;b=d*k;var n=d*l;d*=m;var q=e*l;e*=m;g*=m;k*=h;l*=h;h*=m;c[0]=1-(q+g);c[4]=n-h;c[8]=d+l;c[1]=n+h;c[5]=1-(b+g);c[9]=e-k;c[2]=d-l;c[6]=e+k;c[10]=1-(b+q);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return a}
function Hb(a,b){var c=Math.cos(b);b=Math.sin(b);a.set(1,0,0,0,0,c,-b,0,0,b,c,0,0,0,0,1)}function Ib(a,b){var c=Math.cos(b);b=Math.sin(b);a.set(c,0,b,0,0,1,0,0,-b,0,c,0,0,0,0,1)}function Jb(a,b){var c=Math.cos(b);b=Math.sin(b);a.set(c,-b,0,0,b,c,0,0,0,0,1,0,0,0,0,1)}function Kb(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=1-d,g=b.x,h=b.y;b=b.z;var k=e*g,l=e*h;a.set(k*g+d,k*h-c*b,k*b+c*h,0,k*h+c*b,l*h+d,l*b-c*g,0,k*b-c*h,l*b+c*g,e*b*b+d,0,0,0,0,1);return a}
function Lb(a,b,c,d,e,g,h){var k=a.elements;k[0]=2*g/(c-b);k[4]=0;k[8]=(c+b)/(c-b);k[12]=0;k[1]=0;k[5]=2*g/(e-d);k[9]=(e+d)/(e-d);k[13]=0;k[2]=0;k[6]=0;k[10]=-(h+g)/(h-g);k[14]=-2*h*g/(h-g);k[3]=0;k[7]=0;k[11]=-1;k[15]=0;return a}
f.Matrix4.prototype={constructor:f.Matrix4,set:function(a,b,c,d,e,g,h,k,l,m,n,q,p,t,r,v){var u=this.elements;u[0]=a;u[4]=b;u[8]=c;u[12]=d;u[1]=e;u[5]=g;u[9]=h;u[13]=k;u[2]=l;u[6]=m;u[10]=n;u[14]=q;u[3]=p;u[7]=t;u[11]=r;u[15]=v;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new f.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},extractBasis:function(a,b,c){Ab(a,this,0);Ab(b,this,1);Ab(c,this,
2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new f.Vector3);var c=this.elements,d=b.elements,e=1/Ab(a,b,0).length(),g=1/Ab(a,b,1).length();b=1/Ab(a,b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*g;c[5]=d[5]*g;c[6]=d[6]*g;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof f.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c);c=Math.sin(c);var h=Math.cos(d);d=Math.sin(d);var k=Math.cos(e);e=Math.sin(e);if("XYZ"===a.order){a=g*k;var l=g*e,m=c*k,n=c*e;b[0]=h*k;b[4]=-h*e;b[8]=d;b[1]=l+m*d;b[5]=a-n*d;b[9]=-c*h;b[2]=n-a*d;b[6]=m+l*d;b[10]=g*h}else"YXZ"===a.order?(a=h*k,l=h*e,m=d*k,n=d*e,b[0]=a+n*c,b[4]=m*c-l,b[8]=g*d,b[1]=g*e,b[5]=g*k,b[9]=-c,b[2]=l*c-m,b[6]=n+a*c,b[10]=g*h):"ZXY"===a.order?(a=h*k,l=h*e,m=d*k,n=d*e,b[0]=a-n*c,b[4]=-g*e,b[8]=m+l*c,b[1]=l+m*c,b[5]=g*k,b[9]=
n-a*c,b[2]=-g*d,b[6]=c,b[10]=g*h):"ZYX"===a.order?(a=g*k,l=g*e,m=c*k,n=c*e,b[0]=h*k,b[4]=m*d-l,b[8]=a*d+n,b[1]=h*e,b[5]=n*d+a,b[9]=l*d-m,b[2]=-d,b[6]=c*h,b[10]=g*h):"YZX"===a.order?(a=g*h,l=g*d,m=c*h,n=c*d,b[0]=h*k,b[4]=n-a*e,b[8]=m*e+l,b[1]=e,b[5]=g*k,b[9]=-c*k,b[2]=-d*k,b[6]=l*e+m,b[10]=a-n*e):"XZY"===a.order&&(a=g*h,l=g*d,m=c*h,n=c*d,b[0]=h*k,b[4]=-e,b[8]=d*k,b[1]=a*e+n,b[5]=g*k,b[9]=l*e-m,b[2]=m*e-l,b[6]=c*k,b[10]=n*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,
b,c;return function(d,e,g){void 0===a&&(a=new f.Vector3,b=new f.Vector3,c=new f.Vector3);var h=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);lb(a,g,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,lb(a,g,c).normalize());lb(b,c,a);h[0]=a.x;h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
Cb(this,a,b)):Cb(this,this,a)},premultiply:function(a){return Cb(this,a,this)},multiplyToArray:function(a,b,c){var d=this.elements;Cb(this,a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;
b[15]*=a;return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z);return b}}(),
determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],h=a[5],k=a[9],l=a[13],m=a[2],n=a[6],q=a[10],p=a[14];return a[3]*(+e*k*n-d*l*n-e*h*q+c*l*q+d*h*p-c*k*p)+a[7]*(+b*k*p-b*l*q+e*g*q-d*g*p+d*l*m-e*k*m)+a[11]*(+b*l*n-b*h*p-e*g*n+c*g*p+e*h*m-c*l*m)+a[15]*(-d*h*m-b*k*n+b*h*q+d*g*n-c*g*q+c*k*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];
a[14]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new f.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return Ab(a,this,3)}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,
b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],g=d[2],h=d[3],k=d[4],l=d[5],m=d[6],n=d[7],q=d[8],p=d[9],t=d[10],r=d[11],v=d[12],u=d[13],w=d[14];d=d[15];var x=p*w*n-u*t*n+u*m*r-l*w*r-p*m*d+l*t*d,A=v*t*n-q*w*n-v*m*r+k*w*r+q*m*d-k*t*d,y=q*u*n-v*p*n+v*l*r-k*u*r-q*l*d+k*p*d,B=v*p*m-q*u*m-v*l*t+k*u*t+q*l*w-k*p*w,F=a*x+e*A+g*y+h*B;if(0===F){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
return this.identity()}b=1/F;c[0]=x*b;c[1]=(u*t*h-p*w*h-u*g*r+e*w*r+p*g*d-e*t*d)*b;c[2]=(l*w*h-u*m*h+u*g*n-e*w*n-l*g*d+e*m*d)*b;c[3]=(p*m*h-l*t*h-p*g*n+e*t*n+l*g*r-e*m*r)*b;c[4]=A*b;c[5]=(q*w*h-v*t*h+v*g*r-a*w*r-q*g*d+a*t*d)*b;c[6]=(v*m*h-k*w*h-v*g*n+a*w*n+k*g*d-a*m*d)*b;c[7]=(k*t*h-q*m*h+q*g*n-a*t*n-k*g*r+a*m*r)*b;c[8]=y*b;c[9]=(v*p*h-q*u*h-v*e*r+a*u*r+q*e*d-a*p*d)*b;c[10]=(k*u*h-v*l*h+v*e*n-a*u*n-k*e*d+a*l*d)*b;c[11]=(q*l*h-k*p*h-q*e*n+a*p*n+k*e*r-a*l*r)*b;c[12]=B*b;c[13]=(q*u*g-v*p*g+v*e*t-a*u*
t-q*e*w+a*p*w)*b;c[14]=(v*l*g-k*u*g-v*e*m+a*u*m+k*e*w-a*l*w)*b;c[15]=(k*p*g-q*l*g+q*e*m-a*p*m-k*e*t+a*l*t)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new f.Vector3,b=new f.Matrix4);var g=this.elements,h=a.set(g[0],g[1],g[2]).length(),k=a.set(g[4],g[5],g[6]).length(),l=a.set(g[8],g[9],g[10]).length();
0>this.determinant()&&(h=-h);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/h;g=1/k;var m=1/l;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=h;e.y=k;e.z=l;return this}}(),makePerspective:function(a,b,c,d){a=c*Math.tan(f.Math.DEG2RAD*a*.5);var e=-a;return Lb(this,e*b,a*b,e,a,c,d)},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>
c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};f.Ray=function(a,b){this.origin=void 0!==a?a:new f.Vector3;this.direction=void 0!==b?b:new f.Vector3};
f.Ray.prototype={constructor:f.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new f.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new f.Vector3;return function(b){this.origin.copy(this.at(b,
a));return this}}(),closestPointToPoint:function(a,b){b=b||new f.Vector3;b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new f.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);
return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new f.Vector3,b=new f.Vector3,c=new f.Vector3;return function(d,e,g,h){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var k=.5*d.distanceTo(e),l=-this.direction.dot(b),m=c.dot(this.direction),n=-c.dot(b),q=c.lengthSq(),p=Math.abs(1-l*l);if(0<p){d=l*n-m;e=l*m-n;var t=k*p;0<=d?e>=-t?e<=t?(k=1/p,d*=k,e*=k,l=d*(d+l*e+2*m)+e*(l*d+e+2*n)+q):(e=k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*n)+q):
(e=-k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*n)+q):e<=-t?(d=Math.max(0,-(-l*k+m)),e=0<d?-k:Math.min(Math.max(-k,-n),k),l=-d*d+e*(e+2*n)+q):e<=t?(d=0,e=Math.min(Math.max(-k,-n),k),l=e*(e+2*n)+q):(d=Math.max(0,-(l*k+m)),e=0<d?k:Math.min(Math.max(-k,-n),k),l=-d*d+e*(e+2*n)+q)}else e=0<l?-k:k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*n)+q;g&&g.copy(this.direction).multiplyScalar(d).add(this.origin);h&&h.copy(b).multiplyScalar(e).add(a);return l}}(),intersectSphere:function(){var a=new f.Vector3;return function(b,
c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectPlane:function(a,b){var c=a.normal.dot(this.direction);0===c?a=0===a.distanceToPoint(this.origin)?0:null:(a=-(this.origin.dot(a.normal)+a.constant)/c,a=0<=a?a:null);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=
a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectsBox:function(){var a=new f.Vector3;return function(b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,g=this.origin;if(0<=c){var h=(b.min.x-g.x)*c;c*=b.max.x-g.x}else h=(b.max.x-g.x)*c,c*=b.min.x-g.x;if(0<=d){var k=(b.min.y-g.y)*d;d*=b.max.y-g.y}else k=(b.max.y-g.y)*d,d*=b.min.y-g.y;if(h>d||k>c)h=null;else{if(k>h||h!==h)h=k;if(d<c||c!==c)c=d;0<=e?(k=(b.min.z-g.z)*e,b=(b.max.z-
g.z)*e):(k=(b.max.z-g.z)*e,b=(b.min.z-g.z)*e);if(h>b||k>c)h=null;else{if(k>h||h!==h)h=k;if(b<c||c!==c)c=b;h=0>c?null:this.at(0<=h?h:c,a)}}return null!==h}}(),intersectTriangle:function(){var a=new f.Vector3,b=new f.Vector3,c=new f.Vector3,d=new f.Vector3;return function(e,g,h,k,l){b.subVectors(g,e);c.subVectors(h,e);lb(d,b,c);g=this.direction.dot(d);if(0<g){if(k)return null;k=1}else if(0>g)k=-1,g=-g;else return null;a.subVectors(this.origin,e);e=k*this.direction.dot(lb(c,a,c));if(0>e)return null;
h=k*this.direction.dot(zb(b,a));if(0>h||e+h>g)return null;e=-k*a.dot(d);return 0>e?null:this.at(e/g,l)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};f.Sphere=function(a,b){this.center=void 0!==a?a:new f.Vector3;this.radius=void 0!==b?b:0};
f.Sphere.prototype={constructor:f.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new f.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=c=0,g=b.length;e<g;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=
this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);
b=b||new f.Vector3;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new f.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);a=a.elements;this.radius*=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]));return this},translate:function(a){this.center.add(a);
return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};f.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new f.Plane,void 0!==b?b:new f.Plane,void 0!==c?c:new f.Plane,void 0!==d?d:new f.Plane,void 0!==e?e:new f.Plane,void 0!==g?g:new f.Plane]};
function Qb(a,b){a=a.planes;var c=b.elements;b=c[0];var d=c[1],e=c[2],g=c[3],h=c[4],k=c[5],l=c[6],m=c[7],n=c[8],q=c[9],p=c[10],t=c[11],r=c[12],v=c[13],u=c[14];c=c[15];Rb(a[0],g-b,m-h,t-n,c-r).normalize();Rb(a[1],g+b,m+h,t+n,c+r).normalize();Rb(a[2],g+d,m+k,t+q,c+v).normalize();Rb(a[3],g-d,m-k,t-q,c-v).normalize();Rb(a[4],g-e,m-l,t-p,c-u).normalize();Rb(a[5],g+e,m+l,t+p,c+u).normalize()}
f.Frustum.prototype={constructor:f.Frustum,set:function(a,b,c,d,e,g){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(d);h[4].copy(e);h[5].copy(g);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},intersectsObject:function(){var a=new f.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);
return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new f.Sphere;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new f.Vector3,b=new f.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:
c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var h=g.distanceToPoint(a);g=g.distanceToPoint(b);if(0>h&&0>g)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};f.Plane=function(a,b){this.normal=void 0!==a?a:new f.Vector3(1,0,0);this.constant=void 0!==b?b:0};
function Rb(a,b,c,d,e){a.normal.set(b,c,d);a.constant=e;return a}
f.Plane.prototype={constructor:f.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setFromCoplanarPoints:function(){var a=new f.Vector3,b=new f.Vector3;return function(c,d,e){d=zb(a.subVectors(e,d),b.subVectors(c,d)).normalize();this.normal.copy(d);this.constant=-c.dot(this.normal);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();
this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},intersectLine:function(){var a=new f.Vector3;return function(b,c){c=c||new f.Vector3;var d=Eb(b,a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+
this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},applyMatrix4:function(){var a=new f.Vector3,b=new f.Matrix3;return function(c,d){var e=(a||new f.Vector3).copy(this.normal).multiplyScalar(-this.constant).applyMatrix4(c);c=d||Gb(b,c);c=rb(this.normal,c).normalize();this.constant=-e.dot(c);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);
return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};f.Spherical=function(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this};
f.Spherical.prototype={constructor:f.Spherical,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius.copy(a.radius);this.phi.copy(a.phi);this.theta.copy(a.theta);return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(f.Math.clamp(a.y/this.radius,-1,1)));return this}};
f.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+
(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*
(.5-Math.random())},degToRad:function(a){return a*f.Math.DEG2RAD},radToDeg:function(a){return a*f.Math.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
f.Spline=function(a){function b(t,r,v,u,w,x,A){t=.5*(v-t);u=.5*(u-r);return(2*(r-v)+t+u)*A+(-3*(r-v)-2*t-u)*x+t*w+r}this.points=a;var c=[],d={x:0,y:0,z:0},e,g,h,k,l,m,n,q,p;this.initFromArray=function(t){this.points=[];for(var r=0;r<t.length;r++)this.points[r]={x:t[r][0],y:t[r][1],z:t[r][2]}};this.getPoint=function(t){e=(this.points.length-1)*t;g=Math.floor(e);h=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:g+2;m=
this.points[c[0]];n=this.points[c[1]];q=this.points[c[2]];p=this.points[c[3]];k=h*h;l=h*k;d.x=b(m.x,n.x,q.x,p.x,h,k,l);d.y=b(m.y,n.y,q.y,p.y,h,k,l);d.z=b(m.z,n.z,q.z,p.z,h,k,l);return d};this.getControlPointsArray=function(){var t,r=this.points.length,v=[];for(t=0;t<r;t++){var u=this.points[t];v[t]=[u.x,u.y,u.z]}return v};this.getLength=function(t){var r=0,v=new f.Vector3,u=new f.Vector3,w=[],x=0;w[0]=0;t||(t=100);var A=this.points.length*t;v.copy(this.points[0]);for(t=1;t<A;t++){var y=t/A;var B=
this.getPoint(y);u.copy(B);x+=u.distanceTo(v);v.copy(B);y*=this.points.length-1;y=Math.floor(y);y!==r&&(w[y]=x,r=y)}w[w.length]=x;return{chunks:w,total:x}};this.reparametrizeByArcLength=function(t){var r,v=[],u=new f.Vector3,w=this.getLength();v.push(u.copy(this.points[0]).clone());for(r=1;r<this.points.length;r++){var x=w.chunks[r]-w.chunks[r-1];var A=Math.ceil(t*x/w.total);var y=(r-1)/(this.points.length-1);var B=r/(this.points.length-1);for(x=1;x<A-1;x++){var F=y+1/A*x*(B-y);F=this.getPoint(F);
v.push(u.copy(F).clone())}v.push(u.copy(this.points[r]).clone())}this.points=v}};f.Triangle=function(a,b,c){this.a=void 0!==a?a:new f.Vector3;this.b=void 0!==b?b:new f.Vector3;this.c=void 0!==c?c:new f.Vector3};f.Triangle.normal=function(){var a=new f.Vector3;return function(b,c,d,e){e=e||new f.Vector3;e.subVectors(d,c);a.subVectors(b,c);zb(e,a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
f.Triangle.barycoordFromPoint=function(){var a=new f.Vector3,b=new f.Vector3,c=new f.Vector3;return function(d,e,g,h,k){a.subVectors(h,e);b.subVectors(g,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);g=a.dot(c);var l=b.dot(b);h=b.dot(c);var m=d*l-e*e;k=k||new f.Vector3;if(0===m)return k.set(-2,-1,-1);m=1/m;l=(l*g-e*h)*m;d=(d*h-e*g)*m;return k.set(1-l-d,d,l)}}();
f.Triangle.containsPoint=function(){var a=new f.Vector3;return function(b,c,d,e){b=f.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
f.Triangle.prototype={constructor:f.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new f.Vector3,b=new f.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*
zb(a,b).length()}}(),midpoint:function(a){return(a||new f.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return f.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new f.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return f.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return f.Triangle.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,b,c,
d;return function(e,g){void 0===a&&(a=new f.Plane,b=[new f.Line3,new f.Line3,new f.Line3],c=new f.Vector3,d=new f.Vector3);g=g||new f.Vector3;var h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);var k=a,l=c,m=k.distanceToPoint(e);(l||new f.Vector3).copy(k.normal).multiplyScalar(m).sub(e).negate();if(!0===this.containsPoint(c))g.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++)b[e].closestPointToPoint(c,!0,d),k=c.distanceToSquared(d),
k<h&&(h=k,g.copy(d));return g}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};f.Interpolant=function(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c};
f.Interpolant.prototype={constructor:f.Interpolant,evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var g=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===g)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{g=b[1];a<g&&(c=2,e=g);for(g=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===g)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;
c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error("call to abstract method");
},intervalChanged_:function(){}};Object.assign(f.Interpolant.prototype,{beforeStart_:f.Interpolant.prototype.copySampleValue_,afterEnd_:f.Interpolant.prototype.copySampleValue_});f.CubicInterpolant=function(a,b,c,d){f.Interpolant.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0};
f.CubicInterpolant.prototype=Object.assign(Object.create(f.Interpolant.prototype),{constructor:f.CubicInterpolant,DefaultSettings_:{endingStart:f.ZeroCurvatureEnding,endingEnd:f.ZeroCurvatureEnding},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,g=a+1,h=d[e],k=d[g];if(void 0===h)switch((this.settings||this.DefaultSettings_).endingStart){case f.ZeroSlopeEnding:e=a;h=2*b-c;break;case f.WrapAroundEnding:e=d.length-2;h=b+d[e]-d[e+1];break;default:e=a,h=c}if(void 0===k)switch((this.settings||
this.DefaultSettings_).endingEnd){case f.ZeroSlopeEnding:g=a;k=2*c-b;break;case f.WrapAroundEnding:g=1;k=c+d[1]-d[0];break;default:g=a-1,k=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-h);this._weightNext=a/(k-c);this._offsetPrev=e*d;this._offsetNext=g*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h,l=this._offsetPrev,m=this._offsetNext,n=this._weightPrev,q=this._weightNext,p=(c-b)/(d-b);c=p*p;d=c*p;b=-n*d+2*n*c-n*p;n=(1+n)*d+(-1.5-
2*n)*c+(-.5+n)*p+1;p=(-1-q)*d+(1.5+q)*c+.5*p;q=q*d-q*c;for(c=0;c!==h;++c)e[c]=b*g[l+c]+n*g[k+c]+p*g[a+c]+q*g[m+c];return e}});f.DiscreteInterpolant=function(a,b,c,d){f.Interpolant.call(this,a,b,c,d)};f.DiscreteInterpolant.prototype=Object.assign(Object.create(f.Interpolant.prototype),{constructor:f.DiscreteInterpolant,interpolate_:function(a){return this.copySampleValue_(a-1)}});f.LinearInterpolant=function(a,b,c,d){f.Interpolant.call(this,a,b,c,d)};
f.LinearInterpolant.prototype=Object.assign(Object.create(f.Interpolant.prototype),{constructor:f.LinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h;b=(c-b)/(d-b);c=1-b;for(d=0;d!==h;++d)e[d]=g[k+d]*c+g[a+d]*b;return e}});f.QuaternionLinearInterpolant=function(a,b,c,d){f.Interpolant.call(this,a,b,c,d)};
f.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(f.Interpolant.prototype),{constructor:f.QuaternionLinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;b=(c-b)/(d-b);for(c=a+h;a!==c;a+=4)f.Quaternion.slerpFlat(e,0,g,a-h,g,a,b);return e}});f.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
f.Clock.prototype={constructor:f.Clock,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.running=!0},stop:function(){this.autoStart&&!this.running&&this.start();if(this.running){var a=(performance||Date).now();var b=(a-this.oldTime)/1E3;this.oldTime=a;this.elapsedTime+=b}this.running=!1}};f.EventDispatcher=function(){};
Object.assign(f.EventDispatcher.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;var c=[],d,e=b.length;for(d=0;d<e;d++)c[d]=b[d];for(d=0;d<e;d++)c[d].call(this,a)}}}});f.Layers=function(){this.mask=1};f.Layers.prototype={constructor:f.Layers,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!==(this.mask&a.mask)}};
(function(a){function b(d,e){return d.distance-e.distance}function c(d,e,g,h){if(!1!==d.visible&&(d.raycast(e,g),!0===h)){d=d.children;h=0;for(var k=d.length;h<k;h++)c(d[h],e,g,!0)}}a.Raycaster=function(d,e,g,h){this.ray=new a.Ray(d,e);this.near=g||0;this.far=h||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(d,e){this.ray.set(d,e)},setFromCamera:function(d,e){e instanceof a.PerspectiveCamera?(Bb(this.ray.origin,e.matrixWorld),this.ray.direction.set(d.x,d.y,.5).unproject(e).sub(this.ray.origin).normalize()):e instanceof a.OrthographicCamera?(this.ray.origin.set(d.x,d.y,-1).unproject(e),tb(this.ray.direction.set(0,0,-1),e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(d,e){var g=
[];c(d,this,g,e);g.sort(b);return g},intersectObjects:function(d,e){var g=[];if(!1===Array.isArray(d))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var h=0,k=d.length;h<k;h++)c(d[h],this,g,e);g.sort(b);return g}}})(f);
f.Object3D=function(){Object.defineProperty(this,"id",{value:f.Object3DIdCount++});this.uuid=f.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=f.Object3D.DefaultUp.clone();var a=new f.Vector3,b=new f.Euler,c=new f.Quaternion,d=new f.Vector3(1,1,1);b.onChange(function(){eb(c,b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,
value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new f.Matrix4},normalMatrix:{value:new f.Matrix3}});this.matrix=new f.Matrix4;this.matrixWorld=new f.Matrix4;this.matrixAutoUpdate=f.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new f.Layers;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};f.Object3D.DefaultUp=new f.Vector3(0,1,0);f.Object3D.DefaultMatrixAutoUpdate=!0;
Object.assign(f.Object3D.prototype,f.EventDispatcher.prototype,{applyMatrix:function(a){Cb(this.matrix,a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){jb(this.quaternion,a,b)},setRotationFromEuler:function(a){eb(this.quaternion,a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new f.Quaternion;return function(b,
c){jb(a,b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new f.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new f.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new f.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new f.Vector3;return function(b,c){mb(a.copy(b),this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),
translateX:function(){var a=new f.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new f.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new f.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new f.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new f.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof f.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,
b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new f.Vector3;this.updateMatrixWorld(!0);return Bb(a,this.matrixWorld)},getWorldQuaternion:function(){var a=new f.Vector3,b=new f.Vector3;return function(c){c=c||new f.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new f.Quaternion;return function(b){b=b||new f.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=
new f.Vector3,b=new f.Quaternion;return function(c){c=c||new f.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new f.Quaternion;return function(b){b=b||new f.Vector3;this.getWorldQuaternion(a);return mb(b.set(0,0,1),a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<
d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){var a=this.matrix,b=this.position,c=this.scale;Db(a,this.quaternion);a.scale(c);a.setPosition(b);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):Cb(this.matrixWorld,this.parent.matrixWorld,this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(k){var l=[],m;for(m in k){var n=k[m];delete n.metadata;l.push(n)}return l}var c=void 0===a||""===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var e={};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&(e.userData=
this.userData);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&(e.visible=!1);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid);if(0<this.children.length){e.children=
[];for(var g=0;g<this.children.length;g++)e.children.push(this.children[g].toJSON(a).object)}if(c){c=b(a.geometries);g=b(a.materials);var h=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<g.length&&(d.materials=g);0<h.length&&(d.textures=h);0<a.length&&(d.images=a)}d.object=e;return d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);
this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});f.Object3DIdCount=0;
f.Face3=function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d instanceof f.Vector3?d:new f.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof f.Color?e:new f.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==g?g:0};
f.Face3.prototype={constructor:f.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};
f.BufferAttribute=function(a,b,c){this.uuid=f.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=!0===c};function Sb(a,b){a.array.set(b);return a}function Tb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",e),h=new f.Color);c[d++]=h.r;c[d++]=h.g;c[d++]=h.b}return a}
function Ub(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];c[d++]=h.a;c[d++]=h.b;c[d++]=h.c}return a}function Vb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",e),h=new f.Vector2);c[d++]=h.x;c[d++]=h.y}return a}
function Wb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",e),h=new f.Vector3);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z}return a}function Xb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",e),h=new f.Vector4);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z;c[d++]=h.w}return a}
f.BufferAttribute.prototype={constructor:f.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,
b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,
b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return(new this.constructor).copy(this)}};f.Int8Attribute=function(a,b){return new f.BufferAttribute(new Int8Array(a),b)};
f.Uint8Attribute=function(a,b){return new f.BufferAttribute(new Uint8Array(a),b)};f.Uint8ClampedAttribute=function(a,b){return new f.BufferAttribute(new Uint8ClampedArray(a),b)};f.Int16Attribute=function(a,b){return new f.BufferAttribute(new Int16Array(a),b)};f.Uint16Attribute=function(a,b){return new f.BufferAttribute(new Uint16Array(a),b)};f.Int32Attribute=function(a,b){return new f.BufferAttribute(new Int32Array(a),b)};
f.Uint32Attribute=function(a,b){return new f.BufferAttribute(new Uint32Array(a),b)};f.Float32Attribute=function(a,b){return new f.BufferAttribute(new Float32Array(a),b)};f.Float64Attribute=function(a,b){return new f.BufferAttribute(new Float64Array(a),b)};f.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new f.BufferAttribute(a,b)).setDynamic(!0)};
f.InstancedBufferAttribute=function(a,b,c){f.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};f.InstancedBufferAttribute.prototype=Object.create(f.BufferAttribute.prototype);f.InstancedBufferAttribute.prototype.constructor=f.InstancedBufferAttribute;f.InstancedBufferAttribute.prototype.copy=function(a){f.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};
f.InterleavedBuffer=function(a,b){this.uuid=f.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
f.InterleavedBuffer.prototype={constructor:f.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,
b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)}};f.InstancedInterleavedBuffer=function(a,b,c){f.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};f.InstancedInterleavedBuffer.prototype=Object.create(f.InterleavedBuffer.prototype);f.InstancedInterleavedBuffer.prototype.constructor=f.InstancedInterleavedBuffer;
f.InstancedInterleavedBuffer.prototype.copy=function(a){f.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};f.InterleavedBufferAttribute=function(a,b,c){this.uuid=f.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c};
f.InterleavedBufferAttribute.prototype={constructor:f.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.count},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,
b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,
d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
f.Geometry=function(){Object.defineProperty(this,"id",{value:f.GeometryIdCount++});this.uuid=f.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=
this.verticesNeedUpdate=!1};
Object.assign(f.Geometry.prototype,f.EventDispatcher.prototype,{applyMatrix:function(a){for(var b=Gb(new f.Matrix3,a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];rb(a.normal,b).normalize();for(var e=0,g=a.vertexNormals.length;e<g;e++)rb(a.vertexNormals[e],b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=
!0;return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Hb(a,b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Ib(a,b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Jb(a,b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Matrix4);a.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);this.applyMatrix(a);
return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Matrix4);a.set(b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new f.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(w,x,A,y){var B=void 0!==h?[n[w].clone(),n[x].clone(),n[A].clone()]:[],F=void 0!==k?[c.colors[w].clone(),c.colors[x].clone(),c.colors[A].clone()]:[];y=new f.Face3(w,
x,A,B,F,y);c.faces.push(y);void 0!==l&&c.faceVertexUvs[0].push([q[w].clone(),q[x].clone(),q[A].clone()]);void 0!==m&&c.faceVertexUvs[1].push([p[w].clone(),p[x].clone(),p[A].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,g=e.position.array,h=void 0!==e.normal?e.normal.array:void 0,k=void 0!==e.color?e.color.array:void 0,l=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var n=[],q=[],p=[],t=e=0;e<g.length;e+=3,
t+=2)c.vertices.push(new f.Vector3(g[e],g[e+1],g[e+2])),void 0!==h&&n.push(new f.Vector3(h[e],h[e+1],h[e+2])),void 0!==k&&c.colors.push(new f.Color(k[e],k[e+1],k[e+2])),void 0!==l&&q.push(new f.Vector2(l[t],l[t+1])),void 0!==m&&p.push(new f.Vector2(m[t],m[t+1]));if(void 0!==d)if(g=a.groups,0<g.length)for(e=0;e<g.length;e++){var r=g[e],v=r.start,u=r.count;t=v;for(v+=u;t<v;t+=3)b(d[t],d[t+1],d[t+2],r.materialIndex)}else for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<g.length/3;e+=3)b(e,
e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius;b=0===b?1:1/b;var c=new f.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,
0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new f.Vector3,b=new f.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],g=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(g,h);zb(a,b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new f.Vector3;if(a){var e=new f.Vector3,g=new f.Vector3;a=0;for(d=
this.faces.length;a<d;a++){b=this.faces[a];var h=this.vertices[b.a];var k=this.vertices[b.b];var l=this.vertices[b.c];e.subVectors(l,k);g.subVectors(h,k);zb(e,g);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],h=b.vertexNormals,3===h.length?(h[0].copy(c[b.a]),h[1].copy(c[b.b]),
h[2].copy(c[b.c])):(h[0]=c[b.a].clone(),h[1]=c[b.b].clone(),h[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):
d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var g=new f.Geometry;g.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var h=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var k=new f.Vector3;var l={a:new f.Vector3,b:new f.Vector3,c:new f.Vector3};d.push(k);h.push(l)}}h=this.morphNormals[e];g.vertices=
this.morphTargets[e].vertices;g.computeFaceNormals();g.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],k=h.faceNormals[c],l=h.vertexNormals[c],k.copy(d.normal),l.a.copy(d.vertexNormals[0]),l.b.copy(d.vertexNormals[1]),l.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var a=
0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new f.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof f.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a);else{var d,e=this.vertices.length,g=this.vertices,h=a.vertices,k=this.faces,l=a.faces,m=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=Gb(new f.Matrix3,b));for(var n=0,q=h.length;n<q;n++){var p=h[n].clone();void 0!==b&&p.applyMatrix4(b);g.push(p)}n=0;for(q=l.length;n<q;n++){h=l[n];var t=h.vertexNormals,r=h.vertexColors;p=new f.Face3(h.a+e,h.b+e,h.c+e);p.normal.copy(h.normal);void 0!==d&&rb(p.normal,d).normalize();b=0;for(g=t.length;b<g;b++){var v=t[b].clone();void 0!==
d&&rb(v,d).normalize();p.vertexNormals.push(v)}p.color.copy(h.color);b=0;for(g=r.length;b<g;b++)v=r[b],p.vertexColors.push(v.clone());p.materialIndex=h.materialIndex+c;k.push(p)}n=0;for(q=a.length;n<q;n++)if(c=a[n],d=[],void 0!==c){b=0;for(g=c.length;b<g;b++)d.push(c[b].clone());m.push(d)}}},mergeMesh:function(a){!1===a instanceof f.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a=
{},b=[],c=[],d=Math.pow(10,4),e;var g=0;for(e=this.vertices.length;g<e;g++){var h=this.vertices[g];h=Math.round(h.x*d)+"_"+Math.round(h.y*d)+"_"+Math.round(h.z*d);void 0===a[h]?(a[h]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[h]]}a=[];g=0;for(e=this.faces.length;g<e;g++)for(d=this.faces[g],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],h=0;3>h;h++)if(d[h]===d[(h+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(d=a[g],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,
1);g=this.vertices.length-b.length;this.vertices=b;return g},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(l,m){return l.materialIndex-m.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],g,h;d&&d.length===b&&(g=[]);e&&e.length===b&&(h=[]);for(c=0;c<b;c++){var k=a[c]._id;g&&g.push(d[k]);h&&h.push(e[k])}g&&(this.faceVertexUvs[0]=g);h&&(this.faceVertexUvs[1]=h)},toJSON:function(){function a(B,F,K){return K?B|1<<F:B&~(1<<F)}
function b(B){var F=B.x.toString()+B.y.toString()+B.z.toString();if(void 0!==m[F])return m[F];m[F]=l.length/3;l.push(B.x,B.y,B.z);return m[F]}function c(B){var F=B.r.toString()+B.g.toString()+B.b.toString();if(void 0!==q[F])return q[F];q[F]=n.length;n.push(db(B));return q[F]}function d(B){var F=B.x.toString()+B.y.toString();if(void 0!==t[F])return t[F];t[F]=p.length/2;p.push(B.x,B.y);return t[F]}var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;
""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var g=this.parameters,h;for(h in g)void 0!==g[h]&&(e[h]=g[h]);return e}g=[];for(h=0;h<this.vertices.length;h++){var k=this.vertices[h];g.push(k.x,k.y,k.z)}k=[];var l=[],m={},n=[],q={},p=[],t={};for(h=0;h<this.faces.length;h++){var r=this.faces[h],v=void 0!==this.faceVertexUvs[0][h],u=0<r.normal.length(),w=0<r.vertexNormals.length,x=1!==r.color.r||1!==r.color.g||1!==r.color.b,A=0<r.vertexColors.length,y=0;y=a(y,0,0);y=a(y,1,!0);y=a(y,
2,!1);y=a(y,3,v);y=a(y,4,u);y=a(y,5,w);y=a(y,6,x);y=a(y,7,A);k.push(y);k.push(r.a,r.b,r.c);k.push(r.materialIndex);v&&(v=this.faceVertexUvs[0][h],k.push(d(v[0]),d(v[1]),d(v[2])));u&&k.push(b(r.normal));w&&(u=r.vertexNormals,k.push(b(u[0]),b(u[1]),b(u[2])));x&&k.push(c(r.color));A&&(r=r.vertexColors,k.push(c(r[0]),c(r[1]),c(r[2])))}e.data={};e.data.vertices=g;e.data.normals=l;0<n.length&&(e.data.colors=n);0<p.length&&(e.data.uvs=[p]);e.data.faces=k;return e},clone:function(){return(new f.Geometry).copy(this)},
copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,g=b.length;e<g;e++){for(var h=b[e],k=[],l=0,m=h.length;l<m;l++)k.push(h[l].clone());this.faceVertexUvs[c].push(k)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
f.GeometryIdCount=0;f.DirectGeometry=function(){Object.defineProperty(this,"id",{value:f.GeometryIdCount++});this.uuid=f.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
Object.assign(f.DirectGeometry.prototype,f.EventDispatcher.prototype,{computeBoundingBox:f.Geometry.prototype.computeBoundingBox,computeBoundingSphere:f.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b=[];a=a.faces;
for(var c=0;c<a.length;c++){var d=a[c];if(d.materialIndex!==e){var e=d.materialIndex;void 0!==g&&(g.count=3*c-g.start,b.push(g));var g={start:3*c,materialIndex:e}}}void 0!==g&&(g.count=3*c-g.start,b.push(g));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,h=a.morphTargets,k=h.length;if(0<k){var l=[];for(var m=0;m<k;m++)l[m]=[];this.morphTargets.position=l}var n=a.morphNormals,q=n.length;if(0<q){var p=[];for(m=0;m<q;m++)p[m]=
[];this.morphTargets.normal=p}var t=a.skinIndices,r=a.skinWeights,v=t.length===c.length,u=r.length===c.length;for(m=0;m<b.length;m++){var w=b[m];this.vertices.push(c[w.a],c[w.b],c[w.c]);var x=w.vertexNormals;3===x.length?this.normals.push(x[0],x[1],x[2]):(x=w.normal,this.normals.push(x,x,x));x=w.vertexColors;3===x.length?this.colors.push(x[0],x[1],x[2]):(x=w.color,this.colors.push(x,x,x));!0===e&&(x=d[0][m],void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
m),this.uvs.push(new f.Vector2,new f.Vector2,new f.Vector2)));!0===g&&(x=d[1][m],void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new f.Vector2,new f.Vector2,new f.Vector2)));for(x=0;x<k;x++){var A=h[x].vertices;l[x].push(A[w.a],A[w.b],A[w.c])}for(x=0;x<q;x++)A=n[x].vertexNormals[m],p[x].push(A.a,A.b,A.c);v&&this.skinIndices.push(t[w.a],t[w.b],t[w.c]);u&&this.skinWeights.push(r[w.a],r[w.b],r[w.c])}this.computeGroups(a);
this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
f.BufferGeometry=function(){Object.defineProperty(this,"id",{value:f.GeometryIdCount++});this.uuid=f.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
Object.assign(f.BufferGeometry.prototype,f.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){if(!1===b instanceof f.BufferAttribute&&!1===b instanceof f.InterleavedBufferAttribute)console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new f.BufferAttribute(b,c));else if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
this.setIndex(b);else return this.attributes[a]=b,this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;
void 0!==b&&(Gb(new f.Matrix3,a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Hb(a,b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);Ib(a,b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new f.Matrix4);
Jb(a,b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Matrix4);a.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new f.Matrix4);a.set(b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new f.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();
var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof f.Points||a instanceof f.Line){a=new f.Float32Attribute(3*b.vertices.length,3);var c=new f.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",Wb(a,b.vertices));this.addAttribute("color",Tb(c,b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new f.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",
Sb(a,b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof f.Mesh&&b instanceof f.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof f.Mesh){var c=b.__directGeometry;if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;
c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(Wb(c,b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(Wb(c,b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(Tb(c,
b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(Vb(c,b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(Sb(c,b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new f.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},
fromDirectGeometry:function(a){this.addAttribute("position",Wb(new f.BufferAttribute(new Float32Array(3*a.vertices.length),3),a.vertices));0<a.normals.length&&this.addAttribute("normal",Wb(new f.BufferAttribute(new Float32Array(3*a.normals.length),3),a.normals));0<a.colors.length&&this.addAttribute("color",Tb(new f.BufferAttribute(new Float32Array(3*a.colors.length),3),a.colors));0<a.uvs.length&&this.addAttribute("uv",Vb(new f.BufferAttribute(new Float32Array(2*a.uvs.length),2),a.uvs));0<a.uvs2.length&&
this.addAttribute("uv2",Vb(new f.BufferAttribute(new Float32Array(2*a.uvs2.length),2),a.uvs2));0<a.indices.length&&this.setIndex(Ub(new f.BufferAttribute(new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),1),a.indices));this.groups=a.groups;for(var b in a.morphTargets){for(var c=[],d=a.morphTargets[b],e=0,g=d.length;e<g;e++){var h=d[e],k=new f.Float32Attribute(3*h.length,3);c.push(Wb(k,h))}this.morphAttributes[b]=c}0<a.skinIndices.length&&(b=new f.Float32Attribute(4*a.skinIndices.length,
4),this.addAttribute("skinIndex",Xb(b,a.skinIndices)));0<a.skinWeights.length&&(b=new f.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",Xb(b,a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f.Box3);var a=this.attributes.position.array;void 0!==a?Fb(this.boundingBox,a):this.boundingBox.makeEmpty();
(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new f.Box3,b=new f.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new f.Sphere);var c=this.attributes.position.array;if(c){var d=this.boundingSphere.center;Fb(a,c);a.center(d);for(var e=
0,g=0,h=c.length;g<h;g+=3)b.fromArray(c,g),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",
new f.BufferAttribute(new Float32Array(d.length),3));else for(var e=b.normal.array,g=0,h=e.length;g<h;g++)e[g]=0;e=b.normal.array;var k=new f.Vector3,l=new f.Vector3,m=new f.Vector3,n=new f.Vector3,q=new f.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var p=0,t=c.length;p<t;++p){g=c[p];h=g.start;var r=g.count;g=h;for(h+=r;g<h;g+=3){r=3*a[g+0];var v=3*a[g+1];var u=3*a[g+2];k.fromArray(d,r);l.fromArray(d,v);m.fromArray(d,u);n.subVectors(m,l);q.subVectors(k,l);zb(n,q);e[r]+=n.x;
e[r+1]+=n.y;e[r+2]+=n.z;e[v]+=n.x;e[v+1]+=n.y;e[v+2]+=n.z;e[u]+=n.x;e[u+1]+=n.y;e[u+2]+=n.z}}}else for(g=0,h=d.length;g<h;g+=9)k.fromArray(d,g),l.fromArray(d,g+3),m.fromArray(d,g+6),n.subVectors(m,l),q.subVectors(k,l),zb(n,q),e[g]=n.x,e[g+1]=n.y,e[g+2]=n.z,e[g+3]=n.x,e[g+4]=n.y,e[g+5]=n.z,e[g+6]=n.x,e[g+7]=n.y,e[g+8]=n.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(!1===a instanceof f.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
a);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d]){var e=c[d].array,g=a.attributes[d],h=g.array,k=0;for(g=g.itemSize*b;k<h.length;k++,g++)e[g]=h[k]}return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,g=a.length;e<g;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
this;var a=new f.BufferGeometry,b=this.index.array,c=this.attributes,d;for(d in c){var e=c[d],g=e.array;e=e.itemSize;for(var h=new g.constructor(b.length*e),k,l=0,m=0,n=b.length;m<n;m++){k=b[m]*e;for(var q=0;q<e;q++)h[l++]=g[k++]}a.addAttribute(d,new f.BufferAttribute(h,e))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;
for(e in b)void 0!==b[e]&&(a[e]=b[e]);return a}a.data={attributes:{}};var c=this.index;null!==c&&(b=Array.prototype.slice.call(c.array),a.data.index={type:c.array.constructor.name,array:b});c=this.attributes;for(e in c){var d=c[e];b=Array.prototype.slice.call(d.array);a.data.attributes[e]={itemSize:d.itemSize,type:d.array.constructor.name,array:b,normalized:d.normalized}}var e=this.groups;0<e.length&&(a.data.groups=JSON.parse(JSON.stringify(e)));e=this.boundingSphere;null!==e&&(a.data.boundingSphere=
{center:e.center.toArray(),radius:e.radius});return a},clone:function(){return(new f.BufferGeometry).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());b=a.attributes;for(var c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});f.BufferGeometry.MaxIndex=65535;
f.InstancedBufferGeometry=function(){f.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};f.InstancedBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.InstancedBufferGeometry.prototype.constructor=f.InstancedBufferGeometry;f.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};
f.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());b=a.attributes;for(var c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};f.Uniform=function(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a;this.dynamic=!1};
f.Uniform.prototype={constructor:f.Uniform,onUpdate:function(a){this.dynamic=!0;this.onUpdateCallback=a;return this}};f.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.");};
f.AnimationAction._new=function(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:f.ZeroCurvatureEnding,endingEnd:f.ZeroCurvatureEnding},e=0;e!==b;++e){var g=a[e].createInterpolant(null);c[e]=g;g.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=f.LoopRepeat;this._loopCount=-1;this._startTime=
null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};function Yb(a){var b=a._weightInterpolant;null!==b&&(a._weightInterpolant=null,a._mixer._takeBackControlInterpolant(b));return a}function Zb(a){var b=a._timeScaleInterpolant;null!==b&&(a._timeScaleInterpolant=null,a._mixer._takeBackControlInterpolant(b));return a}
function $b(a,b,c,d){var e=a._mixer,g=e.time,h=a._weightInterpolant;null===h&&(h=e._lendControlInterpolant(),a._weightInterpolant=h);a=h.parameterPositions;h=h.sampleValues;a[0]=g;h[0]=c;a[1]=g+b;h[1]=d}function ac(a,b,c,d){var e=a._mixer,g=e.time,h=a._timeScaleInterpolant,k=a.timeScale;null===h&&(h=e._lendControlInterpolant(),a._timeScaleInterpolant=h);e=h.parameterPositions;h=h.sampleValues;e[0]=g;e[1]=g+d;h[0]=b/k;h[1]=c/k;return a}
function bc(a,b,c,d){var e=a._interpolantSettings;d?(e.endingStart=f.ZeroSlopeEnding,e.endingEnd=f.ZeroSlopeEnding):(e.endingStart=b?a.zeroSlopeAtStart?f.ZeroSlopeEnding:f.ZeroCurvatureEnding:f.WrapAroundEnding,e.endingEnd=c?a.zeroSlopeAtEnd?f.ZeroSlopeEnding:f.ZeroCurvatureEnding:f.WrapAroundEnding)}
f.AnimationAction._new.prototype={constructor:f.AnimationAction._new,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return Zb(Yb(this))},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},
startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return Yb(this)},getEffectiveWeight:function(){return this._effectiveWeight},crossFadeTo:function(a,b,c){$b(this,b,1,0);$b(a,b,0,1);if(c){c=a._clip.duration;var d=this._clip.duration,e=c/d;ac(this,1,d/c,b);ac(a,e,1,b)}return a},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=
this.paused?0:a;return Zb(this)},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return Zb(this)},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return Zb(this)},halt:function(a){return ac(this,this._effectiveTimeScale,0,a)},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){var e=this._startTime;
if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}c=b;b=0;if(!this.paused&&(b=this.timeScale,e=this._timeScaleInterpolant,null!==e)){var g=e.evaluate(a)[0];b*=g;a>e.parameterPositions[1]&&(Zb(this),0===b?this.paused=!0:this.timeScale=b)}this._effectiveTimeScale=b;a:if(g=c*b,c=this.time+g,0!==g){b=this._clip.duration;var h=this.loop;e=this._loopCount;if(h===f.LoopOnce)b:{if(-1===e&&(this.loopCount=0,bc(this,!0,!0,!1)),c>=b)c=b;else if(0>c)c=0;else break b;this.clampWhenFinished?
this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>g?-1:1})}else{h=h===f.LoopPingPong;-1===e&&(0<=g?(e=0,bc(this,!0,0===this.repetitions,h)):bc(this,0===this.repetitions,!0,h));if(c>=b||0>c){var k=Math.floor(c/b);c-=b*k;e+=Math.abs(k);var l=this.repetitions-e;0>l?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=0<g?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<g?1:-1})):(0===l?(g=0>g,bc(this,g,!g,h)):bc(this,!1,!1,h),
this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:k}))}if(h&&1===(e&1)){this.time=c;c=b-c;break a}}this.time=c}b=0;this.enabled&&(b=this.weight,e=this._weightInterpolant,null!==e&&(g=e.evaluate(a)[0],b*=g,a>e.parameterPositions[1]&&(Yb(this),0===g&&(this.enabled=!1))));a=this._effectiveWeight=b;if(0<a)for(b=this._interpolants,e=this._propertyBindings,g=0,h=b.length;g!==h;++g){b[g].evaluate(c);k=e[g];l=a;var m=k.buffer,n=k.valueSize,q=d*n+n,p=k.cumulativeWeight;if(0===
p){for(p=0;p!==n;++p)m[q+p]=m[p];p=l}else p+=l,k._mixBufferRegion(m,q,0,l/p,n);k.cumulativeWeight=p}}};f.AnimationClip=function(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=f.Math.generateUUID();if(0>this.duration){b=a=0;for(c=this.tracks.length;b!==c;++b){var d=this.tracks[b];a=Math.max(a,d.times[d.times.length-1])}this.duration=a}this.trim();this.optimize()};
f.AnimationClip.prototype={constructor:f.AnimationClip,trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};
Object.assign(f.AnimationClip,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,g=c.length;e!==g;++e)b.push(f.KeyframeTrack.parse(c[e]).scale(d));return new f.AnimationClip(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(f.KeyframeTrack.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,g=[],h=0;h<e;h++){var k=[],l=[];k.push((h+e-1)%e,h,(h+1)%e);l.push(0,
1,0);var m=f.AnimationUtils.getKeyframeOrder(k);k=f.AnimationUtils.sortedArray(k,1,m);l=f.AnimationUtils.sortedArray(l,1,m);d||0!==k[0]||(k.push(e),l.push(l[0]));g.push((new f.NumberKeyframeTrack(".morphTargetInfluences["+b[h].name+"]",k,l)).scale(1/c))}return new f.AnimationClip(a,-1,g)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,
b,c){for(var d={},e=/^([\w-]*?)([\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],l=k.name.match(e);if(l&&1<l.length){var m=l[1];(l=d[m])||(d[m]=l=[]);l.push(k)}}a=[];for(m in d)a.push(f.AnimationClip.CreateFromMorphTargetSequence(m,d[m],b,c));return a},parseAnimation:function(a,b){function c(v,u,w,x,A){if(0!==w.length){var y=[],B=[];f.AnimationUtils.flattenJSON(w,y,B,x);0!==y.length&&A.push(new v(u,y,B))}}if(!a)return console.error("  no animation in JSONLoader data"),null;var d=[],e=a.name||"default",
g=a.length||-1,h=a.fps||30;a=a.hierarchy||[];for(var k=0;k<a.length;k++){var l=a[k].keys;if(l&&0!==l.length)if(l[0].morphTargets){g={};for(var m=0;m<l.length;m++)if(l[m].morphTargets)for(var n=0;n<l[m].morphTargets.length;n++)g[l[m].morphTargets[n]]=-1;for(var q in g){var p=[],t=[];for(n=0;n!==l[m].morphTargets.length;++n){var r=l[m];p.push(r.time);t.push(r.morphTarget===q?1:0)}d.push(new f.NumberKeyframeTrack(".morphTargetInfluence["+q+"]",p,t))}g=g.length*(h||1)}else m=".bones["+b[k].name+"]",c(f.VectorKeyframeTrack,
m+".position",l,"pos",d),c(f.QuaternionKeyframeTrack,m+".quaternion",l,"rot",d),c(f.VectorKeyframeTrack,m+".scale",l,"scl",d)}return 0===d.length?null:new f.AnimationClip(e,g,d)}});f.AnimationMixer=function(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1};
Object.assign(f.AnimationMixer.prototype,f.EventDispatcher.prototype,{clipAction:function(a,b){var c=b||this._root,d=c.uuid;c="string"===typeof a?f.AnimationClip.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],g=null;if(void 0!==e){g=e.actionByRoot[d];if(void 0!==g)return g;g=e.knownActions[0];null===c&&(c=g._clip)}if(null===c)return null;b=new f.AnimationMixer._Action(this,c,b);this._bindAction(b,g);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||
this._root;b=c.uuid;c="string"===typeof a?f.AnimationClip.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),
g=this._accuIndex^=1,h=0;h!==c;++h){var k=b[h];k.enabled&&k._update(d,a,e,g)}a=this._bindings;b=this._nActiveBindings;for(h=0;h!==b;++h)a[h].apply(g);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){d=d.knownActions;for(var e=0,g=d.length;e!==g;++e){var h=d[e];this._deactivateAction(h);var k=h._cacheIndex,l=b[b.length-1];h._cacheIndex=null;h._byClipCacheIndex=null;l._cacheIndex=k;b[k]=l;b.pop();
this._removeInactiveBindingsForAction(h)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.binding.setValue(a.buffer,3*a.valueSize),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});
f.AnimationMixer._Action=f.AnimationAction._new;
Object.assign(f.AnimationMixer.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,g=a._propertyBindings;a=a._interpolants;var h=c.uuid,k=this._bindingsByRootAndName,l=k[h];void 0===l&&(l={},k[h]=l);for(k=0;k!==e;++k){var m=d[k],n=m.name,q=l[n];if(void 0===q){q=g[k];if(void 0!==q){null===q._cacheIndex&&(++q.referenceCount,this._addInactiveBinding(q,h,n));continue}q=new f.PropertyMixer(f.PropertyBinding.create(c,n,b&&b._propertyBindings[k].binding.parsedPath),
m.ValueTypeName,cc(m));++q.referenceCount;this._addInactiveBinding(q,h,n)}g[k]=q;a[k].resultBuffer=q.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];if(0===e.useCount++){this._lendBinding(e);var g=e.buffer,h=e.valueSize,k=3*h;e.binding.getValue(g,
k);for(var l=h;l!==k;++l)g[l]=g[k+l%h];e.cumulativeWeight=0}}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.binding.setValue(e.buffer,3*e.valueSize),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=
[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=
this._actionsByClip,g=e[b];void 0===g?(g={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=g):(b=g.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);g.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;c=a._clip.uuid;d=this._actionsByClip;var e=d[c],g=e.knownActions,h=g[g.length-1],k=a._byClipCacheIndex;h._byClipCacheIndex=k;g[k]=h;g.pop();a._byClipCacheIndex=
null;delete e.actionByRoot[(b._localRoot||this._root).uuid];0===g.length&&delete d[c];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=
--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],g=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=g.length;g.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid;c=c.path;var e=this._bindingsByRootAndName,g=e[d],h=b[b.length-1];a=a._cacheIndex;h._cacheIndex=a;b[a]=h;b.pop();delete g[c];a:{for(var k in g)break a;delete e[d]}},_lendBinding:function(a){var b=
this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new f.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=
b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1)});
f.AnimationObjectGroup=function(a){this.uuid=f.Math.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}};
f.AnimationObjectGroup.prototype={constructor:f.AnimationObjectGroup,add:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,g=this._paths,h=this._parsedPaths,k=this._bindings,l=k.length,m=0,n=arguments.length;m!==n;++m){var q=arguments[m],p=q.uuid,t=e[p];if(void 0===t){t=c++;e[p]=t;b.push(q);p=0;for(var r=l;p!==r;++p)k[p].push(new f.PropertyBinding(q,g[p],h[p]))}else if(t<d){var v=b[t],u=--d;r=b[u];e[r.uuid]=t;b[t]=r;e[p]=u;b[u]=q;p=0;for(r=l;p!==r;++p){var w=
k[p],x=w[t];w[t]=w[u];void 0===x&&(x=new f.PropertyBinding(q,g[p],h[p]));w[u]=x}}else b[t]!==v&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=d},remove:function(a){for(var b=this._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,g=e.length,h=0,k=arguments.length;h!==k;++h){var l=arguments[h],m=l.uuid,n=d[m];if(void 0!==n&&n>=c){var q=c++,p=b[q];d[p.uuid]=n;b[n]=p;d[m]=
q;b[q]=l;l=0;for(m=g;l!==m;++l){p=e[l];var t=p[n];p[n]=p[q];p[q]=t}}}this.nCachedObjects_=c},uncache:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,g=this._bindings,h=g.length,k=0,l=arguments.length;k!==l;++k){var m=arguments[k].uuid,n=e[m];if(void 0!==n)if(delete e[m],n<d){m=--d;var q=b[m],p=--c,t=b[p];e[q.uuid]=n;b[n]=q;e[t.uuid]=m;b[m]=t;b.pop();q=0;for(t=h;q!==t;++q){var r=g[q],v=r[p];r[n]=r[m];r[m]=v;r.pop()}}else for(p=--c,t=b[p],e[t.uuid]=n,b[n]=
t,b.pop(),q=0,t=h;q!==t;++q)r=g[q],r[n]=r[p],r.pop()}this.nCachedObjects_=d},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,g=this._bindings,h=g.length-1,k=g[h];b[a[h]]=c;g[c]=k;g.pop();e[c]=e[h];e.pop();d[c]=d[h];d.pop()}}};
f.AnimationUtils={arraySlice:function(a,b,c){return f.AnimationUtils.isTypedArray(a)?new a.constructor(a.subarray(b,c)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(e,g){return a[e]-a[g]});return c},sortedArray:function(a,
b,c){for(var d=a.length,e=new a.constructor(d),g=0,h=0;h!==d;++g)for(var k=c[g]*b,l=0;l!==b;++l)e[h++]=a[k+l];return e},flattenJSON:function(a,b,c,d){for(var e=1,g=a[0];void 0!==g&&void 0===g[d];)g=a[e++];if(void 0!==g){var h=g[d];if(void 0!==h)if(Array.isArray(h)){do h=g[d],void 0!==h&&(b.push(g.time),c.push.apply(c,h)),g=a[e++];while(void 0!==g)}else if(void 0!==h.toArray){do h=g[d],void 0!==h&&(b.push(g.time),h.toArray(c,c.length)),g=a[e++];while(void 0!==g)}else{do h=g[d],void 0!==h&&(b.push(g.time),
c.push(h)),g=a[e++];while(void 0!==g)}}}};f.KeyframeTrack=function(a,b,c,d){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keyframes in track named "+a);this.name=a;this.times=f.AnimationUtils.convertArray(b,this.TimeBufferType);this.values=f.AnimationUtils.convertArray(c,this.ValueBufferType);dc(this,d||this.DefaultInterpolation);this.validate();this.optimize()};function cc(a){return a.values.length/a.times.length}
function dc(a,b){switch(b){case f.InterpolateDiscrete:var c=a.InterpolantFactoryMethodDiscrete;break;case f.InterpolateLinear:c=a.InterpolantFactoryMethodLinear;break;case f.InterpolateSmooth:c=a.InterpolantFactoryMethodSmooth}if(void 0===c){c="unsupported interpolation for "+a.ValueTypeName+" keyframe track named "+a.name;if(void 0===a.createInterpolant)if(b!==a.DefaultInterpolation)dc(a,a.DefaultInterpolation);else throw Error(c);console.warn(c)}else a.createInterpolant=c}
f.KeyframeTrack.prototype={constructor:f.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:f.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(a){return new f.DiscreteInterpolant(this.times,this.values,cc(this),a)},InterpolantFactoryMethodLinear:function(a){return new f.LinearInterpolant(this.times,this.values,cc(this),a)},InterpolantFactoryMethodSmooth:function(a){return new f.CubicInterpolant(this.times,this.values,cc(this),a)},shift:function(a){if(0!==
a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,g=d-1;e!==d&&c[e]<a;)++e;for(;-1!==g&&c[g]>b;)--g;++g;if(0!==e||g!==d)e>=g&&(g=Math.max(g,1),e=g-1),a=cc(this),this.times=f.AnimationUtils.arraySlice(c,e,g),this.values=f.AnimationUtils.arraySlice(this.values,e*a,g*a);return this},validate:function(){var a=!0,b=cc(this);0!==b-Math.floor(b)&&
(console.error("invalid value size in track",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error("track is empty",this),a=!1);for(var e=null,g=0;g!==d;g++){var h=c[g];if("number"===typeof h&&isNaN(h)){console.error("time is not a valid number",this,g,h);a=!1;break}if(null!==e&&e>h){console.error("out of order keys",this,g,h,e);a=!1;break}e=h}if(void 0!==b&&f.AnimationUtils.isTypedArray(b))for(g=0,c=b.length;g!==c;++g)if(d=b[g],isNaN(d)){console.error("value is not a valid number",
this,g,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,c=cc(this),d=1,e=1,g=a.length-1;e<=g;++e){var h=!1,k=a[e];if(k!==a[e+1]&&(1!==e||k!==k[0])){var l=e*c,m=l-c,n=l+c;for(k=0;k!==c;++k){var q=b[l+k];if(q!==b[m+k]||q!==b[n+k]){h=!0;break}}}if(h){if(e!==d)for(a[d]=a[e],h=e*c,l=d*c,k=0;k!==c;++k)b[l+k]=b[h+k];++d}}d!==a.length&&(this.times=f.AnimationUtils.arraySlice(a,0,d),this.values=f.AnimationUtils.arraySlice(b,0,d*c));return this}};
Object.assign(f.KeyframeTrack,{parse:function(a){if(void 0===a.type)throw Error("track type undefined, can not parse");var b=f.KeyframeTrack._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];f.AnimationUtils.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:f.AnimationUtils.convertArray(a.times,
Array),values:f.AnimationUtils.convertArray(a.values,Array)};a:{switch(a.createInterpolant){case a.InterpolantFactoryMethodDiscrete:var c=f.InterpolateDiscrete;break a;case a.InterpolantFactoryMethodLinear:c=f.InterpolateLinear;break a;case a.InterpolantFactoryMethodSmooth:c=f.InterpolateSmooth;break a}c=void 0}c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return f.NumberKeyframeTrack;
case "vector":case "vector2":case "vector3":case "vector4":return f.VectorKeyframeTrack;case "color":return f.ColorKeyframeTrack;case "quaternion":return f.QuaternionKeyframeTrack;case "bool":case "boolean":return f.BooleanKeyframeTrack;case "string":return f.StringKeyframeTrack}throw Error("Unsupported typeName: "+a);}});
f.PropertyBinding=function(a,b,c){this.path=b;this.parsedPath=c||f.PropertyBinding.parseTrackName(b);this.node=f.PropertyBinding.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a};
f.PropertyBinding.prototype={constructor:f.PropertyBinding,getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=f.PropertyBinding.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var g=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("  can not bind to material as node does not have a material",
this);return}if(!a.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===g){g=c;break}break;default:if(void 0===a[c]){console.error("  can not bind to objectName of node, undefined",this);return}a=a[c]}if(void 0!==g){if(void 0===
a[g]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);return}a=a[g]}}if(g=a[d]){b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",
this);return}if(!a.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=g;this.propertyIndex=e}else void 0!==g.fromArray&&void 0!==g.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=g):void 0!==g.length?(c=this.BindingType.EntireArray,this.resolvedProperty=
g):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}else console.error("  trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};
Object.assign(f.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:f.PropertyBinding.prototype.getValue,_setValue_unbound:f.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},
function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,
d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,
b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});
f.PropertyBinding.Composite=function(a,b,c){c=c||f.PropertyBinding.parseTrackName(b);this._targetGroup=a;var d=a._bindingsIndicesByPath,e=d[b],g=a._bindings;if(void 0!==e)b=g[e];else{var h=a._paths,k=a._parsedPaths,l=a._objects,m=a.nCachedObjects_;a=Array(l.length);e=g.length;d[b]=e;h.push(b);k.push(c);g.push(a);d=m;for(e=l.length;d!==e;++d)a[d]=new f.PropertyBinding(l[d],b,c);b=a}this._bindings=b};
f.PropertyBinding.Composite.prototype={constructor:f.PropertyBinding.Composite,getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,
c=a.length;b!==c;++b)a[b].unbind()}};f.PropertyBinding.create=function(a,b,c){return a instanceof f.AnimationObjectGroup?new f.PropertyBinding.Composite(a,b,c):new f.PropertyBinding(a,b,c)};
f.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
f.PropertyBinding.findNode=function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(e){for(var g=0;g<e.bones.length;g++){var h=e.bones[g];if(h.name===b)return h}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(e){for(var g=0;g<e.length;g++){var h=e[g];if(h.name===b||h.uuid===b)return h;if(h=d(h.children))return h}return null};if(a=d(a.children))return a}return null};
f.PropertyMixer=function(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0};
f.PropertyMixer.prototype={constructor:f.PropertyMixer,apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(var g=b+b;d!==g;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){f.Quaternion.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var g=1-d,h=0;h!==e;++h){var k=b+h;a[k]=a[k]*
g+a[c+h]*d}}};f.BooleanKeyframeTrack=function(a,b,c){f.KeyframeTrack.call(this,a,b,c)};f.BooleanKeyframeTrack.prototype=Object.assign(Object.create(f.KeyframeTrack.prototype),{constructor:f.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:f.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});f.ColorKeyframeTrack=function(a,b,c,d){f.KeyframeTrack.call(this,a,b,c,d)};
f.ColorKeyframeTrack.prototype=Object.assign(Object.create(f.KeyframeTrack.prototype),{constructor:f.ColorKeyframeTrack,ValueTypeName:"color"});f.NumberKeyframeTrack=function(a,b,c,d){f.KeyframeTrack.call(this,a,b,c,d)};f.NumberKeyframeTrack.prototype=Object.assign(Object.create(f.KeyframeTrack.prototype),{constructor:f.NumberKeyframeTrack,ValueTypeName:"number"});f.QuaternionKeyframeTrack=function(a,b,c,d){f.KeyframeTrack.call(this,a,b,c,d)};
f.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(f.KeyframeTrack.prototype),{constructor:f.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:f.InterpolateLinear,InterpolantFactoryMethodLinear:function(a){return new f.QuaternionLinearInterpolant(this.times,this.values,cc(this),a)},InterpolantFactoryMethodSmooth:void 0});f.StringKeyframeTrack=function(a,b,c,d){f.KeyframeTrack.call(this,a,b,c,d)};
f.StringKeyframeTrack.prototype=Object.assign(Object.create(f.KeyframeTrack.prototype),{constructor:f.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:f.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});f.VectorKeyframeTrack=function(a,b,c,d){f.KeyframeTrack.call(this,a,b,c,d)};f.VectorKeyframeTrack.prototype=Object.assign(Object.create(f.KeyframeTrack.prototype),{constructor:f.VectorKeyframeTrack,ValueTypeName:"vector"});
f.Audio=function(a){f.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]};
f.Audio.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Audio,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.source.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.source.stop(),this.startTime=0,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);
this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=a,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(a){!1===this.hasPlaybackControl?console.warn("THREE.Audio: this Audio has no playback control."):this.source.loop=a},getVolume:function(){return this.gain.gain.value},
setVolume:function(a){this.gain.gain.value=a;return this}});f.AudioAnalyser=function(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)};
Object.assign(f.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.defineProperty(f,"AudioContext",{get:function(){var a;return function(){void 0===a&&(a=new (window.AudioContext||window.webkitAudioContext));return a}}()});
f.PositionalAudio=function(a){f.Audio.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)};
f.PositionalAudio.prototype=Object.assign(Object.create(f.Audio.prototype),{constructor:f.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},
setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new f.Vector3;return function(b){f.Object3D.prototype.updateMatrixWorld.call(this,b);Bb(a,this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});f.AudioListener=function(){f.Object3D.call(this);this.type="AudioListener";this.context=f.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null};
f.AudioListener.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new f.Vector3,b=new f.Quaternion,c=new f.Vector3,d=new f.Vector3;return function(e){f.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,b,c);mb(d.set(0,
0,-1),b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}()});f.Camera=function(){f.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new f.Matrix4;this.projectionMatrix=new f.Matrix4};f.Camera.prototype=Object.create(f.Object3D.prototype);fa=f.Camera.prototype;fa.constructor=f.Camera;fa.getWorldDirection=function(){var a=new f.Quaternion;return function(b){b=b||new f.Vector3;this.getWorldQuaternion(a);return mb(b.set(0,0,-1),a)}}();
fa.lookAt=function(){var a=new f.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();fa.clone=function(){return(new this.constructor).copy(this)};fa.copy=function(a){f.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
f.CubeCamera=function(a,b,c){f.Object3D.call(this);this.type="CubeCamera";var d=new f.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new f.Vector3(1,0,0));this.add(d);var e=new f.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new f.Vector3(-1,0,0));this.add(e);var g=new f.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new f.Vector3(0,1,0));this.add(g);var h=new f.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new f.Vector3(0,-1,0));this.add(h);var k=new f.PerspectiveCamera(90,
1,a,b);k.up.set(0,-1,0);k.lookAt(new f.Vector3(0,0,1));this.add(k);var l=new f.PerspectiveCamera(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new f.Vector3(0,0,-1));this.add(l);this.renderTarget=new f.WebGLRenderTargetCube(c,c,{format:f.RGBFormat,magFilter:f.LinearFilter,minFilter:f.LinearFilter});this.updateCubeMap=function(m,n){null===this.parent&&this.updateMatrixWorld();var q=this.renderTarget,p=q.texture.generateMipmaps;q.texture.generateMipmaps=!1;q.activeCubeFace=0;m.render(n,d,q);q.activeCubeFace=
1;m.render(n,e,q);q.activeCubeFace=2;m.render(n,g,q);q.activeCubeFace=3;m.render(n,h,q);q.activeCubeFace=4;m.render(n,k,q);q.texture.generateMipmaps=p;q.activeCubeFace=5;m.render(n,l,q);m.setRenderTarget(null)}};f.CubeCamera.prototype=Object.create(f.Object3D.prototype);f.CubeCamera.prototype.constructor=f.CubeCamera;
f.OrthographicCamera=function(a,b,c,d,e,g){f.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};
f.OrthographicCamera.prototype=Object.assign(Object.create(f.Camera.prototype),{constructor:f.OrthographicCamera,copy:function(a){f.Camera.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;return this},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a;a=c+a;c=d+b;b=d-b;d=this.near;
var g=this.far,h=this.projectionMatrix.elements,k=1/(a-e),l=1/(c-b),m=1/(g-d);h[0]=2*k;h[4]=0;h[8]=0;h[12]=-((a+e)*k);h[1]=0;h[5]=2*l;h[9]=0;h[13]=-((c+b)*l);h[2]=0;h[6]=0;h[10]=-2*m;h[14]=-((g+d)*m);h[3]=0;h[7]=0;h[11]=0;h[15]=1},toJSON:function(a){a=f.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;return a}});
f.PerspectiveCamera=function(a,b,c,d){f.Camera.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()};
f.PerspectiveCamera.prototype=Object.assign(Object.create(f.Camera.prototype),{constructor:f.PerspectiveCamera,copy:function(a){f.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){this.fov=2*f.Math.RAD2DEG*Math.atan(.5*this.getFilmHeight()/a);this.updateProjectionMatrix()},
getFocalLength:function(){return.5*this.getFilmHeight()/Math.tan(.5*f.Math.DEG2RAD*this.fov)},getEffectiveFOV:function(){return 2*f.Math.RAD2DEG*Math.atan(Math.tan(.5*f.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,g){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:g};this.updateProjectionMatrix()},
clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*f.Math.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,g=this.view;if(null!==g){var h=g.fullWidth,k=g.fullHeight;e+=g.offsetX*d/h;b-=g.offsetY*c/k;d*=g.width/h;c*=g.height/k}g=this.filmOffset;0!==g&&(e+=a*g/this.getFilmWidth());Lb(this.projectionMatrix,e,e+d,b-c,b,a,this.far)},toJSON:function(a){a=f.Object3D.prototype.toJSON.call(this,a);a.object.fov=
this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});
f.StereoCamera=function(){this.type="StereoCamera";this.aspect=1;this.cameraL=new f.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new f.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1};
Object.assign(f.StereoCamera.prototype,{update:function(){var a,b,c,d,e,g=new f.Matrix4,h=new f.Matrix4;return function(k){if(a!==k.focus||b!==k.fov||c!==k.aspect*this.aspect||d!==k.near||e!==k.far){a=k.focus;b=k.fov;c=k.aspect*this.aspect;d=k.near;e=k.far;var l=k.projectionMatrix.clone(),m=.032*d/a,n=d*Math.tan(f.Math.DEG2RAD*b*.5);h.elements[12]=-.032;g.elements[12]=.032;var q=-n*c+m;var p=n*c+m;l.elements[0]=2*d/(p-q);l.elements[8]=(p+q)/(p-q);this.cameraL.projectionMatrix.copy(l);q=-n*c-m;p=n*
c-m;l.elements[0]=2*d/(p-q);l.elements[8]=(p+q)/(p-q);this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(k.matrixWorld).multiply(h);this.cameraR.matrixWorld.copy(k.matrixWorld).multiply(g)}}()});f.Light=function(a,b){f.Object3D.call(this);this.type="Light";this.color=new f.Color(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0};
f.Light.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Light,copy:function(a){f.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=f.Object3D.prototype.toJSON.call(this,a);a.object.color=db(this.color);a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=db(this.groundColor));void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=
this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);return a}});f.LightShadow=function(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new f.Vector2(512,512);this.map=null;this.matrix=new f.Matrix4};Object.assign(f.LightShadow.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)}});
f.AmbientLight=function(a,b){f.Light.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0};f.AmbientLight.prototype=Object.assign(Object.create(f.Light.prototype),{constructor:f.AmbientLight});f.DirectionalLight=function(a,b){f.Light.call(this,a,b);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new f.Object3D;this.shadow=new f.DirectionalLightShadow};
f.DirectionalLight.prototype=Object.assign(Object.create(f.Light.prototype),{constructor:f.DirectionalLight,copy:function(a){f.Light.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});f.DirectionalLightShadow=function(){f.LightShadow.call(this,new f.OrthographicCamera(-5,5,5,-5,.5,500))};f.DirectionalLightShadow.prototype=Object.assign(Object.create(f.LightShadow.prototype),{constructor:f.DirectionalLightShadow});
f.HemisphereLight=function(a,b,c){f.Light.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.set(0,1,0);this.updateMatrix();this.groundColor=new f.Color(b)};f.HemisphereLight.prototype=Object.assign(Object.create(f.Light.prototype),{constructor:f.HemisphereLight,copy:function(a){f.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});
f.PointLight=function(a,b,c,d){f.Light.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new f.LightShadow(new f.PerspectiveCamera(90,1,.5,500))};
f.PointLight.prototype=Object.assign(Object.create(f.Light.prototype),{constructor:f.PointLight,copy:function(a){f.Light.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});
f.SpotLight=function(a,b,c,d,e,g){f.Light.call(this,a,b);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new f.Object3D;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(h){this.intensity=h/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==g?g:1;this.shadow=new f.SpotLightShadow};
f.SpotLight.prototype=Object.assign(Object.create(f.Light.prototype),{constructor:f.SpotLight,copy:function(a){f.Light.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});f.SpotLightShadow=function(){f.LightShadow.call(this,new f.PerspectiveCamera(50,1,.5,500))};
f.SpotLightShadow.prototype=Object.assign(Object.create(f.LightShadow.prototype),{constructor:f.SpotLightShadow,update:function(a){var b=2*f.Math.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var d=this.camera;if(b!==d.fov||c!==d.aspect||a!==d.far)d.fov=b,d.aspect=c,d.far=a,d.updateProjectionMatrix()}});f.AudioLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};
f.AudioLoader.prototype={constructor:f.AudioLoader,load:function(a,b,c,d){var e=new f.XHRLoader(this.manager);ec(e);e.load(a,function(g){f.AudioContext.decodeAudioData(g,function(h){b(h)})},c,d)}};f.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
f.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};function fc(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"}function gc(a,b,c){for(var d=f.Loader.prototype,e=[],g=0;g<a.length;++g)e[g]=d.createMaterial(a[g],b,c);return e}
f.Loader.prototype={constructor:f.Loader,crossOrigin:void 0,createMaterial:function(){var a,b,c;return function(d,e,g){function h(q,p,t,r,v){q=e+q;var u=f.Loader.Handlers.get(q);null!==u?q=u.load(q):(b.setCrossOrigin(g),q=b.load(q));void 0!==p&&(q.repeat.fromArray(p),1!==p[0]&&(q.wrapS=f.RepeatWrapping),1!==p[1]&&(q.wrapT=f.RepeatWrapping));void 0!==t&&q.offset.fromArray(t);void 0!==r&&("repeat"===r[0]&&(q.wrapS=f.RepeatWrapping),"mirror"===r[0]&&(q.wrapS=f.MirroredRepeatWrapping),"repeat"===r[1]&&
(q.wrapT=f.RepeatWrapping),"mirror"===r[1]&&(q.wrapT=f.MirroredRepeatWrapping));void 0!==v&&(q.anisotropy=v);p=f.Math.generateUUID();k[p]=q;return p}void 0===a&&(a=new f.Color);void 0===b&&(b=new f.TextureLoader);void 0===c&&(c=new f.MaterialLoader);var k={},l={uuid:f.Math.generateUUID(),type:"MeshLambertMaterial"},m;for(m in d){var n=d[m];switch(m){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":l.name=n;break;case "blending":l.blending=f[n];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",
m,"is no longer supported.");break;case "colorDiffuse":l.color=db(a.fromArray(n));break;case "colorSpecular":l.specular=db(a.fromArray(n));break;case "colorEmissive":l.emissive=db(a.fromArray(n));break;case "specularCoef":l.shininess=n;break;case "shading":"basic"===n.toLowerCase()&&(l.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&(l.type="MeshPhongMaterial");break;case "mapDiffuse":l.map=h(n,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;
case "mapLight":l.lightMap=h(n,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":l.aoMap=h(n,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":l.bumpMap=h(n,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":l.bumpScale=
n;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":l.normalMap=h(n,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case "mapNormalFactor":l.normalScale=[n,n];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":l.specularMap=h(n,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;
case "mapAlpha":l.alphaMap=h(n,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":l.side=f.BackSide;break;case "doubleSided":l.side=f.DoubleSide;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");l.opacity=n;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":l[m]=
n;break;case "vertexColors":!0===n&&(l.vertexColors=f.VertexColors);"face"===n&&(l.vertexColors=f.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",m,n)}}"MeshBasicMaterial"===l.type&&delete l.emissive;"MeshPhongMaterial"!==l.type&&delete l.specular;1>l.opacity&&(l.transparent=!0);c.textures=k;return c.parse(l)}}()};
f.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};f.XHRLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};function ec(a){a.responseType="arraybuffer"}
f.XHRLoader.prototype={constructor:f.XHRLoader,load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,g=f.Cache.get(a);if(void 0!==g)return b&&setTimeout(function(){b(g)},0),g;var h=new XMLHttpRequest;h.overrideMimeType("text/plain");h.open("GET",a,!0);h.addEventListener("load",function(k){var l=k.target.response;f.Cache.add(a,l);200===this.status?(b&&b(l),e.manager.itemEnd(a)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),b&&b(l),e.manager.itemEnd(a)):(d&&
d(k),e.manager.itemError(a))},!1);void 0!==c&&h.addEventListener("progress",function(k){c(k)},!1);h.addEventListener("error",function(k){d&&d(k);e.manager.itemError(a)},!1);void 0!==this.responseType&&(h.responseType=this.responseType);void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials);h.send(null);e.manager.itemStart(a);return h},setPath:function(a){this.path=a}};f.FontLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};
f.FontLoader.prototype={constructor:f.FontLoader,load:function(a,b,c,d){var e=this;(new f.XHRLoader(this.manager)).load(a,function(g){try{var h=JSON.parse(g)}catch(k){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),h=JSON.parse(g.substring(65,g.length-2))}g=e.parse(h);b&&b(g)},c,d)},parse:function(a){return new f.Font(a)}};f.ImageLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};
f.ImageLoader.prototype={constructor:f.ImageLoader,load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,g=f.Cache.get(a);if(void 0!==g)return e.manager.itemStart(a),b?setTimeout(function(){b(g);e.manager.itemEnd(a)},0):e.manager.itemEnd(a),g;var h=document.createElement("img");h.addEventListener("load",function(){f.Cache.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);void 0!==c&&h.addEventListener("progress",function(k){c(k)},!1);h.addEventListener("error",function(k){d&&d(k);e.manager.itemError(a)},
!1);void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin);e.manager.itemStart(a);h.src=a;return h},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a}};f.JSONLoader=function(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:f.DefaultLoadingManager;this.withCredentials=!1};
f.JSONLoader.prototype={constructor:f.JSONLoader,get statusDomElement(){void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div"));console.warn("THREE.JSONLoader: .statusDomElement has been removed.");return this._statusDomElement},load:function(a,b,c,d){var e=this,g=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:fc(a),h=new f.XHRLoader(this.manager);h.withCredentials=this.withCredentials;h.load(a,function(k){k=JSON.parse(k);var l=k.metadata;if(void 0!==
l&&(l=l.type,void 0!==l)){if("object"===l.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===l.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}k=e.parse(k,g);b(k.geometry,k.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new f.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(e){var g,h,k,l=a.faces;var m=a.vertices;var n=
a.normals,q=a.colors,p=0;if(void 0!==a.uvs){for(g=0;g<a.uvs.length;g++)a.uvs[g].length&&p++;for(g=0;g<p;g++)c.faceVertexUvs[g]=[]}var t=0;for(k=m.length;t<k;)g=new f.Vector3,g.x=m[t++]*e,g.y=m[t++]*e,g.z=m[t++]*e,c.vertices.push(g);t=0;for(k=l.length;t<k;){e=l[t++];var r=e&1;var v=e&2;g=e&8;var u=e&16;var w=e&32;m=e&64;e&=128;if(r){r=new f.Face3;r.a=l[t];r.b=l[t+1];r.c=l[t+3];var x=new f.Face3;x.a=l[t+1];x.b=l[t+2];x.c=l[t+3];t+=4;v&&(v=l[t++],r.materialIndex=v,x.materialIndex=v);v=c.faces.length;
if(g)for(g=0;g<p;g++){var A=a.uvs[g];c.faceVertexUvs[g][v]=[];c.faceVertexUvs[g][v+1]=[];for(h=0;4>h;h++){var y=l[t++];var B=A[2*y];y=A[2*y+1];B=new f.Vector2(B,y);2!==h&&c.faceVertexUvs[g][v].push(B);0!==h&&c.faceVertexUvs[g][v+1].push(B)}}u&&(u=3*l[t++],r.normal.set(n[u++],n[u++],n[u]),x.normal.copy(r.normal));if(w)for(g=0;4>g;g++)u=3*l[t++],w=new f.Vector3(n[u++],n[u++],n[u]),2!==g&&r.vertexNormals.push(w),0!==g&&x.vertexNormals.push(w);m&&(m=l[t++],m=q[m],bb(r.color,m),bb(x.color,m));if(e)for(g=
0;4>g;g++)m=l[t++],m=q[m],2!==g&&r.vertexColors.push(new f.Color(m)),0!==g&&x.vertexColors.push(new f.Color(m));c.faces.push(r);c.faces.push(x)}else{r=new f.Face3;r.a=l[t++];r.b=l[t++];r.c=l[t++];v&&(v=l[t++],r.materialIndex=v);v=c.faces.length;if(g)for(g=0;g<p;g++)for(A=a.uvs[g],c.faceVertexUvs[g][v]=[],h=0;3>h;h++)y=l[t++],B=A[2*y],y=A[2*y+1],B=new f.Vector2(B,y),c.faceVertexUvs[g][v].push(B);u&&(u=3*l[t++],r.normal.set(n[u++],n[u++],n[u]));if(w)for(g=0;3>g;g++)u=3*l[t++],w=new f.Vector3(n[u++],
n[u++],n[u]),r.vertexNormals.push(w);m&&(m=l[t++],bb(r.color,q[m]));if(e)for(g=0;3>g;g++)m=l[t++],r.vertexColors.push(new f.Color(q[m]));c.faces.push(r)}}})(d);(function(){var e=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var g=0,h=a.skinWeights.length;g<h;g+=e)c.skinWeights.push(new f.Vector4(a.skinWeights[g],1<e?a.skinWeights[g+1]:0,2<e?a.skinWeights[g+2]:0,3<e?a.skinWeights[g+3]:0));if(a.skinIndices)for(g=0,h=a.skinIndices.length;g<h;g+=e)c.skinIndices.push(new f.Vector4(a.skinIndices[g],
1<e?a.skinIndices[g+1]:0,2<e?a.skinIndices[g+2]:0,3<e?a.skinIndices[g+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")})();(function(e){if(void 0!==a.morphTargets)for(var g=0,h=a.morphTargets.length;g<h;g++){c.morphTargets[g]={};c.morphTargets[g].name=
a.morphTargets[g].name;c.morphTargets[g].vertices=[];for(var k=c.morphTargets[g].vertices,l=a.morphTargets[g].vertices,m=0,n=l.length;m<n;m+=3){var q=new f.Vector3;q.x=l[m]*e;q.y=l[m+1]*e;q.z=l[m+2]*e;k.push(q)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),e=c.faces,k=a.morphColors[0].colors,g=0,h=e.length;g<h;g++)e[g].color.fromArray(k,3*g)})(d);(function(){var e=[],g=[];void 0!==a.animation&&
g.push(a.animation);void 0!==a.animations&&(a.animations.length?g=g.concat(a.animations):g.push(a.animations));for(var h=0;h<g.length;h++){var k=f.AnimationClip.parseAnimation(g[h],c.bones);k&&e.push(k)}c.morphTargets&&(g=f.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),e=e.concat(g));0<e.length&&(c.animations=e)})();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};b=gc(a.materials,b,this.crossOrigin);return{geometry:c,
materials:b}}};f.LoadingManager=function(a){var b=this,c=!1,d=0,e=0;this.onStart=void 0;this.onLoad=a;this.onError=this.onProgress=void 0;this.itemStart=function(g){e++;if(!1===c&&void 0!==b.onStart)b.onStart(g,d,e);c=!0};this.itemEnd=function(g){d++;if(void 0!==b.onProgress)b.onProgress(g,d,e);if(d===e&&(c=!1,void 0!==b.onLoad))b.onLoad()};this.itemError=function(g){if(void 0!==b.onError)b.onError(g)}};f.DefaultLoadingManager=new f.LoadingManager;
f.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};
f.BufferGeometryLoader.prototype={constructor:f.BufferGeometryLoader,load:function(a,b,c,d){var e=this;(new f.XHRLoader(e.manager)).load(a,function(g){b(e.parse(JSON.parse(g)))},c,d)},parse:function(a){var b=new f.BufferGeometry,c=a.data.index,d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==c&&(c=new d[c.type](c.array),
b.setIndex(new f.BufferAttribute(c,1)));var e=a.data.attributes;for(h in e){var g=e[h];c=new d[g.type](g.array);b.addAttribute(h,new f.BufferAttribute(c,g.itemSize,g.normalized))}d=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==d){var h=0;for(c=d.length;h!==c;++h)e=d[h],b.addGroup(e.start,e.count,e.materialIndex)}a=a.data.boundingSphere;void 0!==a&&(d=new f.Vector3,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new f.Sphere(d,a.radius));return b}};
f.MaterialLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager;this.textures={}};function lc(a,b){a=a.textures;void 0===a[b]&&console.warn("THREE.MaterialLoader: Undefined texture",b);return a[b]}
f.MaterialLoader.prototype={constructor:f.MaterialLoader,load:function(a,b,c,d){var e=this;(new f.XHRLoader(e.manager)).load(a,function(g){b(e.parse(JSON.parse(g)))},c,d)},parse:function(a){var b=new f[a.type];void 0!==a.uuid&&(b.uuid=a.uuid);void 0!==a.name&&(b.name=a.name);void 0!==a.color&&bb(b.color,a.color);void 0!==a.roughness&&(b.roughness=a.roughness);void 0!==a.metalness&&(b.metalness=a.metalness);void 0!==a.emissive&&bb(b.emissive,a.emissive);void 0!==a.specular&&bb(b.specular,a.specular);
void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&
(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(b.colorWrite=a.colorWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(b.map=lc(this,a.map));void 0!==a.alphaMap&&(b.alphaMap=lc(this,a.alphaMap),b.transparent=
!0);void 0!==a.bumpMap&&(b.bumpMap=lc(this,a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=lc(this,a.normalMap));if(void 0!==a.normalScale){var c=a.normalScale;!1===Array.isArray(c)&&(c=[c,c]);b.normalScale=(new f.Vector2).fromArray(c)}void 0!==a.displacementMap&&(b.displacementMap=lc(this,a.displacementMap));void 0!==a.displacementScale&&(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==
a.roughnessMap&&(b.roughnessMap=lc(this,a.roughnessMap));void 0!==a.metalnessMap&&(b.metalnessMap=lc(this,a.metalnessMap));void 0!==a.emissiveMap&&(b.emissiveMap=lc(this,a.emissiveMap));void 0!==a.emissiveIntensity&&(b.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(b.specularMap=lc(this,a.specularMap));void 0!==a.envMap&&(b.envMap=lc(this,a.envMap),b.combine=f.MultiplyOperation);a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=lc(this,a.lightMap));
void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=lc(this,a.aoMap));void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials){c=0;for(var d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]))}return b}};f.ObjectLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager;this.texturePath=""};
function mc(a,b){var c={};if(void 0!==b)for(var d=new f.JSONLoader,e=new f.BufferGeometryLoader,g=0,h=b.length;g<h;g++){var k=b[g];switch(k.type){case "PlaneGeometry":case "PlaneBufferGeometry":var l=new f[k.type](k.width,k.height,k.widthSegments,k.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":l=new f[k.type](k.width,k.height,k.depth,k.widthSegments,k.heightSegments,k.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":l=new f[k.type](k.radius,
k.segments,k.thetaStart,k.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":l=new f[k.type](k.radiusTop,k.radiusBottom,k.height,k.radialSegments,k.heightSegments,k.openEnded,k.thetaStart,k.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":l=new f[k.type](k.radius,k.height,k.radialSegments,k.heightSegments,k.openEnded,k.thetaStart,k.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":l=new f[k.type](k.radius,k.widthSegments,k.heightSegments,k.phiStart,
k.phiLength,k.thetaStart,k.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":l=new f[k.type](k.radius,k.detail);break;case "RingGeometry":case "RingBufferGeometry":l=new f[k.type](k.innerRadius,k.outerRadius,k.thetaSegments,k.phiSegments,k.thetaStart,k.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":l=new f[k.type](k.radius,k.tube,k.radialSegments,k.tubularSegments,k.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":l=
new f[k.type](k.radius,k.tube,k.tubularSegments,k.radialSegments,k.p,k.q);break;case "LatheGeometry":case "LatheBufferGeometry":l=new f[k.type](k.points,k.segments,k.phiStart,k.phiLength);break;case "BufferGeometry":l=e.parse(k);break;case "Geometry":l=d.parse(k.data,a.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+k.type+'"');continue}l.uuid=k.uuid;void 0!==k.name&&(l.name=k.name);c[k.uuid]=l}return c}
function nc(a,b,c){function d(l){e.manager.itemStart(l);return h.load(l,function(){e.manager.itemEnd(l)})}var e=a,g={};if(void 0!==b&&0<b.length){var h=new f.ImageLoader(new f.LoadingManager(c));h.setCrossOrigin(a.crossOrigin);a=0;for(c=b.length;a<c;a++){var k=b[a];g[k.uuid]=d(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:e.texturePath+k.url)}}return g}
function oc(a,b){function c(l){if("number"===typeof l)return l;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l);return f[l]}var d={};if(void 0!==a)for(var e=0,g=a.length;e<g;e++){var h=a[e];void 0===h.image&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid);void 0===b[h.image]&&console.warn("THREE.ObjectLoader: Undefined image",h.image);var k=new f.Texture(b[h.image]);k.needsUpdate=!0;k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);void 0!==h.mapping&&
(k.mapping=c(h.mapping));void 0!==h.offset&&(k.offset=new f.Vector2(h.offset[0],h.offset[1]));void 0!==h.repeat&&(k.repeat=new f.Vector2(h.repeat[0],h.repeat[1]));void 0!==h.minFilter&&(k.minFilter=c(h.minFilter));void 0!==h.magFilter&&(k.magFilter=c(h.magFilter));void 0!==h.anisotropy&&(k.anisotropy=h.anisotropy);Array.isArray(h.wrap)&&(k.wrapS=c(h.wrap[0]),k.wrapT=c(h.wrap[1]));d[h.uuid]=k}return d}
function pc(a,b){var c={};if(void 0!==a){var d=new f.MaterialLoader;d.textures=b;b=0;for(var e=a.length;b<e;b++){var g=d.parse(a[b]);c[g.uuid]=g}}return c}function qc(a){for(var b=[],c=0;c<a.length;c++){var d=f.AnimationClip.parse(a[c]);b.push(d)}return b}
f.ObjectLoader.prototype={constructor:f.ObjectLoader,load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new f.XHRLoader(e.manager)).load(a,function(g){e.parse(JSON.parse(g),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=mc(this,a.geometries),d=nc(this,a.images,function(){void 0!==b&&b(e)});d=oc(a.textures,d);d=pc(a.materials,d);var e=this.parseObject(a.object,
c,d);a.animations&&(e.animations=qc(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseObject:function(){var a=new f.Matrix4;return function(b,c,d){function e(n){void 0===c[n]&&console.warn("THREE.ObjectLoader: Undefined geometry",n);return c[n]}function g(n){if(void 0!==n)return void 0===d[n]&&console.warn("THREE.ObjectLoader: Undefined material",n),d[n]}switch(b.type){case "Scene":var h=new f.Scene;break;case "PerspectiveCamera":h=new f.PerspectiveCamera(b.fov,
b.aspect,b.near,b.far);void 0!==b.focus&&(h.focus=b.focus);void 0!==b.zoom&&(h.zoom=b.zoom);void 0!==b.filmGauge&&(h.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(h.filmOffset=b.filmOffset);void 0!==b.view&&(h.view=Object.assign({},b.view));break;case "OrthographicCamera":h=new f.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":h=new f.AmbientLight(b.color,b.intensity);break;case "DirectionalLight":h=new f.DirectionalLight(b.color,b.intensity);break;case "PointLight":h=
new f.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":h=new f.SpotLight(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":h=new f.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":h=e(b.geometry);var k=g(b.material);h=h.bones&&0<h.bones.length?new f.SkinnedMesh(h,k):new f.Mesh(h,k);break;case "LOD":h=new f.LOD;break;case "Line":h=new f.Line(e(b.geometry),g(b.material),b.mode);break;case "PointCloud":case "Points":h=
new f.Points(e(b.geometry),g(b.material));break;case "Sprite":h=new f.Sprite(g(b.material));break;case "Group":h=new f.Group;break;default:h=new f.Object3D}h.uuid=b.uuid;void 0!==b.name&&(h.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(h.position,h.quaternion,h.scale)):(void 0!==b.position&&h.position.fromArray(b.position),void 0!==b.rotation&&h.rotation.fromArray(b.rotation),void 0!==b.scale&&h.scale.fromArray(b.scale));void 0!==b.castShadow&&(h.castShadow=b.castShadow);void 0!==
b.receiveShadow&&(h.receiveShadow=b.receiveShadow);void 0!==b.visible&&(h.visible=b.visible);void 0!==b.userData&&(h.userData=b.userData);if(void 0!==b.children)for(var l in b.children)h.add(this.parseObject(b.children[l],c,d));if("LOD"===b.type)for(b=b.levels,k=0;k<b.length;k++){var m=b[k];l=h.getObjectByProperty("uuid",m.object);void 0!==l&&h.addLevel(l,m.distance)}return h}}()};f.TextureLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};
f.TextureLoader.prototype={constructor:f.TextureLoader,load:function(a,b,c,d){var e=new f.Texture,g=new f.ImageLoader(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);g.load(a,function(h){e.image=h;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a}};f.CubeTextureLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager};
f.CubeTextureLoader.prototype={constructor:f.CubeTextureLoader,load:function(a,b,c,d){function e(l){h.load(a[l],function(m){g.images[l]=m;k++;6===k&&(g.needsUpdate=!0,b&&b(g))},void 0,d)}var g=new f.CubeTexture,h=new f.ImageLoader(this.manager);h.setCrossOrigin(this.crossOrigin);h.setPath(this.path);var k=0;for(c=0;c<a.length;++c)e(c);return g},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a}};
f.DataTextureLoader=f.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager;this._parser=null};
f.BinaryTextureLoader.prototype={constructor:f.BinaryTextureLoader,load:function(a,b,c,d){var e=this,g=new f.DataTexture,h=new f.XHRLoader(this.manager);ec(h);h.load(a,function(k){if(k=e._parser(k))void 0!==k.image?g.image=k.image:void 0!==k.data&&(g.image.width=k.width,g.image.height=k.height,g.image.data=k.data),g.wrapS=void 0!==k.wrapS?k.wrapS:f.ClampToEdgeWrapping,g.wrapT=void 0!==k.wrapT?k.wrapT:f.ClampToEdgeWrapping,g.magFilter=void 0!==k.magFilter?k.magFilter:f.LinearFilter,g.minFilter=void 0!==
k.minFilter?k.minFilter:f.LinearMipMapLinearFilter,g.anisotropy=void 0!==k.anisotropy?k.anisotropy:1,void 0!==k.format&&(g.format=k.format),void 0!==k.type&&(g.type=k.type),void 0!==k.mipmaps&&(g.mipmaps=k.mipmaps),1===k.mipmapCount&&(g.minFilter=f.LinearFilter),g.needsUpdate=!0,b&&b(g,k)},c,d);return g}};f.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:f.DefaultLoadingManager;this._parser=null};
f.CompressedTextureLoader.prototype={constructor:f.CompressedTextureLoader,load:function(a,b,c,d){function e(p){l.load(a[p],function(t){t=g._parser(t,!0);h[p]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps};m+=1;6===m&&(1===t.mipmapCount&&(k.minFilter=f.LinearFilter),k.format=t.format,k.needsUpdate=!0,b&&b(k))},c,d)}var g=this,h=[],k=new f.CompressedTexture;k.image=h;var l=new f.XHRLoader(this.manager);l.setPath(this.path);ec(l);if(Array.isArray(a))for(var m=0,n=0,q=a.length;n<q;++n)e(n);
else l.load(a,function(p){p=g._parser(p,!0);if(p.isCubemap)for(var t=p.mipmaps.length/p.mipmapCount,r=0;r<t;r++){h[r]={mipmaps:[]};for(var v=0;v<p.mipmapCount;v++)h[r].mipmaps.push(p.mipmaps[r*p.mipmapCount+v]),h[r].format=p.format,h[r].width=p.width,h[r].height=p.height}else k.image.width=p.width,k.image.height=p.height,k.mipmaps=p.mipmaps;1===p.mipmapCount&&(k.minFilter=f.LinearFilter);k.format=p.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=a}};
f.Material=function(){Object.defineProperty(this,"id",{value:f.MaterialIdCount++});this.uuid=f.Math.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=f.NormalBlending;this.side=f.FrontSide;this.shading=f.SmoothShading;this.vertexColors=f.NoColors;this.opacity=1;this.transparent=!1;this.blendSrc=f.SrcAlphaFactor;this.blendDst=f.OneMinusSrcAlphaFactor;this.blendEquation=f.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=
f.LessEqualDepth;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0};
function rc(a,b){if(void 0!==b)for(var c in b){var d=b[c];if(void 0===d)console.warn("THREE.Material: '"+c+"' parameter is undefined.");else{var e=a[c];void 0===e?console.warn("THREE."+a.type+": '"+c+"' is not a property of this material."):e instanceof f.Color?e.set(d):e instanceof f.Vector3&&d instanceof f.Vector3?e.copy(d):a[c]="overdraw"===c?Number(d):d}}}
f.Material.prototype={constructor:f.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},toJSON:function(a){function b(e){var g=[],h;for(h in e){var k=e[h];delete k.metadata;g.push(k)}return g}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color instanceof f.Color&&(d.color=db(this.color));
.5!==this.roughness&&(d.roughness=this.roughness);.5!==this.metalness&&(d.metalness=this.metalness);this.emissive instanceof f.Color&&(d.emissive=db(this.emissive));this.specular instanceof f.Color&&(d.specular=db(this.specular));void 0!==this.shininess&&(d.shininess=this.shininess);this.map instanceof f.Texture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap instanceof f.Texture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof f.Texture&&(d.lightMap=this.lightMap.toJSON(a).uuid);
this.bumpMap instanceof f.Texture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap instanceof f.Texture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap instanceof f.Texture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap instanceof f.Texture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap instanceof
f.Texture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap instanceof f.Texture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap instanceof f.Texture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof f.Texture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);this.blending!==f.NormalBlending&&(d.blending=this.blending);
this.shading!==f.SmoothShading&&(d.shading=this.shading);this.side!==f.FrontSide&&(d.side=this.side);this.vertexColors!==f.NoColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);
c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;
this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;a=a.clippingPlanes;var b=null;if(null!==
a){var c=a.length;b=Array(c);for(var d=0;d!==c;++d)b[d]=a[d].clone()}this.clippingPlanes=b;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(f.Material.prototype,f.EventDispatcher.prototype);f.MaterialIdCount=0;f.LineBasicMaterial=function(a){f.Material.call(this);this.type="LineBasicMaterial";this.color=new f.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;rc(this,a)};
f.LineBasicMaterial.prototype=Object.create(f.Material.prototype);f.LineBasicMaterial.prototype.constructor=f.LineBasicMaterial;f.LineBasicMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};
f.LineDashedMaterial=function(a){f.Material.call(this);this.type="LineDashedMaterial";this.color=new f.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;rc(this,a)};f.LineDashedMaterial.prototype=Object.create(f.Material.prototype);f.LineDashedMaterial.prototype.constructor=f.LineDashedMaterial;
f.LineDashedMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};
f.MeshBasicMaterial=function(a){f.Material.call(this);this.type="MeshBasicMaterial";this.color=new f.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=f.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;rc(this,a)};f.MeshBasicMaterial.prototype=Object.create(f.Material.prototype);
f.MeshBasicMaterial.prototype.constructor=f.MeshBasicMaterial;
f.MeshBasicMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};f.MeshDepthMaterial=function(a){f.Material.call(this);this.type="MeshDepthMaterial";this.depthPacking=f.BasicDepthPacking;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;rc(this,a)};f.MeshDepthMaterial.prototype=Object.create(f.Material.prototype);
f.MeshDepthMaterial.prototype.constructor=f.MeshDepthMaterial;f.MeshDepthMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
f.MeshLambertMaterial=function(a){f.Material.call(this);this.type="MeshLambertMaterial";this.color=new f.Color(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new f.Color(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=f.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";
this.morphNormals=this.morphTargets=this.skinning=!1;rc(this,a)};f.MeshLambertMaterial.prototype=Object.create(f.Material.prototype);f.MeshLambertMaterial.prototype.constructor=f.MeshLambertMaterial;
f.MeshLambertMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};f.MeshNormalMaterial=function(a){f.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=this.lights=this.fog=!1;rc(this,a)};f.MeshNormalMaterial.prototype=Object.create(f.Material.prototype);
f.MeshNormalMaterial.prototype.constructor=f.MeshNormalMaterial;f.MeshNormalMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
f.MeshPhongMaterial=function(a){f.Material.call(this);this.type="MeshPhongMaterial";this.color=new f.Color(16777215);this.specular=new f.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new f.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new f.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=
this.alphaMap=this.specularMap=null;this.combine=f.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;rc(this,a)};f.MeshPhongMaterial.prototype=Object.create(f.Material.prototype);f.MeshPhongMaterial.prototype.constructor=f.MeshPhongMaterial;
f.MeshPhongMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;
this.morphNormals=a.morphNormals;return this};
f.MeshStandardMaterial=function(a){f.Material.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new f.Color(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new f.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new f.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;rc(this,a)};f.MeshStandardMaterial.prototype=Object.create(f.Material.prototype);f.MeshStandardMaterial.prototype.constructor=f.MeshStandardMaterial;
f.MeshStandardMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=
a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};f.MeshPhysicalMaterial=function(a){f.MeshStandardMaterial.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;rc(this,a)};f.MeshPhysicalMaterial.prototype=Object.create(f.MeshStandardMaterial.prototype);f.MeshPhysicalMaterial.prototype.constructor=f.MeshPhysicalMaterial;
f.MeshPhysicalMaterial.prototype.copy=function(a){f.MeshStandardMaterial.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;return this};f.MultiMaterial=function(a){this.uuid=f.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};
f.MultiMaterial.prototype={constructor:f.MultiMaterial,toJSON:function(a){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var g=c[d].toJSON(a);delete g.metadata;b.materials.push(g)}b.visible=this.visible;return b},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};
f.PointsMaterial=function(a){f.Material.call(this);this.type="PointsMaterial";this.color=new f.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;rc(this,a)};f.PointsMaterial.prototype=Object.create(f.Material.prototype);f.PointsMaterial.prototype.constructor=f.PointsMaterial;f.PointsMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};
f.ShaderMaterial=function(a){f.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),rc(this,a))};f.ShaderMaterial.prototype=Object.create(f.Material.prototype);f.ShaderMaterial.prototype.constructor=f.ShaderMaterial;
f.ShaderMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=f.UniformsUtils.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};
f.ShaderMaterial.prototype.toJSON=function(a){a=f.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};f.RawShaderMaterial=function(a){f.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};f.RawShaderMaterial.prototype=Object.create(f.ShaderMaterial.prototype);f.RawShaderMaterial.prototype.constructor=f.RawShaderMaterial;
f.SpriteMaterial=function(a){f.Material.call(this);this.type="SpriteMaterial";this.color=new f.Color(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;rc(this,a)};f.SpriteMaterial.prototype=Object.create(f.Material.prototype);f.SpriteMaterial.prototype.constructor=f.SpriteMaterial;f.SpriteMaterial.prototype.copy=function(a){f.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};
f.ShadowMaterial=function(){f.ShaderMaterial.call(this,{uniforms:f.UniformsUtils.merge([f.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:f.ShaderChunk.shadow_vert,fragmentShader:f.ShaderChunk.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})};f.ShadowMaterial.prototype=Object.create(f.ShaderMaterial.prototype);
f.ShadowMaterial.prototype.constructor=f.ShadowMaterial;
f.Texture=function(a,b,c,d,e,g,h,k,l,m){Object.defineProperty(this,"id",{value:f.TextureIdCount++});this.uuid=f.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:f.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:f.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:f.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:f.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:f.LinearFilter;this.minFilter=void 0!==g?g:f.LinearMipMapLinearFilter;this.anisotropy=void 0!==l?l:1;this.format=
void 0!==h?h:f.RGBAFormat;this.type=void 0!==k?k:f.UnsignedByteType;this.offset=new f.Vector2(0,0);this.repeat=new f.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:f.LinearEncoding;this.version=0;this.onUpdate=null};f.Texture.DEFAULT_IMAGE=void 0;f.Texture.DEFAULT_MAPPING=f.UVMapping;
f.Texture.prototype={constructor:f.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};
if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=f.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,g=c.uuid;if(void 0!==c.toDataURL)var h=c;else h=document.createElement("canvas"),h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0,c.width,c.height);h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");d[e]={uuid:g,url:h}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},
transformUv:function(a){if(this.mapping===f.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case f.RepeatWrapping:a.x-=Math.floor(a.x);break;case f.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case f.MirroredRepeatWrapping:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case f.RepeatWrapping:a.y-=Math.floor(a.y);break;case f.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case f.MirroredRepeatWrapping:a.y=1===
Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(f.Texture.prototype,f.EventDispatcher.prototype);f.TextureIdCount=0;f.DepthTexture=function(a,b,c,d,e,g,h,k,l){f.Texture.call(this,null,d,e,g,h,k,f.DepthFormat,c,l);this.image={width:a,height:b};this.type=void 0!==c?c:f.UnsignedShortType;this.magFilter=void 0!==h?h:f.NearestFilter;this.minFilter=void 0!==k?k:f.NearestFilter;this.generateMipmaps=this.flipY=!1};f.DepthTexture.prototype=Object.create(f.Texture.prototype);
f.DepthTexture.prototype.constructor=f.DepthTexture;f.CanvasTexture=function(a,b,c,d,e,g,h,k,l){f.Texture.call(this,a,b,c,d,e,g,h,k,l);this.needsUpdate=!0};f.CanvasTexture.prototype=Object.create(f.Texture.prototype);f.CanvasTexture.prototype.constructor=f.CanvasTexture;f.CubeTexture=function(a,b,c,d,e,g,h,k,l,m){a=void 0!==a?a:[];b=void 0!==b?b:f.CubeReflectionMapping;f.Texture.call(this,a,b,c,d,e,g,h,k,l,m);this.flipY=!1};f.CubeTexture.prototype=Object.create(f.Texture.prototype);
f.CubeTexture.prototype.constructor=f.CubeTexture;Object.defineProperty(f.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});f.CompressedTexture=function(a,b,c,d,e,g,h,k,l,m,n,q){f.Texture.call(this,null,g,h,k,l,m,d,e,n,q);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};f.CompressedTexture.prototype=Object.create(f.Texture.prototype);f.CompressedTexture.prototype.constructor=f.CompressedTexture;
f.DataTexture=function(a,b,c,d,e,g,h,k,l,m,n,q){f.Texture.call(this,null,g,h,k,l,m,d,e,n,q);this.image={data:a,width:b,height:c};this.magFilter=void 0!==l?l:f.NearestFilter;this.minFilter=void 0!==m?m:f.NearestFilter;this.generateMipmaps=this.flipY=!1};f.DataTexture.prototype=Object.create(f.Texture.prototype);f.DataTexture.prototype.constructor=f.DataTexture;
f.VideoTexture=function(a,b,c,d,e,g,h,k,l){function m(){requestAnimationFrame(m);a.readyState>=a.HAVE_CURRENT_DATA&&(n.needsUpdate=!0)}f.Texture.call(this,a,b,c,d,e,g,h,k,l);this.generateMipmaps=!1;var n=this;m()};f.VideoTexture.prototype=Object.create(f.Texture.prototype);f.VideoTexture.prototype.constructor=f.VideoTexture;f.Group=function(){f.Object3D.call(this);this.type="Group"};f.Group.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Group});
f.Points=function(a,b){f.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new f.BufferGeometry;this.material=void 0!==b?b:new f.PointsMaterial({color:16777215*Math.random()})};
f.Points.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Points,raycast:function(){var a=new f.Matrix4,b=new f.Ray,c=new f.Sphere;return function(d,e){function g(v,u){var w=b.distanceSqToPoint(v);if(w<n){v=b.closestPointToPoint(v);v.applyMatrix4(l);var x=d.ray.origin.distanceTo(v);x<d.near||x>d.far||e.push({distance:x,distanceToRay:Math.sqrt(w),point:v.clone(),index:u,face:null,object:h})}}var h=this,k=this.geometry,l=this.matrixWorld,m=d.params.Points.threshold;null===
k.boundingSphere&&k.computeBoundingSphere();c.copy(k.boundingSphere);c.applyMatrix4(l);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(l);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var n=m*m;m=new f.Vector3;if(k instanceof f.BufferGeometry){var q=k.index;k=k.attributes.position.array;if(null!==q){var p=q.array;q=0;for(var t=p.length;q<t;q++){var r=p[q];m.fromArray(k,3*r);g(m,r)}}else for(q=0,p=k.length/3;q<p;q++)m.fromArray(k,3*q),g(m,q)}else for(m=k.vertices,q=0,
p=m.length;q<p;q++)g(m[q],q)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});f.Line=function(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new f.LineSegments(a,b);f.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new f.BufferGeometry;this.material=void 0!==b?b:new f.LineBasicMaterial({color:16777215*Math.random()})};
f.Line.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Line,raycast:function(){var a=new f.Matrix4,b=new f.Ray,c=new f.Sphere;return function(d,e){var g=d.linePrecision;g*=g;var h=this.geometry,k=this.matrixWorld;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var l=new f.Vector3,m=new f.Vector3;k=new f.Vector3;var n=new f.Vector3,q=this instanceof
f.LineSegments?2:1;if(h instanceof f.BufferGeometry){var p=h.index,t=h.attributes.position.array;if(null!==p){p=p.array;h=0;for(var r=p.length-1;h<r;h+=q){var v=p[h+1];l.fromArray(t,3*p[h]);m.fromArray(t,3*v);v=b.distanceSqToSegment(l,m,n,k);v>g||(n.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(n),v<d.near||v>d.far||e.push({distance:v,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}}else for(h=0,r=t.length/3-1;h<r;h+=q)l.fromArray(t,3*h),m.fromArray(t,
3*h+3),v=b.distanceSqToSegment(l,m,n,k),v>g||(n.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(n),v<d.near||v>d.far||e.push({distance:v,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}else if(h instanceof f.Geometry)for(l=h.vertices,m=l.length,h=0;h<m-1;h+=q)v=b.distanceSqToSegment(l[h],l[h+1],n,k),v>g||(n.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(n),v<d.near||v>d.far||e.push({distance:v,point:k.clone().applyMatrix4(this.matrixWorld),
index:h,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});f.LineSegments=function(a,b){f.Line.call(this,a,b);this.type="LineSegments"};f.LineSegments.prototype=Object.assign(Object.create(f.Line.prototype),{constructor:f.LineSegments});
f.Mesh=function(a,b){f.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new f.BufferGeometry;this.material=void 0!==b?b:new f.MeshBasicMaterial({color:16777215*Math.random()});this.drawMode=f.TrianglesDrawMode;this.updateMorphTargets()};
f.Mesh.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Mesh,setDrawMode:function(a){this.drawMode=a},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}},getMorphTargetIndexByName:function(a){if(void 0!==
this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0},raycast:function(){function a(x,A,y,B,F,K,L){f.Triangle.barycoordFromPoint(x,A,y,B,v);F.multiplyScalar(v.x);K.multiplyScalar(v.y);L.multiplyScalar(v.z);F.add(K).add(L);return F.clone()}function b(x,A,y,B,F,K,L){var N=x.material;if(null===(N.side===f.BackSide?y.intersectTriangle(K,F,B,!0,L):y.intersectTriangle(B,F,K,N.side!==
f.DoubleSide,L)))return null;w.copy(L);w.applyMatrix4(x.matrixWorld);y=A.ray.origin.distanceTo(w);return y<A.near||y>A.far?null:{distance:y,point:w.clone(),object:x}}function c(x,A,y,B,F,K,L,N){h.fromArray(B,3*K);k.fromArray(B,3*L);l.fromArray(B,3*N);if(x=b(x,A,y,h,k,l,u))F&&(p.fromArray(F,2*K),t.fromArray(F,2*L),r.fromArray(F,2*N),x.uv=a(u,h,k,l,p,t,r)),x.face=new f.Face3(K,L,N,f.Triangle.normal(h,k,l)),x.faceIndex=K;return x}var d=new f.Matrix4,e=new f.Ray,g=new f.Sphere,h=new f.Vector3,k=new f.Vector3,
l=new f.Vector3,m=new f.Vector3,n=new f.Vector3,q=new f.Vector3,p=new f.Vector2,t=new f.Vector2,r=new f.Vector2,v=new f.Vector3,u=new f.Vector3,w=new f.Vector3;return function(x,A){var y=this.geometry,B=this.material,F=this.matrixWorld;if(void 0!==B&&(null===y.boundingSphere&&y.computeBoundingSphere(),g.copy(y.boundingSphere),g.applyMatrix4(F),!1!==x.ray.intersectsSphere(g)&&(d.getInverse(F),e.copy(x.ray).applyMatrix4(d),null===y.boundingBox||!1!==e.intersectsBox(y.boundingBox)))){var K;if(y instanceof
f.BufferGeometry){B=y.index;F=y.attributes;y=F.position.array;if(void 0!==F.uv)var L=F.uv.array;if(null!==B){F=B.array;for(var N=0,Q=F.length;N<Q;N+=3){B=F[N];var W=F[N+1];var H=F[N+2];if(K=c(this,x,e,y,L,B,W,H))K.faceIndex=Math.floor(N/3),A.push(K)}}else for(N=0,Q=y.length;N<Q;N+=9)if(B=N/3,W=B+1,H=B+2,K=c(this,x,e,y,L,B,W,H))K.index=B,A.push(K)}else if(y instanceof f.Geometry){F=B instanceof f.MultiMaterial;N=!0===F?B.materials:null;Q=y.vertices;W=y.faces;H=y.faceVertexUvs[0];0<H.length&&(L=H);
for(var O=0,P=W.length;O<P;O++){var D=W[O];K=!0===F?N[D.materialIndex]:B;if(void 0!==K){H=Q[D.a];var R=Q[D.b];var U=Q[D.c];if(!0===K.morphTargets){K=y.morphTargets;var I=this.morphTargetInfluences;h.set(0,0,0);k.set(0,0,0);l.set(0,0,0);for(var J=0,S=K.length;J<S;J++){var X=I[J];if(0!==X){var M=K[J].vertices;h.addScaledVector(m.subVectors(M[D.a],H),X);k.addScaledVector(n.subVectors(M[D.b],R),X);l.addScaledVector(q.subVectors(M[D.c],U),X)}}h.add(H);k.add(R);l.add(U);H=h;R=k;U=l}if(K=b(this,x,e,H,R,
U,u))L&&(I=L[O],p.copy(I[0]),t.copy(I[1]),r.copy(I[2]),K.uv=a(u,H,R,U,p,t,r)),K.face=D,K.faceIndex=O,A.push(K)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});f.Bone=function(a){f.Object3D.call(this);this.type="Bone";this.skin=a};f.Bone.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Bone,copy:function(a){f.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this}});
f.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new f.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=f.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new f.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,f.RGBAFormat,f.FloatType)):this.boneMatrices=
new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new f.Matrix4)};
Object.assign(f.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new f.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),
a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new f.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)Cb(a,this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.toArray(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new f.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}});
f.SkinnedMesh=function(a,b,c){f.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new f.Matrix4;this.bindMatrixInverse=new f.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],b=new f.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],
-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new f.Skeleton(a,void 0,c),this.matrixWorld)};
f.SkinnedMesh.prototype=Object.assign(Object.create(f.Mesh.prototype),{constructor:f.SkinnedMesh,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof f.Geometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();
Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry instanceof f.BufferGeometry){b=new f.Vector4;var d=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(){f.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===
this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)}});f.LOD=function(){f.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})};
f.LOD.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.LOD,copy:function(a){f.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);
return b[c-1].object},raycast:function(){var a=new f.Vector3;return function(b,c){Bb(a,this.matrixWorld);this.getObjectForDistance(b.ray.origin.distanceTo(a)).raycast(b,c)}}(),update:function(){var a=new f.Vector3,b=new f.Vector3;return function(c){var d=this.levels;if(1<d.length){Bb(a,c.matrixWorld);Bb(b,this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,g=d.length;e<g;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<g;e++)d[e].object.visible=
!1}}}(),toJSON:function(a){a=f.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});f.Sprite=function(a){f.Object3D.call(this);this.type="Sprite";this.material=void 0!==a?a:new f.SpriteMaterial};
f.Sprite.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.Sprite,raycast:function(){var a=new f.Vector3;return function(b,c){Bb(a,this.matrixWorld);b=b.ray.distanceSqToPoint(a);b>this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(b),point:this.position,face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
f.LensFlare=function(a,b,c,d,e){f.Object3D.call(this);this.lensFlares=[];this.positionScreen=new f.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
f.LensFlare.prototype=Object.assign(Object.create(f.Object3D.prototype),{constructor:f.LensFlare,copy:function(a){f.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new f.Color(16777215));void 0===d&&(d=f.NormalBlending);c=Math.min(c,
Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});
f.Scene=function(){f.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};f.Scene.prototype=Object.create(f.Object3D.prototype);f.Scene.prototype.constructor=f.Scene;f.Scene.prototype.copy=function(a,b){f.Object3D.prototype.copy.call(this,a,b);null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};
f.Fog=function(a,b,c){this.name="";this.color=new f.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};f.Fog.prototype.clone=function(){return new f.Fog(db(this.color),this.near,this.far)};f.FogExp2=function(a,b){this.name="";this.color=new f.Color(a);this.density=void 0!==b?b:2.5E-4};f.FogExp2.prototype.clone=function(){return new f.FogExp2(db(this.color),this.density)};f.ShaderChunk={};f.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif\n";
f.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";f.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a \x3c ALPHATEST ) discard;\n#endif\n";f.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";
f.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";f.ShaderChunk.begin_vertex="\nvec3 transformed \x3d vec3( position );\n";f.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal \x3d vec3( normal );\n";f.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance \x3d\x3d 0.0, lightDistance \x3c cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent \x3e 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor \x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel \x3d exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gl \x3d dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv \x3d dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL \x3d saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB \x3d vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";
f.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX \x3d dFdx( surf_pos );\n\t\tvec3 vSigmaY \x3d dFdy( surf_pos );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 );\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";
f.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane \x3d clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n#endif\n";f.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES \x3e 0\n\t#if ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";
f.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";f.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n";f.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *\x3d vColor;\n#endif";f.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";
f.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";f.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz \x3d color.xyz;\n#endif";f.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance \x3d dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n";
f.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection \x3d abs(direction);\n\tint face \x3d -1;\n\tif( absDirection.x \x3e absDirection.z ) {\n\t\tif(absDirection.x \x3e absDirection.y )\n\t\t\tface \x3d direction.x \x3e 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z \x3e absDirection.y )\n\t\t\tface \x3d direction.z \x3e 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale \x3d exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness \x3d dFdx(roughness);\n\tfloat dyRoughness \x3d dFdy(roughness);\n\tvec3 dx \x3d dFdx( vec * scale * dxRoughness );\n\tvec3 dy \x3d dFdy( vec * scale * dyRoughness );\n\tfloat d \x3d max( dot( dx, dx ), dot( dy, dy ) );\n\td \x3d clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel \x3d 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel \x3d roughnessLevel \x3e cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a \x3d 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed \x3d exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed \x3d vec2( 1.0 ) / exp2_packed;\n\tfloat powScale \x3d exp2_packed.x * exp2_packed.y;\n\tfloat scale \x3d rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset \x3d 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes \x3d mipLevel \x3d\x3d 0.0;\n\tscale \x3d  bRes \x26\x26 (scale \x3c a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face \x3d getFaceFromDirection(direction);\n\tfloat rcpPowScale \x3d 1.0 / powScale;\n\tif( face \x3d\x3d 0) {\n\t\tr \x3d vec3(direction.x, -direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face \x3d\x3d 1) {\n\t\tr \x3d vec3(direction.y, direction.x, direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face \x3d\x3d 2) {\n\t\tr \x3d vec3(direction.z, direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face \x3d\x3d 3) {\n\t\tr \x3d vec3(direction.x, direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face \x3d\x3d 4) {\n\t\tr \x3d vec3(direction.y, direction.x, -direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr \x3d vec3(direction.z, -direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr \x3d normalize(r);\n\tfloat texelOffset \x3d 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s \x3d ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base \x3d offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal \x3d roughness* cubeUV_maxLods3;\n\tfloat r1 \x3d floor(roughnessVal);\n\tfloat r2 \x3d r1 + 1.0;\n\tfloat t \x3d fract(roughnessVal);\n\tvec2 mipInfo \x3d MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s \x3d mipInfo.y;\n\tfloat level0 \x3d mipInfo.x;\n\tfloat level1 \x3d level0 + 1.0;\n\tlevel1 \x3d level1 \x3e 5.0 ? 5.0 : level1;\n\tlevel0 +\x3d min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 \x3d getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 \x3d envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 \x3d getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 \x3d envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result \x3d mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";
f.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal \x3d -objectNormal;\n#endif\nvec3 transformedNormal \x3d normalMatrix * objectNormal;\n";f.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";f.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";
f.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\temissiveColor.rgb \x3d emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif\n";f.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";f.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent \x3d max( max( value.r, value.g ), value.b );\n  float fExp \x3d clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB \x3d max( value.x, max( value.g, value.b ) );\n  float M      \x3d clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            \x3d ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB \x3d max( value.x, max( value.g, value.b ) );\n    float D      \x3d max( maxRange / maxRGB, 1.0 );\n    D            \x3d min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM \x3d mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp \x3d value.rgb * cLogLuvM;\n  Xp_Y_XYZp \x3d max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy \x3d Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le \x3d 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w \x3d fract(Le);\n  vResult.z \x3d (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM \x3d mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le \x3d value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y \x3d exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z \x3d Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x \x3d value.x * Xp_Y_XYZp.z;\n  vec3 vRGB \x3d Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n";
f.ShaderChunk.encodings_fragment="  gl_FragColor \x3d linearToOutputTexel( gl_FragColor );\n";f.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex \x3d normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal \x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal \x3d 1.0;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y \x3d saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x \x3d atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor \x3d texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView \x3d flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor \x3d envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";
f.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) \x26\x26 ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";
f.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";f.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";
f.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth \x3d gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth \x3d gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";
f.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";f.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse +\x3d PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";f.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";
f.ShaderChunk.lights_lambert_vertex="vec3 diffuse \x3d vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position \x3d mvPosition.xyz;\ngeometry.normal \x3d normalize( transformedNormal );\ngeometry.viewDir \x3d normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position \x3d geometry.position;\nbackGeometry.normal \x3d -geometry.normal;\nbackGeometry.viewDir \x3d geometry.viewDir;\nvLightFront \x3d vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack \x3d vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";
f.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color \x3d directionalLight.color;\n\t\tdirectLight.direction \x3d directionalLight.direction;\n\t\tdirectLight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color \x3d pointLight.color;\n\t\t\tdirectLight.color *\x3d punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible \x3d true;\n\t\t} else {\n\t\t\tdirectLight.color \x3d vec3( 0.0 );\n\t\t\tdirectLight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tfloat angleCos \x3d dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos \x3e spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect \x3d smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color \x3d spotLight.color;\n\t\t\tdirectLight.color *\x3d spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible \x3d true;\n\t\t} else {\n\t\t\tdirectLight.color \x3d vec3( 0.0 );\n\t\t\tdirectLight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL \x3d dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *\x3d PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal \x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal \x3d 1.0;\n\t\t#endif\n\t\tvec3 worldNormal \x3d inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec \x3d flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec \x3d flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor \x3d vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar \x3d float( maxMIPLevel );\n\t\tfloat desiredMIPLevel \x3d maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal \x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal \x3d 1.0;\n\t\t#endif\n\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel \x3d getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec \x3d flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec \x3d flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y \x3d saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x \x3d atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView \x3d flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";
f.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;\n";f.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";
f.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness \x3d clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor \x3d mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( 0.16 * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#endif\n";f.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t#endif\n};\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectSpecular +\x3d radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";
f.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance \x3d texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *\x3d PI;\n\t\t#endif\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance +\x3d getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n";
f.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) \x26\x26 defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT \x3d log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";f.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";f.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";
f.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z \x3d log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z \x3d (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";f.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor \x3d texture2D( map, vUv );\n\ttexelColor \x3d mapTexelToLinear( texelColor );\n\tdiffuseColor *\x3d texelColor;\n#endif\n";
f.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";f.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel \x3d texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *\x3d mapTexelToLinear( mapTexel );\n#endif\n";f.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";f.ShaderChunk.metalnessmap_fragment="float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.r;\n#endif\n";
f.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";f.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal +\x3d ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal +\x3d ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal +\x3d ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal +\x3d ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";
f.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";f.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed +\x3d ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed +\x3d ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed +\x3d ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed +\x3d ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed +\x3d ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed +\x3d ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed +\x3d ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed +\x3d ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";
f.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx \x3d vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy \x3d vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal \x3d perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";
f.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 \x3d dFdx( eye_pos.xyz );\n\t\tvec3 q1 \x3d dFdy( eye_pos.xyz );\n\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\tvec3 S \x3d normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T \x3d normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N \x3d normalize( surf_norm );\n\t\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy \x3d normalScale * mapN.xy;\n\t\tmat3 tsn \x3d mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";
f.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthoDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat OrthoDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";
f.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif\n";f.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition \x3d modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position \x3d projectionMatrix * mvPosition;\n";f.ShaderChunk.roughnessmap_fragment="float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.r;\n#endif\n";
f.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";f.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset \x3d vec2( 0.0, 1.0 );\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / size;\n\t\tvec2 centroidUV \x3d floor( uv * size + 0.5 ) / size;\n\t\tfloat lb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f \x3d fract( uv * size + 0.5 );\n\t\tfloat a \x3d mix( lb, lt, f.y );\n\t\tfloat b \x3d mix( rb, rt, f.y );\n\t\tfloat c \x3d mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbvec4 inFrustumVec \x3d bvec4 ( shadowCoord.x \x3e\x3d 0.0, shadowCoord.x \x3c\x3d 1.0, shadowCoord.y \x3e\x3d 0.0, shadowCoord.y \x3c\x3d 1.0 );\n\t\tbool inFrustum \x3d all( inFrustumVec );\n\t\tbvec2 frustumTestVec \x3d bvec2( inFrustum, shadowCoord.z \x3c\x3d 1.0 );\n\t\tbool frustumTest \x3d all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";
f.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";
f.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] \x3d spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";
f.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tDirectionalLight directionalLight;\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tshadow *\x3d bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tSpotLight spotLight;\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tshadow *\x3d bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tPointLight pointLight;\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tshadow *\x3d bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";
f.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif";f.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j \x3d i * 4.0;\n\t\t\tfloat x \x3d mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y \x3d floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx \x3d 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy \x3d 1.0 / float( boneTextureHeight );\n\t\t\ty \x3d dy * ( y + 0.5 );\n\t\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone \x3d boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";
f.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\tskinned  \x3d bindMatrixInverse * skinned;\n#endif\n";f.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix  \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";
f.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif";f.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";f.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif\n";
f.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *\x3d toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *\x3d toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *\x3d toneMappingExposure;\n  color \x3d max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";
f.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";f.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";f.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d uv2;\n#endif";f.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";
f.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";f.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv \x3d uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";
f.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition \x3d modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition \x3d modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n";
f.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];b[c][d]=e instanceof f.Color||e instanceof f.Vector2||e instanceof f.Vector3||e instanceof f.Vector4||e instanceof f.Matrix3||e instanceof f.Matrix4||e instanceof f.Texture?e.clone():Array.isArray(e)?e.slice():e}}return b}};
f.UniformsLib={common:{diffuse:{type:"c",value:new f.Color(15658734)},opacity:{type:"1f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new f.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"1f",value:-1},reflectivity:{type:"1f",value:1},refractionRatio:{type:"1f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"1f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"1f",
value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"1f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new f.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"1f",value:1},displacementBias:{type:"1f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"1f",value:2.5E-4},fogNear:{type:"1f",
value:1},fogFar:{type:"1f",value:2E3},fogColor:{type:"c",value:new f.Color(16777215)}},lights:{ambientLightColor:{type:"3fv",value:[]},directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},
distance:{type:"1f"},coneCos:{type:"1f"},penumbraCos:{type:"1f"},decay:{type:"1f"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"1f"},distance:{type:"1f"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},
pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new f.Color(15658734)},opacity:{type:"1f",value:1},size:{type:"1f",value:1},scale:{type:"1f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new f.Vector4(0,0,1,1)}}};f.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tgl_FragColor \x3d textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\t#include \x3clogdepthbuf_fragment\x3e\n}\n";
f.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvWorldPosition \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";f.ShaderChunk.depth_frag="#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";
f.ShaderChunk.depth_vert="#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";
f.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tgl_FragColor \x3d packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n";f.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition;\n}\n";
f.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 direction \x3d normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y \x3d saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x \x3d atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\t#include \x3clogdepthbuf_fragment\x3e\n}\n";
f.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvWorldPosition \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";f.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
f.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\tvLineDistance \x3d scale * lineDistance;\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";
f.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse \x3d vec3( 0.0 );\n\treflectedLight.directSpecular \x3d vec3( 0.0 );\n\treflectedLight.indirectDiffuse \x3d diffuseColor.rgb;\n\treflectedLight.indirectSpecular \x3d vec3( 0.0 );\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
f.ShaderChunk.meshbasic_vert="#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_ENVMAP\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n}\n";
f.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\treflectedLight.indirectDiffuse \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#include \x3clightmap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse \x3d ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse \x3d vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
f.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3clights_lambert_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
f.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_template\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
f.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
f.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3clights_pars\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_template\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
f.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
f.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( vNormal ), opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n}\n";f.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include \x3ccommon\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvNormal \x3d normalize( normalMatrix * normal );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";
f.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
f.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize \x3d size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize \x3d size;\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
f.ShaderChunk.shadow_frag="uniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\tgl_FragColor \x3d vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n";f.ShaderChunk.shadow_vert="#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
f.ShaderLib={basic:{uniforms:f.UniformsUtils.merge([f.UniformsLib.common,f.UniformsLib.aomap,f.UniformsLib.fog]),vertexShader:f.ShaderChunk.meshbasic_vert,fragmentShader:f.ShaderChunk.meshbasic_frag},lambert:{uniforms:f.UniformsUtils.merge([f.UniformsLib.common,f.UniformsLib.aomap,f.UniformsLib.lightmap,f.UniformsLib.emissivemap,f.UniformsLib.fog,f.UniformsLib.lights,{emissive:{type:"c",value:new f.Color(0)}}]),vertexShader:f.ShaderChunk.meshlambert_vert,fragmentShader:f.ShaderChunk.meshlambert_frag},
phong:{uniforms:f.UniformsUtils.merge([f.UniformsLib.common,f.UniformsLib.aomap,f.UniformsLib.lightmap,f.UniformsLib.emissivemap,f.UniformsLib.bumpmap,f.UniformsLib.normalmap,f.UniformsLib.displacementmap,f.UniformsLib.fog,f.UniformsLib.lights,{emissive:{type:"c",value:new f.Color(0)},specular:{type:"c",value:new f.Color(1118481)},shininess:{type:"1f",value:30}}]),vertexShader:f.ShaderChunk.meshphong_vert,fragmentShader:f.ShaderChunk.meshphong_frag},standard:{uniforms:f.UniformsUtils.merge([f.UniformsLib.common,
f.UniformsLib.aomap,f.UniformsLib.lightmap,f.UniformsLib.emissivemap,f.UniformsLib.bumpmap,f.UniformsLib.normalmap,f.UniformsLib.displacementmap,f.UniformsLib.roughnessmap,f.UniformsLib.metalnessmap,f.UniformsLib.fog,f.UniformsLib.lights,{emissive:{type:"c",value:new f.Color(0)},roughness:{type:"1f",value:.5},metalness:{type:"1f",value:0},envMapIntensity:{type:"1f",value:1}}]),vertexShader:f.ShaderChunk.meshphysical_vert,fragmentShader:f.ShaderChunk.meshphysical_frag},points:{uniforms:f.UniformsUtils.merge([f.UniformsLib.points,
f.UniformsLib.fog]),vertexShader:f.ShaderChunk.points_vert,fragmentShader:f.ShaderChunk.points_frag},dashed:{uniforms:f.UniformsUtils.merge([f.UniformsLib.common,f.UniformsLib.fog,{scale:{type:"1f",value:1},dashSize:{type:"1f",value:1},totalSize:{type:"1f",value:2}}]),vertexShader:f.ShaderChunk.linedashed_vert,fragmentShader:f.ShaderChunk.linedashed_frag},depth:{uniforms:f.UniformsUtils.merge([f.UniformsLib.common,f.UniformsLib.displacementmap]),vertexShader:f.ShaderChunk.depth_vert,fragmentShader:f.ShaderChunk.depth_frag},
normal:{uniforms:{opacity:{type:"1f",value:1}},vertexShader:f.ShaderChunk.normal_vert,fragmentShader:f.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"1f",value:-1}},vertexShader:f.ShaderChunk.cube_vert,fragmentShader:f.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"1f",value:-1}},vertexShader:f.ShaderChunk.equirect_vert,fragmentShader:f.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new f.Vector3}},
vertexShader:f.ShaderChunk.distanceRGBA_vert,fragmentShader:f.ShaderChunk.distanceRGBA_frag}};f.ShaderLib.physical={uniforms:f.UniformsUtils.merge([f.ShaderLib.standard.uniforms,{}]),vertexShader:f.ShaderChunk.meshphysical_vert,fragmentShader:f.ShaderChunk.meshphysical_frag};
f.WebGLRenderer=function(a){function b(z,C,E,Z){!0===R&&(z*=Z,C*=Z,E*=Z);ea.clearColor(z,C,E,Z)}function c(){ea.init();ea.scissor(Ja.copy(Mb).multiplyScalar(Oa));ea.viewport(nb.copy(ob).multiplyScalar(Oa));b(Pa.r,Pa.g,Pa.b,fb)}function d(){sa=ja=null;xa="";la=-1;ea.reset()}function e(z){z.preventDefault();d();c();ua.clear()}function g(z){z=z.target;z.removeEventListener("dispose",g);a:{var C=ua.get(z);if(z.image&&C.__image__webglTextureCube)G.deleteTexture(C.__image__webglTextureCube);else{if(void 0===
C.__webglInit)break a;G.deleteTexture(C.__webglTexture)}ua.delete(z)}gb.textures--}function h(z){z=z.target;z.removeEventListener("dispose",h);var C=ua.get(z),E=ua.get(z.texture);if(z){void 0!==E.__webglTexture&&G.deleteTexture(E.__webglTexture);z.depthTexture&&z.depthTexture.dispose();if(z instanceof f.WebGLRenderTargetCube)for(E=0;6>E;E++)G.deleteFramebuffer(C.__webglFramebuffer[E]),C.__webglDepthbuffer&&G.deleteRenderbuffer(C.__webglDepthbuffer[E]);else G.deleteFramebuffer(C.__webglFramebuffer),
C.__webglDepthbuffer&&G.deleteRenderbuffer(C.__webglDepthbuffer);ua.delete(z.texture);ua.delete(z)}gb.textures--}function k(z){z=z.target;z.removeEventListener("dispose",k);l(z);ua.delete(z)}function l(z){var C=ua.get(z).program;z.program=void 0;void 0!==C&&pb.releaseProgram(C)}function m(z,C){return Math.abs(C[0])-Math.abs(z[0])}function n(z,C){return z.object.renderOrder!==C.object.renderOrder?z.object.renderOrder-C.object.renderOrder:z.material.id!==C.material.id?z.material.id-C.material.id:z.z!==
C.z?z.z-C.z:z.id-C.id}function q(z,C){return z.object.renderOrder!==C.object.renderOrder?z.object.renderOrder-C.object.renderOrder:z.z!==C.z?C.z-z.z:z.id-C.id}function p(z,C,E,Z,aa){if(E.transparent){Z=X;var ba=++M}else Z=J,ba=++S;ba=Z[ba];void 0!==ba?(ba.id=z.id,ba.object=z,ba.geometry=C,ba.material=E,ba.z=Ea.z,ba.group=aa):(ba={id:z.id,object:z,geometry:C,material:E,z:Ea.z,group:aa},Z.push(ba))}function t(z){if(!hc.intersectsSphere(z))return!1;var C=Ra.numPlanes;if(0===C)return!0;var E=ia.clippingPlanes,
Z=z.center;z=-z.radius;var aa=0;do if(E[aa].distanceToPoint(Z)<z)return!1;while(++aa!==C);return!0}function r(z,C){if(!1!==z.visible){if(z.layers.test(C.layers))if(z instanceof f.Light)I.push(z);else if(z instanceof f.Sprite){var E;if(E=!1!==z.frustumCulled)hb.center.set(0,0,0),hb.radius=.7071067811865476,hb.applyMatrix4(z.matrixWorld),E=!0!==t(hb);E||ca.push(z)}else if(z instanceof f.LensFlare)ha.push(z);else if(z instanceof f.ImmediateRenderObject)!0===ia.sortObjects&&(Bb(Ea,z.matrixWorld),sb(Ea,
ub)),p(z,null,z.material,Ea.z,null);else if(z instanceof f.Mesh||z instanceof f.Line||z instanceof f.Points)if(z instanceof f.SkinnedMesh&&z.skeleton.update(),(E=!1===z.frustumCulled)||(E=z.geometry,null===E.boundingSphere&&E.computeBoundingSphere(),hb.copy(E.boundingSphere).applyMatrix4(z.matrixWorld),E=!0===t(hb)),E){var Z=z.material;if(!0===Z.visible)if(!0===ia.sortObjects&&(Bb(Ea,z.matrixWorld),sb(Ea,ub)),E=qb.update(z),Z instanceof f.MultiMaterial){var aa=E.groups,ba=Z.materials;Z=0;for(var T=
aa.length;Z<T;Z++){var da=aa[Z],V=ba[da.materialIndex];!0===V.visible&&p(z,E,V,Ea.z,da)}}else p(z,E,Z,Ea.z,null)}z=z.children;Z=0;for(T=z.length;Z<T;Z++)r(z[Z],C)}}function v(z,C,E,Z){for(var aa=0,ba=z.length;aa<ba;aa++){var T=z[aa],da=T.object,V=T.geometry,oa=void 0===Z?T.material:Z;T=T.group;Cb(da.modelViewMatrix,C.matrixWorldInverse,da.matrixWorld);Gb(da.normalMatrix,da.modelViewMatrix);if(da instanceof f.ImmediateRenderObject){u(oa);var ta=w(C,E,oa,da);xa="";da.render(function(ra){ia.renderBufferImmediate(ra,
ta,oa)})}else ia.renderBufferDirect(C,E,V,oa,da,T)}}function u(z){z.side!==f.DoubleSide?ea.enable(G.CULL_FACE):ea.disable(G.CULL_FACE);ea.setFlipSided(z.side===f.BackSide);!0===z.transparent?ea.setBlending(z.blending,z.blendEquation,z.blendSrc,z.blendDst,z.blendEquationAlpha,z.blendSrcAlpha,z.blendDstAlpha,z.premultipliedAlpha):ea.setBlending(f.NoBlending);ea.setDepthFunc(z.depthFunc);ea.setDepthTest(z.depthTest);ea.setDepthWrite(z.depthWrite);ea.setColorWrite(z.colorWrite);ea.setPolygonOffset(z.polygonOffset,
z.polygonOffsetFactor,z.polygonOffsetUnits)}function w(z,C,E,Z){Nb=0;var aa=ua.get(E);vb&&((Ob||z!==sa)&&Ra.setState(E.clippingPlanes,E.clipShadows,z,aa,z===sa&&E.id===la),void 0!==aa.numClippingPlanes&&aa.numClippingPlanes!==Ra.numPlanes&&(E.needsUpdate=!0));void 0===aa.program&&(E.needsUpdate=!0);void 0!==aa.lightsHash&&aa.lightsHash!==qa.hash&&(E.needsUpdate=!0);if(E.needsUpdate){a:{var ba=ua.get(E),T=pb.getParameters(E,qa,C,Ra.numPlanes,Z),da=pb.getProgramCode(E,T),V=ba.program,oa=!0;if(void 0===
V)E.addEventListener("dispose",k);else if(V.code!==da)l(E);else{if(void 0!==T.shaderID)break a;oa=!1}oa&&(T.shaderID?(V=f.ShaderLib[T.shaderID],ba.__webglShader={name:E.type,uniforms:f.UniformsUtils.clone(V.uniforms),vertexShader:V.vertexShader,fragmentShader:V.fragmentShader}):ba.__webglShader={name:E.type,uniforms:E.uniforms,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader},E.__webglShader=ba.__webglShader,V=pb.acquireProgram(E,T,da),ba.program=V,E.program=V);T=V.getAttributes();if(E.morphTargets)for(da=
E.numSupportedMorphTargets=0;da<ia.maxMorphTargets;da++)0<=T["morphTarget"+da]&&E.numSupportedMorphTargets++;if(E.morphNormals)for(da=E.numSupportedMorphNormals=0;da<ia.maxMorphNormals;da++)0<=T["morphNormal"+da]&&E.numSupportedMorphNormals++;T=ba.__webglShader.uniforms;(E instanceof f.ShaderMaterial||E instanceof f.RawShaderMaterial)&&!0!==E.clipping||(ba.numClippingPlanes=Ra.numPlanes,T.clippingPlanes=Ra.uniform);E.lights&&(ba.lightsHash=qa.hash,T.ambientLightColor.value=qa.ambient,T.directionalLights.value=
qa.directional,T.spotLights.value=qa.spot,T.pointLights.value=qa.point,T.hemisphereLights.value=qa.hemi,T.directionalShadowMap.value=qa.directionalShadowMap,T.directionalShadowMatrix.value=qa.directionalShadowMatrix,T.spotShadowMap.value=qa.spotShadowMap,T.spotShadowMatrix.value=qa.spotShadowMatrix,T.pointShadowMap.value=qa.pointShadowMap,T.pointShadowMatrix.value=qa.pointShadowMatrix);da=ba.program.getUniforms();da=f.WebGLUniforms.seqWithValue(da.seq,T);ba.uniformsList=da;ba.dynamicUniforms=f.WebGLUniforms.splitDynamic(da,
T)}E.needsUpdate=!1}var ta=!1;oa=V=!1;ba=aa.program;da=ba.getUniforms();T=aa.__webglShader.uniforms;ba.id!==ja&&(G.useProgram(ba.program),ja=ba.id,oa=V=ta=!0);E.id!==la&&(la=E.id,V=!0);if(ta||z!==sa){da.set(G,z,"projectionMatrix");Sa.logarithmicDepthBuffer&&da.setValue(G,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2));z!==sa&&(sa=z,oa=V=!0);if(E instanceof f.ShaderMaterial||E instanceof f.MeshPhongMaterial||E instanceof f.MeshStandardMaterial||E.envMap)ta=da.map.cameraPosition,void 0!==ta&&ta.setValue(G,
Bb(Ea,z.matrixWorld));(E instanceof f.MeshPhongMaterial||E instanceof f.MeshLambertMaterial||E instanceof f.MeshBasicMaterial||E instanceof f.MeshStandardMaterial||E instanceof f.ShaderMaterial||E.skinning)&&da.setValue(G,"viewMatrix",z.matrixWorldInverse);da.set(G,ia,"toneMappingExposure");da.set(G,ia,"toneMappingWhitePoint")}E.skinning&&(da.setOptional(G,Z,"bindMatrix"),da.setOptional(G,Z,"bindMatrixInverse"),ta=Z.skeleton)&&(Sa.floatVertexTextures&&ta.useVertexTexture?(da.set(G,ta,"boneTexture"),
da.set(G,ta,"boneTextureWidth"),da.set(G,ta,"boneTextureHeight")):da.setOptional(G,ta,"boneMatrices"));if(V){E.lights&&(V=oa,T.ambientLightColor.needsUpdate=V,T.directionalLights.needsUpdate=V,T.pointLights.needsUpdate=V,T.spotLights.needsUpdate=V,T.hemisphereLights.needsUpdate=V);C&&E.fog&&(T.fogColor.value=C.color,C instanceof f.Fog?(T.fogNear.value=C.near,T.fogFar.value=C.far):C instanceof f.FogExp2&&(T.fogDensity.value=C.density));if(E instanceof f.MeshBasicMaterial||E instanceof f.MeshLambertMaterial||
E instanceof f.MeshPhongMaterial||E instanceof f.MeshStandardMaterial||E instanceof f.MeshDepthMaterial){T.opacity.value=E.opacity;T.diffuse.value=E.color;E.emissive&&T.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity);T.map.value=E.map;T.specularMap.value=E.specularMap;T.alphaMap.value=E.alphaMap;E.aoMap&&(T.aoMap.value=E.aoMap,T.aoMapIntensity.value=E.aoMapIntensity);if(E.map)var ra=E.map;else E.specularMap?ra=E.specularMap:E.displacementMap?ra=E.displacementMap:E.normalMap?ra=
E.normalMap:E.bumpMap?ra=E.bumpMap:E.roughnessMap?ra=E.roughnessMap:E.metalnessMap?ra=E.metalnessMap:E.alphaMap?ra=E.alphaMap:E.emissiveMap&&(ra=E.emissiveMap);void 0!==ra&&(ra instanceof f.WebGLRenderTarget&&(ra=ra.texture),C=ra.offset,ra=ra.repeat,T.offsetRepeat.value.set(C.x,C.y,ra.x,ra.y));T.envMap.value=E.envMap;T.flipEnvMap.value=E.envMap instanceof f.CubeTexture?-1:1;T.reflectivity.value=E.reflectivity;T.refractionRatio.value=E.refractionRatio}E instanceof f.LineBasicMaterial?(T.diffuse.value=
E.color,T.opacity.value=E.opacity):E instanceof f.LineDashedMaterial?(T.diffuse.value=E.color,T.opacity.value=E.opacity,T.dashSize.value=E.dashSize,T.totalSize.value=E.dashSize+E.gapSize,T.scale.value=E.scale):E instanceof f.PointsMaterial?(T.diffuse.value=E.color,T.opacity.value=E.opacity,T.size.value=E.size*Oa,T.scale.value=.5*Q.clientHeight,T.map.value=E.map,null!==E.map&&(ra=E.map.offset,E=E.map.repeat,T.offsetRepeat.value.set(ra.x,ra.y,E.x,E.y))):E instanceof f.MeshLambertMaterial?(E.lightMap&&
(T.lightMap.value=E.lightMap,T.lightMapIntensity.value=E.lightMapIntensity),E.emissiveMap&&(T.emissiveMap.value=E.emissiveMap)):E instanceof f.MeshPhongMaterial?(T.specular.value=E.specular,T.shininess.value=Math.max(E.shininess,1E-4),E.lightMap&&(T.lightMap.value=E.lightMap,T.lightMapIntensity.value=E.lightMapIntensity),E.emissiveMap&&(T.emissiveMap.value=E.emissiveMap),E.bumpMap&&(T.bumpMap.value=E.bumpMap,T.bumpScale.value=E.bumpScale),E.normalMap&&(T.normalMap.value=E.normalMap,T.normalScale.value.copy(E.normalScale)),
E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias)):E instanceof f.MeshPhysicalMaterial?x(T,E):E instanceof f.MeshStandardMaterial?x(T,E):E instanceof f.MeshDepthMaterial?E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias):E instanceof f.MeshNormalMaterial&&(T.opacity.value=E.opacity);f.WebGLUniforms.upload(G,
aa.uniformsList,T,ia)}da.set(G,Z,"modelViewMatrix");da.set(G,Z,"normalMatrix");da.setValue(G,"modelMatrix",Z.matrixWorld);aa=aa.dynamicUniforms;null!==aa&&(f.WebGLUniforms.evalDynamic(aa,T,Z,z),f.WebGLUniforms.upload(G,aa,T,ia));return ba}function x(z,C){z.roughness.value=C.roughness;z.metalness.value=C.metalness;C.roughnessMap&&(z.roughnessMap.value=C.roughnessMap);C.metalnessMap&&(z.metalnessMap.value=C.metalnessMap);C.lightMap&&(z.lightMap.value=C.lightMap,z.lightMapIntensity.value=C.lightMapIntensity);
C.emissiveMap&&(z.emissiveMap.value=C.emissiveMap);C.bumpMap&&(z.bumpMap.value=C.bumpMap,z.bumpScale.value=C.bumpScale);C.normalMap&&(z.normalMap.value=C.normalMap,z.normalScale.value.copy(C.normalScale));C.displacementMap&&(z.displacementMap.value=C.displacementMap,z.displacementScale.value=C.displacementScale,z.displacementBias.value=C.displacementBias);C.envMap&&(z.envMapIntensity.value=C.envMapIntensity)}function A(z,C,E){E?(G.texParameteri(z,G.TEXTURE_WRAP_S,N(C.wrapS)),G.texParameteri(z,G.TEXTURE_WRAP_T,
N(C.wrapT)),G.texParameteri(z,G.TEXTURE_MAG_FILTER,N(C.magFilter)),G.texParameteri(z,G.TEXTURE_MIN_FILTER,N(C.minFilter))):(G.texParameteri(z,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(z,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),C.wrapS===f.ClampToEdgeWrapping&&C.wrapT===f.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",C),G.texParameteri(z,G.TEXTURE_MAG_FILTER,L(C.magFilter)),G.texParameteri(z,
G.TEXTURE_MIN_FILTER,L(C.minFilter)),C.minFilter!==f.NearestFilter&&C.minFilter!==f.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",C));!(E=ya.get("EXT_texture_filter_anisotropic"))||C.type===f.FloatType&&null===ya.get("OES_texture_float_linear")||C.type===f.HalfFloatType&&null===ya.get("OES_texture_half_float_linear")||!(1<C.anisotropy||ua.get(C).__currentAnisotropy)||(G.texParameterf(z,E.TEXTURE_MAX_ANISOTROPY_EXT,
Math.min(C.anisotropy,ia.getMaxAnisotropy())),ua.get(C).__currentAnisotropy=C.anisotropy)}function y(z,C){if(z.width>C||z.height>C){C/=Math.max(z.width,z.height);var E=document.createElement("canvas");E.width=Math.floor(z.width*C);E.height=Math.floor(z.height*C);E.getContext("2d").drawImage(z,0,0,z.width,z.height,0,0,E.width,E.height);console.warn("THREE.WebGLRenderer: image is too big ("+z.width+"x"+z.height+"). Resized to "+E.width+"x"+E.height,z);return E}return z}function B(z){return f.Math.isPowerOfTwo(z.width)&&
f.Math.isPowerOfTwo(z.height)}function F(z,C,E,Z){var aa=N(C.texture.format),ba=N(C.texture.type);ea.texImage2D(Z,0,aa,C.width,C.height,0,aa,ba,null);G.bindFramebuffer(G.FRAMEBUFFER,z);G.framebufferTexture2D(G.FRAMEBUFFER,E,Z,ua.get(C.texture).__webglTexture,0);G.bindFramebuffer(G.FRAMEBUFFER,null)}function K(z,C){G.bindRenderbuffer(G.RENDERBUFFER,z);C.depthBuffer&&!C.stencilBuffer?(G.renderbufferStorage(G.RENDERBUFFER,G.DEPTH_COMPONENT16,C.width,C.height),G.framebufferRenderbuffer(G.FRAMEBUFFER,
G.DEPTH_ATTACHMENT,G.RENDERBUFFER,z)):C.depthBuffer&&C.stencilBuffer?(G.renderbufferStorage(G.RENDERBUFFER,G.DEPTH_STENCIL,C.width,C.height),G.framebufferRenderbuffer(G.FRAMEBUFFER,G.DEPTH_STENCIL_ATTACHMENT,G.RENDERBUFFER,z)):G.renderbufferStorage(G.RENDERBUFFER,G.RGBA4,C.width,C.height);G.bindRenderbuffer(G.RENDERBUFFER,null)}function L(z){return z===f.NearestFilter||z===f.NearestMipMapNearestFilter||z===f.NearestMipMapLinearFilter?G.NEAREST:G.LINEAR}function N(z){if(z===f.RepeatWrapping)return G.REPEAT;
if(z===f.ClampToEdgeWrapping)return G.CLAMP_TO_EDGE;if(z===f.MirroredRepeatWrapping)return G.MIRRORED_REPEAT;if(z===f.NearestFilter)return G.NEAREST;if(z===f.NearestMipMapNearestFilter)return G.NEAREST_MIPMAP_NEAREST;if(z===f.NearestMipMapLinearFilter)return G.NEAREST_MIPMAP_LINEAR;if(z===f.LinearFilter)return G.LINEAR;if(z===f.LinearMipMapNearestFilter)return G.LINEAR_MIPMAP_NEAREST;if(z===f.LinearMipMapLinearFilter)return G.LINEAR_MIPMAP_LINEAR;if(z===f.UnsignedByteType)return G.UNSIGNED_BYTE;if(z===
f.UnsignedShort4444Type)return G.UNSIGNED_SHORT_4_4_4_4;if(z===f.UnsignedShort5551Type)return G.UNSIGNED_SHORT_5_5_5_1;if(z===f.UnsignedShort565Type)return G.UNSIGNED_SHORT_5_6_5;if(z===f.ByteType)return G.BYTE;if(z===f.ShortType)return G.SHORT;if(z===f.UnsignedShortType)return G.UNSIGNED_SHORT;if(z===f.IntType)return G.INT;if(z===f.UnsignedIntType)return G.UNSIGNED_INT;if(z===f.FloatType)return G.FLOAT;var C=ya.get("OES_texture_half_float");if(null!==C&&z===f.HalfFloatType)return C.HALF_FLOAT_OES;
if(z===f.AlphaFormat)return G.ALPHA;if(z===f.RGBFormat)return G.RGB;if(z===f.RGBAFormat)return G.RGBA;if(z===f.LuminanceFormat)return G.LUMINANCE;if(z===f.LuminanceAlphaFormat)return G.LUMINANCE_ALPHA;if(z===f.DepthFormat)return G.DEPTH_COMPONENT;if(z===f.AddEquation)return G.FUNC_ADD;if(z===f.SubtractEquation)return G.FUNC_SUBTRACT;if(z===f.ReverseSubtractEquation)return G.FUNC_REVERSE_SUBTRACT;if(z===f.ZeroFactor)return G.ZERO;if(z===f.OneFactor)return G.ONE;if(z===f.SrcColorFactor)return G.SRC_COLOR;
if(z===f.OneMinusSrcColorFactor)return G.ONE_MINUS_SRC_COLOR;if(z===f.SrcAlphaFactor)return G.SRC_ALPHA;if(z===f.OneMinusSrcAlphaFactor)return G.ONE_MINUS_SRC_ALPHA;if(z===f.DstAlphaFactor)return G.DST_ALPHA;if(z===f.OneMinusDstAlphaFactor)return G.ONE_MINUS_DST_ALPHA;if(z===f.DstColorFactor)return G.DST_COLOR;if(z===f.OneMinusDstColorFactor)return G.ONE_MINUS_DST_COLOR;if(z===f.SrcAlphaSaturateFactor)return G.SRC_ALPHA_SATURATE;C=ya.get("WEBGL_compressed_texture_s3tc");if(null!==C){if(z===f.RGB_S3TC_DXT1_Format)return C.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(z===f.RGBA_S3TC_DXT1_Format)return C.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(z===f.RGBA_S3TC_DXT3_Format)return C.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(z===f.RGBA_S3TC_DXT5_Format)return C.COMPRESSED_RGBA_S3TC_DXT5_EXT}C=ya.get("WEBGL_compressed_texture_pvrtc");if(null!==C){if(z===f.RGB_PVRTC_4BPPV1_Format)return C.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(z===f.RGB_PVRTC_2BPPV1_Format)return C.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(z===f.RGBA_PVRTC_4BPPV1_Format)return C.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(z===f.RGBA_PVRTC_2BPPV1_Format)return C.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}C=
ya.get("WEBGL_compressed_texture_etc1");if(null!==C&&z===f.RGB_ETC1_Format)return C.COMPRESSED_RGB_ETC1_WEBGL;C=ya.get("EXT_blend_minmax");if(null!==C){if(z===f.MinEquation)return C.MIN_EXT;if(z===f.MaxEquation)return C.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",f.REVISION);a=a||{};var Q=void 0!==a.canvas?a.canvas:document.createElement("canvas"),W=void 0!==a.context?a.context:null,H=void 0!==a.alpha?a.alpha:!1,O=void 0!==a.depth?a.depth:!0,P=void 0!==a.stencil?a.stencil:!0,D=void 0!==a.antialias?
a.antialias:!1,R=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,U=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,I=[],J=[],S=-1,X=[],M=-1,Y=new Float32Array(8),ca=[],ha=[];this.domElement=Q;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMapping=f.LinearToneMapping;this.toneMappingWhitePoint=
this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var ia=this,ja=null,ka=null,pa=null,la=-1,xa="",sa=null,Ja=new f.Vector4,Pb=null,nb=new f.Vector4,Nb=0,Pa=new f.Color(0),fb=0,wb=Q.width,xb=Q.height,Oa=1,Mb=new f.Vector4(0,0,wb,xb),ic=!1,ob=new f.Vector4(0,0,wb,xb),hc=new f.Frustum,Ra=new f.WebGLClipping,vb=!1,Ob=!1,hb=new f.Sphere,ub=new f.Matrix4,Ea=new f.Vector3,qa={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],
spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},gb={geometries:0,textures:0},$a={calls:0,vertices:0,faces:0,points:0};this.info={render:$a,memory:gb,programs:null};try{H={alpha:H,depth:O,stencil:P,antialias:D,premultipliedAlpha:R,preserveDrawingBuffer:U};var G=W||Q.getContext("webgl",H)||Q.getContext("experimental-webgl",H);if(null===G){if(null!==Q.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";
throw"Error creating WebGL context.";}void 0===G.getShaderPrecisionFormat&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});Q.addEventListener("webglcontextlost",e,!1)}catch(z){console.error("THREE.WebGLRenderer: "+z)}var jc="undefined"!==typeof WebGL2RenderingContext&&G instanceof WebGL2RenderingContext,ya=new f.WebGLExtensions(G);ya.get("WEBGL_depth_texture");ya.get("OES_texture_float");ya.get("OES_texture_float_linear");ya.get("OES_texture_half_float");ya.get("OES_texture_half_float_linear");
ya.get("OES_standard_derivatives");ya.get("ANGLE_instanced_arrays");ya.get("OES_element_index_uint")&&(f.BufferGeometry.MaxIndex=4294967296);var Sa=new f.WebGLCapabilities(G,ya,a),ea=new f.WebGLState(G,ya,N),ua=new f.WebGLProperties,qb=new f.WebGLObjects(G,ua,this.info),pb=new f.WebGLPrograms(this,Sa),yb=new f.WebGLLights;this.info.programs=pb.programs;var Bc=new f.WebGLBufferRenderer(G,ya,$a),Cc=new f.WebGLIndexedBufferRenderer(G,ya,$a);c();this.context=G;this.capabilities=Sa;this.extensions=ya;
this.properties=ua;this.state=ea;var kc=new f.WebGLShadowMap(this,qa,qb);this.shadowMap=kc;var Dc=new f.SpritePlugin(this,ca),Ec=new f.LensFlarePlugin(this,ha);this.getContext=function(){return G};this.getContextAttributes=function(){return G.getContextAttributes()};this.forceContextLoss=function(){ya.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var z;return function(){if(void 0!==z)return z;var C=ya.get("EXT_texture_filter_anisotropic");return z=null!==C?G.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT):
0}}();this.getPrecision=function(){return Sa.precision};this.getPixelRatio=function(){return Oa};this.setPixelRatio=function(){var z=window.devicePixelRatio||1;void 0!==z&&(Oa=z,this.setSize(ob.z,ob.w,!1))};this.getSize=function(){return{width:wb,height:xb}};this.setSize=function(z,C,E){wb=z;xb=C;Q.width=z*Oa;Q.height=C*Oa;!1!==E&&(Q.style.width=z+"px",Q.style.height=C+"px");this.setViewport(z,C)};this.setViewport=function(z,C){ea.viewport(ob.set(0,0,z,C))};this.setScissor=function(z,C,E,Z){ea.scissor(Mb.set(z,
C,E,Z))};this.setScissorTest=function(z){ea.setScissorTest(ic=z)};this.getClearColor=function(){return Pa};this.setClearColor=function(z,C){Pa.set(z);fb=void 0!==C?C:1;b(Pa.r,Pa.g,Pa.b,fb)};this.getClearAlpha=function(){return fb};this.setClearAlpha=function(z){fb=z;b(Pa.r,Pa.g,Pa.b,fb)};this.clear=function(z,C,E){var Z=0;if(void 0===z||z)Z|=G.COLOR_BUFFER_BIT;if(void 0===C||C)Z|=G.DEPTH_BUFFER_BIT;if(void 0===E||E)Z|=G.STENCIL_BUFFER_BIT;G.clear(Z)};this.clearColor=function(){this.clear(!0,!1,!1)};
this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(z,C,E,Z){this.setRenderTarget(z);this.clear(C,E,Z)};this.resetGLState=d;this.dispose=function(){Q.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(z,C,E){ea.initAttributes();var Z=ua.get(z);z.hasPositions&&!Z.position&&(Z.position=G.createBuffer());z.hasNormals&&!Z.normal&&(Z.normal=G.createBuffer());z.hasUvs&&!Z.uv&&(Z.uv=G.createBuffer());
z.hasColors&&!Z.color&&(Z.color=G.createBuffer());C=C.getAttributes();z.hasPositions&&(G.bindBuffer(G.ARRAY_BUFFER,Z.position),G.bufferData(G.ARRAY_BUFFER,z.positionArray,G.DYNAMIC_DRAW),ea.enableAttribute(C.position),G.vertexAttribPointer(C.position,3,G.FLOAT,!1,0,0));if(z.hasNormals){G.bindBuffer(G.ARRAY_BUFFER,Z.normal);if("MeshPhongMaterial"!==E.type&&"MeshStandardMaterial"!==E.type&&"MeshPhysicalMaterial"!==E.type&&E.shading===f.FlatShading)for(var aa=0,ba=3*z.count;aa<ba;aa+=9){var T=z.normalArray,
da=(T[aa+0]+T[aa+3]+T[aa+6])/3,V=(T[aa+1]+T[aa+4]+T[aa+7])/3,oa=(T[aa+2]+T[aa+5]+T[aa+8])/3;T[aa+0]=da;T[aa+1]=V;T[aa+2]=oa;T[aa+3]=da;T[aa+4]=V;T[aa+5]=oa;T[aa+6]=da;T[aa+7]=V;T[aa+8]=oa}G.bufferData(G.ARRAY_BUFFER,z.normalArray,G.DYNAMIC_DRAW);ea.enableAttribute(C.normal);G.vertexAttribPointer(C.normal,3,G.FLOAT,!1,0,0)}z.hasUvs&&E.map&&(G.bindBuffer(G.ARRAY_BUFFER,Z.uv),G.bufferData(G.ARRAY_BUFFER,z.uvArray,G.DYNAMIC_DRAW),ea.enableAttribute(C.uv),G.vertexAttribPointer(C.uv,2,G.FLOAT,!1,0,0));
z.hasColors&&E.vertexColors!==f.NoColors&&(G.bindBuffer(G.ARRAY_BUFFER,Z.color),G.bufferData(G.ARRAY_BUFFER,z.colorArray,G.DYNAMIC_DRAW),ea.enableAttribute(C.color),G.vertexAttribPointer(C.color,3,G.FLOAT,!1,0,0));ea.disableUnusedAttributes();G.drawArrays(G.TRIANGLES,0,z.count);z.count=0};this.renderBufferDirect=function(z,C,E,Z,aa,ba){u(Z);var T=w(z,C,Z,aa),da=!1;z=E.id+"_"+T.id+"_"+Z.wireframe;z!==xa&&(xa=z,da=!0);C=aa.morphTargetInfluences;if(void 0!==C){z=[];var V=0;for(da=C.length;V<da;V++){var oa=
C[V];z.push([oa,V])}z.sort(m);8<z.length&&(z.length=8);var ta=E.morphAttributes;V=0;for(da=z.length;V<da;V++)oa=z[V],Y[V]=oa[0],0!==oa[0]?(C=oa[1],!0===Z.morphTargets&&ta.position&&E.addAttribute("morphTarget"+V,ta.position[C]),!0===Z.morphNormals&&ta.normal&&E.addAttribute("morphNormal"+V,ta.normal[C])):(!0===Z.morphTargets&&E.removeAttribute("morphTarget"+V),!0===Z.morphNormals&&E.removeAttribute("morphNormal"+V));T.getUniforms().setValue(G,"morphTargetInfluences",Y);da=!0}C=E.index;V=E.attributes.position;
!0===Z.wireframe&&(C=qb.getWireframeAttribute(E));null!==C?(z=Cc,z.setIndex(C)):z=Bc;if(da){a:{da=void 0;if(E instanceof f.InstancedBufferGeometry){var ra=ya.get("ANGLE_instanced_arrays");if(null===ra){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break a}}void 0===da&&(da=0);ea.initAttributes();oa=E.attributes;T=T.getAttributes();ta=Z.defaultAttributeValues;for(var Ba in T){var Ca=T[Ba];
if(0<=Ca){var za=oa[Ba];if(void 0!==za){var Aa=G.FLOAT,Fa=za.array,ab=za.normalized;Fa instanceof Float32Array?Aa=G.FLOAT:Fa instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):Fa instanceof Uint16Array?Aa=G.UNSIGNED_SHORT:Fa instanceof Int16Array?Aa=G.SHORT:Fa instanceof Uint32Array?Aa=G.UNSIGNED_INT:Fa instanceof Int32Array?Aa=G.INT:Fa instanceof Int8Array?Aa=G.BYTE:Fa instanceof Uint8Array&&(Aa=G.UNSIGNED_BYTE);Fa=za.itemSize;var Ta=qb.getAttributeBuffer(za);if(za instanceof
f.InterleavedBufferAttribute){var Ua=za.data,ib=Ua.stride;za=za.offset;Ua instanceof f.InstancedInterleavedBuffer?(ea.enableAttributeAndDivisor(Ca,Ua.meshPerAttribute,ra),void 0===E.maxInstancedCount&&(E.maxInstancedCount=Ua.meshPerAttribute*Ua.count)):ea.enableAttribute(Ca);G.bindBuffer(G.ARRAY_BUFFER,Ta);G.vertexAttribPointer(Ca,Fa,Aa,ab,ib*Ua.array.BYTES_PER_ELEMENT,(da*ib+za)*Ua.array.BYTES_PER_ELEMENT)}else za instanceof f.InstancedBufferAttribute?(ea.enableAttributeAndDivisor(Ca,za.meshPerAttribute,
ra),void 0===E.maxInstancedCount&&(E.maxInstancedCount=za.meshPerAttribute*za.count)):ea.enableAttribute(Ca),G.bindBuffer(G.ARRAY_BUFFER,Ta),G.vertexAttribPointer(Ca,Fa,Aa,ab,0,da*Fa*za.array.BYTES_PER_ELEMENT)}else if(void 0!==ta&&(Aa=ta[Ba],void 0!==Aa))switch(Aa.length){case 2:G.vertexAttrib2fv(Ca,Aa);break;case 3:G.vertexAttrib3fv(Ca,Aa);break;case 4:G.vertexAttrib4fv(Ca,Aa);break;default:G.vertexAttrib1fv(Ca,Aa)}}}ea.disableUnusedAttributes()}null!==C&&G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,qb.getAttributeBuffer(C))}ra=
Infinity;null!==C?ra=C.count:void 0!==V&&(ra=V.count);C=E.drawRange.start;V=null!==ba?ba.start:0;Ba=Math.max(0,C,V);ba=Math.max(0,Math.min(0+ra,C+E.drawRange.count,V+(null!==ba?ba.count:Infinity))-1-Ba+1);if(aa instanceof f.Mesh)if(!0===Z.wireframe)ea.setLineWidth(Z.wireframeLinewidth*(null===ka?Oa:1)),z.setMode(G.LINES);else switch(aa.drawMode){case f.TrianglesDrawMode:z.setMode(G.TRIANGLES);break;case f.TriangleStripDrawMode:z.setMode(G.TRIANGLE_STRIP);break;case f.TriangleFanDrawMode:z.setMode(G.TRIANGLE_FAN)}else aa instanceof
f.Line?(Z=Z.linewidth,void 0===Z&&(Z=1),ea.setLineWidth(Z*(null===ka?Oa:1)),aa instanceof f.LineSegments?z.setMode(G.LINES):z.setMode(G.LINE_STRIP)):aa instanceof f.Points&&z.setMode(G.POINTS);E instanceof f.InstancedBufferGeometry?0<E.maxInstancedCount&&z.renderInstances(E,Ba,ba):z.render(Ba,ba)};this.render=function(z,C,E,Z){if(!1===C instanceof f.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var aa=z.fog;xa="";la=-1;sa=null;!0===z.autoUpdate&&
z.updateMatrixWorld();null===C.parent&&C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);Cb(ub,C.projectionMatrix,C.matrixWorldInverse);Qb(hc,ub);I.length=0;M=S=-1;ca.length=0;ha.length=0;Ob=this.localClippingEnabled;vb=Ra.init(this.clippingPlanes,Ob,C);r(z,C);J.length=S+1;X.length=M+1;!0===ia.sortObjects&&(J.sort(n),X.sort(q));vb&&Ra.beginShadows();for(var ba=I,T=0,da=0,V=ba.length;da<V;da++){var oa=ba[da];oa.castShadow&&(qa.shadows[T++]=oa)}qa.shadows.length=T;kc.render(z,C);
ba=I;var ta=oa=0,ra=0,Ba=C.matrixWorldInverse,Ca=0,za=0,Aa=0,Fa=0;T=0;for(da=ba.length;T<da;T++){V=ba[T];var ab=V.color;var Ta=V.intensity;var Ua=V.distance;var ib=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V instanceof f.AmbientLight)oa+=ab.r*Ta,ta+=ab.g*Ta,ra+=ab.b*Ta;else if(V instanceof f.DirectionalLight){var ma=yb.get(V);ma.color.copy(V.color).multiplyScalar(V.intensity);Bb(ma.direction,V.matrixWorld);Bb(Ea,V.target.matrixWorld);ma.direction.sub(Ea);tb(ma.direction,Ba);if(ma.shadow=
V.castShadow)ma.shadowBias=V.shadow.bias,ma.shadowRadius=V.shadow.radius,ma.shadowMapSize=V.shadow.mapSize;qa.directionalShadowMap[Ca]=ib;qa.directionalShadowMatrix[Ca]=V.shadow.matrix;qa.directional[Ca++]=ma}else if(V instanceof f.SpotLight){ma=yb.get(V);Bb(ma.position,V.matrixWorld);ma.position.applyMatrix4(Ba);ma.color.copy(ab).multiplyScalar(Ta);ma.distance=Ua;Bb(ma.direction,V.matrixWorld);Bb(Ea,V.target.matrixWorld);ma.direction.sub(Ea);tb(ma.direction,Ba);ma.coneCos=Math.cos(V.angle);ma.penumbraCos=
Math.cos(V.angle*(1-V.penumbra));ma.decay=0===V.distance?0:V.decay;if(ma.shadow=V.castShadow)ma.shadowBias=V.shadow.bias,ma.shadowRadius=V.shadow.radius,ma.shadowMapSize=V.shadow.mapSize;qa.spotShadowMap[Aa]=ib;qa.spotShadowMatrix[Aa]=V.shadow.matrix;qa.spot[Aa++]=ma}else if(V instanceof f.PointLight){ma=yb.get(V);Bb(ma.position,V.matrixWorld);ma.position.applyMatrix4(Ba);ma.color.copy(V.color).multiplyScalar(V.intensity);ma.distance=V.distance;ma.decay=0===V.distance?0:V.decay;if(ma.shadow=V.castShadow)ma.shadowBias=
V.shadow.bias,ma.shadowRadius=V.shadow.radius,ma.shadowMapSize=V.shadow.mapSize;qa.pointShadowMap[za]=ib;void 0===qa.pointShadowMatrix[za]&&(qa.pointShadowMatrix[za]=new f.Matrix4);Bb(Ea,V.matrixWorld).negate();qa.pointShadowMatrix[za].identity().setPosition(Ea);qa.point[za++]=ma}else V instanceof f.HemisphereLight&&(ma=yb.get(V),Bb(ma.direction,V.matrixWorld),tb(ma.direction,Ba),ma.direction.normalize(),ma.skyColor.copy(V.color).multiplyScalar(Ta),ma.groundColor.copy(V.groundColor).multiplyScalar(Ta),
qa.hemi[Fa++]=ma)}qa.ambient[0]=oa;qa.ambient[1]=ta;qa.ambient[2]=ra;qa.directional.length=Ca;qa.spot.length=Aa;qa.point.length=za;qa.hemi.length=Fa;qa.hash=Ca+","+za+","+Aa+","+Fa+","+qa.shadows.length;vb&&Ra.endShadows();$a.calls=0;$a.vertices=0;$a.faces=0;$a.points=0;void 0===E&&(E=null);this.setRenderTarget(E);(this.autoClear||Z)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);z.overrideMaterial?(Z=z.overrideMaterial,v(J,C,aa,Z),v(X,C,aa,Z)):(ea.setBlending(f.NoBlending),
v(J,C,aa),v(X,C,aa));Dc.render(z,C);Ec.render(z,C,nb);E&&(z=E.texture,z.generateMipmaps&&B(E)&&z.minFilter!==f.NearestFilter&&z.minFilter!==f.LinearFilter&&(z=E instanceof f.WebGLRenderTargetCube?G.TEXTURE_CUBE_MAP:G.TEXTURE_2D,E=ua.get(E.texture).__webglTexture,ea.bindTexture(z,E),G.generateMipmap(z),ea.bindTexture(z,null)));ea.setDepthTest(!0);ea.setDepthWrite(!0);ea.setColorWrite(!0)}};this.setFaceCulling=function(z,C){ea.setCullFace(z);ea.setFlipSided(C===f.FrontFaceDirectionCW)};this.allocTextureUnit=
function(){var z=Nb;z>=Sa.maxTextures&&console.warn("WebGLRenderer: trying to use "+z+" texture units while this GPU supports only "+Sa.maxTextures);Nb+=1;return z};this.setTexture2D=function(){var z=!1;return function(C,E){C instanceof f.WebGLRenderTarget&&(z||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),C=C.texture);var Z=ua.get(C);if(0<C.version&&Z.__version!==C.version){var aa=C.image;if(void 0===aa)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",
C);else if(!1===aa.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",C);else{void 0===Z.__webglInit&&(Z.__webglInit=!0,C.addEventListener("dispose",g),Z.__webglTexture=G.createTexture(),gb.textures++);ea.activeTexture(G.TEXTURE0+E);ea.bindTexture(G.TEXTURE_2D,Z.__webglTexture);G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,C.flipY);G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha);G.pixelStorei(G.UNPACK_ALIGNMENT,C.unpackAlignment);var ba=y(C.image,
Sa.maxTextureSize);(C.wrapS!==f.ClampToEdgeWrapping||C.wrapT!==f.ClampToEdgeWrapping||C.minFilter!==f.NearestFilter&&C.minFilter!==f.LinearFilter)&&!1===B(ba)&&(E=ba,E instanceof HTMLImageElement||E instanceof HTMLCanvasElement?(aa=document.createElement("canvas"),aa.width=f.Math.nearestPowerOfTwo(E.width),aa.height=f.Math.nearestPowerOfTwo(E.height),aa.getContext("2d").drawImage(E,0,0,aa.width,aa.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+E.width+"x"+E.height+"). Resized to "+
aa.width+"x"+aa.height,E),ba=aa):ba=E);E=B(ba);aa=N(C.format);var T=N(C.type);A(G.TEXTURE_2D,C,E);var da=C.mipmaps;if(C instanceof f.DepthTexture){da=G.DEPTH_COMPONENT;if(C.type===f.FloatType){if(!jc)throw Error("Float Depth Texture only supported in WebGL2.0");da=G.DEPTH_COMPONENT32F}else jc&&(da=G.DEPTH_COMPONENT16);ea.texImage2D(G.TEXTURE_2D,0,da,ba.width,ba.height,0,aa,T,null)}else if(C instanceof f.DataTexture)if(0<da.length&&E){for(var V=0,oa=da.length;V<oa;V++)ba=da[V],ea.texImage2D(G.TEXTURE_2D,
V,aa,ba.width,ba.height,0,aa,T,ba.data);C.generateMipmaps=!1}else ea.texImage2D(G.TEXTURE_2D,0,aa,ba.width,ba.height,0,aa,T,ba.data);else if(C instanceof f.CompressedTexture)for(V=0,oa=da.length;V<oa;V++)ba=da[V],C.format!==f.RGBAFormat&&C.format!==f.RGBFormat?-1<ea.getCompressedTextureFormats().indexOf(aa)?ea.compressedTexImage2D(G.TEXTURE_2D,V,aa,ba.width,ba.height,0,ba.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ea.texImage2D(G.TEXTURE_2D,
V,aa,ba.width,ba.height,0,aa,T,ba.data);else if(0<da.length&&E){V=0;for(oa=da.length;V<oa;V++)ba=da[V],ea.texImage2D(G.TEXTURE_2D,V,aa,aa,T,ba);C.generateMipmaps=!1}else ea.texImage2D(G.TEXTURE_2D,0,aa,aa,T,ba);C.generateMipmaps&&E&&G.generateMipmap(G.TEXTURE_2D);Z.__version=C.version;if(C.onUpdate)C.onUpdate(C)}}else ea.activeTexture(G.TEXTURE0+E),ea.bindTexture(G.TEXTURE_2D,Z.__webglTexture)}}();this.setTexture=function(){var z=!1;return function(C,E){z||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),
z=!0);ia.setTexture2D(C,E)}}();this.setTextureCube=function(){var z=!1;return function(C,E){C instanceof f.WebGLRenderTargetCube&&(z||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),C=C.texture);if(C instanceof f.CubeTexture||Array.isArray(C.image)&&6===C.image.length){var Z=ua.get(C);if(6===C.image.length)if(0<C.version&&Z.__version!==C.version){Z.__image__webglTextureCube||(C.addEventListener("dispose",g),
Z.__image__webglTextureCube=G.createTexture(),gb.textures++);ea.activeTexture(G.TEXTURE0+E);ea.bindTexture(G.TEXTURE_CUBE_MAP,Z.__image__webglTextureCube);G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,C.flipY);E=C instanceof f.CompressedTexture;for(var aa=C.image[0]instanceof f.DataTexture,ba=[],T=0;6>T;T++)ba[T]=!ia.autoScaleCubemaps||E||aa?aa?C.image[T].image:C.image[T]:y(C.image[T],Sa.maxCubemapSize);var da=B(ba[0]),V=N(C.format),oa=N(C.type);A(G.TEXTURE_CUBE_MAP,C,da);for(T=0;6>T;T++)if(E)for(var ta,ra=
ba[T].mipmaps,Ba=0,Ca=ra.length;Ba<Ca;Ba++)ta=ra[Ba],C.format!==f.RGBAFormat&&C.format!==f.RGBFormat?-1<ea.getCompressedTextureFormats().indexOf(V)?ea.compressedTexImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+T,Ba,V,ta.width,ta.height,0,ta.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ea.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+T,Ba,V,ta.width,ta.height,0,V,oa,ta.data);else aa?ea.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+T,0,V,ba[T].width,
ba[T].height,0,V,oa,ba[T].data):ea.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+T,0,V,V,oa,ba[T]);C.generateMipmaps&&da&&G.generateMipmap(G.TEXTURE_CUBE_MAP);Z.__version=C.version;if(C.onUpdate)C.onUpdate(C)}else ea.activeTexture(G.TEXTURE0+E),ea.bindTexture(G.TEXTURE_CUBE_MAP,Z.__image__webglTextureCube)}else ea.activeTexture(G.TEXTURE0+E),ea.bindTexture(G.TEXTURE_CUBE_MAP,ua.get(C).__webglTexture)}}();this.getCurrentRenderTarget=function(){return ka};this.setRenderTarget=function(z){if((ka=z)&&void 0===
ua.get(z).__webglFramebuffer){var C=ua.get(z),E=ua.get(z.texture);z.addEventListener("dispose",h);E.__webglTexture=G.createTexture();gb.textures++;var Z=z instanceof f.WebGLRenderTargetCube,aa=f.Math.isPowerOfTwo(z.width)&&f.Math.isPowerOfTwo(z.height);if(Z){C.__webglFramebuffer=[];for(var ba=0;6>ba;ba++)C.__webglFramebuffer[ba]=G.createFramebuffer()}else C.__webglFramebuffer=G.createFramebuffer();if(Z){ea.bindTexture(G.TEXTURE_CUBE_MAP,E.__webglTexture);A(G.TEXTURE_CUBE_MAP,z.texture,aa);for(ba=
0;6>ba;ba++)F(C.__webglFramebuffer[ba],z,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ba);z.texture.generateMipmaps&&aa&&G.generateMipmap(G.TEXTURE_CUBE_MAP);ea.bindTexture(G.TEXTURE_CUBE_MAP,null)}else ea.bindTexture(G.TEXTURE_2D,E.__webglTexture),A(G.TEXTURE_2D,z.texture,aa),F(C.__webglFramebuffer,z,G.COLOR_ATTACHMENT0,G.TEXTURE_2D),z.texture.generateMipmaps&&aa&&G.generateMipmap(G.TEXTURE_2D),ea.bindTexture(G.TEXTURE_2D,null);if(z.depthBuffer){C=ua.get(z);E=z instanceof f.WebGLRenderTargetCube;
if(z.depthTexture){if(E)throw Error("target.depthTexture not supported in Cube render targets");if(z instanceof f.WebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");G.bindFramebuffer(G.FRAMEBUFFER,C.__webglFramebuffer);if(!(z.depthTexture instanceof f.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");ua.get(z.depthTexture).__webglTexture&&z.depthTexture.image.width===z.width&&z.depthTexture.image.height===z.height||
(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0);ia.setTexture2D(z.depthTexture,0);C=ua.get(z.depthTexture).__webglTexture;G.framebufferTexture2D(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.TEXTURE_2D,C,0)}else if(E)for(C.__webglDepthbuffer=[],E=0;6>E;E++)G.bindFramebuffer(G.FRAMEBUFFER,C.__webglFramebuffer[E]),C.__webglDepthbuffer[E]=G.createRenderbuffer(),K(C.__webglDepthbuffer[E],z);else G.bindFramebuffer(G.FRAMEBUFFER,C.__webglFramebuffer),C.__webglDepthbuffer=
G.createRenderbuffer(),K(C.__webglDepthbuffer,z);G.bindFramebuffer(G.FRAMEBUFFER,null)}}C=z instanceof f.WebGLRenderTargetCube;z?(E=ua.get(z),E=C?E.__webglFramebuffer[z.activeCubeFace]:E.__webglFramebuffer,Ja.copy(z.scissor),Pb=z.scissorTest,nb.copy(z.viewport)):(E=null,Ja.copy(Mb).multiplyScalar(Oa),Pb=ic,nb.copy(ob).multiplyScalar(Oa));pa!==E&&(G.bindFramebuffer(G.FRAMEBUFFER,E),pa=E);ea.scissor(Ja);ea.setScissorTest(Pb);ea.viewport(nb);C&&(C=ua.get(z.texture),G.framebufferTexture2D(G.FRAMEBUFFER,
G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+z.activeCubeFace,C.__webglTexture,z.activeMipMapLevel))};this.readRenderTargetPixels=function(z,C,E,Z,aa,ba){if(!1===z instanceof f.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var T=ua.get(z).__webglFramebuffer;if(T){var da=!1;T!==pa&&(G.bindFramebuffer(G.FRAMEBUFFER,T),da=!0);try{var V=z.texture;V.format!==f.RGBAFormat&&N(V.format)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT)?
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):V.type===f.UnsignedByteType||N(V.type)===G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)||V.type===f.FloatType&&ya.get("WEBGL_color_buffer_float")||V.type===f.HalfFloatType&&ya.get("EXT_color_buffer_half_float")?G.checkFramebufferStatus(G.FRAMEBUFFER)===G.FRAMEBUFFER_COMPLETE?0<=C&&C<=z.width-Z&&0<=E&&E<=z.height-aa&&G.readPixels(C,E,Z,aa,N(V.format),N(V.type),ba):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{da&&G.bindFramebuffer(G.FRAMEBUFFER,pa)}}}}};
f.WebGLRenderTarget=function(a,b,c){this.uuid=f.Math.generateUUID();this.width=a;this.height=b;this.scissor=new f.Vector4(0,0,a,b);this.scissorTest=!1;this.viewport=new f.Vector4(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=f.LinearFilter);this.texture=new f.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=
null};
Object.assign(f.WebGLRenderTarget.prototype,f.EventDispatcher.prototype,{setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},
dispose:function(){this.dispatchEvent({type:"dispose"})}});f.WebGLRenderTargetCube=function(a,b,c){f.WebGLRenderTarget.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0};f.WebGLRenderTargetCube.prototype=Object.create(f.WebGLRenderTarget.prototype);f.WebGLRenderTargetCube.prototype.constructor=f.WebGLRenderTargetCube;
f.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(e){d=e};this.render=function(e,g){a.drawArrays(d,e,g);c.calls++;c.vertices+=g;d===a.TRIANGLES&&(c.faces+=g/3)};this.renderInstances=function(e){var g=b.get("ANGLE_instanced_arrays");if(null===g)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var h=e.attributes.position;h=h instanceof f.InterleavedBufferAttribute?h.data.count:h.count;
g.drawArraysInstancedANGLE(d,0,h,e.maxInstancedCount);c.calls++;c.vertices+=h*e.maxInstancedCount;d===a.TRIANGLES&&(c.faces+=e.maxInstancedCount*h/3)}}};
f.WebGLClipping=function(){function a(){m.value!==d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e}function b(n,q,p,t){var r=null!==n?n.length:0,v=null;if(0!==r){v=m.value;if(!0!==t||null===v){t=p+4*r;q=q.matrixWorldInverse;Gb(l,q);if(null===v||v.length<t)v=new Float32Array(t);for(t=0;t!==r;++t,p+=4)k.copy(n[t]).applyMatrix4(q,l),k.normal.toArray(v,p),v[p+3]=k.constant}m.value=v;m.needsUpdate=!0}c.numPlanes=r;return v}var c=this,d=null,e=0,g=!1,h=!1,k=new f.Plane,l=new f.Matrix3,m={value:null,needsUpdate:!1};
this.uniform=m;this.numPlanes=0;this.init=function(n,q,p){var t=0!==n.length||q||0!==e||g;g=q;d=b(n,p,0);e=n.length;return t};this.beginShadows=function(){h=!0;b(null)};this.endShadows=function(){h=!1;a()};this.setState=function(n,q,p,t,r){if(!g||null===n||0===n.length||h&&!q)h?b(null):a();else{q=h?0:e;var v=4*q,u=t.clippingState||null;m.value=u;u=b(n,p,v,r);for(n=0;n!==v;++n)u[n]=d[n];t.clippingState=u;this.numPlanes+=q}}};
f.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,g;this.setMode=function(h){d=h};this.setIndex=function(h){h.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,g=4):(e=a.UNSIGNED_SHORT,g=2)};this.render=function(h,k){a.drawElements(d,k,e,h*g);c.calls++;c.vertices+=k;d===a.TRIANGLES&&(c.faces+=k/3)};this.renderInstances=function(h,k,l){var m=b.get("ANGLE_instanced_arrays");null===m?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(m.drawElementsInstancedANGLE(d,l,e,k*g,h.maxInstancedCount),c.calls++,c.vertices+=l*h.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=h.maxInstancedCount*l/3))}};
f.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];switch(c){case "WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=
a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");
return b[c]=d}};
f.WebGLCapabilities=function(a,b,c){function d(e){if("highp"===e){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";this.logarithmicDepthBuffer=
void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);this.maxFragmentUniforms=
a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};
f.WebGLGeometries=function(a,b,c){function d(h){var k=h.target;h=g[k.id];null!==h.index&&e(h.index);var l=h.attributes;for(m in l)e(l[m]);k.removeEventListener("dispose",d);delete g[k.id];var m=b.get(k);m.wireframe&&e(m.wireframe);b.delete(k);k=b.get(h);k.wireframe&&e(k.wireframe);b.delete(h);c.memory.geometries--}function e(h){var k=h instanceof f.InterleavedBufferAttribute?b.get(h.data).__webglBuffer:b.get(h).__webglBuffer;void 0!==k&&(a.deleteBuffer(k),h instanceof f.InterleavedBufferAttribute?
b.delete(h.data):b.delete(h))}var g={};this.get=function(h){var k=h.geometry;if(void 0!==g[k.id])return g[k.id];k.addEventListener("dispose",d);if(k instanceof f.BufferGeometry)var l=k;else k instanceof f.Geometry&&(void 0===k._bufferGeometry&&(k._bufferGeometry=(new f.BufferGeometry).setFromObject(h)),l=k._bufferGeometry);g[k.id]=l;c.memory.geometries++;return l}};
f.WebGLLights=function(){var a={};this.get=function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case "DirectionalLight":var c={direction:new f.Vector3,color:new f.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f.Vector2};break;case "SpotLight":c={position:new f.Vector3,direction:new f.Vector3,color:new f.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f.Vector2};break;case "PointLight":c={position:new f.Vector3,color:new f.Color,
distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f.Vector2};break;case "HemisphereLight":c={direction:new f.Vector3,skyColor:new f.Color,groundColor:new f.Color}}return a[b.id]=c}};
f.WebGLObjects=function(a,b,c){function d(h,k){h=h instanceof f.InterleavedBufferAttribute?h.data:h;var l=b.get(h);void 0===l.__webglBuffer?(l.__webglBuffer=a.createBuffer(),a.bindBuffer(k,l.__webglBuffer),a.bufferData(k,h.array,h.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),l.version=h.version):l.version!==h.version&&(a.bindBuffer(k,l.__webglBuffer),!1===h.dynamic||-1===h.updateRange.count?a.bufferSubData(k,0,h.array):0===h.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(k,h.updateRange.offset*h.array.BYTES_PER_ELEMENT,h.array.subarray(h.updateRange.offset,h.updateRange.offset+h.updateRange.count)),h.updateRange.count=0),l.version=h.version)}function e(h,k,l){if(k>l){var m=k;k=l;l=m}m=h[k];return void 0===m?(h[k]=[l],!0):-1===m.indexOf(l)?(m.push(l),!0):!1}var g=new f.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(h){return h instanceof f.InterleavedBufferAttribute?b.get(h.data).__webglBuffer:b.get(h).__webglBuffer};this.getWireframeAttribute=
function(h){var k=b.get(h);if(void 0!==k.wireframe)return k.wireframe;var l=[],m=h.index,n=h.attributes;h=n.position;if(null!==m){n={};m=m.array;for(var q=0,p=m.length;q<p;q+=3){var t=m[q+0],r=m[q+1],v=m[q+2];e(n,t,r)&&l.push(t,r);e(n,r,v)&&l.push(r,v);e(n,v,t)&&l.push(v,t)}}else for(m=n.position.array,q=0,p=m.length/3-1;q<p;q+=3)t=q+0,r=q+1,v=q+2,l.push(t,r,r,v,v,t);l=new f.BufferAttribute(new (65535<h.count?Uint32Array:Uint16Array)(l),1);d(l,a.ELEMENT_ARRAY_BUFFER);return k.wireframe=l};this.update=
function(h){var k=g.get(h);h.geometry instanceof f.Geometry&&k.updateFromObject(h);h=k.index;var l=k.attributes;null!==h&&d(h,a.ELEMENT_ARRAY_BUFFER);for(var m in l)d(l[m],a.ARRAY_BUFFER);h=k.morphAttributes;for(m in h){l=h[m];for(var n=0,q=l.length;n<q;n++)d(l[n],a.ARRAY_BUFFER)}return k}};
f.WebGLProgram=function(){function a(q){switch(q){case f.LinearEncoding:return["Linear","( value )"];case f.sRGBEncoding:return["sRGB","( value )"];case f.RGBEEncoding:return["RGBE","( value )"];case f.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case f.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case f.RGBDEncoding:return["RGBD","( value, 256.0 )"];case f.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+q);}}function b(q,p){p=a(p);
return"vec4 "+q+"( vec4 value ) { return "+p[0]+"ToLinear"+p[1]+"; }"}function c(q,p){p=a(p);return"vec4 "+q+"( vec4 value ) { return LinearTo"+p[0]+p[1]+"; }"}function d(q,p){switch(p){case f.LinearToneMapping:p="Linear";break;case f.ReinhardToneMapping:p="Reinhard";break;case f.Uncharted2ToneMapping:p="Uncharted2";break;case f.CineonToneMapping:p="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+p);}return"vec3 "+q+"( vec3 color ) { return "+p+"ToneMapping( color ); }"}function e(q,
p,t){q=q||{};return[q.derivatives||p.envMapCubeUV||p.bumpMap||p.normalMap||p.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(q.fragDepth||p.logarithmicDepthBuffer)&&t.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",q.drawBuffers&&t.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(q.shaderTextureLOD||p.envMap)&&t.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(h).join("\n")}function g(q){var p=[],t;
for(t in q){var r=q[t];!1!==r&&p.push("#define "+t+" "+r)}return p.join("\n")}function h(q){return""!==q}function k(q,p){return q.replace(/NUM_DIR_LIGHTS/g,p.numDirLights).replace(/NUM_SPOT_LIGHTS/g,p.numSpotLights).replace(/NUM_POINT_LIGHTS/g,p.numPointLights).replace(/NUM_HEMI_LIGHTS/g,p.numHemiLights)}function l(q){return q.replace(/#include +<([\w\d.]+)>/g,function(p,t){p=f.ShaderChunk[t];if(void 0===p)throw Error("Can not resolve #include \x3c"+t+"\x3e");return l(p)})}function m(q){return q.replace(/for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
function(p,t,r,v){p="";for(t=parseInt(t);t<parseInt(r);t++)p+=v.replace(/\[ i \]/g,"[ "+t+" ]");return p})}var n=0;return function(q,p,t,r){var v=q.context,u=t.extensions,w=t.defines,x=t.__webglShader.vertexShader,A=t.__webglShader.fragmentShader,y="SHADOWMAP_TYPE_BASIC";r.shadowMapType===f.PCFShadowMap?y="SHADOWMAP_TYPE_PCF":r.shadowMapType===f.PCFSoftShadowMap&&(y="SHADOWMAP_TYPE_PCF_SOFT");var B="ENVMAP_TYPE_CUBE",F="ENVMAP_MODE_REFLECTION",K="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(t.envMap.mapping){case f.CubeReflectionMapping:case f.CubeRefractionMapping:B=
"ENVMAP_TYPE_CUBE";break;case f.CubeUVReflectionMapping:case f.CubeUVRefractionMapping:B="ENVMAP_TYPE_CUBE_UV";break;case f.EquirectangularReflectionMapping:case f.EquirectangularRefractionMapping:B="ENVMAP_TYPE_EQUIREC";break;case f.SphericalReflectionMapping:B="ENVMAP_TYPE_SPHERE"}switch(t.envMap.mapping){case f.CubeRefractionMapping:case f.EquirectangularRefractionMapping:F="ENVMAP_MODE_REFRACTION"}switch(t.combine){case f.MultiplyOperation:K="ENVMAP_BLENDING_MULTIPLY";break;case f.MixOperation:K=
"ENVMAP_BLENDING_MIX";break;case f.AddOperation:K="ENVMAP_BLENDING_ADD"}}var L=0<q.gammaFactor?q.gammaFactor:1;u=e(u,r,q.extensions);var N=g(w),Q=v.createProgram();t instanceof f.RawShaderMaterial?y=w="":(w=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+t.__webglShader.name,N,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+L,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?
"#define "+F:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":
"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+y:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":
"",r.logarithmicDepthBuffer&&q.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;",
"\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(h).join("\n"),y=[u,"precision "+
r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+t.__webglShader.name,N,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+L,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+B:"",r.envMap?"#define "+F:"",r.envMap?"#define "+K:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?
"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?
"#define "+y:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&q.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&q.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==f.NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==f.NoToneMapping?
f.ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==f.NoToneMapping?d("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?f.ShaderChunk.encodings_pars_fragment:"",r.mapEncoding?b("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?b("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?b("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?c("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+
t.depthPacking:"","\n"].filter(h).join("\n"));x=l(x,r);x=k(x,r);A=l(A,r);A=k(A,r);!1===t instanceof f.ShaderMaterial&&(x=m(x),A=m(A));A=y+A;x=f.WebGLShader(v,v.VERTEX_SHADER,w+x);A=f.WebGLShader(v,v.FRAGMENT_SHADER,A);v.attachShader(Q,x);v.attachShader(Q,A);void 0!==t.index0AttributeName?v.bindAttribLocation(Q,0,t.index0AttributeName):!0===r.morphTargets&&v.bindAttribLocation(Q,0,"position");v.linkProgram(Q);r=v.getProgramInfoLog(Q);B=v.getShaderInfoLog(x);F=v.getShaderInfoLog(A);L=K=!0;if(!1===v.getProgramParameter(Q,
v.LINK_STATUS))K=!1,console.error("THREE.WebGLProgram: shader error: ",v.getError(),"gl.VALIDATE_STATUS",v.getProgramParameter(Q,v.VALIDATE_STATUS),"gl.getProgramInfoLog",r,B,F);else if(""!==r)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",r);else if(""===B||""===F)L=!1;L&&(this.diagnostics={runnable:K,material:t,programLog:r,vertexShader:{log:B,prefix:w},fragmentShader:{log:F,prefix:y}});v.deleteShader(x);v.deleteShader(A);var W;this.getUniforms=function(){void 0===W&&(W=new f.WebGLUniforms(v,
Q,q));return W};var H;this.getAttributes=function(){if(void 0===H){for(var O={},P=v.getProgramParameter(Q,v.ACTIVE_ATTRIBUTES),D=0;D<P;D++){var R=v.getActiveAttrib(Q,D).name;O[R]=v.getAttribLocation(Q,R)}H=O}return H};this.destroy=function(){v.deleteProgram(Q);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");
return this.getAttributes()}}});this.id=n++;this.code=p;this.usedTimes=1;this.program=Q;this.vertexShader=x;this.fragmentShader=A;return this}}();
f.WebGLPrograms=function(a,b){function c(h,k){if(h)h instanceof f.Texture?l=h.encoding:h instanceof f.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),l=h.texture.encoding);else var l=f.LinearEncoding;l===f.LinearEncoding&&k&&(l=f.GammaEncoding);return l}var d=[],e={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",
MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes depthPacking".split(" ");
this.getParameters=function(h,k,l,m,n){var q=e[h.type];if(b.floatVertexTextures&&n&&n.skeleton&&n.skeleton.useVertexTexture)var p=1024;else p=Math.floor((b.maxVertexUniforms-20)/4),void 0!==n&&n instanceof f.SkinnedMesh&&(p=Math.min(n.skeleton.bones.length,p),p<n.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+n.skeleton.bones.length+", this GPU supports just "+p+" (try OpenGL instead of ANGLE)"));var t=a.getPrecision();null!==h.precision&&(t=b.getMaxPrecision(h.precision),
t!==h.precision&&console.warn("THREE.WebGLProgram.getParameters:",h.precision,"not supported, using",t,"instead."));var r=a.getCurrentRenderTarget();return{shaderID:q,precision:t,supportsVertexTextures:b.vertexTextures,outputEncoding:c(r?r.texture:null,a.gammaOutput),map:!!h.map,mapEncoding:c(h.map,a.gammaInput),envMap:!!h.envMap,envMapMode:h.envMap&&h.envMap.mapping,envMapEncoding:c(h.envMap,a.gammaInput),envMapCubeUV:!!h.envMap&&(h.envMap.mapping===f.CubeUVReflectionMapping||h.envMap.mapping===
f.CubeUVRefractionMapping),lightMap:!!h.lightMap,aoMap:!!h.aoMap,emissiveMap:!!h.emissiveMap,emissiveMapEncoding:c(h.emissiveMap,a.gammaInput),bumpMap:!!h.bumpMap,normalMap:!!h.normalMap,displacementMap:!!h.displacementMap,roughnessMap:!!h.roughnessMap,metalnessMap:!!h.metalnessMap,specularMap:!!h.specularMap,alphaMap:!!h.alphaMap,combine:h.combine,vertexColors:h.vertexColors,fog:l,useFog:h.fog,fogExp:l instanceof f.FogExp2,flatShading:h.shading===f.FlatShading,sizeAttenuation:h.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer,
skinning:h.skinning,maxBones:p,useVertexTexture:b.floatVertexTextures&&n&&n.skeleton&&n.skeleton.useVertexTexture,morphTargets:h.morphTargets,morphNormals:h.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numHemiLights:k.hemi.length,numClippingPlanes:m,shadowMapEnabled:a.shadowMap.enabled&&n.receiveShadow&&0<k.shadows.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,
physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:h.premultipliedAlpha,alphaTest:h.alphaTest,doubleSided:h.side===f.DoubleSide,flipSided:h.side===f.BackSide,depthPacking:void 0!==h.depthPacking?h.depthPacking:!1}};this.getProgramCode=function(h,k){var l=[];k.shaderID?l.push(k.shaderID):(l.push(h.fragmentShader),l.push(h.vertexShader));if(void 0!==h.defines)for(var m in h.defines)l.push(m),l.push(h.defines[m]);for(h=0;h<g.length;h++)l.push(k[g[h]]);return l.join()};this.acquireProgram=
function(h,k,l){for(var m,n=0,q=d.length;n<q;n++){var p=d[n];if(p.code===l){m=p;++m.usedTimes;break}}void 0===m&&(m=new f.WebGLProgram(a,l,h,k),d.push(m));return m};this.releaseProgram=function(h){0===--h.usedTimes&&(d[d.indexOf(h)]=d[d.length-1],d.pop(),h.destroy())};this.programs=d};f.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
f.WebGLShader=function(){function a(b){b=b.split("\n");for(var c=0;c<b.length;c++)b[c]=c+1+": "+b[c];return b.join("\n")}return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
f.WebGLShadowMap=function(a,b,c){function d(W,H,O,P){var D=W.geometry,R=r,U=W.customDepthMaterial;O&&(R=v,U=W.customDistanceMaterial);U?D=U:(W=W instanceof f.SkinnedMesh&&H.skinning,U=0,void 0!==D.morphTargets&&0<D.morphTargets.length&&H.morphTargets&&(U|=1),W&&(U|=2),D=R[U]);a.localClippingEnabled&&!0===H.clipShadows&&0!==H.clippingPlanes.length&&(U=D.uuid,R=H.uuid,W=u[U],void 0===W&&(W={},u[U]=W),U=W[R],void 0===U&&(U=D.clone(),W[R]=U),D=U);D.visible=H.visible;D.wireframe=H.wireframe;R=H.side;Q.renderSingleSided&&
R==f.DoubleSide&&(R=f.FrontSide);Q.renderReverseSided&&(R===f.FrontSide?R=f.BackSide:R===f.BackSide&&(R=f.FrontSide));D.side=R;D.clipShadows=H.clipShadows;D.clippingPlanes=H.clippingPlanes;D.wireframeLinewidth=H.wireframeLinewidth;D.linewidth=H.linewidth;O&&void 0!==D.uniforms.lightPos&&D.uniforms.lightPos.value.copy(P);return D}function e(W,H,O){if(!1!==W.visible){W.layers.test(H.layers)&&(W instanceof f.Mesh||W instanceof f.Line||W instanceof f.Points)&&W.castShadow&&(!1===W.frustumCulled||!0===
k.intersectsObject(W))&&!0===W.material.visible&&(Cb(W.modelViewMatrix,O.matrixWorldInverse,W.matrixWorld),t.push(W));W=W.children;for(var P=0,D=W.length;P<D;P++)e(W[P],H,O)}}var g=a.context,h=a.state,k=new f.Frustum,l=new f.Matrix4,m=b.shadows,n=new f.Vector2,q=new f.Vector3,p=new f.Vector3,t=[],r=Array(4),v=Array(4),u={},w=[new f.Vector3(1,0,0),new f.Vector3(-1,0,0),new f.Vector3(0,0,1),new f.Vector3(0,0,-1),new f.Vector3(0,1,0),new f.Vector3(0,-1,0)],x=[new f.Vector3(0,1,0),new f.Vector3(0,1,0),
new f.Vector3(0,1,0),new f.Vector3(0,1,0),new f.Vector3(0,0,1),new f.Vector3(0,0,-1)],A=[new f.Vector4,new f.Vector4,new f.Vector4,new f.Vector4,new f.Vector4,new f.Vector4];b=new f.MeshDepthMaterial;b.depthPacking=f.RGBADepthPacking;b.clipping=!0;for(var y=f.ShaderLib.distanceRGBA,B=f.UniformsUtils.clone(y.uniforms),F=0;4!==F;++F){var K=0!==(F&1),L=0!==(F&2),N=b.clone();N.morphTargets=K;N.skinning=L;r[F]=N;K=new f.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:B,vertexShader:y.vertexShader,
fragmentShader:y.fragmentShader,morphTargets:K,skinning:L,clipping:!0});v[F]=K}var Q=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=f.PCFShadowMap;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(W,H){if(!1!==Q.enabled&&(!1!==Q.autoUpdate||!1!==Q.needsUpdate)&&0!==m.length){h.clearColor(1,1,1,1);h.disable(g.BLEND);h.setDepthTest(!0);h.setScissorTest(!1);for(var O,P,D=0,R=m.length;D<R;D++){var U=m[D],I=U.shadow;if(void 0===I)console.warn("THREE.WebGLShadowMap:",
U,"has no shadow.");else{var J=I.camera;n.copy(I.mapSize);if(U instanceof f.PointLight){O=6;P=!0;var S=n.x,X=n.y;A[0].set(2*S,X,S,X);A[1].set(0,X,S,X);A[2].set(3*S,X,S,X);A[3].set(S,X,S,X);A[4].set(3*S,0,S,X);A[5].set(S,0,S,X);n.x*=4;n.y*=2}else O=1,P=!1;null===I.map&&(I.map=new f.WebGLRenderTarget(n.x,n.y,{minFilter:f.NearestFilter,magFilter:f.NearestFilter,format:f.RGBAFormat}),J.updateProjectionMatrix());I instanceof f.SpotLightShadow&&I.update(U);S=I.map;I=I.matrix;Bb(p,U.matrixWorld);J.position.copy(p);
a.setRenderTarget(S);a.clear();for(S=0;S<O;S++){P?(q.copy(J.position),q.add(w[S]),J.up.copy(x[S]),J.lookAt(q),h.viewport(A[S])):(Bb(q,U.target.matrixWorld),J.lookAt(q));J.updateMatrixWorld();J.matrixWorldInverse.getInverse(J.matrixWorld);I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);I.multiply(J.projectionMatrix);I.multiply(J.matrixWorldInverse);Cb(l,J.projectionMatrix,J.matrixWorldInverse);Qb(k,l);t.length=0;e(W,H,J);X=0;for(var M=t.length;X<M;X++){var Y=t[X],ca=c.update(Y),ha=Y.material;if(ha instanceof
f.MultiMaterial){var ia=ca.groups;ha=ha.materials;for(var ja=0,ka=ia.length;ja<ka;ja++){var pa=ia[ja],la=ha[pa.materialIndex];!0===la.visible&&(la=d(Y,la,P,p),a.renderBufferDirect(J,null,ca,la,Y,pa))}}else la=d(Y,ha,P,p),a.renderBufferDirect(J,null,ca,la,Y,null)}}}}a.setClearColor(a.getClearColor(),a.getClearAlpha());Q.needsUpdate=!1}}};
f.WebGLState=function(a,b,c){function d(D,R,U){var I=new Uint8Array(3),J=a.createTexture();a.bindTexture(D,J);a.texParameteri(D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(D,a.TEXTURE_MAG_FILTER,a.NEAREST);for(D=0;D<U;D++)a.texImage2D(R+D,0,a.RGB,1,1,0,a.RGB,a.UNSIGNED_BYTE,I);return J}var e=this;this.buffers={color:new f.WebGLColorBuffer(a),depth:new f.WebGLDepthBuffer(a,this),stencil:new f.WebGLStencilBuffer(a,this)};var g=a.getParameter(a.MAX_VERTEX_ATTRIBS),h=new Uint8Array(g),k=new Uint8Array(g),
l=new Uint8Array(g),m={},n=null,q=null,p=null,t=null,r=null,v=null,u=null,w=null,x=!1,A=null,y=null,B=null,F=null,K=null,L=null,N=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),Q=null,W={},H=new f.Vector4,O=new f.Vector4,P={};P[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);P[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(a.DEPTH_TEST);this.setDepthFunc(f.LessEqualDepth);this.setFlipSided(!1);
this.setCullFace(f.CullFaceBack);this.enable(a.CULL_FACE);this.enable(a.BLEND);this.setBlending(f.NormalBlending)};this.initAttributes=function(){for(var D=0,R=h.length;D<R;D++)h[D]=0};this.enableAttribute=function(D){h[D]=1;0===k[D]&&(a.enableVertexAttribArray(D),k[D]=1);0!==l[D]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(D,0),l[D]=0)};this.enableAttributeAndDivisor=function(D,R,U){h[D]=1;0===k[D]&&(a.enableVertexAttribArray(D),k[D]=1);l[D]!==R&&(U.vertexAttribDivisorANGLE(D,R),l[D]=
R)};this.disableUnusedAttributes=function(){for(var D=0,R=k.length;D!==R;++D)k[D]!==h[D]&&(a.disableVertexAttribArray(D),k[D]=0)};this.enable=function(D){!0!==m[D]&&(a.enable(D),m[D]=!0)};this.disable=function(D){!1!==m[D]&&(a.disable(D),m[D]=!1)};this.getCompressedTextureFormats=function(){if(null===n&&(n=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var D=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),R=0;R<D.length;R++)n.push(D[R]);
return n};this.setBlending=function(D,R,U,I,J,S,X,M){if(D!==f.NoBlending){this.enable(a.BLEND);if(D!==q||M!==x)D===f.AdditiveBlending?M?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):D===f.SubtractiveBlending?M?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):
D===f.MultiplyBlending?M?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):M?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),q=D,x=M;if(D===f.CustomBlending){J=J||R;S=S||U;
X=X||I;if(R!==p||J!==v)a.blendEquationSeparate(c(R),c(J)),p=R,v=J;if(U!==t||I!==r||S!==u||X!==w)a.blendFuncSeparate(c(U),c(I),c(S),c(X)),t=U,r=I,u=S,w=X}else w=u=v=r=t=p=null}else this.disable(a.BLEND),q=D};this.setColorWrite=function(D){this.buffers.color.setMask(D)};this.setDepthTest=function(D){this.buffers.depth.setTest(D)};this.setDepthWrite=function(D){this.buffers.depth.setMask(D)};this.setDepthFunc=function(D){this.buffers.depth.setFunc(D)};this.setStencilTest=function(D){this.buffers.stencil.setTest(D)};
this.setStencilWrite=function(D){this.buffers.stencil.setMask(D)};this.setStencilFunc=function(D,R,U){this.buffers.stencil.setFunc(D,R,U)};this.setStencilOp=function(D,R,U){this.buffers.stencil.setOp(D,R,U)};this.setFlipSided=function(D){A!==D&&(D?a.frontFace(a.CW):a.frontFace(a.CCW),A=D)};this.setCullFace=function(D){D!==f.CullFaceNone?(this.enable(a.CULL_FACE),D!==y&&(D===f.CullFaceBack?a.cullFace(a.BACK):D===f.CullFaceFront?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):this.disable(a.CULL_FACE);
y=D};this.setLineWidth=function(D){D!==B&&(a.lineWidth(D),B=D)};this.setPolygonOffset=function(D,R,U){if(D){if(this.enable(a.POLYGON_OFFSET_FILL),F!==R||K!==U)a.polygonOffset(R,U),F=R,K=U}else this.disable(a.POLYGON_OFFSET_FILL)};this.getScissorTest=function(){return L};this.setScissorTest=function(D){(L=D)?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(D){void 0===D&&(D=a.TEXTURE0+N-1);Q!==D&&(a.activeTexture(D),Q=D)};this.bindTexture=function(D,R){null===Q&&
e.activeTexture();var U=W[Q];void 0===U&&(U={type:void 0,texture:void 0},W[Q]=U);if(U.type!==D||U.texture!==R)a.bindTexture(D,R||P[D]),U.type=D,U.texture=R};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(D){console.error(D)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(D){console.error(D)}};this.clearColor=function(D,R,U,I){this.buffers.color.setClear(D,R,U,I)};this.clearDepth=function(D){this.buffers.depth.setClear(D)};this.clearStencil=
function(D){this.buffers.stencil.setClear(D)};this.scissor=function(D){!1===H.equals(D)&&(a.scissor(D.x,D.y,D.z,D.w),H.copy(D))};this.viewport=function(D){!1===O.equals(D)&&(a.viewport(D.x,D.y,D.z,D.w),O.copy(D))};this.reset=function(){for(var D=0;D<k.length;D++)1===k[D]&&(a.disableVertexAttribArray(D),k[D]=0);m={};Q=n=null;W={};y=A=q=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset()}};
f.WebGLColorBuffer=function(a){var b=!1,c=new f.Vector4,d=null,e=new f.Vector4;this.setMask=function(g){d===g||b||(a.colorMask(g,g,g,g),d=g)};this.setLocked=function(g){b=g};this.setClear=function(g,h,k,l){c.set(g,h,k,l);!1===e.equals(c)&&(a.clearColor(g,h,k,l),e.copy(c))};this.reset=function(){b=!1;d=null;e=new f.Vector4}};
f.WebGLDepthBuffer=function(a,b){var c=!1,d=null,e=null,g=null;this.setTest=function(h){h?b.enable(a.DEPTH_TEST):b.disable(a.DEPTH_TEST)};this.setMask=function(h){d===h||c||(a.depthMask(h),d=h)};this.setFunc=function(h){if(e!==h){if(h)switch(h){case f.NeverDepth:a.depthFunc(a.NEVER);break;case f.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case f.LessDepth:a.depthFunc(a.LESS);break;case f.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case f.EqualDepth:a.depthFunc(a.EQUAL);break;case f.GreaterEqualDepth:a.depthFunc(a.GEQUAL);
break;case f.GreaterDepth:a.depthFunc(a.GREATER);break;case f.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);e=h}};this.setLocked=function(h){c=h};this.setClear=function(h){g!==h&&(a.clearDepth(h),g=h)};this.reset=function(){c=!1;g=e=d=null}};
f.WebGLStencilBuffer=function(a,b){var c=!1,d=null,e=null,g=null,h=null,k=null,l=null,m=null,n=null;this.setTest=function(q){q?b.enable(a.STENCIL_TEST):b.disable(a.STENCIL_TEST)};this.setMask=function(q){d===q||c||(a.stencilMask(q),d=q)};this.setFunc=function(q,p,t){if(e!==q||g!==p||h!==t)a.stencilFunc(q,p,t),e=q,g=p,h=t};this.setOp=function(q,p,t){if(k!==q||l!==p||m!==t)a.stencilOp(q,p,t),k=q,l=p,m=t};this.setLocked=function(q){c=q};this.setClear=function(q){n!==q&&(a.clearStencil(q),n=q)};this.reset=
function(){c=!1;n=m=l=k=h=g=e=d=null}};
f.WebGLUniforms=function(){function a(I,J,S){this.seq=[];this.map={};this.renderer=S;S=I.getProgramParameter(J,I.ACTIVE_UNIFORMS);for(var X=0;X!==S;++X){var M=I.getActiveUniform(J,X),Y=M;M=I.getUniformLocation(J,M.name);var ca=this,ha=Y.name,ia=ha.length;for(U.lastIndex=0;;){var ja=U.exec(ha),ka=U.lastIndex,pa=ja[1],la=ja[3];"]"===ja[2]&&(pa|=0);if(void 0===la||"["===la&&ka+2===ia){ha=ca;Y=void 0===la?new d(pa,Y,M):new c(pa,Y,M);ha.seq.push(Y);ha.map[Y.id]=Y;break}else la=ca.map[pa],void 0===la&&
(la=new b(pa),pa=ca,ca=la,pa.seq.push(ca),pa.map[ca.id]=ca),ca=la}}}function b(I){this.id=I;this.seq=[];this.map={}}function c(I,J,S){this.id=I;this.addr=S;this.size=J.size;this.setValue=e(J.type)}function d(I,J,S){this.id=I;this.addr=S;this.setValue=v(J.type)}function e(I){switch(I){case 5126:return r;case 35664:return p;case 35665:return q;case 35666:return n;case 35674:return m;case 35675:return l;case 35676:return k;case 35678:return h;case 35680:return g;case 5124:case 35670:return t;case 35667:case 35671:return x;
case 35668:case 35672:return w;case 35669:case 35673:return u}}function g(I,J,S){var X=J.length,M=O(S,X);I.uniform1iv(this.addr,M);for(I=0;I!==X;++I){var Y=J[I];Y&&S.setTextureCube(Y,M[I])}}function h(I,J,S){var X=J.length,M=O(S,X);I.uniform1iv(this.addr,M);for(I=0;I!==X;++I){var Y=J[I];Y&&S.setTexture2D(Y,M[I])}}function k(I,J){I.uniformMatrix4fv(this.addr,!1,P(J,this.size,16))}function l(I,J){I.uniformMatrix3fv(this.addr,!1,P(J,this.size,9))}function m(I,J){I.uniformMatrix2fv(this.addr,!1,P(J,this.size,
4))}function n(I,J){I.uniform4fv(this.addr,P(J,this.size,4))}function q(I,J){I.uniform3fv(this.addr,P(J,this.size,3))}function p(I,J){I.uniform2fv(this.addr,P(J,this.size,2))}function t(I,J){I.uniform1iv(this.addr,J)}function r(I,J){I.uniform1fv(this.addr,J)}function v(I){switch(I){case 5126:return H;case 35664:return Q;case 35665:return N;case 35666:return L;case 35674:return K;case 35675:return F;case 35676:return B;case 35678:return y;case 35680:return A;case 5124:case 35670:return W;case 35667:case 35671:return x;
case 35668:case 35672:return w;case 35669:case 35673:return u}}function u(I,J){I.uniform4iv(this.addr,J)}function w(I,J){I.uniform3iv(this.addr,J)}function x(I,J){I.uniform2iv(this.addr,J)}function A(I,J,S){var X=S.allocTextureUnit();I.uniform1i(this.addr,X);J&&S.setTextureCube(J,X)}function y(I,J,S){var X=S.allocTextureUnit();I.uniform1i(this.addr,X);J&&S.setTexture2D(J,X)}function B(I,J){I.uniformMatrix4fv(this.addr,!1,J.elements||J)}function F(I,J){I.uniformMatrix3fv(this.addr,!1,J.elements||J)}
function K(I,J){I.uniformMatrix2fv(this.addr,!1,J.elements||J)}function L(I,J){void 0===J.x?I.uniform4fv(this.addr,J):I.uniform4f(this.addr,J.x,J.y,J.z,J.w)}function N(I,J){void 0!==J.x?I.uniform3f(this.addr,J.x,J.y,J.z):void 0!==J.r?I.uniform3f(this.addr,J.r,J.g,J.b):I.uniform3fv(this.addr,J)}function Q(I,J){void 0===J.x?I.uniform2fv(this.addr,J):I.uniform2f(this.addr,J.x,J.y)}function W(I,J){I.uniform1i(this.addr,J)}function H(I,J){I.uniform1f(this.addr,J)}function O(I,J){var S=R[J];void 0===S&&
(S=new Int32Array(J),R[J]=S);for(var X=0;X!==J;++X)S[X]=I.allocTextureUnit();return S}function P(I,J,S){var X=I[0];if(0>=X||0<X)return I;var M=J*S,Y=D[M];void 0===Y&&(Y=new Float32Array(M),D[M]=Y);if(0!==J)for(X.toArray(Y,0),X=1,M=0;X!==J;++X)M+=S,I[X].toArray(Y,M);return Y}var D=[],R=[];b.prototype.setValue=function(I,J){for(var S=this.seq,X=0,M=S.length;X!==M;++X){var Y=S[X];Y.setValue(I,J[Y.id])}};var U=/([\w\d_]+)(\])?(\[|\.)?/g;a.prototype.setValue=function(I,J,S){J=this.map[J];void 0!==J&&J.setValue(I,
S,this.renderer)};a.prototype.set=function(I,J,S){var X=this.map[S];void 0!==X&&X.setValue(I,J[S],this.renderer)};a.prototype.setOptional=function(I,J,S){J=J[S];void 0!==J&&this.setValue(I,S,J)};a.upload=function(I,J,S,X){for(var M=0,Y=J.length;M!==Y;++M){var ca=J[M],ha=S[ca.id];!1!==ha.needsUpdate&&ca.setValue(I,ha.value,X)}};a.seqWithValue=function(I,J){for(var S=[],X=0,M=I.length;X!==M;++X){var Y=I[X];Y.id in J&&S.push(Y)}return S};a.splitDynamic=function(I,J){for(var S=null,X=I.length,M=0,Y=0;Y!==
X;++Y){var ca=I[Y],ha=J[ca.id];ha&&!0===ha.dynamic?(null===S&&(S=[]),S.push(ca)):(M<Y&&(I[M]=ca),++M)}M<X&&(I.length=M);return S};a.evalDynamic=function(I,J,S,X){for(var M=0,Y=I.length;M!==Y;++M){var ca=J[I[M].id],ha=ca.onUpdateCallback;void 0!==ha&&ha.call(ca,S,X)}};return a}();
f.LensFlarePlugin=function(a,b){var c,d,e,g,h,k,l,m,n,q,p=a.context,t=a.state,r,v,u,w,x,A;this.render=function(y,B,F){if(0!==b.length){y=new f.Vector3;var K=F.w/F.z,L=.5*F.z,N=.5*F.w,Q=16/F.w,W=new f.Vector2(Q*K,Q),H=new f.Vector3(1,1,0),O=new f.Vector2(1,1),P=new f.Box2;P.min.set(0,0);P.max.set(F.z-16,F.w-16);if(void 0===w){Q=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var D=new Uint16Array([0,1,2,0,2,3]);r=p.createBuffer();v=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,r);p.bufferData(p.ARRAY_BUFFER,
Q,p.STATIC_DRAW);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,v);p.bufferData(p.ELEMENT_ARRAY_BUFFER,D,p.STATIC_DRAW);x=p.createTexture();A=p.createTexture();t.bindTexture(p.TEXTURE_2D,x);p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);t.bindTexture(p.TEXTURE_2D,
A);p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);Q=u={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV \x3d uv;\nvec2 pos \x3d position;\nif ( renderType \x3d\x3d 2 ) {\nvec4 visibility \x3d texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility \x3d        visibility.r / 9.0;\nvVisibility *\x3d 1.0 - visibility.g / 9.0;\nvVisibility *\x3d       visibility.b / 9.0;\nvVisibility *\x3d 1.0 - visibility.a / 9.0;\npos.x \x3d cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y \x3d sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position \x3d vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType \x3d\x3d 0 ) {\ngl_FragColor \x3d vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType \x3d\x3d 1 ) {\ngl_FragColor \x3d texture2D( map, vUV );\n} else {\nvec4 texture \x3d texture2D( map, vUV );\ntexture.a *\x3d opacity * vVisibility;\ngl_FragColor \x3d texture;\ngl_FragColor.rgb *\x3d color;\n}\n}"};D=p.createProgram();
var R=p.createShader(p.FRAGMENT_SHADER),U=p.createShader(p.VERTEX_SHADER),I="precision "+a.getPrecision()+" float;\n";p.shaderSource(R,I+Q.fragmentShader);p.shaderSource(U,I+Q.vertexShader);p.compileShader(R);p.compileShader(U);p.attachShader(D,R);p.attachShader(D,U);p.linkProgram(D);w=D;n=p.getAttribLocation(w,"position");q=p.getAttribLocation(w,"uv");c=p.getUniformLocation(w,"renderType");d=p.getUniformLocation(w,"map");e=p.getUniformLocation(w,"occlusionMap");g=p.getUniformLocation(w,"opacity");
h=p.getUniformLocation(w,"color");k=p.getUniformLocation(w,"scale");l=p.getUniformLocation(w,"rotation");m=p.getUniformLocation(w,"screenPosition")}p.useProgram(w);t.initAttributes();t.enableAttribute(n);t.enableAttribute(q);t.disableUnusedAttributes();p.uniform1i(e,0);p.uniform1i(d,1);p.bindBuffer(p.ARRAY_BUFFER,r);p.vertexAttribPointer(n,2,p.FLOAT,!1,16,0);p.vertexAttribPointer(q,2,p.FLOAT,!1,16,8);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,v);t.disable(p.CULL_FACE);t.setDepthWrite(!1);D=0;for(R=b.length;D<
R;D++)if(Q=16/F.w,W.set(Q*K,Q),U=b[D],y.set(U.matrixWorld.elements[12],U.matrixWorld.elements[13],U.matrixWorld.elements[14]),y.applyMatrix4(B.matrixWorldInverse),sb(y,B.projectionMatrix),H.copy(y),O.x=F.x+H.x*L+L-8,O.y=F.y+H.y*N+N-8,!0===P.containsPoint(O)){t.activeTexture(p.TEXTURE0);t.bindTexture(p.TEXTURE_2D,null);t.activeTexture(p.TEXTURE1);t.bindTexture(p.TEXTURE_2D,x);p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,O.x,O.y,16,16,0);p.uniform1i(c,0);p.uniform2f(k,W.x,W.y);p.uniform3f(m,H.x,H.y,H.z);t.disable(p.BLEND);
t.enable(p.DEPTH_TEST);p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0);t.activeTexture(p.TEXTURE0);t.bindTexture(p.TEXTURE_2D,A);p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,O.x,O.y,16,16,0);p.uniform1i(c,1);t.disable(p.DEPTH_TEST);t.activeTexture(p.TEXTURE1);t.bindTexture(p.TEXTURE_2D,x);p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0);U.positionScreen.copy(H);U.customUpdateCallback?U.customUpdateCallback(U):U.updateLensFlares();p.uniform1i(c,2);t.enable(p.BLEND);I=0;for(var J=U.lensFlares.length;I<J;I++){var S=
U.lensFlares[I];.001<S.opacity&&.001<S.scale&&(H.x=S.x,H.y=S.y,H.z=S.z,Q=S.size*S.scale/F.w,W.x=Q*K,W.y=Q,p.uniform3f(m,H.x,H.y,H.z),p.uniform2f(k,W.x,W.y),p.uniform1f(l,S.rotation),p.uniform1f(g,S.opacity),p.uniform3f(h,S.color.r,S.color.g,S.color.b),t.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),a.setTexture2D(S.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}t.enable(p.CULL_FACE);t.enable(p.DEPTH_TEST);t.setDepthWrite(!0);a.resetGLState()}}};
f.SpritePlugin=function(a,b){var c,d,e,g,h,k,l,m,n,q,p,t,r,v,u,w,x;function A(O,P){return O.renderOrder!==P.renderOrder?O.renderOrder-P.renderOrder:O.z!==P.z?P.z-O.z:P.id-O.id}var y=a.context,B=a.state,F,K,L,N,Q=new f.Vector3,W=new f.Quaternion,H=new f.Vector3;this.render=function(O,P){if(0!==b.length){if(void 0===L){var D=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),R=new Uint16Array([0,1,2,0,2,3]);F=y.createBuffer();K=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,F);y.bufferData(y.ARRAY_BUFFER,
D,y.STATIC_DRAW);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,K);y.bufferData(y.ELEMENT_ARRAY_BUFFER,R,y.STATIC_DRAW);D=y.createProgram();R=y.createShader(y.VERTEX_SHADER);var U=y.createShader(y.FRAGMENT_SHADER);y.shaderSource(R,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV \x3d uvOffset + uv * uvScale;\nvec2 alignedPosition \x3d position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy +\x3d rotatedPosition;\nfinalPosition \x3d projectionMatrix * finalPosition;\ngl_Position \x3d finalPosition;\n}"].join("\n"));
y.shaderSource(U,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture \x3d texture2D( map, vUV );\nif ( texture.a \x3c alphaTest ) discard;\ngl_FragColor \x3d vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType \x3e 0 ) {\nfloat depth \x3d gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor \x3d 0.0;\nif ( fogType \x3d\x3d 1 ) {\nfogFactor \x3d smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 \x3d 1.442695;\nfogFactor \x3d exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor \x3d 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor \x3d mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
y.compileShader(R);y.compileShader(U);y.attachShader(D,R);y.attachShader(D,U);y.linkProgram(D);L=D;w=y.getAttribLocation(L,"position");x=y.getAttribLocation(L,"uv");c=y.getUniformLocation(L,"uvOffset");d=y.getUniformLocation(L,"uvScale");e=y.getUniformLocation(L,"rotation");g=y.getUniformLocation(L,"scale");h=y.getUniformLocation(L,"color");k=y.getUniformLocation(L,"map");l=y.getUniformLocation(L,"opacity");m=y.getUniformLocation(L,"modelViewMatrix");n=y.getUniformLocation(L,"projectionMatrix");q=
y.getUniformLocation(L,"fogType");p=y.getUniformLocation(L,"fogDensity");t=y.getUniformLocation(L,"fogNear");r=y.getUniformLocation(L,"fogFar");v=y.getUniformLocation(L,"fogColor");u=y.getUniformLocation(L,"alphaTest");D=document.createElement("canvas");D.width=8;D.height=8;R=D.getContext("2d");R.fillStyle="white";R.fillRect(0,0,8,8);N=new f.Texture(D);N.needsUpdate=!0}y.useProgram(L);B.initAttributes();B.enableAttribute(w);B.enableAttribute(x);B.disableUnusedAttributes();B.disable(y.CULL_FACE);B.enable(y.BLEND);
y.bindBuffer(y.ARRAY_BUFFER,F);y.vertexAttribPointer(w,2,y.FLOAT,!1,16,0);y.vertexAttribPointer(x,2,y.FLOAT,!1,16,8);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,K);y.uniformMatrix4fv(n,!1,P.projectionMatrix.elements);B.activeTexture(y.TEXTURE0);y.uniform1i(k,0);R=D=0;(U=O.fog)?(y.uniform3f(v,U.color.r,U.color.g,U.color.b),U instanceof f.Fog?(y.uniform1f(t,U.near),y.uniform1f(r,U.far),y.uniform1i(q,1),R=D=1):U instanceof f.FogExp2&&(y.uniform1f(p,U.density),y.uniform1i(q,2),R=D=2)):(y.uniform1i(q,0),R=D=0);
U=0;for(var I=b.length;U<I;U++){var J=b[U];Cb(J.modelViewMatrix,P.matrixWorldInverse,J.matrixWorld);J.z=-J.modelViewMatrix.elements[14]}b.sort(A);P=[];U=0;for(I=b.length;U<I;U++){J=b[U];var S=J.material;y.uniform1f(u,S.alphaTest);y.uniformMatrix4fv(m,!1,J.modelViewMatrix.elements);J.matrixWorld.decompose(Q,W,H);P[0]=H.x;P[1]=H.y;J=0;O.fog&&S.fog&&(J=R);D!==J&&(y.uniform1i(q,J),D=J);null!==S.map?(y.uniform2f(c,S.map.offset.x,S.map.offset.y),y.uniform2f(d,S.map.repeat.x,S.map.repeat.y)):(y.uniform2f(c,
0,0),y.uniform2f(d,1,1));y.uniform1f(l,S.opacity);y.uniform3f(h,S.color.r,S.color.g,S.color.b);y.uniform1f(e,S.rotation);y.uniform2fv(g,P);B.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst);B.setDepthTest(S.depthTest);B.setDepthWrite(S.depthWrite);S.map?a.setTexture2D(S.map,0):a.setTexture2D(N,0);y.drawElements(y.TRIANGLES,6,y.UNSIGNED_SHORT,0)}B.enable(y.CULL_FACE);a.resetGLState()}}};
Object.assign(f,{Face4:function(a,b,c,d,e,g,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new f.Face3(a,b,c,e,g,h)},LineStrip:0,LinePieces:1,MeshFaceMaterial:f.MultiMaterial,PointCloud:function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new f.Points(a,b)},Particle:f.Sprite,ParticleSystem:function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new f.Points(a,b)},PointCloudMaterial:function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");
return new f.PointsMaterial(a)},ParticleBasicMaterial:function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new f.PointsMaterial(a)},ParticleSystemMaterial:function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new f.PointsMaterial(a)},Vertex:function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new f.Vector3(a,b,c)}});
Object.assign(f.Box2.prototype,{empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)}});
Object.assign(f.Box3.prototype,{empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(f.Matrix3.prototype,{multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return rb(a,this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)}});
Object.assign(f.Matrix4.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return Db(this,a)},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return sb(a,this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
tb(a,this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}});
Object.assign(f.Plane.prototype,{isIntersectionLine:function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b}});Object.assign(f.Quaternion.prototype,{multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return mb(a,this)}});
Object.assign(f.Ray.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(f.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return Bb(this,a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");var b=Ab(this,a,0).length(),c=Ab(this,a,1).length();a=Ab(this,a,2).length();this.x=b;this.y=c;this.z=a;return this},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return Ab(this,b,a)}});
Object.assign(f.Object3D.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});
Object.defineProperties(f.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(f.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});f.PerspectiveCamera.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};
Object.defineProperties(f.Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");
this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");
this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");
this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(f.BufferAttribute.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length}}});
Object.assign(f.BufferGeometry.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},
computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(f.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
Object.defineProperties(f.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new f.Color}}});
Object.defineProperties(f.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(f.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});
f.EventDispatcher.prototype=Object.assign(Object.create({constructor:f.EventDispatcher,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in.");Object.assign(a,this)}}),f.EventDispatcher.prototype);
Object.assign(f.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
Object.defineProperties(f.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
this.shadowMap.cullFace=a}}});Object.defineProperties(f.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?f.CullFaceFront:f.CullFaceBack},set:function(a){a=a!==f.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});
Object.defineProperties(f.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=
a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=
a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=
a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});
Object.assign(f.Audio.prototype,{load:function(a){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var b=this;(new f.AudioLoader).load(a,function(c){b.setBuffer(c)});return this}});Object.assign(f.AudioAnalyser.prototype,{getData:function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()}});
f.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(b instanceof f.Mesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
f.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new f.TextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new f.CubeTextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,
d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
f.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
f.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};
f.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};
f.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new f.Group,d=0,e=b.length;d<e;d++)c.add(new f.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new f.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
f.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h;if(0<f.ShapeUtils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var k=2*c;for(h=c-1;2<c;){if(0>=k--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}var l=h;c<=l&&(l=0);h=l+1;c<=h&&(h=0);var m=h+1;c<=m&&(m=0);a:{var n;var q=a[e[l]].x;var p=a[e[l]].y;
var t=a[e[h]].x;var r=a[e[h]].y;var v=a[e[m]].x;var u=a[e[m]].y;if(Number.EPSILON>(t-q)*(u-p)-(r-p)*(v-q))var w=!1;else{var x=v-t;var A=u-r;var y=q-v;var B=p-u;var F=t-q;w=r-p;for(n=0;n<c;n++){var K=a[e[n]].x;var L=a[e[n]].y;if(!(K===q&&L===p||K===t&&L===r||K===v&&L===u)){var N=K-q;var Q=L-p;var W=K-t;var H=L-r;K-=v;L-=u;H=x*H-A*W;Q=F*Q-w*N;K=y*L-B*K;if(H>=-Number.EPSILON&&K>=-Number.EPSILON&&Q>=-Number.EPSILON){w=!1;break a}}}w=!0}}if(w){d.push([a[e[l]],a[e[h]],a[e[m]]]);g.push([e[l],e[h],e[m]]);
l=h;for(m=h+1;m<c;l++,m++)e[l]=e[m];c--;k=2*c}}return b?g:d},triangulateShape:function(a,b){function c(n,q,p){return n.x!==q.x?n.x<q.x?n.x<=p.x&&p.x<=q.x:q.x<=p.x&&p.x<=n.x:n.y<q.y?n.y<=p.y&&p.y<=q.y:q.y<=p.y&&p.y<=n.y}function d(n,q,p,t,r){var v=q.x-n.x,u=q.y-n.y,w=t.x-p.x,x=t.y-p.y,A=n.x-p.x,y=n.y-p.y,B=u*w-v*x,F=u*A-v*y;if(Math.abs(B)>Number.EPSILON){if(0<B){if(0>F||F>B)return[];w=x*A-w*y;if(0>w||w>B)return[]}else{if(0<F||F<B)return[];w=x*A-w*y;if(0<w||w<B)return[]}if(0===w)return!r||0!==F&&F!==
B?[n]:[];if(w===B)return!r||0!==F&&F!==B?[q]:[];if(0===F)return[p];if(F===B)return[t];r=w/B;return[{x:n.x+r*v,y:n.y+r*u}]}if(0!==F||x*A!==w*y)return[];u=0===v&&0===u;w=0===w&&0===x;if(u&&w)return n.x!==p.x||n.y!==p.y?[]:[n];if(u)return c(p,t,n)?[n]:[];if(w)return c(n,q,p)?[p]:[];0!==v?(n.x<q.x?(v=n,w=n.x,u=q,n=q.x):(v=q,w=q.x,u=n,n=n.x),p.x<t.x?(q=p,B=p.x,x=t,p=t.x):(q=t,B=t.x,x=p,p=p.x)):(n.y<q.y?(v=n,w=n.y,u=q,n=q.y):(v=q,w=q.y,u=n,n=n.y),p.y<t.y?(q=p,B=p.y,x=t,p=t.y):(q=t,B=t.y,x=p,p=p.y));return w<=
B?n<B?[]:n===B?r?[]:[q]:n<=p?[q,u]:[q,x]:w>p?[]:w===p?r?[]:[v]:n<=p?[v,u]:[v,x]}function e(n,q,p,t){var r=q.x-n.x,v=q.y-n.y;q=p.x-n.x;p=p.y-n.y;var u=t.x-n.x;t=t.y-n.y;n=r*p-v*q;r=r*t-v*u;return Math.abs(n)>Number.EPSILON?(q=u*p-t*q,0<n?0<=r&&0<=q:0<=r||0<=q):0<r}var g,h={},k=a.concat();var l=0;for(g=b.length;l<g;l++)Array.prototype.push.apply(k,b[l]);l=0;for(g=k.length;l<g;l++){var m=k[l].x+":"+k[l].y;void 0!==h[m]&&console.warn("THREE.Shape: Duplicate point",m);h[m]=l}l=function(n,q){function p(H,
O){var P=v.length-1,D=H-1;0>D&&(D=P);var R=H+1;R>P&&(R=0);P=e(v[H],v[D],v[R],Q[O]);if(!P)return!1;P=Q.length-1;D=O-1;0>D&&(D=P);R=O+1;R>P&&(R=0);return(P=e(Q[O],Q[D],Q[R],v[H]))?!0:!1}function t(H,O){var P;for(P=0;P<v.length;P++){var D=P+1;D%=v.length;D=d(H,O,v[P],v[D],!0);if(0<D.length)return!0}return!1}function r(H,O){var P,D;for(P=0;P<u.length;P++){var R=q[u[P]];for(D=0;D<R.length;D++){var U=D+1;U%=R.length;U=d(H,O,R[D],R[U],!0);if(0<U.length)return!0}}return!1}var v=n.concat(),u=[],w,x;n=[];var A,
y=0;for(w=q.length;y<w;y++)u.push(y);var B=0;for(var F=2*u.length;0<u.length;){F--;if(0>F){console.log("Infinite Loop! Holes left:"+u.length+", Probably Hole outside Shape!");break}for(x=B;x<v.length;x++){var K=v[x];w=-1;for(y=0;y<u.length;y++){var L=u[y];var N=K.x+":"+K.y+":"+L;if(void 0===n[N]){var Q=q[L];for(A=0;A<Q.length;A++)if(L=Q[A],p(x,A)&&!t(K,L)&&!r(K,L)){w=A;u.splice(y,1);B=v.slice(0,x+1);L=v.slice(x);A=Q.slice(w);var W=Q.slice(0,w+1);v=B.concat(A).concat(W).concat(L);B=x;break}if(0<=w)break;
n[N]=!0}}if(0<=w)break}}return v}(a,b);k=f.ShapeUtils.triangulate(l,!1);l=0;for(g=k.length;l<g;l++)for(b=k[l],a=0;3>a;a++)m=b[a].x+":"+b[a].y,m=h[m],void 0!==m&&(b[a]=m);return k.concat()},isClockWise:function(a){return 0>f.ShapeUtils.area(a)},b2:function(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d},b3:function(a,b,c,d,e){var g=1-a,h=1-a;return g*g*g*b+3*h*h*a*c+3*(1-a)*a*a*d+a*a*a*e}};f.Curve=function(){};
function sc(a,b){a=tc(a);var c=a.length;var d=b*a[c-1];for(var e=0,g=c-1,h;e<=g;)if(b=Math.floor(e+(g-e)/2),h=a[b]-d,0>h)e=b+1;else if(0<h)g=b-1;else{g=b;break}b=g;if(a[b]===d)return b/(c-1);e=a[b];return a=(b+(d-e)/(a[b+1]-e))/(c-1)}
function tc(a){var b;b||(b=a.__arcLengthDivisions?a.__arcLengthDivisions:200);if(a.cacheArcLengths&&a.cacheArcLengths.length===b+1&&!a.needsUpdate)return a.cacheArcLengths;a.needsUpdate=!1;var c=[],d=a.getPoint(0),e,g=0;c.push(0);for(e=1;e<=b;e++){var h=a.getPoint(e/b);g+=h.distanceTo(d);c.push(g);d=h}return a.cacheArcLengths=c}
f.Curve.prototype={constructor:f.Curve,getPoint:function(){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=sc(this,a);return this.getPoint(a)},getPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c},getSpacedPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c},getLength:function(){var a=tc(this);return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=
!0;tc(this)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()}};f.Curve.create=function(a,b){a.prototype=Object.create(f.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};f.CurvePath=function(){this.curves=[];this.autoClose=!1};
f.CurvePath.prototype=Object.assign(Object.create(f.Curve.prototype),{constructor:f.CurvePath,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new f.LineCurve(b,a))},getPoint:function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]>=b)return a=this.curves[d],b=1-(c[d]-b)/a.getLength(),a.getPointAt(b);d++}return null},getLength:function(){var a=this.getCurveLengths();
return a[a.length-1]},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){for(var b=new f.Geometry,c=0,d=a.length;c<
d;c++){var e=a[c];b.vertices.push(new f.Vector3(e.x,e.y,e.z||0))}return b}});f.Font=function(a){this.data=a};
Object.assign(f.Font.prototype,{generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split("");var e=b/d.resolution,g=0;b=[];for(var h=0;h<a.length;h++){var k;var l=e;var m=g,n=d.glyphs[a[h]]||d.glyphs["?"];if(n){var q=new f.Path,p=[],t=f.ShapeUtils.b2,r=f.ShapeUtils.b3;if(n.o)for(var v=n._cachedOutline||(n._cachedOutline=n.o.split(" ")),u=0,w=v.length;u<w;)switch(v[u++]){case "m":var x=v[u++]*l+m;var A=v[u++]*l;q.moveTo(x,A);break;case "l":x=v[u++]*l+m;
A=v[u++]*l;q.lineTo(x,A);break;case "q":var y=v[u++]*l+m;var B=v[u++]*l;var F=v[u++]*l+m;var K=v[u++]*l;q.quadraticCurveTo(F,K,y,B);if(k=p[p.length-1]){var L=k.x;k=k.y;for(var N=1;N<=c;N++){var Q=N/c;t(Q,L,F,y);t(Q,k,K,B)}}break;case "b":if(y=v[u++]*l+m,B=v[u++]*l,F=v[u++]*l+m,K=v[u++]*l,x=v[u++]*l+m,A=v[u++]*l,q.bezierCurveTo(F,K,x,A,y,B),k=p[p.length-1])for(L=k.x,k=k.y,N=1;N<=c;N++)Q=N/c,r(Q,L,F,x,y),r(Q,k,K,A,B)}l={offset:n.ha*l,path:q}}else l=void 0;g+=l.offset;b.push(l.path)}c=[];d=0;for(a=b.length;d<
a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c}});f.Path=function(a){f.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};
f.Path.prototype=Object.assign(Object.create(f.CurvePath.prototype),{constructor:f.Path,fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.actions.push({action:"moveTo",args:[a,b]})},lineTo:function(a,b){var c=this.actions[this.actions.length-1].args;this.curves.push(new f.LineCurve(new f.Vector2(c[c.length-2],c[c.length-1]),new f.Vector2(a,b)));this.actions.push({action:"lineTo",args:[a,b]})},quadraticCurveTo:function(a,
b,c,d){var e=this.actions[this.actions.length-1].args;this.curves.push(new f.QuadraticBezierCurve(new f.Vector2(e[e.length-2],e[e.length-1]),new f.Vector2(a,b),new f.Vector2(c,d)));this.actions.push({action:"quadraticCurveTo",args:[a,b,c,d]})},bezierCurveTo:function(a,b,c,d,e,g){var h=this.actions[this.actions.length-1].args;this.curves.push(new f.CubicBezierCurve(new f.Vector2(h[h.length-2],h[h.length-1]),new f.Vector2(a,b),new f.Vector2(c,d),new f.Vector2(e,g)));this.actions.push({action:"bezierCurveTo",
args:[a,b,c,d,e,g]})},splineThru:function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args;c=[new f.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);this.curves.push(new f.SplineCurve(c));this.actions.push({action:"splineThru",args:b})},arc:function(a,b,c,d,e,g){var h=this.actions[this.actions.length-1].args;this.absarc(a+h[h.length-2],b+h[h.length-1],c,d,e,g)},absarc:function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)},ellipse:function(a,
b,c,d,e,g,h,k){var l=this.actions[this.actions.length-1].args;this.absellipse(a+l[l.length-2],b+l[l.length-1],c,d,e,g,h,k)},absellipse:function(a,b,c,d,e,g,h,k){var l=[a,b,c,d,e,g,h,k||0];a=new f.EllipseCurve(a,b,c,d,e,g,h,k);this.curves.push(a);a=a.getPoint(1);l.push(a.x);l.push(a.y);this.actions.push({action:"ellipse",args:l})},getSpacedPoints:function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=
f.ShapeUtils.b2,c=f.ShapeUtils.b3,d=[],e,g,h,k,l,m,n,q,p,t,r=0,v=this.actions.length;r<v;r++){p=this.actions[r];var u=p.args;switch(p.action){case "moveTo":d.push(new f.Vector2(u[0],u[1]));break;case "lineTo":d.push(new f.Vector2(u[0],u[1]));break;case "quadraticCurveTo":e=u[2];g=u[3];l=u[0];m=u[1];0<d.length?(p=d[d.length-1],n=p.x,q=p.y):(p=this.actions[r-1].args,n=p[p.length-2],q=p[p.length-1]);for(u=1;u<=a;u++)t=u/a,p=b(t,n,l,e),t=b(t,q,m,g),d.push(new f.Vector2(p,t));break;case "bezierCurveTo":e=
u[4];g=u[5];l=u[0];m=u[1];h=u[2];k=u[3];0<d.length?(p=d[d.length-1],n=p.x,q=p.y):(p=this.actions[r-1].args,n=p[p.length-2],q=p[p.length-1]);for(u=1;u<=a;u++)t=u/a,p=c(t,n,l,h,e),t=c(t,q,m,k,g),d.push(new f.Vector2(p,t));break;case "splineThru":p=this.actions[r-1].args;t=[new f.Vector2(p[p.length-2],p[p.length-1])];p=a*u[0].length;t=t.concat(u[0]);t=new f.SplineCurve(t);for(u=1;u<=p;u++)d.push(t.getPointAt(u/p));break;case "arc":e=u[0];g=u[1];m=u[2];h=u[3];p=u[4];l=!!u[5];n=p-h;q=2*a;for(u=1;u<=q;u++)t=
u/q,l||(t=1-t),t=h+t*n,p=e+m*Math.cos(t),t=g+m*Math.sin(t),d.push(new f.Vector2(p,t));break;case "ellipse":e=u[0];g=u[1];m=u[2];k=u[3];h=u[4];p=u[5];l=!!u[6];var w=u[7];n=p-h;q=2*a;if(0!==w){var x=Math.cos(w);var A=Math.sin(w)}for(u=1;u<=q;u++){t=u/q;l||(t=1-t);t=h+t*n;p=e+m*Math.cos(t);t=g+k*Math.sin(t);if(0!==w){var y=p;p=(y-e)*x-(t-g)*A+e;t=(y-e)*A+(t-g)*x+g}d.push(new f.Vector2(p,t))}}}a=d[d.length-1];Math.abs(a.x-d[0].x)<Number.EPSILON&&Math.abs(a.y-d[0].y)<Number.EPSILON&&d.splice(d.length-
1,1);this.autoClose&&d.push(d[0]);return d},toShapes:function(a,b){function c(u){for(var w=[],x=0,A=u.length;x<A;x++){var y=u[x],B=new f.Shape;B.actions=y.actions;B.curves=y.curves;w.push(B)}return w}function d(u,w){for(var x=w.length,A=!1,y=x-1,B=0;B<x;y=B++){var F=w[y],K=w[B],L=K.x-F.x,N=K.y-F.y;if(Math.abs(N)>Number.EPSILON){if(0>N&&(F=w[B],L=-L,K=w[y],N=-N),!(u.y<F.y||u.y>K.y))if(u.y===F.y){if(u.x===F.x)return!0}else{y=N*(u.x-F.x)-L*(u.y-F.y);if(0===y)return!0;0>y||(A=!A)}}else if(u.y===F.y&&
(K.x<=u.x&&u.x<=F.x||F.x<=u.x&&u.x<=K.x))return!0}return A}var e=f.ShapeUtils.isClockWise,g=function(u){for(var w=[],x=new f.Path,A=0,y=u.length;A<y;A++){var B=u[A],F=B.args;B=B.action;"moveTo"===B&&0!==x.actions.length&&(w.push(x),x=new f.Path);x[B].apply(x,F)}0!==x.actions.length&&w.push(x);return w}(this.actions);if(0===g.length)return[];if(!0===b)return c(g);b=[];if(1===g.length){var h=g[0];var k=new f.Shape;k.actions=h.actions;k.curves=h.curves;b.push(k);return b}var l=!e(g[0].getPoints());l=
a?!l:l;k=[];var m=[],n=[],q=0;m[q]=void 0;n[q]=[];for(var p=0,t=g.length;p<t;p++){h=g[p];var r=h.getPoints();var v=e(r);(v=a?!v:v)?(!l&&m[q]&&q++,m[q]={s:new f.Shape,p:r},m[q].s.actions=h.actions,m[q].s.curves=h.curves,l&&q++,n[q]=[]):n[q].push({h:h,p:r[0]})}if(!m[0])return c(g);if(1<m.length){p=!1;a=[];e=0;for(g=m.length;e<g;e++)k[e]=[];e=0;for(g=m.length;e<g;e++)for(h=n[e],v=0;v<h.length;v++){l=h[v];q=!0;for(r=0;r<m.length;r++)d(l.p,m[r].p)&&(e!==r&&a.push({froms:e,tos:r,hole:v}),q?(q=!1,k[r].push(l)):
p=!0);q&&k[e].push(l)}0<a.length&&(p||(n=k))}p=0;for(e=m.length;p<e;p++)for(k=m[p].s,b.push(k),a=n[p],g=0,h=a.length;g<h;g++)k.holes.push(a[g].h);return b}});f.Shape=function(){f.Path.apply(this,arguments);this.holes=[]};
f.Shape.prototype=Object.assign(Object.create(f.Path.prototype),{constructor:f.Shape,extrude:function(a){return new f.ExtrudeGeometry(this,a)},makeGeometry:function(a){return new f.ShapeGeometry(this,a)},getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});
f.LineCurve=function(a,b){this.v1=a;this.v2=b};f.LineCurve.prototype=Object.create(f.Curve.prototype);f.LineCurve.prototype.constructor=f.LineCurve;f.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};f.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};f.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};f.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};
f.QuadraticBezierCurve.prototype=Object.create(f.Curve.prototype);f.QuadraticBezierCurve.prototype.constructor=f.QuadraticBezierCurve;f.QuadraticBezierCurve.prototype.getPoint=function(a){var b=f.ShapeUtils.b2;return new f.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};f.QuadraticBezierCurve.prototype.getTangent=function(a){var b=f.CurveUtils.tangentQuadraticBezier;return(new f.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};
f.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};f.CubicBezierCurve.prototype=Object.create(f.Curve.prototype);f.CubicBezierCurve.prototype.constructor=f.CubicBezierCurve;f.CubicBezierCurve.prototype.getPoint=function(a){var b=f.ShapeUtils.b3;return new f.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};
f.CubicBezierCurve.prototype.getTangent=function(a){var b=f.CurveUtils.tangentCubicBezier;return(new f.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};f.SplineCurve=function(a){this.points=void 0==a?[]:a};f.SplineCurve.prototype=Object.create(f.Curve.prototype);f.SplineCurve.prototype.constructor=f.SplineCurve;
f.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1];b=b[c>b.length-3?b.length-1:c+2];c=f.CurveUtils.interpolate;return new f.Vector2(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a))};f.EllipseCurve=function(a,b,c,d,e,g,h,k){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=h;this.aRotation=k||0};f.EllipseCurve.prototype=Object.create(f.Curve.prototype);
f.EllipseCurve.prototype.constructor=f.EllipseCurve;
f.EllipseCurve.prototype.getPoint=function(a){var b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);var c=this.aY+this.yRadius*Math.sin(b);if(0!==this.aRotation){b=Math.cos(this.aRotation);var d=Math.sin(this.aRotation),e=a;a=(e-this.aX)*b-(c-this.aY)*d+this.aX;c=(e-this.aX)*d+(c-this.aY)*b+this.aY}return new f.Vector2(a,c)};
f.ArcCurve=function(a,b,c,d,e,g){f.EllipseCurve.call(this,a,b,c,c,d,e,g)};f.ArcCurve.prototype=Object.create(f.EllipseCurve.prototype);f.ArcCurve.prototype.constructor=f.ArcCurve;f.LineCurve3=f.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new f.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
f.QuadraticBezierCurve3=f.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=f.ShapeUtils.b2;return new f.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
f.CubicBezierCurve3=f.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=f.ShapeUtils.b3;return new f.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
f.SplineCurve3=f.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1];b=b[c>b.length-3?b.length-1:c+2];c=f.CurveUtils.interpolate;return new f.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});
f.CatmullRomCurve3=function(){function a(){}var b=new f.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(g,h,k,l){this.c0=g;this.c1=k;this.c2=-3*g+3*h-2*k-l;this.c3=2*g-2*h+k+l};a.prototype.initNonuniformCatmullRom=function(g,h,k,l,m,n,q){this.init(h,k,((h-g)/m-(k-g)/(m+n)+(k-h)/n)*n,((k-h)/n-(l-h)/(n+q)+(l-k)/q)*n)};a.prototype.initCatmullRom=function(g,h,k,l,m){this.init(h,k,m*(k-g),m*(l-h))};a.prototype.calc=function(g){var h=g*g;return this.c0+this.c1*g+this.c2*h+this.c3*h*g};return f.Curve.create(function(g){this.points=
g||[];this.closed=!1},function(g){var h=this.points;var k=h.length;2>k&&console.log("duh, you need at least 2 points");g*=k-(this.closed?0:1);var l=Math.floor(g);g-=l;this.closed?l+=0<l?0:(Math.floor(Math.abs(l)/h.length)+1)*h.length:0===g&&l===k-1&&(l=k-2,g=1);if(this.closed||0<l)var m=h[(l-1)%k];else b.subVectors(h[0],h[1]).add(h[0]),m=b;var n=h[l%k];var q=h[(l+1)%k];this.closed||l+2<k?h=h[(l+2)%k]:(b.subVectors(h[k-1],h[k-2]).add(h[k-1]),h=b);if(void 0===this.type||"centripetal"===this.type||"chordal"===
this.type){var p="chordal"===this.type?.5:.25;k=Math.pow(m.distanceToSquared(n),p);l=Math.pow(n.distanceToSquared(q),p);p=Math.pow(q.distanceToSquared(h),p);1E-4>l&&(l=1);1E-4>k&&(k=l);1E-4>p&&(p=l);c.initNonuniformCatmullRom(m.x,n.x,q.x,h.x,k,l,p);d.initNonuniformCatmullRom(m.y,n.y,q.y,h.y,k,l,p);e.initNonuniformCatmullRom(m.z,n.z,q.z,h.z,k,l,p)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(m.x,n.x,q.x,h.x,k),d.initCatmullRom(m.y,n.y,q.y,h.y,k),e.initCatmullRom(m.z,
n.z,q.z,h.z,k));return new f.Vector3(c.calc(g),d.calc(g),e.calc(g))})}();f.ClosedSplineCurve3=function(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.");f.CatmullRomCurve3.call(this,a);this.type="catmullrom";this.closed=!0};f.ClosedSplineCurve3.prototype=Object.create(f.CatmullRomCurve3.prototype);
f.BoxGeometry=function(a,b,c,d,e,g){f.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.fromBufferGeometry(new f.BoxBufferGeometry(a,b,c,d,e,g));this.mergeVertices()};f.BoxGeometry.prototype=Object.create(f.Geometry.prototype);f.BoxGeometry.prototype.constructor=f.BoxGeometry;f.CubeGeometry=f.BoxGeometry;
f.BoxBufferGeometry=function(a,b,c,d,e,g){function h(A,y,B,F,K,L,N,Q,W,H,O){var P=L/W,D=N/H,R=L/2,U=N/2,I=Q/2;N=W+1;for(var J=H+1,S=L=0,X=new f.Vector3,M=0;M<J;M++)for(var Y=M*D-U,ca=0;ca<N;ca++)X[A]=(ca*P-R)*F,X[y]=Y*K,X[B]=I,q[r]=X.x,q[r+1]=X.y,q[r+2]=X.z,X[A]=0,X[y]=0,X[B]=0<Q?1:-1,p[r]=X.x,p[r+1]=X.y,p[r+2]=X.z,t[v]=ca/W,t[v+1]=1-M/H,r+=3,v+=2,L+=1;for(M=0;M<H;M++)for(ca=0;ca<W;ca++)A=w+ca+N*(M+1),y=w+(ca+1)+N*(M+1),B=w+(ca+1)+N*M,n[u]=w+ca+N*M,n[u+1]=A,n[u+2]=B,n[u+3]=A,n[u+4]=y,n[u+5]=B,u+=
6,S+=6;k.addGroup(x,S,O);x+=S;w+=L}f.BufferGeometry.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};var k=this;d=Math.floor(d)||1;e=Math.floor(e)||1;g=Math.floor(g)||1;var l=function(A,y,B){return A=(A+1)*(y+1)*2+(A+1)*(B+1)*2+(B+1)*(y+1)*2}(d,e,g),m=function(A,y,B){A=A*y*2+A*B*2+B*y*2;return 6*A}(d,e,g),n=new (65535<m?Uint32Array:Uint16Array)(m),q=new Float32Array(3*l),p=new Float32Array(3*l),t=new Float32Array(2*
l),r=0,v=0,u=0,w=0,x=0;h("z","y","x",-1,-1,c,b,a,g,e,0);h("z","y","x",1,-1,c,b,-a,g,e,1);h("x","z","y",1,1,a,c,b,d,g,2);h("x","z","y",1,-1,a,c,-b,d,g,3);h("x","y","z",1,-1,a,b,c,d,e,4);h("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(new f.BufferAttribute(n,1));this.addAttribute("position",new f.BufferAttribute(q,3));this.addAttribute("normal",new f.BufferAttribute(p,3));this.addAttribute("uv",new f.BufferAttribute(t,2))};f.BoxBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);
f.BoxBufferGeometry.prototype.constructor=f.BoxBufferGeometry;f.CircleGeometry=function(a,b,c,d){f.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new f.CircleBufferGeometry(a,b,c,d))};f.CircleGeometry.prototype=Object.create(f.Geometry.prototype);f.CircleGeometry.prototype.constructor=f.CircleGeometry;
f.CircleBufferGeometry=function(a,b,c,d){f.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,g=new Float32Array(3*e),h=new Float32Array(3*e);e=new Float32Array(2*e);h[2]=1;e[0]=.5;e[1]=.5;for(var k=0,l=3,m=2;k<=b;k++,l+=3,m+=2){var n=c+k/b*d;g[l]=a*Math.cos(n);g[l+1]=a*Math.sin(n);h[l+2]=1;e[m]=(g[l]/a+1)/2;e[m+1]=(g[l+1]/a+1)/2}c=[];for(l=
1;l<=b;l++)c.push(l,l+1,0);this.setIndex(new f.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new f.BufferAttribute(g,3));this.addAttribute("normal",new f.BufferAttribute(h,3));this.addAttribute("uv",new f.BufferAttribute(e,2));this.boundingSphere=new f.Sphere(new f.Vector3,a)};f.CircleBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.CircleBufferGeometry.prototype.constructor=f.CircleBufferGeometry;
f.CylinderBufferGeometry=function(a,b,c,d,e,g,h,k){function l(F){var K,L=new f.Vector2,N=new f.Vector3,Q=0,W=!0===F?a:b,H=!0===F?1:-1;var O=w;for(K=1;K<=d;K++)r.setXYZ(w,0,y*H,0),v.setXYZ(w,0,H,0),L.x=.5,L.y=.5,u.setXY(w,L.x,L.y),w++;var P=w;for(K=0;K<=d;K++){var D=K/d*k+h,R=Math.cos(D);D=Math.sin(D);N.x=W*D;N.y=y*H;N.z=W*R;r.setXYZ(w,N.x,N.y,N.z);v.setXYZ(w,0,H,0);L.x=.5*R+.5;L.y=.5*D*H+.5;u.setXY(w,L.x,L.y);w++}for(K=0;K<d;K++)L=O+K,N=P+K,!0===F?(t.setX(x,N),x++,t.setX(x,N+1)):(t.setX(x,N+1),x++,
t.setX(x,N)),x++,t.setX(x,L),x++,Q+=3;m.addGroup(B,Q,!0===F?1:2);B+=Q}f.BufferGeometry.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};var m=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;g=void 0!==g?g:!1;h=void 0!==h?h:0;k=void 0!==k?k:2*Math.PI;var n=0;!1===g&&(0<a&&n++,0<b&&n++);var q=function(){var F=(d+1)*(e+1);!1===g&&
(F+=(d+1)*n+d*n);return F}(),p=function(){var F=d*e*6;!1===g&&(F+=d*n*3);return F}(),t=new f.BufferAttribute(new (65535<p?Uint32Array:Uint16Array)(p),1),r=new f.BufferAttribute(new Float32Array(3*q),3),v=new f.BufferAttribute(new Float32Array(3*q),3),u=new f.BufferAttribute(new Float32Array(2*q),2),w=0,x=0,A=[],y=c/2,B=0;(function(){var F,K,L=new f.Vector3,N=new f.Vector3,Q=0,W=(b-a)/c;for(K=0;K<=e;K++){var H=[],O=K/e,P=O*(b-a)+a;for(F=0;F<=d;F++){var D=F/d;N.x=P*Math.sin(D*k+h);N.y=-O*c+y;N.z=P*
Math.cos(D*k+h);r.setXYZ(w,N.x,N.y,N.z);L.copy(N);if(0===a&&0===K||0===b&&K===e)L.x=Math.sin(D*k+h),L.z=Math.cos(D*k+h);L.setY(Math.sqrt(L.x*L.x+L.z*L.z)*W).normalize();v.setXYZ(w,L.x,L.y,L.z);u.setXY(w,D,1-O);H.push(w);w++}A.push(H)}for(F=0;F<d;F++)for(K=0;K<e;K++)L=A[K+1][F],N=A[K+1][F+1],W=A[K][F+1],t.setX(x,A[K][F]),x++,t.setX(x,L),x++,t.setX(x,W),x++,t.setX(x,L),x++,t.setX(x,N),x++,t.setX(x,W),x++,Q+=6;m.addGroup(B,Q,0);B+=Q})();!1===g&&(0<a&&l(!0),0<b&&l(!1));this.setIndex(t);this.addAttribute("position",
r);this.addAttribute("normal",v);this.addAttribute("uv",u)};f.CylinderBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.CylinderBufferGeometry.prototype.constructor=f.CylinderBufferGeometry;
f.CylinderGeometry=function(a,b,c,d,e,g,h,k){f.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};this.fromBufferGeometry(new f.CylinderBufferGeometry(a,b,c,d,e,g,h,k));this.mergeVertices()};f.CylinderGeometry.prototype=Object.create(f.Geometry.prototype);f.CylinderGeometry.prototype.constructor=f.CylinderGeometry;
f.ConeBufferGeometry=function(a,b,c,d,e,g,h){f.CylinderBufferGeometry.call(this,0,a,b,c,d,e,g,h);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,thetaStart:g,thetaLength:h}};f.ConeBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.ConeBufferGeometry.prototype.constructor=f.ConeBufferGeometry;
f.ConeGeometry=function(a,b,c,d,e,g,h){f.CylinderGeometry.call(this,0,a,b,c,d,e,g,h);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:g,thetaLength:h}};f.ConeGeometry.prototype=Object.create(f.CylinderGeometry.prototype);f.ConeGeometry.prototype.constructor=f.ConeGeometry;
f.EdgesGeometry=function(a,b){function c(p,t){return p-t}f.BufferGeometry.call(this);b=Math.cos(f.Math.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},g=["a","b","c"];if(a instanceof f.BufferGeometry){var h=new f.Geometry;h.fromBufferGeometry(a)}else h=a.clone();h.mergeVertices();h.computeFaceNormals();a=h.vertices;h=h.faces;for(var k=0,l=h.length;k<l;k++)for(var m=h[k],n=0;3>n;n++){d[0]=m[g[n]];d[1]=m[g[(n+1)%3]];d.sort(c);var q=d.toString();void 0===e[q]?e[q]={vert1:d[0],vert2:d[1],face1:k,face2:void 0}:
e[q].face2=k}d=[];for(q in e)if(g=e[q],void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=b)k=a[g.vert1],d.push(k.x),d.push(k.y),d.push(k.z),k=a[g.vert2],d.push(k.x),d.push(k.y),d.push(k.z);this.addAttribute("position",new f.BufferAttribute(new Float32Array(d),3))};f.EdgesGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.EdgesGeometry.prototype.constructor=f.EdgesGeometry;
f.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(f.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};f.ExtrudeGeometry.prototype=Object.create(f.Geometry.prototype);f.ExtrudeGeometry.prototype.constructor=f.ExtrudeGeometry;f.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
f.ExtrudeGeometry.prototype.addShape=function(a,b){function c(ca,ha,ia){ha||console.error("THREE.ExtrudeGeometry: vec does not exist");return ha.clone().multiplyScalar(ia).add(ca)}function d(ca,ha,ia){var ja=ca.x-ha.x;var ka=ca.y-ha.y;var pa=ia.x-ca.x;var la=ia.y-ca.y,xa=ja*ja+ka*ka;if(Math.abs(ja*la-ka*pa)>Number.EPSILON){var sa=Math.sqrt(xa),Ja=Math.sqrt(pa*pa+la*la);xa=ha.x-ka/sa;ha=ha.y+ja/sa;la=((ia.x-la/Ja-xa)*la-(ia.y+pa/Ja-ha)*pa)/(ja*la-ka*pa);pa=xa+ja*la-ca.x;ja=ha+ka*la-ca.y;ka=pa*pa+ja*
ja;if(2>=ka)return new f.Vector2(pa,ja);ka=Math.sqrt(ka/2)}else ca=!1,ja>Number.EPSILON?pa>Number.EPSILON&&(ca=!0):ja<-Number.EPSILON?pa<-Number.EPSILON&&(ca=!0):Math.sign(ka)===Math.sign(la)&&(ca=!0),ca?(pa=-ka,ka=Math.sqrt(xa)):(pa=ja,ja=ka,ka=Math.sqrt(xa/2));return new f.Vector2(pa/ka,ja/ka)}function e(ca,ha){for(I=ca.length;0<=--I;){var ia=I;var ja=I-1;0>ja&&(ja=ca.length-1);var ka,pa=t+2*n;for(ka=0;ka<pa;ka++){var la=D*ka,xa=D*(ka+1),sa=ha+ia+la;la=ha+ja+la;var Ja=ha+ja+xa;xa=ha+ia+xa;sa+=L;
la+=L;Ja+=L;xa+=L;K.faces.push(new f.Face3(sa,la,xa,null,null,1));K.faces.push(new f.Face3(la,Ja,xa,null,null,1));sa=u.generateSideWallUV(K,sa,la,Ja,xa);K.faceVertexUvs[0].push([sa[0],sa[1],sa[3]]);K.faceVertexUvs[0].push([sa[1],sa[2],sa[3]])}}}function g(ca,ha,ia){K.vertices.push(new f.Vector3(ca,ha,ia))}function h(ca,ha,ia){ca+=L;ha+=L;ia+=L;K.faces.push(new f.Face3(ca,ha,ia,null,null,0));K.faceVertexUvs[0].push(u.generateTopUV(K,ca,ha,ia))}var k=void 0!==b.amount?b.amount:100,l=void 0!==b.bevelThickness?
b.bevelThickness:6,m=void 0!==b.bevelSize?b.bevelSize:l-2,n=void 0!==b.bevelSegments?b.bevelSegments:3,q=void 0!==b.bevelEnabled?b.bevelEnabled:!0,p=void 0!==b.curveSegments?b.curveSegments:12,t=void 0!==b.steps?b.steps:1,r=b.extrudePath,v=!1,u=void 0!==b.UVGenerator?b.UVGenerator:f.ExtrudeGeometry.WorldUVGenerator;if(r){var w=r.getSpacedPoints(t);v=!0;q=!1;var x=void 0!==b.frames?b.frames:new f.TubeGeometry.FrenetFrames(r,t,!1);var A=new f.Vector3;var y=new f.Vector3;var B=new f.Vector3}q||(m=l=
n=0);var F,K=this,L=this.vertices.length;b=a.extractPoints(p);a=b.shape;var N=b.holes;if(b=!f.ShapeUtils.isClockWise(a)){a=a.reverse();var Q=0;for(F=N.length;Q<F;Q++){var W=N[Q];f.ShapeUtils.isClockWise(W)&&(N[Q]=W.reverse())}b=!1}var H=f.ShapeUtils.triangulateShape(a,N),O=a;Q=0;for(F=N.length;Q<F;Q++)W=N[Q],a=a.concat(W);var P,D=a.length,R,U=H.length;b=[];var I=0;var J=O.length;var S=J-1;for(P=I+1;I<J;I++,S++,P++)S===J&&(S=0),P===J&&(P=0),b[I]=d(O[I],O[S],O[P]);p=[];r=b.concat();Q=0;for(F=N.length;Q<
F;Q++){W=N[Q];var X=[];I=0;J=W.length;S=J-1;for(P=I+1;I<J;I++,S++,P++)S===J&&(S=0),P===J&&(P=0),X[I]=d(W[I],W[S],W[P]);p.push(X);r=r.concat(X)}for(S=0;S<n;S++){J=S/n;var M=l*(1-J);P=m*Math.sin(J*Math.PI/2);I=0;for(J=O.length;I<J;I++){var Y=c(O[I],b[I],P);g(Y.x,Y.y,-M)}Q=0;for(F=N.length;Q<F;Q++)for(W=N[Q],X=p[Q],I=0,J=W.length;I<J;I++)Y=c(W[I],X[I],P),g(Y.x,Y.y,-M)}P=m;for(I=0;I<D;I++)Y=q?c(a[I],r[I],P):a[I],v?(y.copy(x.normals[0]).multiplyScalar(Y.x),A.copy(x.binormals[0]).multiplyScalar(Y.y),B.copy(w[0]).add(y).add(A),
g(B.x,B.y,B.z)):g(Y.x,Y.y,0);for(J=1;J<=t;J++)for(I=0;I<D;I++)Y=q?c(a[I],r[I],P):a[I],v?(y.copy(x.normals[J]).multiplyScalar(Y.x),A.copy(x.binormals[J]).multiplyScalar(Y.y),B.copy(w[J]).add(y).add(A),g(B.x,B.y,B.z)):g(Y.x,Y.y,k/t*J);for(S=n-1;0<=S;S--){J=S/n;M=l*(1-J);P=m*Math.sin(J*Math.PI/2);I=0;for(J=O.length;I<J;I++)Y=c(O[I],b[I],P),g(Y.x,Y.y,k+M);Q=0;for(F=N.length;Q<F;Q++)for(W=N[Q],X=p[Q],I=0,J=W.length;I<J;I++)Y=c(W[I],X[I],P),v?g(Y.x,Y.y+w[t-1].y,w[t-1].x+M):g(Y.x,Y.y,k+M)}(function(){if(q){var ca=
0*D;for(I=0;I<U;I++)R=H[I],h(R[2]+ca,R[1]+ca,R[0]+ca);ca=D*(t+2*n);for(I=0;I<U;I++)R=H[I],h(R[0]+ca,R[1]+ca,R[2]+ca)}else{for(I=0;I<U;I++)R=H[I],h(R[2],R[1],R[0]);for(I=0;I<U;I++)R=H[I],h(R[0]+D*t,R[1]+D*t,R[2]+D*t)}})();(function(){var ca=0;e(O,ca);ca+=O.length;Q=0;for(F=N.length;Q<F;Q++)W=N[Q],e(W,ca),ca+=W.length})()};
f.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new f.Vector2(b.x,b.y),new f.Vector2(c.x,c.y),new f.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new f.Vector2(b.x,1-b.z),new f.Vector2(c.x,1-c.z),new f.Vector2(d.x,1-d.z),new f.Vector2(e.x,1-e.z)]:[new f.Vector2(b.y,1-b.z),new f.Vector2(c.y,1-c.z),new f.Vector2(d.y,1-d.z),new f.Vector2(e.y,1-e.z)]}};
f.ShapeGeometry=function(a,b){f.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};f.ShapeGeometry.prototype=Object.create(f.Geometry.prototype);f.ShapeGeometry.prototype.constructor=f.ShapeGeometry;f.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b)};
f.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?f.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,g=this.vertices.length;a=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var h=a.shape,k=a.holes;if(!f.ShapeUtils.isClockWise(h))for(h=h.reverse(),a=0,e=k.length;a<e;a++){var l=k[a];f.ShapeUtils.isClockWise(l)&&(k[a]=l.reverse())}b=f.ShapeUtils.triangulateShape(h,k);a=0;for(e=k.length;a<e;a++)l=k[a],h=h.concat(l);k=h.length;e=
b.length;for(a=0;a<k;a++)l=h[a],this.vertices.push(new f.Vector3(l.x,l.y,0));for(a=0;a<e;a++)k=b[a],h=k[0]+g,l=k[1]+g,k=k[2]+g,this.faces.push(new f.Face3(h,l,k,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,h,l,k))};
f.LatheBufferGeometry=function(a,b,c,d){f.BufferGeometry.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=f.Math.clamp(d,0,2*Math.PI);var e=(b+1)*a.length,g=b*a.length*6,h=new f.BufferAttribute(new (65535<g?Uint32Array:Uint16Array)(g),1),k=new f.BufferAttribute(new Float32Array(3*e),3),l=new f.BufferAttribute(new Float32Array(2*e),2),m=0,n=0,q=1/b,p=new f.Vector3,t=new f.Vector2;for(e=0;e<=b;e++){g=
c+e*q*d;var r=Math.sin(g),v=Math.cos(g);for(g=0;g<=a.length-1;g++)p.x=a[g].x*r,p.y=a[g].y,p.z=a[g].x*v,k.setXYZ(m,p.x,p.y,p.z),t.x=e/b,t.y=g/(a.length-1),l.setXY(m,t.x,t.y),m++}for(e=0;e<b;e++)for(g=0;g<a.length-1;g++)c=g+e*a.length,m=c+a.length,q=c+a.length+1,p=c+1,h.setX(n,c),n++,h.setX(n,m),n++,h.setX(n,p),n++,h.setX(n,m),n++,h.setX(n,q),n++,h.setX(n,p),n++;this.setIndex(h);this.addAttribute("position",k);this.addAttribute("uv",l);this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,
h=new f.Vector3,k=new f.Vector3,l=new f.Vector3,c=b*a.length*3,g=e=0;e<a.length;e++,g+=3)h.x=d[g+0],h.y=d[g+1],h.z=d[g+2],k.x=d[c+g+0],k.y=d[c+g+1],k.z=d[c+g+2],l.addVectors(h,k).normalize(),d[g+0]=d[c+g+0]=l.x,d[g+1]=d[c+g+1]=l.y,d[g+2]=d[c+g+2]=l.z};f.LatheBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.LatheBufferGeometry.prototype.constructor=f.LatheBufferGeometry;
f.LatheGeometry=function(a,b,c,d){f.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new f.LatheBufferGeometry(a,b,c,d));this.mergeVertices()};f.LatheGeometry.prototype=Object.create(f.Geometry.prototype);f.LatheGeometry.prototype.constructor=f.LatheGeometry;
f.PlaneGeometry=function(a,b,c,d){f.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new f.PlaneBufferGeometry(a,b,c,d))};f.PlaneGeometry.prototype=Object.create(f.Geometry.prototype);f.PlaneGeometry.prototype.constructor=f.PlaneGeometry;
f.PlaneBufferGeometry=function(a,b,c,d){f.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,g=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var h=c+1,k=d+1,l=a/c,m=b/d;b=new Float32Array(h*k*3);a=new Float32Array(h*k*3);for(var n=new Float32Array(h*k*2),q=0,p=0,t=0;t<k;t++)for(var r=t*m-g,v=0;v<h;v++)b[q]=v*l-e,b[q+1]=-r,a[q+2]=1,n[p]=v/c,n[p+1]=1-t/d,q+=3,p+=2;q=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(t=0;t<d;t++)for(v=0;v<c;v++)g=v+h*(t+1),k=v+1+h*(t+1),l=v+1+h*t,e[q]=v+h*t,e[q+1]=g,e[q+2]=l,e[q+3]=g,e[q+4]=k,e[q+5]=l,q+=6;this.setIndex(new f.BufferAttribute(e,1));this.addAttribute("position",new f.BufferAttribute(b,3));this.addAttribute("normal",new f.BufferAttribute(a,3));this.addAttribute("uv",new f.BufferAttribute(n,2))};f.PlaneBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.PlaneBufferGeometry.prototype.constructor=f.PlaneBufferGeometry;
f.RingBufferGeometry=function(a,b,c,d,e,g){f.BufferGeometry.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||20;b=b||50;e=void 0!==e?e:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var h=(c+1)*(d+1),k=c*d*6;k=new f.BufferAttribute(new (65535<k?Uint32Array:Uint16Array)(k),1);var l=new f.BufferAttribute(new Float32Array(3*h),3),m=new f.BufferAttribute(new Float32Array(3*
h),3);h=new f.BufferAttribute(new Float32Array(2*h),2);var n=0,q=0,p=a,t=(b-a)/d,r=new f.Vector3,v=new f.Vector2,u;for(a=0;a<=d;a++){for(u=0;u<=c;u++){var w=e+u/c*g;r.x=p*Math.cos(w);r.y=p*Math.sin(w);l.setXYZ(n,r.x,r.y,r.z);m.setXYZ(n,0,0,1);v.x=(r.x/b+1)/2;v.y=(r.y/b+1)/2;h.setXY(n,v.x,v.y);n++}p+=t}for(a=0;a<d;a++)for(b=a*(c+1),u=0;u<c;u++)e=w=u+b,g=w+c+1,n=w+c+2,w+=1,k.setX(q,e),q++,k.setX(q,g),q++,k.setX(q,n),q++,k.setX(q,e),q++,k.setX(q,n),q++,k.setX(q,w),q++;this.setIndex(k);this.addAttribute("position",
l);this.addAttribute("normal",m);this.addAttribute("uv",h)};f.RingBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.RingBufferGeometry.prototype.constructor=f.RingBufferGeometry;f.RingGeometry=function(a,b,c,d,e,g){f.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};this.fromBufferGeometry(new f.RingBufferGeometry(a,b,c,d,e,g))};f.RingGeometry.prototype=Object.create(f.Geometry.prototype);
f.RingGeometry.prototype.constructor=f.RingGeometry;f.SphereGeometry=function(a,b,c,d,e,g,h){f.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new f.SphereBufferGeometry(a,b,c,d,e,g,h))};f.SphereGeometry.prototype=Object.create(f.Geometry.prototype);f.SphereGeometry.prototype.constructor=f.SphereGeometry;
f.SphereBufferGeometry=function(a,b,c,d,e,g,h){f.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;var k=g+h,l=(b+1)*(c+1),m=new f.BufferAttribute(new Float32Array(3*l),3),n=new f.BufferAttribute(new Float32Array(3*l),3);l=new f.BufferAttribute(new Float32Array(2*
l),2);for(var q=0,p=[],t=new f.Vector3,r=0;r<=c;r++){for(var v=[],u=r/c,w=0;w<=b;w++){var x=w/b,A=-a*Math.cos(d+x*e)*Math.sin(g+u*h),y=a*Math.cos(g+u*h),B=a*Math.sin(d+x*e)*Math.sin(g+u*h);t.set(A,y,B).normalize();m.setXYZ(q,A,y,B);n.setXYZ(q,t.x,t.y,t.z);l.setXY(q,x,1-u);v.push(q);q++}p.push(v)}d=[];for(r=0;r<c;r++)for(w=0;w<b;w++)e=p[r][w+1],h=p[r][w],q=p[r+1][w],t=p[r+1][w+1],(0!==r||0<g)&&d.push(e,h,t),(r!==c-1||k<Math.PI)&&d.push(h,q,t);this.setIndex(new (65535<m.count?f.Uint32Attribute:f.Uint16Attribute)(d,
1));this.addAttribute("position",m);this.addAttribute("normal",n);this.addAttribute("uv",l);this.boundingSphere=new f.Sphere(new f.Vector3,a)};f.SphereBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.SphereBufferGeometry.prototype.constructor=f.SphereBufferGeometry;
f.TextGeometry=function(a,b){b=b||{};var c=b.font;if(!1===c instanceof f.Font)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new f.Geometry;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);f.ExtrudeGeometry.call(this,a,b);this.type="TextGeometry"};f.TextGeometry.prototype=Object.create(f.ExtrudeGeometry.prototype);
f.TextGeometry.prototype.constructor=f.TextGeometry;
f.TorusBufferGeometry=function(a,b,c,d,e){f.BufferGeometry.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var g=(c+1)*(d+1),h=c*d*6;h=new (65535<h?Uint32Array:Uint16Array)(h);var k=new Float32Array(3*g),l=new Float32Array(3*g);g=new Float32Array(2*g);var m=0,n=0,q=0,p=new f.Vector3,t=new f.Vector3,r=new f.Vector3,v,u;for(v=0;v<=c;v++)for(u=0;u<=d;u++){var w=
u/d*e,x=v/c*Math.PI*2;t.x=(a+b*Math.cos(x))*Math.cos(w);t.y=(a+b*Math.cos(x))*Math.sin(w);t.z=b*Math.sin(x);k[m]=t.x;k[m+1]=t.y;k[m+2]=t.z;p.x=a*Math.cos(w);p.y=a*Math.sin(w);r.subVectors(t,p).normalize();l[m]=r.x;l[m+1]=r.y;l[m+2]=r.z;g[n]=u/d;g[n+1]=v/c;m+=3;n+=2}for(v=1;v<=c;v++)for(u=1;u<=d;u++)a=(d+1)*(v-1)+u-1,b=(d+1)*(v-1)+u,e=(d+1)*v+u,h[q]=(d+1)*v+u-1,h[q+1]=a,h[q+2]=e,h[q+3]=a,h[q+4]=b,h[q+5]=e,q+=6;this.setIndex(new f.BufferAttribute(h,1));this.addAttribute("position",new f.BufferAttribute(k,
3));this.addAttribute("normal",new f.BufferAttribute(l,3));this.addAttribute("uv",new f.BufferAttribute(g,2))};f.TorusBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.TorusBufferGeometry.prototype.constructor=f.TorusBufferGeometry;f.TorusGeometry=function(a,b,c,d,e){f.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new f.TorusBufferGeometry(a,b,c,d,e))};f.TorusGeometry.prototype=Object.create(f.Geometry.prototype);
f.TorusGeometry.prototype.constructor=f.TorusGeometry;
f.TorusKnotBufferGeometry=function(a,b,c,d,e,g){function h(N,Q,W,H,O){var P=Math.sin(N);Q=W/Q*N;W=Math.cos(Q);O.x=H*(2+W)*.5*Math.cos(N);O.y=H*(2+W)*P*.5;O.z=H*Math.sin(Q)*.5}f.BufferGeometry.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;g=g||3;var k=(d+1)*(c+1),l=d*c*6;l=new f.BufferAttribute(new (65535<l?Uint32Array:Uint16Array)(l),1);var m=new f.BufferAttribute(new Float32Array(3*
k),3),n=new f.BufferAttribute(new Float32Array(3*k),3);k=new f.BufferAttribute(new Float32Array(2*k),2);var q,p=0,t=0,r=new f.Vector3,v=new f.Vector3,u=new f.Vector2,w=new f.Vector3,x=new f.Vector3,A=new f.Vector3,y=new f.Vector3,B=new f.Vector3;for(q=0;q<=c;++q){var F=q/c*e*Math.PI*2;h(F,e,g,a,w);h(F+.01,e,g,a,x);y.subVectors(x,w);B.addVectors(x,w);lb(A,y,B);lb(B,A,y);A.normalize();B.normalize();for(F=0;F<=d;++F){var K=F/d*Math.PI*2,L=-b*Math.cos(K);K=b*Math.sin(K);r.x=w.x+(L*B.x+K*A.x);r.y=w.y+
(L*B.y+K*A.y);r.z=w.z+(L*B.z+K*A.z);m.setXYZ(p,r.x,r.y,r.z);v.subVectors(r,w).normalize();n.setXYZ(p,v.x,v.y,v.z);u.x=q/c;u.y=F/d;k.setXY(p,u.x,u.y);p++}}for(F=1;F<=c;F++)for(q=1;q<=d;q++)a=(d+1)*F+(q-1),b=(d+1)*F+q,e=(d+1)*(F-1)+q,l.setX(t,(d+1)*(F-1)+(q-1)),t++,l.setX(t,a),t++,l.setX(t,e),t++,l.setX(t,a),t++,l.setX(t,b),t++,l.setX(t,e),t++;this.setIndex(l);this.addAttribute("position",m);this.addAttribute("normal",n);this.addAttribute("uv",k)};f.TorusKnotBufferGeometry.prototype=Object.create(f.BufferGeometry.prototype);
f.TorusKnotBufferGeometry.prototype.constructor=f.TorusKnotBufferGeometry;f.TorusKnotGeometry=function(a,b,c,d,e,g,h){f.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g};void 0!==h&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new f.TorusKnotBufferGeometry(a,b,c,d,e,g));this.mergeVertices()};f.TorusKnotGeometry.prototype=Object.create(f.Geometry.prototype);
f.TorusKnotGeometry.prototype.constructor=f.TorusKnotGeometry;
f.TubeGeometry=function(a,b,c,d,e,g){f.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:g};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||f.TubeGeometry.NoTaper;var h=[],k=b+1,l=new f.Vector3;var m=new f.TubeGeometry.FrenetFrames(a,b,e);var n=m.normals;var q=m.binormals;this.tangents=m.tangents;this.normals=n;this.binormals=q;for(m=0;m<k;m++){h[m]=[];var p=m/(k-1);var t=a.getPointAt(p);var r=n[m];var v=q[m];var u=c*g(p);for(p=0;p<d;p++){var w=
p/d*2*Math.PI;var x=-u*Math.cos(w);w=u*Math.sin(w);l.copy(t);l.x+=x*r.x+w*v.x;l.y+=x*r.y+w*v.y;l.z+=x*r.z+w*v.z;h[m][p]=this.vertices.push(new f.Vector3(l.x,l.y,l.z))-1}}for(m=0;m<b;m++)for(p=0;p<d;p++)g=e?(m+1)%b:m+1,k=(p+1)%d,a=h[m][p],c=h[g][p],g=h[g][k],k=h[m][k],l=new f.Vector2(m/b,p/d),n=new f.Vector2((m+1)/b,p/d),q=new f.Vector2((m+1)/b,(p+1)/d),r=new f.Vector2(m/b,(p+1)/d),this.faces.push(new f.Face3(a,c,k)),this.faceVertexUvs[0].push([l,n,r]),this.faces.push(new f.Face3(c,g,k)),this.faceVertexUvs[0].push([n.clone(),
q,r.clone()]);this.computeFaceNormals();this.computeVertexNormals()};f.TubeGeometry.prototype=Object.create(f.Geometry.prototype);f.TubeGeometry.prototype.constructor=f.TubeGeometry;f.TubeGeometry.NoTaper=function(){return 1};f.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
f.TubeGeometry.FrenetFrames=function(a,b,c){var d=new f.Vector3,e=[],g=[],h=[],k=new f.Vector3,l=new f.Matrix4;b+=1;var m;this.tangents=e;this.normals=g;this.binormals=h;for(m=0;m<b;m++){var n=m/(b-1);var q=m;var p=a;n=sc(p,n);p=p.getTangent(n);e[q]=p;e[m].normalize()}g[0]=new f.Vector3;h[0]=new f.Vector3;a=Number.MAX_VALUE;m=Math.abs(e[0].x);q=Math.abs(e[0].y);p=Math.abs(e[0].z);m<=a&&(a=m,d.set(1,0,0));q<=a&&(a=q,d.set(0,1,0));p<=a&&d.set(0,0,1);lb(k,e[0],d).normalize();lb(g[0],e[0],k);lb(h[0],
e[0],g[0]);for(m=1;m<b;m++)g[m]=g[m-1].clone(),h[m]=h[m-1].clone(),lb(k,e[m-1],e[m]),k.length()>Number.EPSILON&&(k.normalize(),d=Math.acos(f.Math.clamp(e[m-1].dot(e[m]),-1,1)),g[m].applyMatrix4(Kb(l,k,d))),lb(h[m],e[m],g[m]);if(c)for(d=Math.acos(f.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(lb(k,g[0],g[b-1]))&&(d=-d),m=1;m<b;m++)g[m].applyMatrix4(Kb(l,e[m],d*m)),lb(h[m],e[m],g[m])};
f.PolyhedronGeometry=function(a,b,c,d){function e(w){var x=w.normalize().clone();x.index=l.vertices.push(x)-1;x.uv=new f.Vector2(Math.atan2(w.z,-w.x)/2/Math.PI+.5,1-(Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))/Math.PI+.5));return x}function g(w,x,A,y){y=new f.Face3(w.index,x.index,A.index,[w.clone(),x.clone(),A.clone()],void 0,y);l.faces.push(y);u.copy(w).add(x).add(A).divideScalar(3);y=Math.atan2(u.z,-u.x);l.faceVertexUvs[0].push([k(w.uv,w,y),k(x.uv,x,y),k(A.uv,A,y)])}function h(w,x){x=Math.pow(2,
x);var A=e(l.vertices[w.a]),y=e(l.vertices[w.b]),B=e(l.vertices[w.c]),F=[];w=w.materialIndex;for(var K=0;K<=x;K++){F[K]=[];for(var L=e(A.clone().lerp(B,K/x)),N=e(y.clone().lerp(B,K/x)),Q=x-K,W=0;W<=Q;W++)F[K][W]=0===W&&K===x?L:e(L.clone().lerp(N,W/Q))}for(K=0;K<x;K++)for(W=0;W<2*(x-K)-1;W++)A=Math.floor(W/2),0===W%2?g(F[K][A+1],F[K+1][A],F[K][A],w):g(F[K][A+1],F[K+1][A+1],F[K+1][A],w)}function k(w,x,A){0>A&&1===w.x&&(w=new f.Vector2(w.x-1,w.y));0===x.x&&0===x.z&&(w=new f.Vector2(A/2/Math.PI+.5,w.y));
return w.clone()}f.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var l=this,m=0,n=a.length;m<n;m+=3)e(new f.Vector3(a[m],a[m+1],a[m+2]));a=this.vertices;var q=[],p=m=0;for(n=b.length;m<n;m+=3,p++){var t=a[b[m]],r=a[b[m+1]],v=a[b[m+2]];q[p]=new f.Face3(t.index,r.index,v.index,[t.clone(),r.clone(),v.clone()],void 0,p)}var u=new f.Vector3;m=0;for(n=q.length;m<n;m++)h(q[m],d);m=0;for(n=this.faceVertexUvs[0].length;m<n;m++)b=
this.faceVertexUvs[0][m],d=b[0].x,a=b[1].x,q=b[2].x,p=Math.min(d,a,q),.9<Math.max(d,a,q)&&.1>p&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>q&&(b[2].x+=1));m=0;for(n=this.vertices.length;m<n;m++)this.vertices[m].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new f.Sphere(new f.Vector3,c)};f.PolyhedronGeometry.prototype=Object.create(f.Geometry.prototype);f.PolyhedronGeometry.prototype.constructor=f.PolyhedronGeometry;
f.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;f.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,
14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};f.DodecahedronGeometry.prototype=Object.create(f.PolyhedronGeometry.prototype);f.DodecahedronGeometry.prototype.constructor=f.DodecahedronGeometry;
f.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;f.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};f.IcosahedronGeometry.prototype=Object.create(f.PolyhedronGeometry.prototype);
f.IcosahedronGeometry.prototype.constructor=f.IcosahedronGeometry;f.OctahedronGeometry=function(a,b){f.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};f.OctahedronGeometry.prototype=Object.create(f.PolyhedronGeometry.prototype);f.OctahedronGeometry.prototype.constructor=f.OctahedronGeometry;
f.TetrahedronGeometry=function(a,b){f.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};f.TetrahedronGeometry.prototype=Object.create(f.PolyhedronGeometry.prototype);f.TetrahedronGeometry.prototype.constructor=f.TetrahedronGeometry;
f.ParametricGeometry=function(a,b,c){f.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,g=this.faceVertexUvs[0],h,k,l=b+1;for(h=0;h<=c;h++){var m=h/c;for(k=0;k<=b;k++){var n=k/b;n=a(n,m);d.push(n)}}for(h=0;h<c;h++)for(k=0;k<b;k++){a=h*l+k;d=h*l+k+1;m=(h+1)*l+k+1;n=(h+1)*l+k;var q=new f.Vector2(k/b,h/c);var p=new f.Vector2((k+1)/b,h/c);var t=new f.Vector2((k+1)/b,(h+1)/c);var r=new f.Vector2(k/b,(h+1)/c);e.push(new f.Face3(a,
d,n));g.push([q,p,r]);e.push(new f.Face3(d,m,n));g.push([p.clone(),t,r.clone()])}this.computeFaceNormals();this.computeVertexNormals()};f.ParametricGeometry.prototype=Object.create(f.Geometry.prototype);f.ParametricGeometry.prototype.constructor=f.ParametricGeometry;
f.WireframeGeometry=function(a){function b(r,v){return r-v}f.BufferGeometry.call(this);var c=[0,0],d={},e=["a","b","c"];if(a instanceof f.Geometry){var g=a.vertices,h=a.faces,k=0;a=new Uint32Array(6*h.length);for(var l=0,m=h.length;l<m;l++)for(var n=h[l],q=0;3>q;q++){c[0]=n[e[q]];c[1]=n[e[(q+1)%3]];c.sort(b);var p=c.toString();void 0===d[p]&&(a[2*k]=c[0],a[2*k+1]=c[1],d[p]=!0,k++)}c=new Float32Array(6*k);l=0;for(m=k;l<m;l++)for(q=0;2>q;q++)d=g[a[2*l+q]],k=6*l+3*q,c[k+0]=d.x,c[k+1]=d.y,c[k+2]=d.z;
this.addAttribute("position",new f.BufferAttribute(c,3))}else if(a instanceof f.BufferGeometry){if(null!==a.index){m=a.index.array;g=a.attributes.position;e=a.groups;k=0;0===e.length&&a.addGroup(0,m.length);a=new Uint32Array(2*m.length);h=0;for(n=e.length;h<n;++h){l=e[h];q=l.start;p=l.count;l=q;for(var t=q+p;l<t;l+=3)for(q=0;3>q;q++)c[0]=m[l+q],c[1]=m[l+(q+1)%3],c.sort(b),p=c.toString(),void 0===d[p]&&(a[2*k]=c[0],a[2*k+1]=c[1],d[p]=!0,k++)}c=new Float32Array(6*k);l=0;for(m=k;l<m;l++)for(q=0;2>q;q++)k=
6*l+3*q,d=a[2*l+q],c[k+0]=g.getX(d),c[k+1]=g.getY(d),c[k+2]=g.getZ(d)}else for(g=a.attributes.position.array,k=g.length/3,c=new Float32Array(6*k),l=0,m=k/3;l<m;l++)for(q=0;3>q;q++)k=18*l+6*q,a=9*l+3*q,c[k+0]=g[a],c[k+1]=g[a+1],c[k+2]=g[a+2],d=9*l+(q+1)%3*3,c[k+3]=g[d],c[k+4]=g[d+1],c[k+5]=g[d+2];this.addAttribute("position",new f.BufferAttribute(c,3))}};f.WireframeGeometry.prototype=Object.create(f.BufferGeometry.prototype);f.WireframeGeometry.prototype.constructor=f.WireframeGeometry;
f.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new f.BufferGeometry;a.addAttribute("position",new f.BufferAttribute(b,3));a.addAttribute("color",new f.BufferAttribute(c,3));b=new f.LineBasicMaterial({vertexColors:f.VertexColors});f.LineSegments.call(this,a,b)};f.AxisHelper.prototype=Object.create(f.LineSegments.prototype);f.AxisHelper.prototype.constructor=f.AxisHelper;
f.ArrowHelper=function(){var a=new f.BufferGeometry;a.addAttribute("position",new f.Float32Attribute([0,0,0,0,1,0],3));var b=new f.CylinderBufferGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,g,h,k){f.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===h&&(h=.2*e);void 0===k&&(k=.2*h);this.position.copy(d);this.line=new f.Line(a,new f.LineBasicMaterial({color:g}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new f.Mesh(b,new f.MeshBasicMaterial({color:g}));
this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,h,k)}}();f.ArrowHelper.prototype=Object.create(f.Object3D.prototype);f.ArrowHelper.prototype.constructor=f.ArrowHelper;f.ArrowHelper.prototype.setDirection=function(){var a=new f.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),jb(this.quaternion,a,b))}}();
f.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};f.ArrowHelper.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};
f.BoxHelper=function(a){var b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),d=new f.BufferGeometry;d.setIndex(new f.BufferAttribute(b,1));d.addAttribute("position",new f.BufferAttribute(c,3));f.LineSegments.call(this,d,new f.LineBasicMaterial({color:16776960}));void 0!==a&&this.update(a)};f.BoxHelper.prototype=Object.create(f.LineSegments.prototype);f.BoxHelper.prototype.constructor=f.BoxHelper;
f.BoxHelper.prototype.update=function(){var a=new f.Box3;return function(b){b instanceof f.Box3?a.copy(b):a.setFromObject(b);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
f.BoundingBoxHelper=function(a,b){b=void 0!==b?b:8947848;this.object=a;this.box=new f.Box3;f.Mesh.call(this,new f.BoxGeometry(1,1,1),new f.MeshBasicMaterial({color:b,wireframe:!0}))};f.BoundingBoxHelper.prototype=Object.create(f.Mesh.prototype);f.BoundingBoxHelper.prototype.constructor=f.BoundingBoxHelper;f.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
f.CameraHelper=function(a){function b(h,k,l){c(h,l);c(k,l)}function c(h,k){d.vertices.push(new f.Vector3);d.colors.push(new f.Color(k));void 0===g[h]&&(g[h]=[]);g[h].push(d.vertices.length-1)}var d=new f.Geometry,e=new f.LineBasicMaterial({color:16777215,vertexColors:f.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);b("n2","f2",16755200);
b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);f.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};
f.CameraHelper.prototype=Object.create(f.LineSegments.prototype);f.CameraHelper.prototype.constructor=f.CameraHelper;
f.CameraHelper.prototype.update=function(){function a(g,h,k,l){d.set(h,k,l).unproject(e);g=c[g];if(void 0!==g)for(h=0,k=g.length;h<k;h++)b.vertices[g[h]].copy(d)}var b,c,d=new f.Vector3,e=new f.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,
2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
f.DirectionalLightHelper=function(a,b){f.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void 0===b&&(b=1);a=new f.BufferGeometry;a.addAttribute("position",new f.Float32Attribute([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new f.LineBasicMaterial({fog:!1});this.add(new f.Line(a,b));a=new f.BufferGeometry;a.addAttribute("position",new f.Float32Attribute([0,0,0,0,0,1],3));this.add(new f.Line(a,b));this.update()};
f.DirectionalLightHelper.prototype=Object.create(f.Object3D.prototype);f.DirectionalLightHelper.prototype.constructor=f.DirectionalLightHelper;f.DirectionalLightHelper.prototype.dispose=function(){var a=this.children[0],b=this.children[1];a.geometry.dispose();a.material.dispose();b.geometry.dispose();b.material.dispose()};
f.DirectionalLightHelper.prototype.update=function(){var a=new f.Vector3,b=new f.Vector3,c=new f.Vector3;return function(){Bb(a,this.light.matrixWorld);Bb(b,this.light.target.matrixWorld);c.subVectors(b,a);var d=this.children[0],e=this.children[1];d.lookAt(c);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);e.lookAt(c);e.scale.z=c.length()}}();
f.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;f.LineSegments.call(this,new f.EdgesGeometry(a.geometry,c),new f.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};f.EdgesHelper.prototype=Object.create(f.LineSegments.prototype);f.EdgesHelper.prototype.constructor=f.EdgesHelper;
f.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof f.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new f.BufferGeometry;b=new f.Float32Attribute(6*b,3);c.addAttribute("position",b);f.LineSegments.call(this,c,new f.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
f.FaceNormalsHelper.prototype=Object.create(f.LineSegments.prototype);f.FaceNormalsHelper.prototype.constructor=f.FaceNormalsHelper;
f.FaceNormalsHelper.prototype.update=function(){var a=new f.Vector3,b=new f.Vector3,c=new f.Matrix3;return function(){this.object.updateMatrixWorld(!0);Gb(c,this.object.matrixWorld);var d=this.object.matrixWorld,e=this.geometry.attributes.position,g=this.object.geometry,h=g.vertices;g=g.faces;for(var k=0,l=0,m=g.length;l<m;l++){var n=g[l],q=n.normal;a.copy(h[n.a]).add(h[n.b]).add(h[n.c]).divideScalar(3).applyMatrix4(d);rb(b.copy(q),c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(k,a.x,a.y,
a.z);k+=1;e.setXYZ(k,b.x,b.y,b.z);k+=1}e.needsUpdate=!0;return this}}();
f.GridHelper=function(a,b,c,d){c=new f.Color(void 0!==c?c:4473924);d=new f.Color(void 0!==d?d:8947848);for(var e=[],g=[],h=-a,k=0;h<=a;h+=b){e.push(-a,0,h,a,0,h);e.push(h,0,-a,h,0,a);var l=0===h?c:d;l.toArray(g,k);k+=3;l.toArray(g,k);k+=3;l.toArray(g,k);k+=3;l.toArray(g,k);k+=3}a=new f.BufferGeometry;a.addAttribute("position",new f.Float32Attribute(e,3));a.addAttribute("color",new f.Float32Attribute(g,3));e=new f.LineBasicMaterial({vertexColors:f.VertexColors});f.LineSegments.call(this,a,e)};
f.GridHelper.prototype=Object.create(f.LineSegments.prototype);f.GridHelper.prototype.constructor=f.GridHelper;f.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
f.HemisphereLightHelper=function(a,b){f.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new f.Color,new f.Color];a=new f.SphereGeometry(b,4,2);a.rotateX(-Math.PI/2);for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new f.MeshBasicMaterial({vertexColors:f.FaceColors,wireframe:!0});this.lightSphere=new f.Mesh(a,b);this.add(this.lightSphere);this.update()};f.HemisphereLightHelper.prototype=Object.create(f.Object3D.prototype);
f.HemisphereLightHelper.prototype.constructor=f.HemisphereLightHelper;f.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
f.HemisphereLightHelper.prototype.update=function(){var a=new f.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(Bb(a,this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
f.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();a=new f.SphereBufferGeometry(b,4,2);b=new f.MeshBasicMaterial({wireframe:!0,fog:!1});b.color.copy(this.light.color).multiplyScalar(this.light.intensity);f.Mesh.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};f.PointLightHelper.prototype=Object.create(f.Mesh.prototype);f.PointLightHelper.prototype.constructor=f.PointLightHelper;
f.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};f.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
f.SkeletonHelper=function(a){this.bones=uc(this,a);for(var b=new f.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof f.Bone&&(b.vertices.push(new f.Vector3),b.vertices.push(new f.Vector3),b.colors.push(new f.Color(0,0,1)),b.colors.push(new f.Color(0,1,0)));b.dynamic=!0;c=new f.LineBasicMaterial({vertexColors:f.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});f.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.update()};
f.SkeletonHelper.prototype=Object.create(f.LineSegments.prototype);f.SkeletonHelper.prototype.constructor=f.SkeletonHelper;function uc(a,b){var c=[];b instanceof f.Bone&&c.push(b);for(var d=0;d<b.children.length;d++)c.push.apply(c,uc(a,b.children[d]));return c}
f.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new f.Matrix4).getInverse(this.root.matrixWorld),c=new f.Matrix4,d=0,e=0;e<this.bones.length;e++){var g=this.bones[e];g.parent instanceof f.Bone&&(Cb(c,b,g.matrixWorld),Bb(a.vertices[d],c),Cb(c,b,g.parent.matrixWorld),Bb(a.vertices[d+1],c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
f.SpotLightHelper=function(a){f.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new f.BufferGeometry;for(var b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,g=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(g),Math.sin(g),1)}a.addAttribute("position",new f.Float32Attribute(b,3));b=new f.LineBasicMaterial({fog:!1});this.cone=new f.LineSegments(a,b);this.add(this.cone);
this.update()};f.SpotLightHelper.prototype=Object.create(f.Object3D.prototype);f.SpotLightHelper.prototype.constructor=f.SpotLightHelper;f.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
f.SpotLightHelper.prototype.update=function(){var a=new f.Vector3,b=new f.Vector3;return function(){var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);Bb(a,this.light.matrixWorld);Bb(b,this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
f.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof f.Geometry?b=3*c.faces.length:c instanceof f.BufferGeometry&&(b=c.attributes.normal.count);c=new f.BufferGeometry;b=new f.Float32Attribute(6*b,3);c.addAttribute("position",b);f.LineSegments.call(this,c,new f.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};f.VertexNormalsHelper.prototype=Object.create(f.LineSegments.prototype);
f.VertexNormalsHelper.prototype.constructor=f.VertexNormalsHelper;
f.VertexNormalsHelper.prototype.update=function(){var a=new f.Vector3,b=new f.Vector3,c=new f.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);Gb(c,this.object.matrixWorld);var e=this.object.matrixWorld,g=this.geometry.attributes.position,h=this.object.geometry;if(h instanceof f.Geometry)for(var k=h.vertices,l=h.faces,m=h=0,n=l.length;m<n;m++)for(var q=l[m],p=0,t=q.vertexNormals.length;p<t;p++){var r=q.vertexNormals[p];a.copy(k[q[d[p]]]).applyMatrix4(e);rb(b.copy(r),
c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(h,a.x,a.y,a.z);h+=1;g.setXYZ(h,b.x,b.y,b.z);h+=1}else if(h instanceof f.BufferGeometry)for(d=h.attributes.position,k=h.attributes.normal,p=h=0,t=d.count;p<t;p++)a.set(d.getX(p),d.getY(p),d.getZ(p)).applyMatrix4(e),b.set(k.getX(p),k.getY(p),k.getZ(p)),rb(b,c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(h,a.x,a.y,a.z),h+=1,g.setXYZ(h,b.x,b.y,b.z),h+=1;g.needsUpdate=!0;return this}}();
f.WireframeHelper=function(a,b){b=void 0!==b?b:16777215;f.LineSegments.call(this,new f.WireframeGeometry(a.geometry),new f.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};f.WireframeHelper.prototype=Object.create(f.LineSegments.prototype);f.WireframeHelper.prototype.constructor=f.WireframeHelper;f.ImmediateRenderObject=function(a){f.Object3D.call(this);this.material=a;this.render=function(){}};f.ImmediateRenderObject.prototype=Object.create(f.Object3D.prototype);
f.ImmediateRenderObject.prototype.constructor=f.ImmediateRenderObject;f.MorphBlendMesh=function(a,b){f.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];a=this.geometry.morphTargets.length;vc(this,"__default",0,a-1,a/1);if(a=this.animationsMap.__default)a.weight=1};f.MorphBlendMesh.prototype=Object.create(f.Mesh.prototype);fa=f.MorphBlendMesh.prototype;fa.constructor=f.MorphBlendMesh;
function vc(a,b,c,d,e){c={start:c,end:d,length:d-c+1,fps:e,duration:(d-c)/e,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};a.animationsMap[b]=c;a.animationsList.push(c)}
fa.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/i,c,d={},e=this.geometry,g=0,h=e.morphTargets.length;g<h;g++){var k=e.morphTargets[g].name.match(b);if(k&&1<k.length){var l=k[1];d[l]||(d[l]={start:Infinity,end:-Infinity});k=d[l];g<k.start&&(k.start=g);g>k.end&&(k.end=g);c||(c=l)}}for(l in d)k=d[l],vc(this,l,k.start,k.end,a);this.firstAnimation=c};fa.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};
fa.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};fa.setAnimationFPS=function(a,b){if(a=this.animationsMap[a])a.fps=b,a.duration=(a.end-a.start)/a.fps};fa.setAnimationDuration=function(a,b){if(a=this.animationsMap[a])a.duration=b,a.fps=(a.end-a.start)/a.duration};fa.setAnimationTime=function(a,b){if(a=this.animationsMap[a])a.time=b};fa.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
fa.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};fa.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};fa.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
fa.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var g=d.start+f.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;g!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=
0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*h,this.morphTargetInfluences[d.lastFrame]=(1-e)*h):this.morphTargetInfluences[d.currentFrame]=h}}};
</script>
<script>//~~WEBPATH~~/tf-imports/OrbitControls.js
f.OrbitControls=function(a,b){function c(){return Math.pow(.95,r.zoomSpeed)}function d(M){r.object instanceof f.PerspectiveCamera?K/=M:r.object instanceof f.OrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*M)),r.object.updateProjectionMatrix(),N=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function e(M){r.object instanceof f.PerspectiveCamera?K*=M:r.object instanceof f.OrthographicCamera?
(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/M)),r.object.updateProjectionMatrix(),N=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function g(M){if(!1!==r.enabled){M.preventDefault();if(M.button===r.mouseButtons.ORBIT){if(!1===r.enableRotate)return;Q.set(M.clientX,M.clientY);A=x.ROTATE}else if(M.button===r.mouseButtons.ZOOM){if(!1===r.enableZoom)return;R.set(M.clientX,M.clientY);A=x.DOLLY}else if(M.button===
r.mouseButtons.PAN){if(!1===r.enablePan)return;O.set(M.clientX,M.clientY);A=x.PAN}A!==x.NONE&&(document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",k,!1),document.addEventListener("mouseout",k,!1),r.dispatchEvent(u))}}function h(M){!1!==r.enabled&&(M.preventDefault(),A===x.ROTATE?!1!==r.enableRotate&&(W.set(M.clientX,M.clientY),H.subVectors(W,Q),M=r.domElement===document?r.domElement.body:r.domElement,F.theta-=2*Math.PI*H.x/M.clientWidth*r.rotateSpeed,F.phi-=2*Math.PI*H.y/
M.clientHeight*r.rotateSpeed,Q.copy(W),r.update()):A===x.DOLLY?!1!==r.enableZoom&&(U.set(M.clientX,M.clientY),I.subVectors(U,R),0<I.y?d(c()):0>I.y&&e(c()),R.copy(U),r.update()):A===x.PAN&&!1!==r.enablePan&&(P.set(M.clientX,M.clientY),D.subVectors(P,O),X(D.x,D.y),O.copy(P),r.update()))}function k(){!1!==r.enabled&&(document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",k,!1),document.removeEventListener("mouseout",k,!1),r.dispatchEvent(w),A=x.NONE)}function l(M){if(!1!==
r.enabled&&!1!==r.enableZoom&&(A===x.NONE||A===x.ROTATE)){M.preventDefault();M.stopPropagation();var Y=0;void 0!==M.wheelDelta?Y=M.wheelDelta:void 0!==M.detail&&(Y=-M.detail);0<Y?e(c()):0>Y&&d(c());r.update();r.dispatchEvent(u);r.dispatchEvent(w)}}function m(M){if(!1!==r.enabled&&!1!==r.enableKeys&&!1!==r.enablePan)switch(M.keyCode){case r.keys.UP:X(0,r.keyPanSpeed);r.update();break;case r.keys.BOTTOM:X(0,-r.keyPanSpeed);r.update();break;case r.keys.LEFT:X(r.keyPanSpeed,0);r.update();break;case r.keys.RIGHT:X(-r.keyPanSpeed,
0),r.update()}}function n(M){if(!1!==r.enabled){switch(M.touches.length){case 1:if(!1===r.enableRotate)return;Q.set(M.touches[0].pageX,M.touches[0].pageY);A=x.TOUCH_ROTATE;break;case 2:if(!1===r.enableZoom)return;var Y=M.touches[0].pageX-M.touches[1].pageX;M=M.touches[0].pageY-M.touches[1].pageY;R.set(0,Math.sqrt(Y*Y+M*M));A=x.TOUCH_DOLLY;break;case 3:if(!1===r.enablePan)return;O.set(M.touches[0].pageX,M.touches[0].pageY);A=x.TOUCH_PAN;break;default:A=x.NONE}A!==x.NONE&&r.dispatchEvent(u)}}function q(M){if(!1!==
r.enabled)switch(M.preventDefault(),M.stopPropagation(),M.touches.length){case 1:if(!1===r.enableRotate)break;if(A!==x.TOUCH_ROTATE)break;W.set(M.touches[0].pageX,M.touches[0].pageY);H.subVectors(W,Q);var Y=r.domElement===document?r.domElement.body:r.domElement;F.theta-=2*Math.PI*H.x/Y.clientWidth*r.rotateSpeed;F.phi-=2*Math.PI*H.y/Y.clientHeight*r.rotateSpeed;Q.copy(W);r.update();break;case 2:if(!1===r.enableZoom)break;if(A!==x.TOUCH_DOLLY)break;Y=M.touches[0].pageX-M.touches[1].pageX;M=M.touches[0].pageY-
M.touches[1].pageY;U.set(0,Math.sqrt(Y*Y+M*M));I.subVectors(U,R);0<I.y?e(c()):0>I.y&&d(c());R.copy(U);r.update();break;case 3:if(!1===r.enablePan)break;if(A!==x.TOUCH_PAN)break;P.set(M.touches[0].pageX,M.touches[0].pageY);D.subVectors(P,O);X(D.x,D.y);O.copy(P);r.update();break;default:A=x.NONE}}function p(){!1!==r.enabled&&(r.dispatchEvent(w),A=x.NONE)}function t(M){M.preventDefault()}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.target=new f.Vector3;this.minDistance=0;
this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.enableKeys=!0;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:f.MOUSE.LEFT,ZOOM:f.MOUSE.MIDDLE,PAN:f.MOUSE.RIGHT};
this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return B.phi};this.getAzimuthalAngle=function(){return B.theta};this.reset=function(){r.target.copy(r.target0);r.object.position.copy(r.position0);r.object.zoom=r.zoom0;r.object.updateProjectionMatrix();r.dispatchEvent(v);r.update();A=x.NONE};this.update=function(){var M=new f.Vector3,Y=(new f.Quaternion).setFromUnitVectors(a.up,new f.Vector3(0,1,0)),ca=Y.clone().inverse(),
ha=new f.Vector3,ia=new f.Quaternion;return function(){var ja=r.object.position;M.copy(ja).sub(r.target);mb(M,Y);B.setFromVector3(M);r.autoRotate&&A===x.NONE&&(F.theta-=2*Math.PI/60/60*r.autoRotateSpeed);B.theta+=F.theta;B.phi+=F.phi;B.theta=Math.max(r.minAzimuthAngle,Math.min(r.maxAzimuthAngle,B.theta));B.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,B.phi));var ka=B;ka.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,ka.phi));B.radius*=K;B.radius=Math.max(r.minDistance,Math.min(r.maxDistance,B.radius));
r.target.add(L);ka=B;var pa=Math.sin(ka.phi)*ka.radius;M.x=pa*Math.sin(ka.theta);M.y=Math.cos(ka.phi)*ka.radius;M.z=pa*Math.cos(ka.theta);mb(M,ca);ja.copy(r.target).add(M);r.object.lookAt(r.target);!0===r.enableDamping?(F.theta*=1-r.dampingFactor,F.phi*=1-r.dampingFactor):F.set(0,0,0);K=1;L.set(0,0,0);return N||ha.distanceToSquared(r.object.position)>y||8*(1-ia.dot(r.object.quaternion))>y?(r.dispatchEvent(v),ha.copy(r.object.position),ia.copy(r.object.quaternion),N=!1,!0):!1}}();this.dispose=function(){r.domElement.removeEventListener("contextmenu",
t,!1);r.domElement.removeEventListener("mousedown",g,!1);r.domElement.removeEventListener("mousewheel",l,!1);r.domElement.removeEventListener("MozMousePixelScroll",l,!1);r.domElement.removeEventListener("touchstart",n,!1);r.domElement.removeEventListener("touchend",p,!1);r.domElement.removeEventListener("touchmove",q,!1);document.removeEventListener("mousemove",h,!1);document.removeEventListener("mouseup",k,!1);document.removeEventListener("mouseout",k,!1);window.removeEventListener("keydown",m,!1)};
var r=this,v={type:"change"},u={type:"start"},w={type:"end"},x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},A=x.NONE,y=1E-6,B=new f.Spherical,F=new f.Spherical,K=1,L=new f.Vector3,N=!1,Q=new f.Vector2,W=new f.Vector2,H=new f.Vector2,O=new f.Vector2,P=new f.Vector2,D=new f.Vector2,R=new f.Vector2,U=new f.Vector2,I=new f.Vector2,J=function(){var M=new f.Vector3;return function(Y,ca){Ab(M,ca,0);M.multiplyScalar(-Y);L.add(M)}}(),S=function(){var M=new f.Vector3;return function(Y,
ca){Ab(M,ca,1);M.multiplyScalar(Y);L.add(M)}}(),X=function(){var M=new f.Vector3;return function(Y,ca){var ha=r.domElement===document?r.domElement.body:r.domElement;if(r.object instanceof f.PerspectiveCamera){M.copy(r.object.position).sub(r.target);var ia=M.length();ia*=Math.tan(r.object.fov/2*Math.PI/180);J(2*Y*ia/ha.clientHeight,r.object.matrix);S(2*ca*ia/ha.clientHeight,r.object.matrix)}else r.object instanceof f.OrthographicCamera?(J(Y*(r.object.right-r.object.left)/r.object.zoom/ha.clientWidth,
r.object.matrix),S(ca*(r.object.top-r.object.bottom)/r.object.zoom/ha.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();r.domElement.addEventListener("contextmenu",t,!1);r.domElement.addEventListener("mousedown",g,!1);r.domElement.addEventListener("mousewheel",l,!1);r.domElement.addEventListener("MozMousePixelScroll",l,!1);r.domElement.addEventListener("touchstart",n,!1);r.domElement.addEventListener("touchend",
p,!1);r.domElement.addEventListener("touchmove",q,!1);window.addEventListener("keydown",m,!1);this.update()};f.OrbitControls.prototype=Object.create(f.EventDispatcher.prototype);f.OrbitControls.prototype.constructor=f.OrbitControls;
Object.defineProperties(f.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!a}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");
return!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!a}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!a}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");
return!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!a}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!a}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");
return this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=a}}});
</script>












<script>//~~WEBPATH~~/vz-projector/heap.js
var wc;
(function(a){var b=function(){function d(){this.arr=[]}d.prototype.push=function(e,g){this.arr.push({key:e,value:g});this.bubbleUp(this.arr.length-1)};d.prototype.pop=function(){if(0===this.arr.length)throw Error("pop() called on empty binary heap");var e=this.arr[0],g=this.arr.length-1;this.arr[0]=this.arr[g];this.arr.pop();0<g&&this.bubbleDown(0);return e};d.prototype.peek=function(){return this.arr[0]};d.prototype.popPush=function(e,g){if(0===this.arr.length)throw Error("pop() called on empty binary heap");this.arr[0]=
{key:e,value:g};0<this.arr.length&&this.bubbleDown(0)};d.prototype.size=function(){return this.arr.length};d.prototype.items=function(){return this.arr};d.prototype.swap=function(e,g){var h=this.arr[e];this.arr[e]=this.arr[g];this.arr[g]=h};d.prototype.bubbleDown=function(e){var g=(e<<1)+1,h=g+1,k=e;g<this.arr.length&&this.arr[g].key<this.arr[k].key&&(k=g);h<this.arr.length&&this.arr[h].key<this.arr[k].key&&(k=h);k!==e&&(this.swap(k,e),this.bubbleDown(k))};d.prototype.bubbleUp=function(e){if(!(0>=
e)){var g=e-1>>1;this.arr[e].key<this.arr[g].key&&(this.swap(e,g),this.bubbleUp(g))}};return d}();a.MinHeap=b;var c=function(){function d(e){this.maxHeap=new b;this.k=e}d.prototype.add=function(e,g){this.maxHeap.size()<this.k?this.maxHeap.push(-e,g):e<-this.maxHeap.peek().key&&this.maxHeap.popPush(-e,g)};d.prototype.getMinKItems=function(){var e=this.maxHeap.items();e.sort(function(g,h){return h.key-g.key});return e.map(function(g){return g.value})};d.prototype.getSize=function(){return this.maxHeap.size()};
d.prototype.getLargestKey=function(){return 0===this.maxHeap.size()?null:-this.maxHeap.peek().key};return d}();a.KMin=c})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/label.js
(function(a){var b=function(){function c(d,e,g){this.bound=d;this.cellWidth=e;this.cellHeight=g;this.numHorizCells=Math.ceil(this.boundWidth(d)/e);this.numVertCells=Math.ceil(this.boundHeight(d)/g);this.grid=Array(this.numHorizCells*this.numVertCells)}c.prototype.boundWidth=function(d){return d.hiX-d.loX};c.prototype.boundHeight=function(d){return d.hiY-d.loY};c.prototype.boundsIntersect=function(d,e){return!(d.loX>e.hiX||d.loY>e.hiY||d.hiX<e.loX||d.hiY<e.loY)};c.prototype.insert=function(d,e){void 0===
e&&(e=!1);if(d.hiX<this.bound.loX||d.loX>this.bound.hiX||d.hiY<this.bound.loY||d.loY>this.bound.hiY)return!1;for(var g=this.getCellX(d.loX),h=this.getCellX(d.hiX),k=this.getCellY(d.loY),l=this.getCellY(d.hiY),m=k*this.numHorizCells+g,n=m,q=k;q<=l;q++){for(var p=g;p<=h;p++){var t=this.grid[n++];if(t)for(var r=0;r<t.length;r++)if(this.boundsIntersect(d,t[r]))return!1}n+=this.numHorizCells-(h-g+1)}if(e)return!0;n=m;for(q=k;q<=l;q++){for(p=g;p<=h;p++)this.grid[n]?this.grid[n].push(d):this.grid[n]=[d],
n++;n+=this.numHorizCells-(h-g+1)}return!0};c.prototype.getCellX=function(d){return Math.floor((d-this.bound.loX)/this.cellWidth)};c.prototype.getCellY=function(d){return Math.floor((d-this.bound.loY)/this.cellHeight)};return c}();a.CollisionGrid=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/sptree.js
(function(a){var b=function(){function c(d){if(1>d.length)throw Error("There should be at least 1 data point");this.dim=d[0].length;this.masks=Array(Math.pow(2,this.dim));for(var e=0;e<this.masks.length;++e)this.masks[e]=1<<e;var g=Array(this.dim),h=Number.POSITIVE_INFINITY;for(e=0;e<g.length;++e)g[e]=h;h=Array(this.dim);e=Number.NEGATIVE_INFINITY;for(var k=0;k<h.length;++k)h[k]=e;for(k=0;k<d.length;++k)for(e=0;e<this.dim;++e)g[e]=Math.min(g[e],d[k][e]),h[e]=Math.max(h[e],d[k][e]);k=Array(this.dim);
var l=0;for(e=0;e<this.dim;++e){var m=h[e]-g[e];k[e]=g[e]+m/2;l=Math.max(l,m/2)}this.root={box:{center:k,halfDim:l},point:d[0]};for(k=1;k<d.length;++k)this.insert(this.root,d[k])}c.prototype.visit=function(d,e){void 0===e&&(e=!1);this.visitNode(this.root,d,e)};c.prototype.visitNode=function(d,e,g){if(g)var h=e(d);else{h=Array(this.dim);for(var k=Array(this.dim),l=0;l<this.dim;++l)h[l]=d.box.center[l]-d.box.halfDim,k[l]=d.box.center[l]+d.box.halfDim;h=e(d,h,k)}if(d.children&&!h)for(h=0;h<d.children.length;++h)(k=
d.children[h])&&this.visitNode(k,e,g)};c.prototype.insert=function(d,e){null==d.children&&(d.children=Array(this.masks.length));for(var g=0,h=0;h<this.dim;++h)e[h]>d.box.center[h]&&(g|=this.masks[h]);null==d.children[g]?this.makeChild(d,g,e):this.insert(d.children[g],e)};c.prototype.makeChild=function(d,e,g){for(var h=d.box.center,k=d.box.halfDim/2,l=Array(this.dim),m=0;m<this.dim;++m)l[m]=e&1<<m?h[m]+k:h[m]-k;d.children[e]={box:{center:l,halfDim:k},point:g}};return c}();a.SPTree=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/bh_tsne.js
(function(a){function b(n,q){var p=n[0]-q[0];n=n[1]-q[1];return p*p+n*n}function c(n,q){var p=n[0]-q[0],t=n[1]-q[1];n=n[2]-q[2];return p*p+t*t+n*n}function d(n){if(k)return k=!1,l;var q=2*n()-1,p=2*n()-1,t=q*q+p*p;if(0===t||1<t)return d(n);n=Math.sqrt(-2*Math.log(t)/t);l=p*n;k=!0;return q*n}function e(n,q,p){for(var t=[],r=0;r<n;++r)t.push(3===q?[p,p,p]:[p,p]);return t}function g(n,q,p,t){n[0]+=q*(p[0]-t[0]);n[1]+=q*(p[1]-t[1])}function h(n,q,p,t){n[0]+=q*(p[0]-t[0]);n[1]+=q*(p[1]-t[1]);n[2]+=q*(p[2]-
t[2])}var k=!1,l=0;a.dist2=function(n,q){if(n.length!==q.length)throw Error("Vectors a and b must be of same length");for(var p=0,t=0;t<n.length;++t){var r=n[t]-q[t];p+=r*r}return p};a.dist2_2D=b;a.dist2_3D=c;var m=function(){function n(q){this.iter=0;q=q||{dim:2};this.perplexity=q.perplexity||30;this.epsilon=q.epsilon||10;this.rng=q.rng||Math.random;this.dim=q.dim;if(2===q.dim)this.dist2=b,this.computeForce=g;else if(3===q.dim)this.dist2=c,this.computeForce=h;else throw Error("Only 2D and 3D is supported");
}n.prototype.initDataDist=function(q){var p=q.length;this.nearest=q;for(var t=q.length,r=Math.log(this.perplexity),v=new Float64Array(t*t),u=Array(q[0].length),w=0;w<t;++w){for(var x=q[w],A=-Infinity,y=Infinity,B=1,F=0;;){for(var K=0,L=0;L<x.length;++L){var N=x[L];N=w===N.index?0:Math.exp(-N.dist*B);N=Math.max(N,1E-9);u[L]=N;K+=N}var Q=0;for(L=0;L<u.length;++L)u[L]/=K,N=u[L],1E-7<N&&(Q-=N*Math.log(N));Q>r?(A=B,B=Infinity===y?2*B:(B+y)/2):(y=B,B=-Infinity===A?B/2:(B+A)/2);F++;if(50<=F||1E-4>Math.abs(Q-
r))break}for(L=0;L<u.length;++L)N=u[L],A=x[L].index,v[w*t+A]=N}q=2*t;for(w=0;w<t;++w)for(A=w+1;A<t;++A)r=w*t+A,u=A*t+w,x=(v[r]+v[u])/q,v[r]=x,v[u]=x;this.P=v;this.N=p;this.initSolution()};n.prototype.initSolution=function(){for(var q=this.rng,p=this.N*this.dim,t=new Float64Array(p),r=0;r<p;++r)t[r]=1E-4*d(q);this.Y=t;this.gains=e(this.N,this.dim,1);this.ystep=e(this.N,this.dim,0);this.iter=0};n.prototype.getDim=function(){return this.dim};n.prototype.getSolution=function(){return this.Y};n.prototype.perturb=
function(){for(var q=this.N,p=0,t=3===this.dim?[0,0,0]:[0,0],r=0;r<q;++r){for(var v=0,u=0;u<this.dim;++u)v+=Math.pow(this.Y[r*this.dim+u],2);v>p&&(p=v)}var w=Math.pow(p,.5);for(r=0;r<q;++r){for(var x=Array(this.dim);;){for(u=v=0;u<this.dim;++u)x[u]=.1*w*(Math.random()-.5),v+=Math.pow(this.Y[r*this.dim+u]+x[u],2);if(v<p)break}for(u=0;u<this.dim;++u)this.Y[r*this.dim+u]+=x[u],t[u]+=this.Y[r*this.dim+u]}for(r=0;r<q;++r)for(u=0;u<this.dim;++u)this.Y[r*this.dim+u]-=t[u]/q};n.prototype.step=function(){this.iter+=
1;for(var q=this.N,p=this.costGrad(this.Y),t=3===this.dim?[0,0,0]:[0,0],r=0;r<q;++r)for(var v=0;v<this.dim;++v){var u=this.ystep[r][v],w=this.gains[r][v],x=p[r][v];w=(0<x?1:0>x?-1:0)===(0<u?1:0>u?-1:0)?.8*w:w+.2;.01>w&&(w=.01);this.gains[r][v]=w;u=(250>this.iter?.5:.8)*u-this.epsilon*w*p[r][v];this.ystep[r][v]=u;w=r*this.dim+v;this.Y[w]+=u;t[v]+=this.Y[w]}for(r=0;r<q;++r)for(v=0;v<this.dim;++v)this.Y[r*this.dim+v]-=t[v]/q};n.prototype.setSupervision=function(q,p){var t=this;null!=q&&(this.labels=
q,this.labelCounts={},Array.from(new Set(q)).forEach(function(r){return t.labelCounts[r]=0}),q.forEach(function(r){return t.labelCounts[r]+=1}));null!=p&&(this.unlabeledClass=p)};n.prototype.setSuperviseFactor=function(q){null!=q&&(this.superviseFactor=q)};n.prototype.costGrad=function(q){function p(M){var Y=L[M];F&&(I=B[y[M]],J=v-I-K);for(var ca=3===U.dim?[0,0,0]:[0,0],ha=U.nearest[M],ia=0;ia<ha.length;++ia){var ja=ha[ia].index,ka=u[M*v+ja];F&&(y[M]===A||y[ja]===A?ka*=1/v:y[M]!==y[ja]?ka*=Math.max(1/
v-x/J,1E-7):y[M]===y[ja]&&(ka*=Math.min(1/v+x/I,.9999999)),D+=ka);ja=L[ja];var pa=U.dist2(Y,ja);U.computeForce(ca,ka/(1+pa),Y,ja)}var la=3===U.dim?[0,0,0]:[0,0];O.visit(function(xa){var sa=r.dist2(Y,xa.yCell);if(null==xa.children||0<sa&&.8>xa.rCell/Math.sqrt(sa)){sa=1/(1+sa);var Ja=xa.numCells*sa;P+=Ja;r.computeForce(la,Ja*sa,Y,xa.yCell);return!0}sa=1/(1+r.dist2(Y,xa.point));P+=sa;r.computeForce(la,sa*sa,Y,xa.point);return!1},!0);R[M]=[ca,la]}function t(M){var Y=1;if(null==M.children)return M.numCells=
Y,M.yCell=M.point,{numCells:Y,yCell:M.yCell};for(var ca=M.point.slice(),ha=0;ha<M.children.length;++ha){var ia=M.children[ha];if(null!=ia){ia=t(ia);Y+=ia.numCells;for(var ja=0;ja<r.dim;++ja)ca[ja]+=ia.yCell[ja]}}M.numCells=Y;M.yCell=ca.map(function(ka){return ka/Y});return{numCells:Y,yCell:ca}}for(var r=this,v=this.N,u=this.P,w=100>this.iter?4:1,x=this.superviseFactor/100,A=this.unlabeledClass,y=this.labels,B=this.labelCounts,F=null!=x&&0<x&&null!=y&&null!=B,K=F&&null!=A&&""!==A?B[A]:0,L=Array(v),
N=0;N<v;++N){for(var Q=N*this.dim,W=Array(this.dim),H=0;H<this.dim;++H)W[H]=q[Q+H];L[N]=W}var O=new a.SPTree(L);t(O.root);O.visit(function(M,Y,ca){M.rCell=ca[0]-Y[0];return!1});q=[];var P=0,D=0,R=Array(v),U=this,I,J;for(N=0;N<v;++N)p(N);w*=4;F&&(w/=D);Q=4/P;for(N=0;N<v;++N){H=R[N];W=H[0];var S=H[1],X=Array(this.dim);for(H=0;H<this.dim;++H)X[H]=w*W[H]-Q*S[H];q.push(X)}return q};return n}();a.TSNE=m})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/logging.js
(function(a){(function(b){function c(h,k,l,m){void 0===k&&(k=null);void 0===l&&(l=null);void 0===m&&(m=!1);if(null==d)console.warn("Can't show modal message before the dom is initialized");else{null==k&&(k=(e++).toString());var n=d.querySelector("#notification-dialog");n.querySelector(".close-button").style.display=m?null:"none";var q=n.querySelector(".progress");q.style.display=m?"none":null;q.active=m?null:!0;n.querySelector("#notification-title").innerHTML=l;l=n.querySelector("#notify-msgs");if(m)l.innerHTML=
"";else{q=l.querySelectorAll(".error");for(var p=0;p<q.length;p++)l.removeChild(q[p])}q="notify-msg-"+k;p=n.querySelector("#"+q);null==p&&(p=document.createElement("div"),p.className="notify-msg "+(m?"error":""),p.id=q,l.insertBefore(p,l.firstChild),m?g=0:g++);null==h?(g--,0===g&&n.close(),p.remove()):(p.innerText=h,n.open());return k}}var d=null,e=0,g=0;b.setDomContainer=function(h){d=h};b.setModalMessage=c;b.setErrorMessage=function(h,k){c(h,null,"Error "+(null!=k?k:""),!0)};b.setWarningMessage=
function(h){var k=d.querySelector("#toast");k.text=h;k.duration=1E4;k.open()}})(a.logging||(a.logging={}))})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/renderContext.js
(function(a){a.LabelRenderParams=function(){return function(b,c,d,e,g,h,k){this.pointIndices=b;this.labelStrings=c;this.scaleFactors=d;this.useSceneOpacityFlags=e;this.defaultFontSize=g;this.fillColors=h;this.strokeColors=k}}();(function(b){b[b.Perspective=0]="Perspective";b[b.Orthographic=1]="Orthographic"})(a.CameraType||(a.CameraType={}));a.RenderContext=function(){return function(b,c,d,e,g,h,k,l,m,n,q,p,t,r){this.camera=b;this.cameraType=c;this.cameraTarget=d;this.screenWidth=e;this.screenHeight=
g;this.nearestCameraSpacePointZ=h;this.farthestCameraSpacePointZ=k;this.backgroundColor=l;this.pointColors=m;this.pointScaleFactors=n;this.labels=q;this.polylineColors=p;this.polylineOpacities=t;this.polylineWidths=r}}()})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotRectangleSelector.js
(function(a){var b=function(){function c(d,e){this.svgElement=d.querySelector("#selector");this.rectElement=document.createElementNS("http://www.w3.org/2000/svg","rect");this.rectElement.style.stroke="#aaaaaa";this.rectElement.style.strokeDasharray="10 5";this.rectElement.style.strokeWidth="2";this.rectElement.style.fill="#dddddd";this.rectElement.style.fillOpacity="0.2";this.svgElement.appendChild(this.rectElement);this.selectionCallback=e;this.isMouseDown=!1}c.prototype.onMouseDown=function(d,e){this.isMouseDown=
!0;this.rectElement.style.display="block";this.startCoordinates=[d,e];this.lastBoundingBox={x:this.startCoordinates[0],y:this.startCoordinates[1],width:1,height:1}};c.prototype.onMouseMove=function(d,e){this.isMouseDown&&(this.lastBoundingBox.x=Math.min(d,this.startCoordinates[0]),this.lastBoundingBox.y=Math.max(e,this.startCoordinates[1]),this.lastBoundingBox.width=Math.max(d,this.startCoordinates[0])-this.lastBoundingBox.x,this.lastBoundingBox.height=this.lastBoundingBox.y-Math.min(e,this.startCoordinates[1]),
this.rectElement.setAttribute("x",""+this.lastBoundingBox.x),this.rectElement.setAttribute("y",""+(this.lastBoundingBox.y-this.lastBoundingBox.height)),this.rectElement.setAttribute("width",""+this.lastBoundingBox.width),this.rectElement.setAttribute("height",""+this.lastBoundingBox.height))};c.prototype.onMouseUp=function(){this.isMouseDown=!1;this.rectElement.style.display="none";this.rectElement.setAttribute("width","0");this.rectElement.setAttribute("height","0");this.selectionCallback(this.lastBoundingBox)};
return c}();a.ScatterPlotRectangleSelector=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/analyticsLogger.js
(function(a){var b=function(){function c(d,e){"undefined"===typeof ga||null==ga?this.pageViewLogging=this.eventLogging=!1:(this.eventLogging=e,this.pageViewLogging=d)}c.prototype.logPageView=function(){this.pageViewLogging&&ga("send",{hitType:"pageview",page:"/v/embeddings"})};c.prototype.logProjectionChanged=function(d){this.eventLogging&&ga("send",{hitType:"event",eventCategory:"Projection",eventAction:"click",eventLabel:d})};c.prototype.logWebGLDisabled=function(){this.eventLogging&&ga("send",
{hitType:"event",eventCategory:"Error",eventAction:"PageLoad",eventLabel:"WebGL_disabled"})};return c}();a.AnalyticsLogger=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/util.js
(function(a){(function(b){b.shuffle=function(d){for(var e=d.length,g,h;e;)h=Math.floor(Math.random()*e--),g=d[e],d[e]=d[h],d[h]=g;return d};b.range=function(d){for(var e=[],g=0;g<d;g++)e.push(g);return e};b.classed=function(d,e,g){var h=d.className.split(" ");if(g){if(e in h)return;h.push(e)}else{e=h.indexOf(e);if(-1===e)return;h.splice(e,1)}d.className=h.join(" ")};b.vector3DToScreenCoords=function(d,e,g,h){var k=window.devicePixelRatio;d=(new f.Vector3).copy(h).project(d);return[(d.x+1)/2*e*k,-((d.y-
1)/2*g)*k]};b.vector3FromPackedArray=function(d,e){e*=3;return new f.Vector3(d[e],d[e+1],d[e+2])};b.getNearFarPoints=function(d,e,g){var h=Infinity,k=0;g=(new f.Vector3).copy(g).sub(e);g=(new f.Vector3).copy(g).normalize();for(var l=d.length/3,m=0,n=new f.Vector3,q=new f.Vector3,p=0;p<l;p++){n.x=d[m];n.y=d[m+1];n.z=d[m+2];m+=3;q.copy(n).sub(e);var t=g.dot(q);0>t||(k=t>k?t:k,h=t<h?t:h)}return[h,k]};b.createTexture=function(d){d=new f.Texture(d);d.needsUpdate=!0;d.minFilter=f.LinearFilter;d.generateMipmaps=
!1;d.flipY=!1;return d};b.assert=function(d,e){if(!d)throw Error(e||"Assertion failed");};b.getSearchPredicate=function(d,e,g){if(e){var h=new RegExp(d,"i");e=function(k){return h.test(k.metadata[g].toString())}}else d=d.toLowerCase(),e=function(k){return 0<=k.metadata[g].toString().toLowerCase().indexOf(d)};return e};b.runAsyncTask=function(d,e,g,h){void 0===g&&(g=null);void 0===h&&(h=200);var k=null==g;g=a.logging.setModalMessage(d,g);return new Promise(function(l,m){setTimeout(function(){try{var n=
e();k&&a.logging.setModalMessage(null,g);l(n)}catch(q){m(q)}return!0},h)})};b.getURLParams=function(){var d=window.location.search;if(!d)return{};d=-1!==d.indexOf("?")?d.split("?")[1]:d;d.indexOf("#")&&(d=d.split("#")[0]);d=d.split("\x26");for(var e={},g=0;g<d.length;g++){var h=d[g].split("\x3d");e[h[0].toLowerCase()]=decodeURIComponent(h[1])}return e};var c=["/Adagrad"];b.tensorIsGenerated=function(d){for(var e=0;e<c.length;e++)if(0<=d.indexOf(c[e]))return!0;return!1};b.xor=function(d,e){return(d||
e)&&!(d&&e)};b.hasWebGLSupport=function(){try{var d=document.createElement("canvas");return null!=(d.getContext("webgl")||d.getContext("experimental-webgl"))&&"undefined"!==typeof weblas}catch(e){return!1}}})(a.util||(a.util={}))})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/vector.js
(function(a){(function(b){function c(l,m){a.util.assert(l.length===m.length,"Vectors a and b must be of same length");for(var n=0,q=0;q<l.length;++q)n+=l[q]*m[q];return n}function d(l){for(var m=0,n=0;n<l.length;++n)m+=l[n]*l[n];return m}function e(l,m){a.util.assert(l.length===m.length,"Vectors a and b must be of same length");for(var n=0,q=0;q<l.length;++q){var p=l[q]-m[q];n+=p*p}return n}function g(l,m){var n=l[0]-m[0],q=l[1]-m[1];l=l[2]-m[2];return n*n+q*q+l*l}function h(l){for(var m=d3.randomNormal(),
n=new Float32Array(l),q=0;q<l;++q)n[q]=m();return n}function k(l,m){return c(l,m)/Math.sqrt(d(l)*d(m))}b.dot=c;b.sum=function(l){for(var m=0,n=0;n<l.length;++n)m+=l[n];return m};b.add=function(l,m){a.util.assert(l.length===m.length,"Vectors a and b must be of same length");for(var n=new Float32Array(l.length),q=0;q<l.length;++q)n[q]=l[q]+m[q];return n};b.sub=function(l,m){a.util.assert(l.length===m.length,"Vectors a and b must be of same length");for(var n=new Float32Array(l.length),q=0;q<l.length;++q)n[q]=
l[q]-m[q];return n};b.norm2=d;b.dist=function(l,m){return Math.sqrt(e(l,m))};b.dist2=e;b.dist2_2D=function(l,m){var n=l[0]-m[0];l=l[1]-m[1];return n*n+l*l};b.dist2_3D=g;b.dist_3D=function(l,m){return Math.sqrt(g(l,m))};b.dist2WithLimit=function(l,m,n){a.util.assert(l.length===m.length,"Vectors a and b must be of same length");for(var q=0,p=0;p<l.length;++p){var t=l[p]-m[p];q+=t*t;if(q>=n)return-1}return q};b.dist22D=function(l,m){var n=l[0]-m[0];l=l[1]-m[1];return n*n+l*l};b.unit=function(l){var m=
Math.sqrt(d(l));a.util.assert(0<=m,"Norm of the vector must be \x3e 0");for(var n=0;n<l.length;++n)l[n]/=m};b.projectRandom=function(l,m){for(var n=l[0].length,q=l.length,p=Array(q),t=0;t<q;++t)p[t]=new Float32Array(m);for(var r=0;r<m;++r){var v=h(n);for(t=0;t<q;++t)p[t][r]=c(l[t],v)}return p};b.project2d=function(l,m,n){return[c(l,m),c(l,n)]};b.centroid=function(l,m){if(0===l.length)return null;null==m&&(m=function(r){return r});a.util.assert(0<=l.length,"`vectors` must be of length \x3e\x3d 1");
for(var n=new Float32Array(m(l[0]).length),q=0;q<l.length;++q)for(var p=m(l[q]),t=0;t<n.length;++t)n[t]+=p[t];for(t=0;t<n.length;++t)n[t]/=l.length;return n};b.rn=h;b.cosDistNorm=function(l,m){return 1-c(l,m)};b.cosDist=function(l,m){return 1-k(l,m)};b.cosSim=k;b.toTypedArray=function(l,m){for(var n=l.length,q=m(l[0]).length,p=new Float32Array(n*q),t=0;t<n;++t)for(var r=m(l[t]),v=0;v<q;++v)p[t*q+v]=r[v];return p};b.transposeTypedArray=function(l,m,n){for(var q=new Float32Array(l*m),p=0;p<l;++p)for(var t=
0;t<m;++t)q[t*l+p]=n[p*m+t];return q}})(a.vector||(a.vector={}))})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/knn.js
(function(a){(function(b){function c(d,e,g,h){return a.util.runAsyncTask("Finding nearest neighbors...",function(){for(var k=d.length,l=Array(k),m=Array(k),n=0;n<k;n++)m[n]=new a.KMin(e);for(n=0;n<k;n++)for(var q=g(d[n]),p=m[n],t=n+1;t<k;t++){var r=m[t],v=p.getSize()===e?p.getLargestKey()||Number.MAX_VALUE:Number.MAX_VALUE,u=r.getSize()===e?r.getLargestKey()||Number.MAX_VALUE:Number.MAX_VALUE;v=Math.max(v,u);v=h(q,g(d[t]),v);0<=v&&(p.add(v,{index:t,dist:v}),r.add(v,{index:n,dist:v}))}for(n=0;n<k;n++)l[n]=
m[n].getMinKItems();return l})}b.findKNNGPUCosine=function(d,e,g){function h(A){a.util.runAsyncTask("Finding nearest neighbors: "+(100*u).toFixed()+"%",function(){for(var y=x<r?t+1:t,B=new Float32Array(y*l),F=0;F<y;++F)for(var K=g(d[v+F]),L=0;L<l;++L)B[F*l+L]=K[L];F=new weblas.pipeline.Tensor([y,l],B);K=weblas.pipeline.sgemm(1,n,F,null,null);B=K.transfer();F.delete();K.delete();u+=w;for(F=0;F<y;F++){K=new a.KMin(e);L=v+F;for(var N=0;N<k;N++)if(N!==L){var Q=1-B[N*y+F];K.add(Q,{index:N,dist:Q})}q[L]=
K.getMinKItems()}u+=w;v+=y;x++},"knn-gpu").then(function(){x<p?h(A):(a.logging.setModalMessage(null,"knn-gpu"),n.delete(),A(q))},function(){a.logging.setModalMessage(null,"knn-gpu");c(d,e,g,function(y,B){return a.vector.cosDistNorm(y,B)}).then(function(y){A(y)})})}var k=d.length,l=g(d[0]).length,m=a.vector.toTypedArray(d,g),n=new weblas.pipeline.Tensor([k,l],m),q=Array(k),p=Math.ceil(k/256),t=Math.floor(k/p),r=k%p,v=0,u=0,w=1/(2*p),x=0;return new Promise(function(A){return h(A)})};b.findKNN=c;b.findKNNofPoint=
function(d,e,g,h,k){g=new a.KMin(g);for(var l=h(d[e]),m=0;m<d.length;++m)if(m!==e){var n=h(d[m]);n=k(l,n);g.add(n,{index:m,dist:n})}return g.getMinKItems()}})(a.knn||(a.knn={}))})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data.js
var xc=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(e,g){function h(m){try{l(d.next(m))}catch(n){g(n)}}function k(m){try{l(d["throw"](m))}catch(n){g(n)}}function l(m){m.done?e(m.value):(new c(function(n){n(m.value)})).then(h,k)}l((d=d.apply(a,b||[])).next())})},yc=this&&this.__generator||function(a,b){function c(m){return function(n){return d([m,n])}}function d(m){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,h&&(k=m[0]&2?h["return"]:
m[0]?h["throw"]||((k=h["return"])&&k.call(h),0):h.next)&&!(k=k.call(h,m[1])).done)return k;if(h=0,k)m=[m[0]&2,k.value];switch(m[0]){case 0:case 1:k=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++;h=m[1];m=[0];continue;case 7:m=e.ops.pop();e.trys.pop();continue;default:if(!(k=e.trys,k=0<k.length&&k[k.length-1])&&(6===m[0]||2===m[0])){e=0;continue}if(3===m[0]&&(!k||m[1]>k[0]&&m[1]<k[3]))e.label=m[1];else if(6===m[0]&&e.label<k[1])e.label=k[1],k=m;else if(k&&e.label<k[2])e.label=
k[2],e.ops.push(m);else{k[2]&&e.ops.pop();e.trys.pop();continue}}m=b.call(a,e)}catch(n){m=[6,n],h=0}finally{g=k=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}var e={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},g,h,k,l;return l={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};
(function(a){function b(g){for(var h=null,k=0,l=e;k<l.length;k++){var m=l[k];if(m in g&&""!==g[m]){h=g[m];break}}return null==h?null:+h}var c=0<=navigator.userAgent.toLowerCase().indexOf("firefox"),d=a.util.hasWebGLSupport()&&!c;a.TSNE_SAMPLE_SIZE=1E4;a.UMAP_SAMPLE_SIZE=5E3;a.PCA_SAMPLE_SIZE=5E4;a.PCA_SAMPLE_DIM=200;var e=["__next__","__seq_next__"];c=function(){function g(h,k){this.shuffledDataIndices=[];this.projections={};this.tSNEIteration=0;this.tSNEShouldPause=!1;this.tSNEShouldStop=!0;this.superviseInput=
"";this.dim=[0,0];this.hasUmapRun=this.hasTSNERun=!1;this.points=h;this.shuffledDataIndices=a.util.shuffle(a.util.range(this.points.length));this.sequences=this.computeSequences(h);this.dim=[this.points.length,this.points[0].vector.length];this.spriteAndMetadataInfo=k}g.prototype.computeSequences=function(h){for(var k=new Int8Array(h.length),l={},m=[],n=0;n<h.length;n++)if(!k[n]){k[n]=1;var q=b(h[n].metadata);if(null!=q)if(q in l)q=l[q],q.pointIndices.unshift(n),l[n]=q;else{q={pointIndices:[]};l[n]=
q;m.push(q);for(var p=n;h[p];)q.pointIndices.push(p),p=b(h[p].metadata),null!=p?k[p]=1:p=-1}}return m};g.prototype.projectionCanBeRendered=function(h){return"tsne"!==h?!0:0<this.tSNEIteration};g.prototype.getSubset=function(h){var k=this;h=(null!=h&&0<h.length?h.map(function(l){return k.points[l]}):this.points).map(function(l){return{metadata:l.metadata,index:l.index,vector:l.vector.slice(),projections:{}}});return new g(h,this.spriteAndMetadataInfo)};g.prototype.normalize=function(){var h=a.vector.centroid(this.points,
function(m){return m.vector});if(null==h)throw Error("centroid should not be null");for(var k=0;k<this.points.length;++k){var l=this.points[k];l.vector=a.vector.sub(l.vector,h);0<a.vector.norm2(l.vector)&&a.vector.unit(l.vector)}};g.prototype.projectLinear=function(h,k){this.projections[k]=!0;this.points.forEach(function(l){l.projections[k]=a.vector.dot(l.vector,h)})};g.prototype.projectPCA=function(){var h=this;return null!=this.projections["pca-0"]?Promise.resolve(null):a.util.runAsyncTask("Computing PCA...",
function(){var k=h.points[0].vector.length,l=h.shuffledDataIndices.map(function(r){return h.points[r].vector});k>a.PCA_SAMPLE_DIM&&(l=a.vector.projectRandom(l,a.PCA_SAMPLE_DIM));var m=l.slice(0,a.PCA_SAMPLE_SIZE),n=numeric.dot,q=numeric.transpose;k=numeric.svd;var p=numeric.div;n=n(q(m),m);m=p(n,m.length);m=k(m);p=m.S;for(k=n=0;k<p.length;++k)n+=p[k];for(k=0;k<p.length;++k)p[k]/=n;h.fracVariancesExplained=p;var t=m.U;l=l.map(function(r){for(var v=new Float32Array(10),u=0;10>u;u++){for(var w=0,x=0;x<
r.length;x++)w+=r[x]*t[x][u];v[u]=w}return v});for(m=0;10>m;m++)for(p="pca-"+m,h.projections[p]=!0,k=0;k<l.length;k++)h.points[h.shuffledDataIndices[k]].projections[p]=l[k][m]})};g.prototype.projectTSNE=function(h,k,l,m){function n(){if(q.tSNEShouldStop)q.projections.tsne=!1,m(null),q.tsne=null,q.hasTSNERun=!1;else{if(!q.tSNEShouldPause){q.tsne.step();var r=q.tsne.getSolution();t.forEach(function(v,u){v=q.points[v];v.projections["tsne-0"]=r[u*l];v.projections["tsne-1"]=r[u*l+1];3===l&&(v.projections["tsne-2"]=
r[u*l+2])});q.projections.tsne=!0;q.tSNEIteration++;m(q.tSNEIteration)}requestAnimationFrame(n)}}var q=this;this.hasTSNERun=!0;var p=Math.floor(3*h);this.tsne=new a.TSNE({epsilon:k,perplexity:h,dim:l});this.tsne.setSupervision(this.superviseLabels,this.superviseInput);this.tsne.setSuperviseFactor(this.superviseFactor);this.tSNEShouldStop=this.tSNEShouldPause=!1;this.tSNEIteration=0;var t=this.shuffledDataIndices.slice(0,a.TSNE_SAMPLE_SIZE);h=t.map(function(r){return q.points[r]});this.computeKnn(h,
p).then(function(r){q.nearest=r;a.util.runAsyncTask("Initializing T-SNE...",function(){q.tsne.initDataDist(q.nearest)}).then(n)})};g.prototype.projectUmap=function(h,k,l){xc(this,void 0,void 0,function(){var m,n,q,p,t,r,v,u=this;return yc(this,function(w){switch(w.label){case 0:return this.hasUmapRun=!0,this.umap=new UMAP({nComponents:h,nNeighbors:k}),m=0,n=10,q=this.shuffledDataIndices.slice(0,a.UMAP_SAMPLE_SIZE),p=q.map(function(x){return u.points[x]}),t=p.map(function(x){return Array.from(x.vector)}),
r=this,[4,this.computeKnn(p,k)];case 1:return r.nearest=w.sent(),[4,a.util.runAsyncTask("Initializing UMAP...",function(){var x=u.nearest.map(function(y){return y.map(function(B){return B.index})}),A=u.nearest.map(function(y){return y.map(function(B){return B.dist})});return u.umap.initializeFit(t,x,A)},"umap-optimization")];case 2:return v=w.sent(),[2,new Promise(function(x,A){function y(){for(var B=Math.min(n,v-m),F=0;F<B;F++)m=u.umap.step();a.util.runAsyncTask("Optimizing UMAP (epoch "+m+" of "+
v+")",function(){if(m<v)requestAnimationFrame(y);else{var K=u.umap.getEmbedding();q.forEach(function(L,N){L=u.points[L];L.projections["umap-0"]=K[N][0];L.projections["umap-1"]=K[N][1];3===h&&(L.projections["umap-2"]=K[N][2])});u.projections.umap=!0;a.logging.setModalMessage(null,"umap-optimization");u.hasUmapRun=!0;l(m);x()}},"umap-optimization",0).catch(function(K){a.logging.setModalMessage(null,"umap-optimization");A(K)})}requestAnimationFrame(y)})]}})})};g.prototype.computeKnn=function(h,k){return xc(this,
void 0,void 0,function(){var l;return yc(this,function(m){switch(m.label){case 0:return null!=this.nearest&&k<=this.nearest.length?[2,Promise.resolve(this.nearest)]:[3,1];case 1:return[4,d?a.knn.findKNNGPUCosine(h,k,function(n){return n.vector}):a.knn.findKNN(h,k,function(n){return n.vector},function(n,q){return a.vector.cosDistNorm(n,q)})];case 2:return this.nearest=l=m.sent(),[2,Promise.resolve(l)]}})})};g.prototype.perturbTsne=function(){var h=this;if(this.hasTSNERun&&this.tsne){this.tsne.perturb();
var k=this.tsne.getDim(),l=this.tsne.getSolution();this.shuffledDataIndices.slice(0,a.TSNE_SAMPLE_SIZE).forEach(function(m,n){m=h.points[m];m.projections["tsne-0"]=l[n*k];m.projections["tsne-1"]=l[n*k+1];3===k&&(m.projections["tsne-2"]=l[n*k+2])})}};g.prototype.setSupervision=function(h,k){var l=this;if(null!=h){var m=this.shuffledDataIndices.slice(0,a.TSNE_SAMPLE_SIZE),n=Array(m.length);m.forEach(function(q,p){return n[p]=l.points[q].metadata[h].toString()});this.superviseLabels=n}null!=k&&(this.superviseInput=
k);this.tsne&&this.tsne.setSupervision(this.superviseLabels,this.superviseInput)};g.prototype.setSuperviseFactor=function(h){null!=h&&(this.superviseFactor=h,this.tsne&&this.tsne.setSuperviseFactor(h))};g.prototype.mergeMetadata=function(h){var k=this;if(h.pointsInfo.length!==this.points.length){var l="Number of tensors ("+this.points.length+") do not match the number of lines in metadata"+(" ("+h.pointsInfo.length+").");if(1===h.stats.length&&this.points.length+1===h.pointsInfo.length)return a.logging.setErrorMessage(l+
" Single column metadata should not have a header row.","merging metadata"),!1;if(1<h.stats.length&&this.points.length-1===h.pointsInfo.length)return a.logging.setErrorMessage(l+" Multi-column metadata should have a header row with column labels.","merging metadata"),!1;a.logging.setWarningMessage(l)}this.spriteAndMetadataInfo=h;h.pointsInfo.slice(0,this.points.length).forEach(function(m,n){return k.points[n].metadata=m});return!0};g.prototype.stopTSNE=function(){this.tSNEShouldStop=!0};g.prototype.findNeighbors=
function(h,k,l){return a.knn.findKNNofPoint(this.points,h,l,function(m){return m.vector},k).slice(0,l)};g.prototype.query=function(h,k,l){var m=a.util.getSearchPredicate(h,k,l),n=[];this.points.forEach(function(q,p){m(q)&&n.push(p)});return n};return g}();a.DataSet=c;a.Projection=function(){return function(g,h,k,l){this.projectionType=g;this.projectionComponents=h;this.dimensionality=k;this.dataSet=l}}();a.State=function(){return function(){this.label="";this.isSelected=!1;this.tSNELearningRate=this.tSNEPerplexity=
this.tSNEIteration=0;this.umapIs3d=this.tSNEis3d=!0;this.umapNeighbors=15;this.pcaComponentDimensions=[];this.projections=[];this.selectedPoints=[]}}();a.getProjectionComponents=function(g,h){if(3<h.length)throw new RangeError("components length must be \x3c\x3d 3");var k=[null,null,null];g="custom"===g?"linear":g;for(var l=0;l<h.length;++l)null!=h[l]&&(k[l]=g+"-"+h[l]);return k};a.stateGetAccessorDimensions=function(g){switch(g.selectedProjection){case "pca":var h=g.pcaComponentDimensions.slice();
break;case "tsne":h=[0,1];g.tSNEis3d&&h.push(2);break;case "umap":h=[0,1];g.umapIs3d&&h.push(2);break;case "custom":h=["x","y"];break;default:throw Error("Unexpected fallthrough");}return h}})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider.js
(function(a){function b(k,l,m,n){void 0===m&&(m=1E6);void 0===n&&(n="\n");return new Promise(function(q){function p(u,w){u=new Blob([k.slice(u,u+w)]);w=new FileReader;w.onload=function(x){x=x.target.result;t+=m;x=x.split(n);var A=v+x[0];if(1===x.length)v=A,p(t,m);else{v=x[x.length-1];l(A);for(A=1;A<x.length-1;A++)l(x[A]);t>=r?(v&&l(v),q()):p(t,m)}};w.readAsText(u)}var t=0,r=k.byteLength-1,v="";p(t,m)})}function c(k,l){void 0===l&&(l="\t");a.logging.setModalMessage("Parsing tensors...",a.TENSORS_MSG_ID);
return new Promise(function(m){var n=[],q;b(k,function(p){p=p.trim();if(""!==p){p=p.split(l);var t={metadata:{},vector:null,index:n.length,projections:null};isNaN(p[0])||q===p.length-1?(t.metadata.label=p[0],t.vector=new Float32Array(p.slice(1).map(Number))):t.vector=new Float32Array(p.map(Number));n.push(t);null==q&&(q=t.vector.length);if(q!==t.vector.length)throw a.logging.setModalMessage("Parsing failed. Vector dimensions do not match"),Error("Parsing failed");if(1>=q)throw a.logging.setModalMessage("Parsing failed. Found a vector with only one dimension?"),
Error("Parsing failed");}}).then(function(){a.logging.setModalMessage(null,a.TENSORS_MSG_ID);m(n)})})}function d(k,l){return a.util.runAsyncTask("Parsing tensors...",function(){for(var m=k.length/l,n=[],q=0,p=0;p<m;++p)n.push({metadata:{},vector:k.subarray(q,q+l),index:p,projections:null}),q+=l;return n},a.TENSORS_MSG_ID).then(function(m){a.logging.setModalMessage(null,a.TENSORS_MSG_ID);return m})}function e(k,l){var m=k.map(function(q){return{name:q,isNumeric:!0,tooManyUniqueValues:!1,min:Number.POSITIVE_INFINITY,
max:Number.NEGATIVE_INFINITY}}),n=k.map(function(){return{}});l.forEach(function(q){k.forEach(function(p,t){var r=m[t];t=n[t];var v=q[p];null!=v&&(r.tooManyUniqueValues||(v in t?t[v]++:t[v]=1,50<Object.keys(t).length&&(r.tooManyUniqueValues=!0)),isNaN(v)?r.isNumeric=!1:(q[p]=+v,r.min=Math.min(r.min,+v),r.max=Math.max(r.max,+v)))})});m.forEach(function(q,p){q.uniqueEntries=Object.keys(n[p]).map(function(t){return{label:t,count:n[p][t]}})});return m}function g(k){a.logging.setModalMessage("Parsing metadata...",
a.METADATA_MSG_ID);return new Promise(function(l){var m=[],n=!1,q=0,p=["label"];b(k,function(t){if(0!==t.trim().length){if(0===q&&(n=0<=t.indexOf("\t"))){p=t.split("\t");q++;return}q++;var r=t.split("\t"),v={};m.push(v);p.forEach(function(u,w){w=r[w];v[u]=""===w?null:w})}}).then(function(){a.logging.setModalMessage(null,a.METADATA_MSG_ID);l({stats:e(p,m),pointsInfo:m})})})}function h(k){return new Promise(function(l,m){var n=new Image;n.onload=function(){return l(n)};n.onerror=function(q){return m(q)};
n.crossOrigin="";n.src=k})}a.METADATA_MSG_ID="metadata";a.TENSORS_MSG_ID="tensors";a.retrieveTensorAsBytes=function(k,l,m){a.logging.setModalMessage("Fetching tensor values...",a.TENSORS_MSG_ID);var n=new XMLHttpRequest;n.open("GET",l);n.responseType="arraybuffer";n.onprogress=function(q){q.lengthComputable&&a.logging.setModalMessage("Fetching tensor values: "+(100*q.loaded/q.total).toFixed(1)+"%",a.TENSORS_MSG_ID)};n.onload=function(){if(200!==n.status){var q=String.fromCharCode.apply(null,new Uint8Array(n.response));
a.logging.setErrorMessage(q,"fetching tensors")}else{try{q=new Float32Array(n.response)}catch(r){a.logging.setErrorMessage(r,"parsing tensor bytes");return}var p=k.tensorShape[1],t=q.length/p;k.tensorShape[0]>t&&a.logging.setWarningMessage("Showing the first "+t.toLocaleString()+(" of "+k.tensorShape[0].toLocaleString()+" data points"));d(q,p).then(function(r){m(new a.DataSet(r))})}};n.send()};a.parseRawTensors=function(k,l){c(k).then(function(m){l(new a.DataSet(m))})};a.parseRawMetadata=function(k,
l){g(k).then(function(m){return l(m)})};a.parseTensors=c;a.parseTensorsFromFloat32Array=d;a.analyzeMetadata=e;a.parseMetadata=g;a.fetchImage=h;a.retrieveSpriteAndMetadataInfo=function(k,l,m,n){var q=Promise.resolve({});k&&(q=new Promise(function(r,v){a.logging.setModalMessage("Fetching metadata...",a.METADATA_MSG_ID);var u=new XMLHttpRequest;u.open("GET",k);u.responseType="arraybuffer";u.onreadystatechange=function(){if(4===u.readyState)if(200===u.status)r(g(u.response));else{var w=new FileReader;
w.onload=function(){a.logging.setErrorMessage(w.result,"fetching metadata");v()};w.readAsText(new Blob([u.response]))}};u.send(null)}));var p=null,t=null;l&&(p=a.logging.setModalMessage("Fetching sprite image..."),t=h(l));Promise.all([q,t]).then(function(r){p&&a.logging.setModalMessage(null,p);var v=r[0];if((r=r[1])&&(8192<r.height||8192<r.width))a.logging.setModalMessage("Error: Sprite image of dimensions "+r.width+"px x "+(r.height+"px exceeds maximum dimensions ")+"8192px x 8192px");else{v.spriteImage=
r;v.spriteMetadata=m;try{n(v)}catch(u){a.logging.setModalMessage(String(u))}}})}})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-demo.js
(function(a){var b=function(){function c(d){this.projectorConfigPath=d}c.prototype.getEmbeddingInfo=function(d){for(var e=this.projectorConfig.embeddings,g=0;g<e.length;g++){var h=e[g];if(h.tensorName===d)return h}return null};c.prototype.retrieveRuns=function(d){d(["Demo"])};c.prototype.retrieveProjectorConfig=function(d,e){var g=this,h=a.logging.setModalMessage("Fetching projector config..."),k=new XMLHttpRequest;k.open("GET",this.projectorConfigPath);k.onerror=function(l){l=l.message;null!=k.responseText&&
(l="Cannot fetch projector config, possibly a Cross-Origin request error.");a.logging.setErrorMessage(l,"fetching projector config")};k.onload=function(){var l=JSON.parse(k.responseText);a.logging.setModalMessage(null,h);g.projectorConfig=l;e(l)};k.send()};c.prototype.retrieveTensor=function(d,e,g){d=this.getEmbeddingInfo(e);var h=""+d.tensorPath;if(".bytes"===d.tensorPath.substr(-6))a.retrieveTensorAsBytes(this.getEmbeddingInfo(e),h,g);else{a.logging.setModalMessage("Fetching tensors...",a.TENSORS_MSG_ID);
var k=new XMLHttpRequest;k.open("GET",h);k.responseType="arraybuffer";k.onerror=function(){a.logging.setErrorMessage(k.responseText,"fetching tensors")};k.onload=function(){a.parseTensors(k.response).then(function(l){g(new a.DataSet(l))})};k.send()}};c.prototype.retrieveSpriteAndMetadata=function(d,e,g){d=this.getEmbeddingInfo(e);e=null;d.sprite&&d.sprite.imagePath&&(e=d.sprite.imagePath);a.retrieveSpriteAndMetadataInfo(d.metadataPath,e,d.sprite,g)};c.prototype.getBookmarks=function(d,e,g){d=this.getEmbeddingInfo(e);
var h=a.logging.setModalMessage("Fetching bookmarks..."),k=new XMLHttpRequest;k.open("GET",d.bookmarksPath);k.onerror=function(){a.logging.setErrorMessage(k.responseText)};k.onload=function(){var l=JSON.parse(k.responseText);a.logging.setModalMessage(null,h);g(l)};k.send()};return c}();a.DemoDataProvider=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-proto.js
(function(a){var b=function(){function c(d){this.dataProto=d}c.prototype.retrieveRuns=function(d){d(["proto"])};c.prototype.retrieveProjectorConfig=function(d,e){e({modelCheckpointPath:"proto",embeddings:[{tensorName:"proto",tensorShape:this.dataProto.shape,metadataPath:"proto"}]})};c.prototype.retrieveTensor=function(d,e,g){g(this.flatArrayToDataset(this.dataProto.tensor))};c.prototype.retrieveSpriteAndMetadata=function(d,e,g){var h=this,k=this.dataProto.metadata.columns.map(function(n){return n.name}),
l=this.dataProto.shape[0],m=Array(l);this.dataProto.metadata.columns.forEach(function(n){for(var q=n.numericValues||n.stringValues,p=0;p<l;p++)m[p]=m[p]||{},m[p][n.name]=q[p]});d=Promise.resolve(null);null!=this.dataProto.metadata.sprite&&(d=new Promise(function(n,q){var p=new Image;p.onload=function(){return n(p)};p.onerror=function(){return q("Failed converting base64 to an image")};p.src=h.dataProto.metadata.sprite.imageBase64}));d.then(function(n){var q={stats:a.analyzeMetadata(k,m),pointsInfo:m};
null!=n&&(q.spriteImage=n,q.spriteMetadata={singleImageDim:h.dataProto.metadata.sprite.singleImageDim,imagePath:"proto"});g(q)})};c.prototype.getBookmarks=function(d,e,g){g([])};c.prototype.flatArrayToDataset=function(d){var e=[],g=this.dataProto.shape[0],h=this.dataProto.shape[1];if(g*h!==d.length)throw"The shape doesn't match the length of the flattened array";for(var k=0;k<g;k++){var l=k*h;e.push({vector:new Float32Array(d.slice(l,l+h)),metadata:{},projections:null,index:k})}return new a.DataSet(e)};
return c}();a.ProtoDataProvider=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-server.js
(function(a){a.LIMIT_NUM_POINTS=1E5;var b=function(){function c(d){this.runProjectorConfigCache={};this.routePrefix=d}c.prototype.getEmbeddingInfo=function(d,e,g){this.retrieveProjectorConfig(d,function(h){h=h.embeddings;for(var k=0;k<h.length;k++){var l=h[k];if(l.tensorName===e){g(l);return}}g(null)})};c.prototype.retrieveRuns=function(d){var e=a.logging.setModalMessage("Fetching runs..."),g=new XMLHttpRequest;g.open("GET",this.routePrefix+"/runs");g.onerror=function(){a.logging.setErrorMessage(g.responseText,
"fetching runs")};g.onload=function(){var h=JSON.parse(g.responseText);a.logging.setModalMessage(null,e);d(h)};g.send()};c.prototype.retrieveProjectorConfig=function(d,e){var g=this;if(d in this.runProjectorConfigCache)e(this.runProjectorConfigCache[d]);else{var h=a.logging.setModalMessage("Fetching projector config..."),k=new XMLHttpRequest;k.open("GET",this.routePrefix+"/info?run\x3d"+d);k.onerror=function(){a.logging.setErrorMessage(k.responseText,"fetching projector config")};k.onload=function(){var l=
JSON.parse(k.responseText);a.logging.setModalMessage(null,h);g.runProjectorConfigCache[d]=l;e(l)};k.send()}};c.prototype.retrieveTensor=function(d,e,g){var h=this;this.getEmbeddingInfo(d,e,function(k){a.retrieveTensorAsBytes(k,h.routePrefix+"/tensor?run\x3d"+d+"\x26name\x3d"+e+("\x26num_rows\x3d"+a.LIMIT_NUM_POINTS),g)})};c.prototype.retrieveSpriteAndMetadata=function(d,e,g){var h=this;this.getEmbeddingInfo(d,e,function(k){var l=null;k.metadataPath&&(l=h.routePrefix+"/metadata?"+("run\x3d"+d+"\x26name\x3d"+
e+"\x26num_rows\x3d"+a.LIMIT_NUM_POINTS));var m=null;k.sprite&&k.sprite.imagePath&&(m=h.routePrefix+"/sprite_image?run\x3d"+d+"\x26name\x3d"+e);a.retrieveSpriteAndMetadataInfo(l,m,k.sprite,g)})};c.prototype.getBookmarks=function(d,e,g){var h=a.logging.setModalMessage("Fetching bookmarks..."),k=new XMLHttpRequest;k.open("GET",this.routePrefix+"/bookmarks?run\x3d"+d+"\x26name\x3d"+e);k.onerror=function(){a.logging.setErrorMessage(k.responseText,"fetching bookmarks")};k.onload=function(){a.logging.setModalMessage(null,
h);var l=JSON.parse(k.responseText);g(l)};k.send()};return c}();a.ServerDataProvider=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/projectorEventContext.js
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlot.js
(function(a){var b=new f.Vector3(.45,.9,1.6),c=new f.Vector3(0,0,0),d=new f.Vector3(0,0,4),e=new f.Vector3(0,0,0),g;(function(l){l[l.AREA_SELECT=0]="AREA_SELECT";l[l.CAMERA_AND_CLICK_SELECT=1]="CAMERA_AND_CLICK_SELECT"})(g=a.MouseMode||(a.MouseMode={}));var h=function(){return function(){this.orthographic=!1}}();a.CameraDef=h;var k=function(){function l(m,n){var q=this;this.container=m;this.projectorEventContext=n;this.visualizers=[];this.onCameraMoveListeners=[];this.backgroundColor=16777215;this.dimensionality=
3;this.cameraDef=null;this.isDragSequence=this.mouseIsDown=this.selecting=this.orbitAnimationOnNextCameraCreation=!1;this.getLayoutValues();this.scene=new f.Scene;this.renderer=new f.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1});this.renderer.setClearColor(16777215,1);this.container.appendChild(this.renderer.domElement);this.light=new f.PointLight(16772287,1,0);this.scene.add(this.light);this.setDimensions(3);this.recreateCamera(this.makeDefaultCameraDef(this.dimensionality));this.renderer.render(this.scene,
this.camera);this.rectangleSelector=new a.ScatterPlotRectangleSelector(this.container,function(p){return q.selectBoundingBox(p)});this.addInteractionListeners()}l.prototype.addInteractionListeners=function(){this.container.addEventListener("mousemove",this.onMouseMove.bind(this));this.container.addEventListener("mousedown",this.onMouseDown.bind(this));this.container.addEventListener("mouseup",this.onMouseUp.bind(this));this.container.addEventListener("click",this.onClick.bind(this));window.addEventListener("keydown",
this.onKeyDown.bind(this),!1);window.addEventListener("keyup",this.onKeyUp.bind(this),!1)};l.prototype.addCameraControlsEventListeners=function(m){var n=this;m.addEventListener("start",function(){n.stopOrbitAnimation();n.onCameraMoveListeners.forEach(function(q){return q(n.camera.position,m.target)})});m.addEventListener("change",function(){n.render()});m.addEventListener("end",function(){})};l.prototype.makeOrbitControls=function(m,n,q){null!=this.orbitCameraControls&&this.orbitCameraControls.dispose();
var p=new f.OrbitControls(m,this.renderer.domElement);p.target0=new f.Vector3(n.target[0],n.target[1],n.target[2]);p.position0=(new f.Vector3).copy(m.position);p.zoom0=n.zoom;p.enableRotate=q;p.autoRotate=!1;p.rotateSpeed=1;q?(p.mouseButtons.ORBIT=f.MOUSE.LEFT,p.mouseButtons.PAN=f.MOUSE.RIGHT):(p.mouseButtons.ORBIT=null,p.mouseButtons.PAN=f.MOUSE.LEFT);p.reset();this.camera=m;this.orbitCameraControls=p;this.addCameraControlsEventListeners(this.orbitCameraControls)};l.prototype.makeCamera3D=function(m,
n,q){n=new f.PerspectiveCamera(70,n/q,.01,100);n.position.set(m.position[0],m.position[1],m.position[2]);n.lookAt(new f.Vector3(m.target[0],m.target[1],m.target[2]));n.zoom=m.zoom;n.updateProjectionMatrix();this.camera=n;this.makeOrbitControls(n,m,!0)};l.prototype.makeCamera2D=function(m,n,q){var p=new f.Vector3(m.target[0],m.target[1],m.target[2]);n/=q;q=-1.2;var t=1.2,r=-1.2,v=1.2;1<n?(q*=n,t*=n):(v/=n,r/=n);n=new f.OrthographicCamera(q,t,v,r,-1E3,1E3);n.position.set(m.position[0],m.position[1],
m.position[2]);n.up=new f.Vector3(0,1,0);n.lookAt(p);n.zoom=m.zoom;n.updateProjectionMatrix();this.camera=n;this.makeOrbitControls(n,m,!1)};l.prototype.makeDefaultCameraDef=function(m){var n=new h;n.orthographic=2===m;n.zoom=1;n.orthographic?(n.position=[d.x,d.y,d.z],n.target=[e.x,e.y,e.z]):(n.position=[b.x,b.y,b.z],n.target=[c.x,c.y,c.z]);return n};l.prototype.recreateCamera=function(m){m.orthographic?this.makeCamera2D(m,this.width,this.height):this.makeCamera3D(m,this.width,this.height);this.orbitCameraControls.minDistance=
.05;this.orbitCameraControls.maxDistance=10;this.orbitCameraControls.update();this.orbitAnimationOnNextCameraCreation&&this.startOrbitAnimation()};l.prototype.onClick=function(m,n){void 0===n&&(n=!0);m&&this.selecting||(!this.isDragSequence&&n&&this.projectorEventContext.notifySelectionChanged(null!=this.nearestPoint?[this.nearestPoint]:[]),this.isDragSequence=!1,this.render())};l.prototype.onMouseDown=function(m){this.isDragSequence=!1;this.mouseIsDown=!0;this.selecting?(this.orbitCameraControls.enabled=
!1,this.rectangleSelector.onMouseDown(m.offsetX,m.offsetY),this.setNearestPointToMouse(m)):!m.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===f.MOUSE.RIGHT?(this.orbitCameraControls.mouseButtons.ORBIT=f.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=f.MOUSE.RIGHT):m.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===f.MOUSE.LEFT&&(this.orbitCameraControls.mouseButtons.ORBIT=f.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=f.MOUSE.LEFT)};
l.prototype.onMouseUp=function(){this.selecting&&(this.orbitCameraControls.enabled=!0,this.rectangleSelector.onMouseUp(),this.render());this.mouseIsDown=!1};l.prototype.onMouseMove=function(m){this.isDragSequence=this.mouseIsDown;this.selecting&&this.mouseIsDown?(this.rectangleSelector.onMouseMove(m.offsetX,m.offsetY),this.render()):this.mouseIsDown||(this.setNearestPointToMouse(m),this.projectorEventContext.notifyHoverOverPoint(this.nearestPoint))};l.prototype.onKeyDown=function(m){17===m.keyCode&&
this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=f.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=f.MOUSE.LEFT);16===m.keyCode&&(this.selecting=!0,this.container.style.cursor="crosshair")};l.prototype.onKeyUp=function(m){17===m.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=f.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=f.MOUSE.RIGHT);16===m.keyCode&&(this.selecting=this.getMouseMode()===g.AREA_SELECT,this.selecting||(this.container.style.cursor=
"default"),this.render())};l.prototype.getPointIndicesFromPickingTexture=function(m){if(null==this.worldSpacePointPositions)return null;var n=this.worldSpacePointPositions.length/3,q=window.devicePixelRatio||1,p=Math.floor(m.width*q),t=Math.floor(m.height*q),r=new Uint8Array(p*t*4);this.renderer.readRenderTargetPixels(this.pickingTexture,Math.floor(m.x*q),this.pickingTexture.height-Math.floor(m.y*q),p,t,r);m=new Uint8Array(this.worldSpacePointPositions.length);for(q=0;q<p*t;q++){var v=r[4*q]<<16|
r[4*q+1]<<8|r[4*q+2];16777215!==v&&v<n&&(m[v]=1)}n=[];for(q=0;q<m.length;q++)1===m[q]&&n.push(q);return n};l.prototype.selectBoundingBox=function(m){m=this.getPointIndicesFromPickingTexture(m);this.projectorEventContext.notifySelectionChanged(m)};l.prototype.setNearestPointToMouse=function(m){null==this.pickingTexture?this.nearestPoint=null:(m=this.getPointIndicesFromPickingTexture({x:m.offsetX,y:m.offsetY,width:1,height:1}),this.nearestPoint=null!=m?m[0]:null)};l.prototype.getLayoutValues=function(){this.width=
this.container.offsetWidth;this.height=Math.max(1,this.container.offsetHeight);return[this.width,this.height]};l.prototype.sceneIs3D=function(){return 3===this.dimensionality};l.prototype.remove3dAxisFromScene=function(){var m=this.scene.getObjectByName("axes");null!=m&&this.scene.remove(m);return m};l.prototype.add3dAxis=function(){var m=new f.AxisHelper;m.name="axes";this.scene.add(m)};l.prototype.setDimensions=function(m){if(2!==m&&3!==m)throw new RangeError("dimensionality must be 2 or 3");this.dimensionality=
m;var n=this.cameraDef||this.makeDefaultCameraDef(m);this.recreateCamera(n);this.remove3dAxisFromScene();3===m&&this.add3dAxis()};l.prototype.getCameraDef=function(){var m=new h,n=this.camera.position,q=this.orbitCameraControls.target;m.orthographic=!this.sceneIs3D();m.position=[n.x,n.y,n.z];m.target=[q.x,q.y,q.z];m.zoom=this.camera.zoom;return m};l.prototype.setCameraParametersForNextCameraCreation=function(m,n){this.cameraDef=m;this.orbitAnimationOnNextCameraCreation=n};l.prototype.getCameraPosition=
function(){var m=this.camera.position;return[m.x,m.y,m.z]};l.prototype.getCameraTarget=function(){var m=this.orbitCameraControls.target;return[m.x,m.y,m.z]};l.prototype.setCameraPositionAndTarget=function(m,n){this.stopOrbitAnimation();this.camera.position.set(m[0],m[1],m[2]);this.orbitCameraControls.target.set(n[0],n[1],n[2]);this.orbitCameraControls.update();this.render()};l.prototype.startOrbitAnimation=function(){this.sceneIs3D()&&(null!=this.orbitAnimationId&&this.stopOrbitAnimation(),this.orbitCameraControls.autoRotate=
!0,this.orbitCameraControls.rotateSpeed=7,this.updateOrbitAnimation())};l.prototype.updateOrbitAnimation=function(){var m=this;this.orbitCameraControls.update();this.orbitAnimationId=requestAnimationFrame(function(){return m.updateOrbitAnimation()})};l.prototype.stopOrbitAnimation=function(){this.orbitCameraControls.autoRotate=!1;this.orbitCameraControls.rotateSpeed=1;null!=this.orbitAnimationId&&(cancelAnimationFrame(this.orbitAnimationId),this.orbitAnimationId=null)};l.prototype.addVisualizer=function(m){this.scene&&
m.setScene(this.scene);m.onResize(this.width,this.height);m.onPointPositionsChanged(this.worldSpacePointPositions);this.visualizers.push(m)};l.prototype.removeAllVisualizers=function(){this.visualizers.forEach(function(m){return m.dispose()});this.visualizers=[]};l.prototype.setPointPositions=function(m){this.worldSpacePointPositions=m;this.visualizers.forEach(function(n){return n.onPointPositionsChanged(m)})};l.prototype.render=function(){var m=this.camera.position.clone();m.x+=1;m.y+=1;this.light.position.set(m.x,
m.y,m.z);m=this.camera instanceof f.PerspectiveCamera?a.CameraType.Perspective:a.CameraType.Orthographic;var n=[0,0];null!=this.worldSpacePointPositions&&(n=a.util.getNearFarPoints(this.worldSpacePointPositions,this.camera.position,this.orbitCameraControls.target));var q=new a.RenderContext(this.camera,m,this.orbitCameraControls.target,this.width,this.height,n[0],n[1],this.backgroundColor,this.pointColors,this.pointScaleFactors,this.labels,this.polylineColors,this.polylineOpacities,this.polylineWidths);
this.visualizers.forEach(function(p){return p.onPickingRender(q)});m=this.remove3dAxisFromScene();this.renderer.render(this.scene,this.camera,this.pickingTexture);null!=m&&this.scene.add(m);this.visualizers.forEach(function(p){return p.onRender(q)});this.renderer.render(this.scene,this.camera)};l.prototype.setMouseMode=function(m){this.mouseMode=m;m===g.AREA_SELECT?(this.selecting=!0,this.container.style.cursor="crosshair"):(this.selecting=!1,this.container.style.cursor="default")};l.prototype.setPointColors=
function(m){this.pointColors=m};l.prototype.setPointScaleFactors=function(m){this.pointScaleFactors=m};l.prototype.setLabels=function(m){this.labels=m};l.prototype.setPolylineColors=function(m){this.polylineColors=m};l.prototype.setPolylineOpacities=function(m){this.polylineOpacities=m};l.prototype.setPolylineWidths=function(m){this.polylineWidths=m};l.prototype.getMouseMode=function(){return this.mouseMode};l.prototype.resetZoom=function(){this.recreateCamera(this.makeDefaultCameraDef(this.dimensionality));
this.render()};l.prototype.setDayNightMode=function(m){var n=this.container.querySelectorAll("canvas");m=m?"invert(100%)":null;for(var q=0;q<n.length;q++)n[q].style.filter=m};l.prototype.resize=function(m){void 0===m&&(m=!0);var n=[this.width,this.height],q=n[0];n=n[1];var p=this.getLayoutValues(),t=p[0],r=p[1];3===this.dimensionality?(p=this.camera,p.aspect=t/r):(p=this.camera,q=t/q*(p.right-p.left)/2,n=r/n*(p.top-p.bottom)/2,p.top=n,p.bottom=-n,p.left=-q,p.right=q);p.updateProjectionMatrix();this.renderer.setPixelRatio();
this.renderer.setSize(t,r);q=this.renderer.getSize();n=this.renderer.getPixelRatio();this.pickingTexture=new f.WebGLRenderTarget(q.width*n,q.height*n);this.pickingTexture.texture.minFilter=f.LinearFilter;this.visualizers.forEach(function(v){return v.onResize(t,r)});m&&this.render()};l.prototype.onCameraMove=function(m){this.onCameraMoveListeners.push(m)};l.prototype.clickOnPoint=function(m){this.nearestPoint=m;this.onClick(null,!1)};return l}();a.ScatterPlot=k})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizer3DLabels.js
(function(a){var b=function(){function c(){}c.prototype.createGlyphTexture=function(){var d=document.createElement("canvas");d.width=8192;d.height=80;var e=d.getContext("2d");e.font="bold 60px roboto";e.textBaseline="top";e.fillStyle="white";e.rect(0,0,d.width,d.height);e.fill();e.fillStyle="black";for(var g=e.measureText(" ").width,h=new Float32Array(256),k=new Float32Array(256),l=0,m=0;256>m;m++){var n=" "+String.fromCharCode(m),q=e.measureText(n).width;h[m]=q-g;k[m]=l;e.fillText(n,l-g,0);l+=q}return{texture:a.util.createTexture(d),
lengths:h,offsets:k}};c.prototype.processLabelVerts=function(d){var e=0;this.labelVertexMap=[];for(var g=0;g<d;g++){for(var h=this.labelStrings[g],k=[],l=0;l<h.length;l++){for(var m=0;6>m;m++)k.push(6*e+m);e++}this.labelVertexMap.push(k)}this.totalVertexCount=6*e};c.prototype.createColorBuffers=function(d){function e(l){var m=new f.Color(l);h.labelVertexMap[l].forEach(function(n){g.pickingColors[3*n]=m.r;g.pickingColors[3*n+1]=m.g;g.pickingColors[3*n+2]=m.b;g.renderColors[3*n]=1;g.renderColors[3*
n+1]=1;g.renderColors[3*n+2]=1})}var g=this;this.pickingColors=new Float32Array(3*this.totalVertexCount);this.renderColors=new Float32Array(3*this.totalVertexCount);for(var h=this,k=0;k<d;k++)e(k)};c.prototype.createLabels=function(){var d=this;if(null!=this.labelStrings&&null!=this.worldSpacePointPositions){var e=this.worldSpacePointPositions.length/3;if(e===this.labelStrings.length){this.glyphTexture=this.createGlyphTexture();this.uniforms={texture:{type:"t"},picking:{type:"bool"}};this.material=
new f.ShaderMaterial({uniforms:this.uniforms,transparent:!0,vertexShader:"\n    attribute vec2 posObj;\n    attribute vec3 color;\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      vUv \x3d uv;\n      vColor \x3d color;\n\n      // Rotate label to face camera.\n\n      vec4 vRight \x3d vec4(\n        modelViewMatrix[0][0], modelViewMatrix[1][0], modelViewMatrix[2][0], 0);\n\n      vec4 vUp \x3d vec4(\n        modelViewMatrix[0][1], modelViewMatrix[1][1], modelViewMatrix[2][1], 0);\n\n      vec4 vAt \x3d -vec4(\n        modelViewMatrix[0][2], modelViewMatrix[1][2], modelViewMatrix[2][2], 0);\n\n      mat4 pointToCamera \x3d mat4(vRight, vUp, vAt, vec4(0, 0, 0, 1));\n\n      vec2 scaledPos \x3d posObj * 0.0125 * 2.2;\n\n      vec4 posRotated \x3d pointToCamera * vec4(scaledPos, 0, 1);\n      vec4 mvPosition \x3d modelViewMatrix * (vec4(position, 0) + posRotated);\n      gl_Position \x3d projectionMatrix * mvPosition;\n    }",
fragmentShader:"\n    uniform sampler2D texture;\n    uniform bool picking;\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      if (picking) {\n        gl_FragColor \x3d vec4(vColor, 1.0);\n      } else {\n        vec4 fromTexture \x3d texture2D(texture, vUv);\n        gl_FragColor \x3d vec4(vColor, 1.0) * fromTexture;\n      }\n    }"});this.processLabelVerts(e);this.createColorBuffers(e);this.positions=new f.BufferAttribute(new Float32Array(3*this.totalVertexCount),3);var g=
new Float32Array(2*this.totalVertexCount),h=new Float32Array(3*this.totalVertexCount),k=new f.BufferAttribute(new Float32Array(3*this.totalVertexCount),2);g=new f.BufferAttribute(g,2);h=new f.BufferAttribute(h,3);this.geometry=new f.BufferGeometry;this.geometry.addAttribute("posObj",k);this.geometry.addAttribute("position",this.positions);this.geometry.addAttribute("uv",g);this.geometry.addAttribute("color",h);var l=0;for(h=0;h<e;h++){for(var m=this.labelStrings[h],n=0,q=0;q<m.length;q++){var p=m.charCodeAt(q);
n+=this.glyphTexture.lengths[p]}n/=-2;for(q=0;q<m.length;q++){p=m.charCodeAt(q);var t=this.glyphTexture.lengths[p],r=(n+t)/80,v=n/80;k.setXY(6*l,v,0);k.setXY(6*l+1,r,0);k.setXY(6*l+2,v,1);k.setXY(6*l+3,v,1);k.setXY(6*l+4,r,0);k.setXY(6*l+5,r,1);r=this.glyphTexture.offsets[p];p=this.glyphTexture.offsets[p]+t;r/=8192;p/=8192;g.setXY(6*l,r,1);g.setXY(6*l+1,p,1);g.setXY(6*l+2,r,0);g.setXY(6*l+3,r,0);g.setXY(6*l+4,p,1);g.setXY(6*l+5,p,0);l++;n+=t}}k=function(w){var x=a.util.vector3FromPackedArray(u.worldSpacePointPositions,
w);u.labelVertexMap[w].forEach(function(A){d.positions.setXYZ(A,x.x,x.y,x.z)})};var u=this;for(h=0;h<e;h++)k(h);this.labelsMesh=new f.Mesh(this.geometry,this.material);this.labelsMesh.frustumCulled=!1;this.scene.add(this.labelsMesh)}}};c.prototype.colorLabels=function(d){if(null!=this.labelStrings&&null!=this.geometry&&null!=d){var e=this.geometry.getAttribute("color");e.array=this.renderColors;for(var g=d.length/3,h=0,k=0;k<g;++k){for(var l=new f.Color(d[h],d[h+1],d[h+2]),m=this.labelVertexMap[k].length,
n=0;n<m;++n)e.setXYZ(this.labelVertexMap[k][n],l.r,l.g,l.b);h+=3}e.needsUpdate=!0}};c.prototype.setScene=function(d){this.scene=d};c.prototype.dispose=function(){this.labelsMesh&&(this.scene&&this.scene.remove(this.labelsMesh),this.labelsMesh=null);this.geometry&&(this.geometry.dispose(),this.geometry=null);null!=this.glyphTexture&&null!=this.glyphTexture.texture&&(this.glyphTexture.texture.dispose(),this.glyphTexture.texture=null)};c.prototype.onPickingRender=function(){null==this.geometry&&this.createLabels();
if(null!=this.geometry){this.material.uniforms.texture.value=this.glyphTexture.texture;this.material.uniforms.picking.value=!0;var d=this.geometry.getAttribute("color");d.array=this.pickingColors;d.needsUpdate=!0}};c.prototype.onRender=function(d){null==this.geometry&&this.createLabels();null!=this.geometry&&(this.colorLabels(d.pointColors),this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!1,d=this.geometry.getAttribute("color"),d.array=this.renderColors,
d.needsUpdate=!0)};c.prototype.onPointPositionsChanged=function(d){this.worldSpacePointPositions=d;this.dispose()};c.prototype.setLabelStrings=function(d){this.labelStrings=d;this.dispose()};c.prototype.onResize=function(){};return c}();a.ScatterPlotVisualizer3DLabels=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerCanvasLabels.js
(function(a){var b=function(){function c(d){this.labelsActive=!0;this.canvas=document.createElement("canvas");d.appendChild(this.canvas);this.gc=this.canvas.getContext("2d");this.canvas.style.position="absolute";this.canvas.style.left="0";this.canvas.style.top="0";this.canvas.style.pointerEvents="none"}c.prototype.removeAllLabels=function(){this.gc.clearRect(0,0,this.canvas.width*window.devicePixelRatio,this.canvas.height*window.devicePixelRatio)};c.prototype.makeLabels=function(d){if(null!=d.labels&&
0!==d.labels.pointIndices.length&&null!=this.worldSpacePointPositions){var e=d.labels,g=d.cameraType===a.CameraType.Perspective,h=parseInt(this.gc.font,10),k=window.devicePixelRatio;var l=this.canvas.width*k;var m=this.canvas.height*k;l=new a.CollisionGrid({loX:0,hiX:l,loY:0,hiY:m},l/25,m/50);m=d3.scalePow().exponent(Math.E).domain([d.farthestCameraSpacePointZ,d.nearestCameraSpacePointZ]).range([.1,1]);var n=d.camera.position,q=n.clone().sub(d.cameraTarget),p=new f.Vector3;this.gc.textBaseline="middle";
this.gc.miterLimit=2;for(var t=Math.min(1E4,e.pointIndices.length),r=0;r<t;++r){var v=a.util.vector3FromPackedArray(this.worldSpacePointPositions,e.pointIndices[r]);p.copy(n).sub(v);if(!(0>q.dot(p))){var u=a.util.vector3DToScreenCoords(d.camera,d.screenWidth,d.screenHeight,v);v=u[0];u=u[1];v+=4;var w={loX:v-2,hiX:v+1+2,loY:u-h/2-2,hiY:u+h/2+2};if(l.insert(w,!0)){var x=e.labelStrings[r];this.gc.font=e.defaultFontSize*e.scaleFactors[r]*k+"px roboto";w.hiX+=this.gc.measureText(x).width-1;l.insert(w)&&
(w=1,g&&1===e.useSceneOpacityFlags[r]&&(w=m(p.length())),this.gc.fillStyle=this.styleStringFromPackedRgba(e.fillColors,r,w),this.gc.strokeStyle=this.styleStringFromPackedRgba(e.strokeColors,r,w),this.gc.lineWidth=3,this.gc.strokeText(x,v,u),this.gc.lineWidth=6,this.gc.fillText(x,v,u))}}}}};c.prototype.styleStringFromPackedRgba=function(d,e,g){e*=3;return"rgba("+d[e]+","+d[e+1]+","+d[e+2]+","+g+")"};c.prototype.onResize=function(d,e){var g=window.devicePixelRatio;this.canvas.width=d*g;this.canvas.height=
e*g;this.canvas.style.width=d+"px";this.canvas.style.height=e+"px"};c.prototype.dispose=function(){this.removeAllLabels();this.gc=this.canvas=null};c.prototype.onPointPositionsChanged=function(d){this.worldSpacePointPositions=d;this.removeAllLabels()};c.prototype.onRender=function(d){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(d))};c.prototype.setScene=function(){};c.prototype.onPickingRender=function(){};return c}();a.ScatterPlotVisualizerCanvasLabels=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerPolylines.js
(function(a){var b=function(){function c(){this.polylinePositionBuffer={};this.polylineColorBuffer={}}c.prototype.updateSequenceIndicesInDataSet=function(d){for(var e=0;e<d.sequences.length;e++)for(var g=d.sequences[e],h=0;h<g.pointIndices.length-1;h++)d.points[g.pointIndices[h]].sequenceIndex=e,d.points[g.pointIndices[h+1]].sequenceIndex=e};c.prototype.createPolylines=function(d){if(this.dataSet&&this.dataSet.sequences){this.updateSequenceIndicesInDataSet(this.dataSet);this.polylines=[];for(var e=
0;e<this.dataSet.sequences.length;e++){var g=new f.BufferGeometry;g.addAttribute("position",this.polylinePositionBuffer[e]);g.addAttribute("color",this.polylineColorBuffer[e]);var h=new f.LineBasicMaterial({linewidth:1,opacity:1,transparent:!0,vertexColors:f.VertexColors});g=new f.LineSegments(g,h);g.frustumCulled=!1;this.polylines.push(g);d.add(g)}}};c.prototype.dispose=function(){if(null!=this.polylines){for(var d=0;d<this.polylines.length;d++)this.scene.remove(this.polylines[d]),this.polylines[d].geometry.dispose();
this.polylines=null;this.polylinePositionBuffer={};this.polylineColorBuffer={}}};c.prototype.setScene=function(d){this.scene=d};c.prototype.setDataSet=function(d){this.dataSet=d};c.prototype.onPointPositionsChanged=function(d){null!=d&&null==this.polylines||this.dispose();if(null!=d&&null!=this.dataSet){for(var e=0;e<this.dataSet.sequences.length;e++){var g=this.dataSet.sequences[e];g=2*(g.pointIndices.length-1);this.polylinePositionBuffer[e]=new f.BufferAttribute(new Float32Array(3*g),3);this.polylineColorBuffer[e]=
new f.BufferAttribute(new Float32Array(3*g),3)}for(e=0;e<this.dataSet.sequences.length;e++){g=this.dataSet.sequences[e];for(var h=0,k=0;k<g.pointIndices.length-1;k++){var l=a.util.vector3FromPackedArray(d,g.pointIndices[k]),m=a.util.vector3FromPackedArray(d,g.pointIndices[k+1]);this.polylinePositionBuffer[e].setXYZ(h,l.x,l.y,l.z);this.polylinePositionBuffer[e].setXYZ(h+1,m.x,m.y,m.z);h+=2}this.polylinePositionBuffer[e].needsUpdate=!0}null==this.polylines&&this.createPolylines(this.scene)}};c.prototype.onRender=
function(d){if(null!=this.polylines)for(var e=0;e<this.polylines.length;e++)this.polylines[e].material.opacity=d.polylineOpacities[e],this.polylines[e].material.linewidth=d.polylineWidths[e],this.polylineColorBuffer[e].array=d.polylineColors[e],this.polylineColorBuffer[e].needsUpdate=!0};c.prototype.onPickingRender=function(){};c.prototype.onResize=function(){};return c}();a.ScatterPlotVisualizerPolylines=b})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerSprites.js
(function(a){var b="\n  // Index of the specific vertex (passed in as bufferAttribute), and the\n  // variable that will be used to pass it to the fragment shader.\n  attribute float spriteIndex;\n  attribute vec3 color;\n  attribute float scaleFactor;\n\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n\n  uniform bool sizeAttenuation;\n  uniform float pointSize;\n  uniform float spritesPerRow;\n  uniform float spritesPerColumn;\n\n  void main() {\n    // Pass index and color values to fragment shader.\n    vColor \x3d color;\n    xyIndex \x3d vec2(mod(spriteIndex, spritesPerRow),\n              floor(spriteIndex / spritesPerColumn));\n\n    // Transform current vertex by modelViewMatrix (model world position and\n    // camera world position matrix).\n    vec4 cameraSpacePos \x3d modelViewMatrix * vec4(position, 1.0);\n\n    // Project vertex in camera-space to screen coordinates using the camera's\n    // projection matrix.\n    gl_Position \x3d projectionMatrix * cameraSpacePos;\n\n    // Create size attenuation (if we're in 3D mode) by making the size of\n    // each point inversly proportional to its distance to the camera.\n    float outputPointSize \x3d pointSize;\n    if (sizeAttenuation) {\n      outputPointSize \x3d -pointSize / cameraSpacePos.z;\n    } else {  // Create size attenuation (if we're in 2D mode)\n      const float PI \x3d 3.1415926535897932384626433832795;\n      const float minScale \x3d 0.1;  // minimum scaling factor\n      const float outSpeed \x3d 2.0;  // shrink speed when zooming out\n      const float outNorm \x3d (1. - minScale) / atan(outSpeed);\n      const float maxScale \x3d 15.0;  // maximum scaling factor\n      const float inSpeed \x3d 0.02;  // enlarge speed when zooming in\n      const float zoomOffset \x3d 0.3;  // offset zoom pivot\n      float zoom \x3d projectionMatrix[0][0] + zoomOffset;  // zoom pivot\n      float scale \x3d zoom \x3c 1. ? 1. + outNorm * atan(outSpeed * (zoom - 1.)) :\n                    1. + 2. / PI * (maxScale - 1.) * atan(inSpeed * (zoom - 1.));\n      outputPointSize \x3d pointSize * scale;\n    }\n\n    gl_PointSize \x3d\n      max(outputPointSize * scaleFactor, "+
(5).toFixed(1)+");\n  }",c="\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n\n  uniform sampler2D texture;\n  uniform float spritesPerRow;\n  uniform float spritesPerColumn;\n  uniform bool isImage;\n\n  "+f.ShaderChunk.common+"\n  "+f.ShaderChunk.fog_pars_fragment+"\n  \n  bool point_in_unit_circle(vec2 spriteCoord) {\n    vec2 centerToP \x3d spriteCoord - vec2(0.5, 0.5);\n    return dot(centerToP, centerToP) \x3c (0.5 * 0.5);\n  }\n\n  bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n    vec3 v0 \x3d vec3(0, 1, 0);\n    vec3 v1 \x3d vec3(0.5, 0, 0);\n    vec3 v2 \x3d vec3(1, 1, 0);\n    vec3 p \x3d vec3(spriteCoord, 0);\n    float p_in_v0_v1 \x3d cross(v1 - v0, p - v0).z;\n    float p_in_v1_v2 \x3d cross(v2 - v1, p - v1).z;\n    return (p_in_v0_v1 \x3e 0.0) \x26\x26 (p_in_v1_v2 \x3e 0.0);\n  }\n\n  bool point_in_unit_square(vec2 spriteCoord) {\n    return true;\n  }\n\n\n  void main() {\n    if (isImage) {\n      // Coordinates of the vertex within the entire sprite image.\n      vec2 coords \x3d\n        (gl_PointCoord + xyIndex) / vec2(spritesPerRow, spritesPerColumn);\n      gl_FragColor \x3d vec4(vColor, 1.0) * texture2D(texture, coords);\n    } else {\n      bool inside \x3d point_in_unit_circle(gl_PointCoord);\n      if (!inside) {\n        discard;\n      }\n      gl_FragColor \x3d vec4(vColor, 1);\n    }\n    "+
f.ShaderChunk.fog_fragment+"\n  }",d=function(){function e(){this.texture=null;this.standinTextureForPoints=a.util.createTexture(document.createElement("canvas"));this.renderMaterial=this.createRenderMaterial(!1);this.pickingMaterial=this.createPickingMaterial()}e.prototype.createTextureFromSpriteAtlas=function(g,h,k){this.texture=a.util.createTexture(g);this.spritesPerRow=g.width/h[0];this.spritesPerColumn=g.height/h[1];this.spriteDimensions=h;this.spriteIndexBufferAttribute=new f.BufferAttribute(k,
1);null!=this.points&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute)};e.prototype.createUniforms=function(){return{texture:{type:"t"},spritesPerRow:{type:"f"},spritesPerColumn:{type:"f"},fogColor:{type:"c"},fogNear:{type:"f"},fogFar:{type:"f"},isImage:{type:"bool"},sizeAttenuation:{type:"bool"},pointSize:{type:"f"}}};e.prototype.createRenderMaterial=function(g){return new f.ShaderMaterial({uniforms:this.createUniforms(),vertexShader:b,fragmentShader:c,transparent:!g,
depthTest:g,depthWrite:g,fog:!0,blending:f.MultiplyBlending})};e.prototype.createPickingMaterial=function(){return new f.ShaderMaterial({uniforms:this.createUniforms(),vertexShader:b,fragmentShader:"\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n  uniform bool isImage;\n\n  \n  bool point_in_unit_circle(vec2 spriteCoord) {\n    vec2 centerToP \x3d spriteCoord - vec2(0.5, 0.5);\n    return dot(centerToP, centerToP) \x3c (0.5 * 0.5);\n  }\n\n  bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n    vec3 v0 \x3d vec3(0, 1, 0);\n    vec3 v1 \x3d vec3(0.5, 0, 0);\n    vec3 v2 \x3d vec3(1, 1, 0);\n    vec3 p \x3d vec3(spriteCoord, 0);\n    float p_in_v0_v1 \x3d cross(v1 - v0, p - v0).z;\n    float p_in_v1_v2 \x3d cross(v2 - v1, p - v1).z;\n    return (p_in_v0_v1 \x3e 0.0) \x26\x26 (p_in_v1_v2 \x3e 0.0);\n  }\n\n  bool point_in_unit_square(vec2 spriteCoord) {\n    return true;\n  }\n\n\n  void main() {\n    xyIndex; // Silence 'unused variable' warning.\n    if (isImage) {\n      gl_FragColor \x3d vec4(vColor, 1);\n    } else {\n      bool inside \x3d point_in_unit_circle(gl_PointCoord);\n      if (!inside) {\n        discard;\n      }\n      gl_FragColor \x3d vec4(vColor, 1);\n    }\n  }",
transparent:!0,depthTest:!0,depthWrite:!0,fog:!1,blending:f.NormalBlending})};e.prototype.createPointSprites=function(g,h){h=this.createGeometry(null!=h?h.length/3:0);this.fog=new f.Fog(16777215);this.points=new f.Points(h,this.renderMaterial);this.points.frustumCulled=!1;null!=this.spriteIndexBufferAttribute&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute);g.add(this.points)};e.prototype.calculatePointSize=function(g){if(null!=this.texture)return g?30:this.spriteDimensions[0];
var h=200/Math.log(null!=this.worldSpacePointPositions?this.worldSpacePointPositions.length/3:1)/Math.log(8);return g?h:h/1.5};e.prototype.createGeometry=function(g){this.pickingColors=new Float32Array(3*g);for(var h=0,k=0;k<g;k++){var l=new f.Color(k);this.pickingColors[h++]=l.r;this.pickingColors[h++]=l.g;this.pickingColors[h++]=l.b}g=new f.BufferGeometry;g.addAttribute("position",new f.BufferAttribute(null,3));g.addAttribute("color",new f.BufferAttribute(null,3));g.addAttribute("scaleFactor",new f.BufferAttribute(null,
1));return g};e.prototype.setFogDistances=function(g,h,k){g?(g=this.worldSpacePointPositions.length/3,this.fog.near=h,this.fog.far=k*(2-Math.min(g,5E3)/5E3)):(this.fog.near=Infinity,this.fog.far=Infinity)};e.prototype.dispose=function(){this.disposeGeometry();this.disposeTextureAtlas()};e.prototype.disposeGeometry=function(){null!=this.points&&(this.scene.remove(this.points),this.points.geometry.dispose(),this.worldSpacePointPositions=this.points=null)};e.prototype.disposeTextureAtlas=function(){null!=
this.texture&&this.texture.dispose();this.pickingMaterial=this.renderMaterial=this.texture=null};e.prototype.setScene=function(g){this.scene=g};e.prototype.setSpriteAtlas=function(g,h,k){this.disposeTextureAtlas();this.createTextureFromSpriteAtlas(g,h,k);this.renderMaterial=this.createRenderMaterial(!0);this.pickingMaterial=this.createPickingMaterial()};e.prototype.clearSpriteAtlas=function(){this.disposeTextureAtlas();this.renderMaterial=this.createRenderMaterial(!1);this.pickingMaterial=this.createPickingMaterial()};
e.prototype.onPointPositionsChanged=function(g){if(null==g||0===g.length)this.dispose();else{null!=this.points&&this.worldSpacePointPositions.length!==g.length&&this.disposeGeometry();this.worldSpacePointPositions=g;null==this.points&&this.createPointSprites(this.scene,g);var h=this.points.geometry.getAttribute("position");h.array=g;h.needsUpdate=!0}};e.prototype.onPickingRender=function(g){if(null!=this.points){var h=g.cameraType===a.CameraType.Perspective;this.pickingMaterial.uniforms.spritesPerRow.value=
this.spritesPerRow;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerColumn;this.pickingMaterial.uniforms.sizeAttenuation.value=h;this.pickingMaterial.uniforms.pointSize.value=this.calculatePointSize(h);this.points.material=this.pickingMaterial;h=this.points.geometry.getAttribute("color");h.array=this.pickingColors;h.needsUpdate=!0;h=this.points.geometry.getAttribute("scaleFactor");h.array=g.pointScaleFactors;h.needsUpdate=!0}};e.prototype.onRender=function(g){if(this.points){var h=
g.camera instanceof f.PerspectiveCamera;this.setFogDistances(h,g.nearestCameraSpacePointZ,g.farthestCameraSpacePointZ);this.scene.fog=this.fog;this.scene.fog.color=new f.Color(g.backgroundColor);this.renderMaterial.uniforms.fogColor.value=this.scene.fog.color;this.renderMaterial.uniforms.fogNear.value=this.fog.near;this.renderMaterial.uniforms.fogFar.value=this.fog.far;this.renderMaterial.uniforms.spritesPerRow.value=this.spritesPerRow;this.renderMaterial.uniforms.spritesPerColumn.value=this.spritesPerColumn;
this.renderMaterial.uniforms.isImage.value=null!=this.texture;this.renderMaterial.uniforms.texture.value=null!=this.texture?this.texture:this.standinTextureForPoints;this.renderMaterial.uniforms.sizeAttenuation.value=h;this.renderMaterial.uniforms.pointSize.value=this.calculatePointSize(h);this.points.material=this.renderMaterial;h=this.points.geometry.getAttribute("color");this.renderColors=g.pointColors;h.array=this.renderColors;h.needsUpdate=!0;h=this.points.geometry.getAttribute("scaleFactor");
h.array=g.pointScaleFactors;h.needsUpdate=!0}};e.prototype.onResize=function(){};return e}();a.ScatterPlotVisualizerSprites=d})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizer.js
</script>
<script>//~~WEBPATH~~/vz-projector/projectorScatterPlotAdapter.js
(function(a){function b(l,m,n,q,p){l[3*m]=n;l[3*m+1]=q;l[3*m+2]=p}function c(l){l=new f.Color(l);return[255*l.r|0,255*l.g|0,255*l.b|0]}function d(l,m){l=d3.hsl(60+300*l/m,1,.3).rgb();return new f.Color(l.r/255,l.g/255,l.b/255)}function e(l,m,n){return l===a.vector.dist?n/m:1-m}function g(l,m,n){return h(e(l,m,n))}var h=d3.scaleLinear().domain([1,.7,.4]).range(["hsl(285, 80%, 40%)","hsl(0, 80%, 65%)","hsl(40, 70%, 60%)"]).clamp(!0),k=function(){function l(m,n){var q=this;this.scatterPlotContainer=
m;this.renderLabelsIn3D=!1;this.scatterPlot=new a.ScatterPlot(m,n);n.registerProjectionChangedListener(function(p){q.projection=p;q.updateScatterPlotWithNewProjection(p)});n.registerSelectionChangedListener(function(p,t){q.selectedPointIndices=p;q.neighborsOfFirstSelectedPoint=t;q.updateScatterPlotPositions();q.updateScatterPlotAttributes();q.scatterPlot.render()});n.registerHoverListener(function(p){q.hoverPointIndex=p;q.updateScatterPlotAttributes();q.scatterPlot.render()});n.registerDistanceMetricChangedListener(function(p){q.distanceMetric=
p;q.updateScatterPlotAttributes();q.scatterPlot.render()});this.createVisualizers(!1)}l.prototype.notifyProjectionPositionsUpdated=function(){this.updateScatterPlotPositions();this.scatterPlot.render()};l.prototype.setDataSet=function(m){null!=this.projection&&(this.projection.dataSet=m);null!=this.polylineVisualizer&&this.polylineVisualizer.setDataSet(m);null!=this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(m,this.labelPointAccessor));if(null!=this.spriteVisualizer&&
(this.spriteVisualizer.clearSpriteAtlas(),null!=m&&null!=m.spriteAndMetadataInfo)){var n=m.spriteAndMetadataInfo;if(null!=n.spriteImage&&null!=n.spriteMetadata){for(var q=m.points.length,p=new Float32Array(q),t=0;t<q;++t)p[t]=m.points[t].index;this.spriteVisualizer.setSpriteAtlas(n.spriteImage,n.spriteMetadata.singleImageDim,p)}}};l.prototype.set3DLabelMode=function(m){this.renderLabelsIn3D=m;this.createVisualizers(m);this.updateScatterPlotAttributes();this.scatterPlot.render()};l.prototype.setLegendPointColorer=
function(m){this.legendPointColorer=m};l.prototype.setLabelPointAccessor=function(m){this.labelPointAccessor=m;null!=this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(null==this.projection?null:this.projection.dataSet,m))};l.prototype.resize=function(){this.scatterPlot.resize()};l.prototype.populateBookmarkFromUI=function(m){m.cameraDef=this.scatterPlot.getCameraDef()};l.prototype.restoreUIFromBookmark=function(m){this.scatterPlot.setCameraParametersForNextCameraCreation(m.cameraDef,
!1)};l.prototype.updateScatterPlotPositions=function(){var m=this.generatePointPositionArray(null==this.projection?null:this.projection.dataSet,null==this.projection?null:this.projection.projectionComponents);this.scatterPlot.setPointPositions(m)};l.prototype.updateScatterPlotAttributes=function(){if(null!=this.projection){var m=this.projection.dataSet,n=this.selectedPointIndices,q=this.hoverPointIndex,p=this.neighborsOfFirstSelectedPoint,t=this.legendPointColorer,r=this.generatePointColorArray(m,
t,this.distanceMetric,n,p,q,this.renderLabelsIn3D,this.getSpriteImageMode()),v=this.generatePointScaleFactorArray(m,n,p,q);q=this.generateVisibleLabelRenderParams(m,n,p,q);t=this.generateLineSegmentColorMap(m,t);p=this.generateLineSegmentOpacityArray(m,n);m=this.generateLineSegmentWidthArray(m,n);this.scatterPlot.setPointColors(r);this.scatterPlot.setPointScaleFactors(v);this.scatterPlot.setLabels(q);this.scatterPlot.setPolylineColors(t);this.scatterPlot.setPolylineOpacities(p);this.scatterPlot.setPolylineWidths(m)}};
l.prototype.render=function(){this.scatterPlot.render()};l.prototype.generatePointPositionArray=function(m,n){if(null==m)return null;var q=d3.scaleLinear(),p=d3.scaleLinear(),t=null,r=d3.extent(m.points,function(A,y){return m.points[y].projections[n[0]]}),v=d3.extent(m.points,function(A,y){return m.points[y].projections[n[1]]}),u=[-1,1];q.domain(r).range(u);p.domain(v).range(u);null!=n[2]&&(r=d3.extent(m.points,function(A,y){return m.points[y].projections[n[2]]}),t=d3.scaleLinear(),t.domain(r).range(u));
var w=new Float32Array(3*m.points.length),x=0;m.points.forEach(function(A,y){w[x++]=q(m.points[y].projections[n[0]]);w[x++]=p(m.points[y].projections[n[1]]);w[x++]=0});t&&(x=2,m.points.forEach(function(A,y){w[x]=t(m.points[y].projections[n[2]]);x+=3}));return w};l.prototype.generateVisibleLabelRenderParams=function(m,n,q,p){if(null==m)return null;var t=null==n?0:n.length,r=null==q?0:q.length,v=t+r+(null!=p?1:0),u=new Uint32Array(v),w=new Float32Array(v),x=new Int8Array(v),A=new Uint8Array(3*v);v=
new Uint8Array(3*v);var y=[];w.fill(1);x.fill(1);var B=0;if(null!=p){y.push(this.getLabelText(m,p,this.labelPointAccessor));u[B]=p;w[B]=2;x[B]=0;p=c(0);b(A,B,p[0],p[1],p[2]);var F=c(16777215);b(v,B,F[0],F[1],F[1]);++B}p=c(0);F=c(16777215);for(var K=0;K<t;++K){var L=n[K];y.push(this.getLabelText(m,L,this.labelPointAccessor));u[B]=L;w[B]=2;x[B]=1===t?0:1;b(A,B,p[0],p[1],p[2]);b(v,B,F[0],F[1],F[2]);++B}p=c(0);F=c(16777215);for(K=0;K<r;++K)L=q[K].index,y.push(this.getLabelText(m,L,this.labelPointAccessor)),
u[B]=L,b(A,B,p[0],p[1],p[2]),b(v,B,F[0],F[1],F[2]),++B;return new a.LabelRenderParams(new Float32Array(u),y,w,x,10,A,v)};l.prototype.generatePointScaleFactorArray=function(m,n,q,p){if(null==m)return new Float32Array(0);m=new Float32Array(m.points.length);m.fill(1);for(var t=null==q?0:q.length,r=null==n?0:n.length,v=0;v<r;++v){var u=n[v];m[u]=1.2}r=t;for(v=0;v<r;++v)u=q[v].index,m[u]=1.2;null!=p&&(m[p]=1.2);return m};l.prototype.generateLineSegmentColorMap=function(m,n){var q={};if(null==m)return q;
for(var p=0;p<m.sequences.length;p++){var t=m.sequences[p],r=new Float32Array(6*(t.pointIndices.length-1)),v=0;if(n)for(var u=0;u<t.pointIndices.length-1;u++){var w=new f.Color(n(m,t.pointIndices[u])),x=new f.Color(n(m,t.pointIndices[u+1]));r[v++]=w.r;r[v++]=w.g;r[v++]=w.b;r[v++]=x.r;r[v++]=x.g;r[v++]=x.b}else for(u=0;u<t.pointIndices.length-1;u++)w=d(u,t.pointIndices.length),x=d(u+1,t.pointIndices.length),r[v++]=w.r,r[v++]=w.g,r[v++]=w.b,r[v++]=x.r,r[v++]=x.g,r[v++]=x.b;q[p]=r}return q};l.prototype.generateLineSegmentOpacityArray=
function(m,n){if(null==m)return new Float32Array(0);var q=new Float32Array(m.sequences.length);0<(null==n?0:n.length)?(q.fill(.05),q[m.points[n[0]].sequenceIndex]=.9):q.fill(.2);return q};l.prototype.generateLineSegmentWidthArray=function(m,n){if(null==m)return new Float32Array(0);var q=new Float32Array(m.sequences.length);q.fill(2);0<(null==n?0:n.length)&&(q[m.points[n[0]].sequenceIndex]=3);return q};l.prototype.generatePointColorArray=function(m,n,q,p,t,r,v,u){if(null==m)return new Float32Array(0);
var w=null==p?0:p.length,x=null==t?0:t.length,A=new Float32Array(3*m.points.length),y=14935011,B=7697881;v&&(B=y=16777215);u&&(B=y=16777215);v=m.points.length;u=0;if(0<w)for(y=new f.Color(y),B=0;B<v;++B)A[u++]=y.r,A[u++]=y.g,A[u++]=y.b;else if(null!=n)for(B=0;B<v;++B)y=new f.Color(n(m,B)),A[u++]=y.r,A[u++]=y.g,A[u++]=y.b;else for(y=new f.Color(B),B=0;B<v;++B)A[u++]=y.r,A[u++]=y.g,A[u++]=y.b;v=w;y=new f.Color(16410214);for(B=0;B<v;++B)u=3*p[B],A[u++]=y.r,A[u++]=y.g,A[u++]=y.b;v=x;m=0<v?t[0].dist:0;
for(B=0;B<v;++B)y=new f.Color(g(q,t[B].dist,m)),u=3*t[B].index,A[u++]=y.r,A[u++]=y.g,A[u++]=y.b;null!=r&&(y=new f.Color(7736143),u=3*r,A[u++]=y.r,A[u++]=y.g,A[u++]=y.b);return A};l.prototype.generate3DLabelsArray=function(m,n){if(null==m||null==n)return null;for(var q=[],p=m.points.length,t=0;t<p;++t)q.push(this.getLabelText(m,t,n));return q};l.prototype.getLabelText=function(m,n,q){return m.points[n].metadata[q].toString()};l.prototype.updateScatterPlotWithNewProjection=function(m){null==m?(this.createVisualizers(this.renderLabelsIn3D),
this.scatterPlot.render()):(this.setDataSet(m.dataSet),this.scatterPlot.setDimensions(m.dimensionality),m.dataSet.projectionCanBeRendered(m.projectionType)&&(this.updateScatterPlotAttributes(),this.notifyProjectionPositionsUpdated()),this.scatterPlot.setCameraParametersForNextCameraCreation(null,!1))};l.prototype.createVisualizers=function(m){var n=null==this.projection?null:this.projection.dataSet,q=this.scatterPlot;q.removeAllVisualizers();this.polylineVisualizer=this.spriteVisualizer=this.canvasLabelsVisualizer=
this.labels3DVisualizer=null;m?(this.labels3DVisualizer=new a.ScatterPlotVisualizer3DLabels,this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(n,this.labelPointAccessor))):(this.spriteVisualizer=new a.ScatterPlotVisualizerSprites,q.addVisualizer(this.spriteVisualizer),this.canvasLabelsVisualizer=new a.ScatterPlotVisualizerCanvasLabels(this.scatterPlotContainer));this.polylineVisualizer=new a.ScatterPlotVisualizerPolylines;this.setDataSet(n);this.spriteVisualizer&&q.addVisualizer(this.spriteVisualizer);
this.labels3DVisualizer&&q.addVisualizer(this.labels3DVisualizer);this.canvasLabelsVisualizer&&q.addVisualizer(this.canvasLabelsVisualizer);q.addVisualizer(this.polylineVisualizer)};l.prototype.getSpriteImageMode=function(){if(null==this.projection)return!1;var m=this.projection.dataSet;return null==m||null==m.spriteAndMetadataInfo?!1:null!=m.spriteAndMetadataInfo.spriteImage};return l}();a.ProjectorScatterPlotAdapter=k;a.normalizeDist=e;a.dist2color=g})(wc||(wc={}));
</script>
<script>//~~WEBPATH~~/vz-projector/vz-projector-util.js
(function(a){a.PolymerElement=function(b){return Polymer.Class(b)}})(wc||(wc={}));
</script>












<dom-module id="iron-autogrow-textarea">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        width: 400px;
        border: 1px solid;
        padding: 2px;
        -moz-appearance: textarea;
        -webkit-appearance: textarea;
        overflow: hidden;
      }

      .mirror-text {
        visibility: hidden;
        word-wrap: break-word;
        @apply --iron-autogrow-textarea;
      }

      .fit {
        @apply --layout-fit;
      }

      .textarea-container {
        font-size: inherit;
        font-family: inherit;
        line-height: inherit;
        text-align: inherit;
        font-style: inherit;
      }

      :host([inherit-padding]) .textarea-container {
        padding: inherit;
      }

      :host([slot="input"]) textarea,
      :host(.paper-input-input) textarea {
        padding: 0px;
        margin: 0px;
        /* this seemingly useless rule seems to work around an applyshim inherit bug in polymer 1 */
        @apply --iron-autogrow-textarea;
        @apply --iron-autogrow-textarea-textarea;
      }

      textarea {
        position: relative;
        outline: none;
        border: none;
        resize: none;
        background: inherit;
        color: inherit;
        /* see comments in template */
        width: 100%;
        height: 100%;
        font-size: inherit;
        font-family: inherit;
        line-height: inherit;
        text-align: inherit;
        font-style: inherit;
        box-sizing: border-box;

        @apply --iron-autogrow-textarea;
        @apply --iron-autogrow-textarea-textarea;
      }

      textarea::-webkit-input-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea:-moz-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea::-moz-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea:-ms-input-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }
    </style>

    
    
    <div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div>

    
    <div class="textarea-container fit">
      <textarea id="textarea" name$="[[name]]" aria-label$="[[label]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/iron-autogrow-textarea/iron-autogrow-textarea.html.js
Polymer({is:"iron-autogrow-textarea",behaviors:[Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{value:{observer:"_valueChanged",type:String,notify:!0},bindValue:{observer:"_bindValueChanged",type:String,notify:!0},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},
minlength:{type:Number},maxlength:{type:Number},label:{type:String}},listeners:{input:"_onInput"},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(a){this.$.textarea.selectionStart=a},set selectionEnd(a){this.$.textarea.selectionEnd=a},attached:function(){navigator.userAgent.match(/iP(?:[oa]d|hone)/)&&(this.$.textarea.style.marginLeft="-3px")},validate:function(){var a=this.$.textarea.validity.valid;
a&&(this.required&&""===this.value?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.value)));this.invalid=!a;this.fire("iron-input-validate");return a},_bindValueChanged:function(a){this.value=a},_valueChanged:function(a){var b=this.textarea;b&&(b.value!==a&&(b.value=a||0===a?a:""),this.bindValue=a,this.$.mirror.innerHTML=this._valueForMirror(),this.fire("bind-value-changed",{value:this.bindValue}))},_onInput:function(a){var b=Polymer.dom(a).path;this.value=b?b[0].value:
a.target.value},_constrain:function(a){a=a||[""];for(a=0<this.maxRows&&a.length>this.maxRows?a.slice(0,this.maxRows):a.slice(0);0<this.rows&&a.length<this.rows;)a.push("");return a.join("\x3cbr/\x3e")+"\x26#160;"},_valueForMirror:function(){var a=this.textarea;if(a)return this.tokens=a&&a.value?a.value.replace(/&/gm,"\x26amp;").replace(/"/gm,"\x26quot;").replace(/'/gm,"\x26#39;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").split("\n"):[""],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=
this._constrain(this.tokens)}});
</script>









<dom-module id="paper-textarea">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([hidden]) {
        display: none !important;
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label>

      <iron-autogrow-textarea class="paper-input-input" slot="input" id$="[[_inputId]]" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" bind-value="{{value}}" invalid="{{invalid}}" validator$="[[validator]]" disabled$="[[disabled]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" autocapitalize$="[[autocapitalize]]" rows$="[[rows]]" max-rows$="[[maxRows]]" on-change="_onChange">
      </iron-autogrow-textarea>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error slot="add-on">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter slot="add-on"></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-textarea.html.js
Polymer({is:"paper-textarea",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:"_ariaLabelledByChanged",type:String},_ariaDescribedBy:{observer:"_ariaDescribedByChanged",type:String},value:{type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(a){this._focusableElement.setAttribute("aria-labelledby",a)},_ariaDescribedByChanged:function(a){this._focusableElement.setAttribute("aria-describedby",
a)},get _focusableElement(){return this.inputElement.textarea}});
</script>






<dom-module id="vz-projector-bookmark-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
#title {
  background-color: #fafafa;
  color: black;
  font-weight: 500;
  left: 0;
  line-height: 60px;
  padding-left: 24px;
  position: absolute;
  width: 276px;
}
#bookmark-container {
  background-color: #fafafa;
}
#icon-container {
  line-height: 60px;
  position: absolute;
  right: 0;
}
#header {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  position: relative;
}
#panel {
  background-color: #fafafa;
  position: relative;
  overflow-y: scroll;
  top: 60px;
  max-height: 50vh;
}

#save-container {
  text-align: center;
}

.state-radio {
  display: table-cell;
  vertical-align: middle;
  padding-top: 16px;
}

.state-label {
  display: table-cell;
  vertical-align: middle;
  top: 14px;
}

.state-label-input {
  width: 194px;
}

.state-clear {
  display: table-cell;
  vertical-align: middle;
  padding-top: 20px;
}
#state-file {
  display: none;
}
#no-bookmarks {
  padding: 0 24px;
}
#action-buttons-container .add-icon-button {
  background-color: #03a9f4;
  color: white;
  margin: 0 4px 4px auto;
  right: 7px;
  top: -4px;
}
.upload-download-icon-button {
  padding: 0;
}
#action-buttons-container {
  display: flex;
  margin-left: 34px;
  margin-top: 6px;
}
.ink-fab {
  border-radius: 50%;
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}
paper-textarea {
  --paper-input-container-input: {
    font-size: 12px;
  }
  --paper-font-caption: {
    display: none
  }
}
</style>


<div id="bookmark-container">
  <div id="header">
    <div id="title">
      BOOKMARKS ([[savedStates.length]])
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <paper-tooltip animation-delay="0" position="top" offset="0">
        Open this drawer to save a set of views of the projection, including
        selected points. A file containing the bookmarks can then be saved and
        later loaded to view them.
      </paper-tooltip>
    </div>
    <div id="icon-container">
      
      <paper-icon-button id="expand-more" icon="expand-less" on-tap="_expandMore"></paper-icon-button>
      <paper-icon-button id="expand-less" style="display: none" icon="expand-more" on-tap="_expandLess"></paper-icon-button>
    </div>
  </div>
  <iron-collapse id="panel">
    
    <div id="state-section">
      <template is="dom-if" if="[[!savedStates.length]]">
        <p id="no-bookmarks">
            No bookmarks yet, upload a bookmarks file or add a new bookmark by clicking the "+" below.
        
      </template>

      <template is="dom-repeat" items="{{savedStates}}">
        <div class="state-row">
          <div class="state-radio">
            <template is="dom-if" if="{{item.isSelected}}">
              <paper-icon-button icon="radio-button-checked"></paper-icon-button>
            </template>
            <template is="dom-if" if="{{!item.isSelected}}">
              <paper-icon-button icon="radio-button-unchecked" data-index$="{{index}}" on-tap="_radioButtonHandler"></paper-icon-button>
            </template>
          </div>
          <div class="state-label">
            <paper-textarea value="[[item.label]]" class="state-label-input" on-keyup="_labelChange" data-index$="[[index]]" autoresizing>
          </paper-textarea></div>
          <div class="state-clear">
            <paper-icon-button icon="clear" data-index$="{{index}}" on-tap="_clearButtonHandler"></paper-icon-button>
          </div>
        </div>
      </template>

      <div id="action-buttons-container">
        <paper-icon-button class="upload-download-icon-button" icon="save" title="Save bookmarks" disabled="[[!hasStates]]" on-tap="_downloadFile"></paper-icon-button>
        <paper-icon-button class="upload-download-icon-button" icon="file-upload" title="Load bookmarks" on-tap="_uploadFile"></paper-icon-button>
        <paper-icon-button class="add-icon-button ink-fab" icon="add" title="Add bookmark" on-tap="_addBookmark"></paper-icon-button>
        <input type="file" id="state-file" name="state-file">
      </div>
    </div>
  </iron-collapse>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-bookmark-panel.js
var zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.BookmarkPanelPolymer=a.PolymerElement({is:"vz-projector-bookmark-panel",properties:{savedStates:Object,hasStates:{type:Boolean,value:!1},selectedState:Number}});var b=function(c){function d(){var e=null!==c&&c.apply(this,arguments)||this;e.hasStates=!1;return e}zc(d,c);d.prototype.ready=function(){this.savedStates=[];this.setupUploadButton();this.ignoreNextProjectionEvent=!1;this.expandLessButton=this.querySelector("#expand-less");this.expandMoreButton=this.querySelector("#expand-more")};
d.prototype.initialize=function(e,g){var h=this;this.projector=e;g.registerProjectionChangedListener(function(){h.ignoreNextProjectionEvent?h.ignoreNextProjectionEvent=!1:h.clearStateSelection()})};d.prototype.setSelectedTensor=function(e,g,h){var k=this;this.addStates(null);g&&g.bookmarksPath?h.getBookmarks(e,g.tensorName,function(l){k.addStates(l);k._expandMore()}):this._expandLess()};d.prototype._expandMore=function(){this.$.panel.show();this.expandMoreButton.style.display="none";this.expandLessButton.style.display=
""};d.prototype._expandLess=function(){this.$.panel.hide();this.expandMoreButton.style.display="";this.expandLessButton.style.display="none"};d.prototype._addBookmark=function(){var e=this.projector.getCurrentState();e.label="State "+this.savedStates.length;e.isSelected=!0;this.selectedState=this.savedStates.length;for(var g=0;g<this.savedStates.length;g++)this.savedStates[g].isSelected=!1,this.notifyPath("savedStates."+g+".isSelected",!1,!1);this.push("savedStates",e);this.updateHasStates()};d.prototype._downloadFile=
function(){var e=this.serializeAllSavedStates();e=window.URL.createObjectURL(new Blob([e],{type:"text/plain"}));var g=document.createElement("a");document.body.appendChild(g);g.style.display="none";g.href=e;g.download="state";g.click();document.body.removeChild(g);window.URL.revokeObjectURL(e)};d.prototype._uploadFile=function(){this.querySelector("#state-file").click()};d.prototype.setupUploadButton=function(){var e=this,g=this.querySelector("#state-file");g.onchange=function(){var h=g.files[0];
g.value="";var k=new FileReader;k.onload=function(){var l=JSON.parse(k.result);e.savedStatesValid(l)?(e.addStates(l),e.loadSavedState(0)):a.logging.setWarningMessage("Unable to load bookmarks: wrong dataset, expected dataset "+("with shape ("+l[0].dataSetDimensions+")."))};k.readAsText(h)}};d.prototype.addStates=function(e){if(null==e)this.savedStates=[];else for(var g=0;g<e.length;g++)e[g].isSelected=!1,this.push("savedStates",e[g]);this.updateHasStates()};d.prototype.clearStateSelection=function(){for(var e=
0;e<this.savedStates.length;e++)this.setSelectionState(e,!1)};d.prototype._radioButtonHandler=function(e){e=this.getParentDataIndex(e);this.loadSavedState(e);this.setSelectionState(e,!0)};d.prototype.loadSavedState=function(e){for(var g=0;g<this.savedStates.length;g++)this.savedStates[g].isSelected?this.setSelectionState(g,!1):e===g&&(this.setSelectionState(g,!0),this.ignoreNextProjectionEvent=!0,this.projector.loadState(this.savedStates[g]))};d.prototype.setSelectionState=function(e,g){this.savedStates[e].isSelected=
g;this.notifyPath("savedStates."+e+".isSelected",g,!1)};d.prototype.getParentDataIndex=function(e){for(var g=0;g<e.path.length;g++){var h=e.path[g].getAttribute("data-index");if(null!=h)return+h}return-1};d.prototype._clearButtonHandler=function(e){e=this.getParentDataIndex(e);this.splice("savedStates",e,1);this.updateHasStates()};d.prototype._labelChange=function(e){var g=this.getParentDataIndex(e);this.savedStates[g].label=e.target.value};d.prototype._isSelectedState=function(e){return e===this.selectedState};
d.prototype._isNotSelectedState=function(e){return e!==this.selectedState};d.prototype.serializeAllSavedStates=function(){return JSON.stringify(this.savedStates)};d.prototype.loadSavedStates=function(e){this.savedStates=JSON.parse(e);this.updateHasStates()};d.prototype.updateHasStates=function(){this.hasStates=0!==this.savedStates.length};d.prototype.savedStatesValid=function(e){for(var g=0;g<e.length;g++)if(e[g].dataSetDimensions[0]!==this.projector.dataSet.dim[0]||e[g].dataSetDimensions[1]!==this.projector.dataSet.dim[1])return!1;
return!0};return d}(a.BookmarkPanelPolymer);a.BookmarkPanel=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>




























<script>//~~WEBPATH~~/neon-animation/animations/opaque-animation.html.js
Polymer({is:"opaque-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;this._effect=new KeyframeEffect(b,[{opacity:"1"},{opacity:"1"}],this.timingFromConfig(a));b.style.opacity="0";return this._effect},complete:function(a){a.node.style.opacity=""}});
</script>



<script>//~~WEBPATH~~/iron-dropdown/iron-dropdown-scroll-manager.html.js
(function(){var a=0,b=0,c=null,d=[];Polymer.IronDropdownScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(e){var g=this.currentLockingElement;if(void 0===g)return!1;if(this._hasCachedLockedElement(e))return!0;if(this._hasCachedUnlockedElement(e))return!1;(g=!!g&&g!==e&&!this._composedTreeContains(g,e))?this._lockedElementCache.push(e):this._unlockedElementCache.push(e);return g},pushScrollLock:function(e){0<=this._lockingElements.indexOf(e)||
(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(e),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(e){e=this._lockingElements.indexOf(e);-1!==e&&(this._lockingElements.splice(e,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_hasCachedLockedElement:function(e){return-1<
this._lockedElementCache.indexOf(e)},_hasCachedUnlockedElement:function(e){return-1<this._unlockedElementCache.indexOf(e)},_composedTreeContains:function(e,g){var h,k;if(e.contains(g))return!0;e=Polymer.dom(e).querySelectorAll("content");for(h=0;h<e.length;++h){var l=Polymer.dom(e[h]).getDistributedNodes();for(k=0;k<l.length;++k)if(this._composedTreeContains(l[k],g))return!0}return!1},_scrollInteractionHandler:function(e){e.cancelable&&this._shouldPreventScrolling(e)&&e.preventDefault();e.targetTouches&&
(e=e.targetTouches[0],a=e.pageX,b=e.pageY)},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);document.addEventListener("wheel",this._boundScrollHandler,!0);document.addEventListener("mousewheel",this._boundScrollHandler,!0);document.addEventListener("DOMMouseScroll",this._boundScrollHandler,!0);document.addEventListener("touchstart",this._boundScrollHandler,!0);document.addEventListener("touchmove",this._boundScrollHandler,
!0)},_unlockScrollInteractions:function(){document.removeEventListener("wheel",this._boundScrollHandler,!0);document.removeEventListener("mousewheel",this._boundScrollHandler,!0);document.removeEventListener("DOMMouseScroll",this._boundScrollHandler,!0);document.removeEventListener("touchstart",this._boundScrollHandler,!0);document.removeEventListener("touchmove",this._boundScrollHandler,!0)},_shouldPreventScrolling:function(e){var g=Polymer.dom(e).rootTarget;"touchmove"!==e.type&&c!==g&&(c=g,d=this._getScrollableNodes(Polymer.dom(e).path));
if(!d.length)return!0;if("touchstart"===e.type)return!1;e=this._getScrollInfo(e);return!this._getScrollingNode(d,e.deltaX,e.deltaY)},_getScrollableNodes:function(e){for(var g=[],h=e.indexOf(this.currentLockingElement),k=0;k<=h;k++)if(e[k].nodeType===Node.ELEMENT_NODE){var l=e[k],m=l.style;"scroll"!==m.overflow&&"auto"!==m.overflow&&(m=window.getComputedStyle(l));"scroll"!==m.overflow&&"auto"!==m.overflow||g.push(l)}return g},_getScrollingNode:function(e,g,h){if(g||h)for(var k=Math.abs(h)>=Math.abs(g),
l=0;l<e.length;l++){var m=e[l];if(k?0>h?0<m.scrollTop:m.scrollTop<m.scrollHeight-m.clientHeight:0>g?0<m.scrollLeft:m.scrollLeft<m.scrollWidth-m.clientWidth)return m}},_getScrollInfo:function(e){var g={deltaX:e.deltaX,deltaY:e.deltaY};"deltaX"in e||("wheelDeltaX"in e?(g.deltaX=-e.wheelDeltaX,g.deltaY=-e.wheelDeltaY):"axis"in e?(g.deltaX=1===e.axis?e.detail:0,g.deltaY=2===e.axis?e.detail:0):e.targetTouches&&(e=e.targetTouches[0],g.deltaX=a-e.pageX,g.deltaY=b-e.pageY));return g}}})();
</script>




<dom-module id="iron-dropdown">
  <template>
    <style>
      :host {
        position: fixed;
      }

      #contentWrapper ::content > * {
        overflow: auto;
      }

      #contentWrapper.animating ::content > * {
        overflow: hidden;
      }
    </style>

    <div id="contentWrapper">
      <content id="content" select=".dropdown-content"></content>
    </div>
  </template>

  <script>//~~WEBPATH~~/iron-dropdown/iron-dropdown.html.js
Polymer({is:"iron-dropdown",behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1},_boundOnCaptureScroll:{type:Function,
value:function(){return this._onCaptureScroll.bind(this)}}},listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},observers:["_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"],get containedElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},get _focusTarget(){return this.focusTarget||this.containedElement},ready:function(){this._scrollLeft=this._scrollTop=0;this._refitOnScrollRAF=null},attached:function(){this.sizingTarget&&
this.sizingTarget!==this||(this.sizingTarget=this.containedElement||this)},detached:function(){this.cancelAnimation();document.removeEventListener("scroll",this._boundOnCaptureScroll);Polymer.IronDropdownScrollManager.removeScrollLock(this)},_openedChanged:function(){this.opened&&this.disabled?this.cancel():(this.cancelAnimation(),this._updateAnimationConfig(),this._saveScrollPosition(),this.opened?(document.addEventListener("scroll",this._boundOnCaptureScroll),!this.allowOutsideScroll&&Polymer.IronDropdownScrollManager.pushScrollLock(this)):
(document.removeEventListener("scroll",this._boundOnCaptureScroll),Polymer.IronDropdownScrollManager.removeScrollLock(this)),Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments))},_renderOpened:function(){!this.noAnimations&&this.animationConfig.open?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("open")):Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)},_renderClosed:function(){!this.noAnimations&&this.animationConfig.close?(this.$.contentWrapper.classList.add("animating"),
this.playAnimation("close")):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove("animating");this.opened?this._finishRenderOpened():this._finishRenderClosed()},_onCaptureScroll:function(){this.allowOutsideScroll?(this._refitOnScrollRAF&&window.cancelAnimationFrame(this._refitOnScrollRAF),this._refitOnScrollRAF=window.requestAnimationFrame(this.refit.bind(this))):this._restoreScrollPosition()},_saveScrollPosition:function(){document.scrollingElement?
(this._scrollTop=document.scrollingElement.scrollTop,this._scrollLeft=document.scrollingElement.scrollLeft):(this._scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))},_restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this._scrollTop,document.scrollingElement.scrollLeft=this._scrollLeft):(document.documentElement.scrollTop=this._scrollTop,
document.documentElement.scrollLeft=this._scrollLeft,document.body.scrollTop=this._scrollTop,document.body.scrollLeft=this._scrollLeft)},_updateAnimationConfig:function(){for(var a=this.containedElement,b=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),c=0;c<b.length;c++)b[c].node=a;this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function(){this.isAttached&&this.notifyResize()},_applyFocus:function(){var a=
this.focusTarget||this.containedElement;a&&this.opened&&!this.noAutoFocus?a.focus():Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this,arguments)}});
</script>
</dom-module>








<script>//~~WEBPATH~~/paper-menu-button/paper-menu-button-animations.html.js
Polymer({is:"paper-menu-grow-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().height;return this._effect=new KeyframeEffect(b,[{height:c/2+"px"},{height:c+"px"}],this.timingFromConfig(a))}});Polymer({is:"paper-menu-grow-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().width;return this._effect=new KeyframeEffect(b,[{width:c/2+"px"},{width:c+"px"}],this.timingFromConfig(a))}});
Polymer({is:"paper-menu-shrink-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().width;return this._effect=new KeyframeEffect(b,[{width:c+"px"},{width:c-c/20+"px"}],this.timingFromConfig(a))}});
Polymer({is:"paper-menu-shrink-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().height;this.setPrefixedProperty(b,"transformOrigin","0 0");return this._effect=new KeyframeEffect(b,[{height:c+"px",transform:"translateY(0)"},{height:c/2+"px",transform:"translateY(-20px)"}],this.timingFromConfig(a))}});
</script>






<dom-module id="paper-menu-button">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;

        @apply(--paper-menu-button);
      }

      :host([disabled]) {
        cursor: auto;
        color: var(--disabled-text-color);

        @apply(--paper-menu-button-disabled);
      }

      iron-dropdown {
        @apply(--paper-menu-button-dropdown);
      }

      .dropdown-content {
        @apply(--shadow-elevation-2dp);

        position: relative;
        border-radius: 2px;
        background-color: var(--paper-menu-button-dropdown-background, --primary-background-color);

        @apply(--paper-menu-button-content);
      }

      :host([vertical-align="top"]) .dropdown-content {
        margin-bottom: 20px;
        margin-top: -10px;
        top: 10px;
      }

      :host([vertical-align="bottom"]) .dropdown-content {
        bottom: 10px;
        margin-bottom: -10px;
        margin-top: 20px;
      }
    </style>

    <div id="trigger" on-tap="toggle">
      <content select=".dropdown-trigger"></content>
    </div>

    <iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled">
      <div class="dropdown-content" slot="dropdown-content">
        <content id="content" select=".dropdown-content"></content>
      </div>
    </iron-dropdown>
  </template>

  <script>//~~WEBPATH~~/paper-menu-button/paper-menu-button.html.js
function Ac(){}fa=Ac.prototype;fa.registered=function(){};fa.addOwnKeyBinding=function(){};fa.removeOwnKeyBindings=function(){};fa.keyboardEventMatchesKeys=function(){};fa._collectKeyBindings=function(){};fa._prepKeyBindings=function(){};fa._addKeyBinding=function(){};fa._resetKeyEventListeners=function(){};fa._listenKeyEventListeners=function(){};fa._unlistenKeyEventListeners=function(){};fa._onKeyBindingEvent=function(){};fa._triggerKeyHandler=function(){};
fa._focusBlurHandler=function(a){if(Polymer.Element)this._setFocused("focus"===a.type);else if(a.target===this)this._setFocused("focus"===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}};fa._changedControlState=function(){this._controlStateChanged&&this._controlStateChanged()};fa._setFocused=function(){};
(function(){var a={ANIMATION_CUBIC_BEZIER:"cubic-bezier(.3,.95,.5,1)",MAX_ANIMATION_TIME_MS:400};Ac=Polymer({is:"paper-menu-button",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,
value:0,notify:!0},noOverlap:{type:Boolean},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},closeOnActivate:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function(){return[{name:"fade-in-animation",timing:{delay:100,duration:200}},{name:"paper-menu-grow-width-animation",timing:{delay:100,duration:150,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-grow-height-animation",timing:{delay:100,duration:275,easing:a.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,
value:function(){return[{name:"fade-out-animation",timing:{duration:150}},{name:"paper-menu-shrink-width-animation",timing:{delay:100,duration:50,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-shrink-height-animation",timing:{duration:200,easing:"ease-in"}}]}},allowOutsideScroll:{type:Boolean,value:!1},restoreFocusOnClose:{type:Boolean,value:!0},_dropdownContent:{type:Object}},hostAttributes:{role:"group","aria-haspopup":"true"},listeners:{"iron-activate":"_onIronActivate","iron-select":"_onIronSelect"},
get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},toggle:function(){this.opened?this.close():this.open()},open:function(){this.disabled||this.$.dropdown.open()},close:function(){this.$.dropdown.close()},_onIronSelect:function(){this.ignoreSelect||this.close()},_onIronActivate:function(){this.closeOnActivate&&this.close()},_openedChanged:function(b,c){b?(this._dropdownContent=this.contentElement,this.fire("paper-dropdown-open")):null!=c&&this.fire("paper-dropdown-close")},
_disabledChanged:function(b){Polymer.IronControlState._disabledChanged.apply(this,arguments);b&&this.opened&&this.close()},__onIronOverlayCanceled:function(b){var c=b.detail;Polymer.dom(c);var d=this.$.trigger;-1<Polymer.dom(c).path.indexOf(d)&&b.preventDefault()}});Object.keys(a).forEach(function(b){Ac[b]=a[b]});Polymer.PaperMenuButton=Ac})();
</script>
</dom-module>






<iron-iconset-svg name="paper-dropdown-menu" size="24">
<svg><defs>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g>
</defs></svg>
</iron-iconset-svg>



<dom-module id="paper-dropdown-menu-shared-styles">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        text-align: left;

        /* NOTE(cdata): Both values are needed, since some phones require the
         * value to be `transparent`.
         */
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;

        --paper-input-container-input: {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          max-width: 100%;
          box-sizing: border-box;
          cursor: pointer;
        };

        @apply(--paper-dropdown-menu);
      }

      :host(:dir(rtl)) {
        text-align: right;

        @apply(--paper-dropdown-menu);
      }

      :host([disabled]) {
        @apply(--paper-dropdown-menu-disabled);
      }

      :host([noink]) paper-ripple {
        display: none;
      }

      :host([no-label-float]) paper-ripple {
        top: 8px;
      }

      paper-ripple {
        top: 12px;
        left: 0px;
        bottom: 8px;
        right: 0px;

        @apply(--paper-dropdown-menu-ripple);
      }

      paper-menu-button {
        display: block;
        padding: 0;

        @apply(--paper-dropdown-menu-button);
      }

      paper-input {
        @apply(--paper-dropdown-menu-input);
      }

      iron-icon {
        color: var(--disabled-text-color);

        @apply(--paper-dropdown-menu-icon);
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-dropdown-menu">
  <template>
    <style include="paper-dropdown-menu-shared-styles"></style>

    
    <span role="button"></span>
    <paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]">
      <div class="dropdown-trigger" slot="dropdown-trigger">
        <paper-ripple></paper-ripple>
        
        <paper-input type="text" invalid="[[invalid]]" readonly disabled="[[disabled]]" value="[[selectedItemLabel]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]">
          <iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix slot="suffix"></iron-icon>
        </paper-input>
      </div>
      <content id="content" select=".dropdown-content"></content>
    </paper-menu-button>
  </template>

  <script>//~~WEBPATH~~/paper-dropdown-menu/paper-dropdown-menu.html.js
Polymer({is:"paper-dropdown-menu",behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0},label:{type:String},placeholder:{type:String},errorMessage:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:"_openedChanged"},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,
value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:"right"},verticalAlign:{type:String,value:"top"},dynamicAlign:{type:Boolean},restoreFocusOnClose:{type:Boolean,value:!0}},listeners:{tap:"_onTap"},keyBindings:{"up down":"open",esc:"close"},hostAttributes:{role:"combobox","aria-autocomplete":"none","aria-haspopup":"true"},observers:["_selectedItemChanged(selectedItem)"],attached:function(){var a=this.contentElement;
a&&a.selectedItem&&this._setSelectedItem(a.selectedItem)},get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(a){this._setSelectedItem(a.detail.item)},_onIronDeselect:function(){this._setSelectedItem(null)},_onTap:function(a){Polymer.Gestures.findOriginalTarget(a)===this&&this.open()},_selectedItemChanged:function(a){a=a?a.label||a.getAttribute("label")||a.textContent.trim():
"";this._setValue(a);this._setSelectedItemLabel(a)},_computeMenuVerticalOffset:function(a){return a?-4:8},_getValidity:function(){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function(){var a=this.opened?"true":"false",b=this.contentElement;b&&b.setAttribute("aria-expanded",a)}});
</script>
</dom-module>















<dom-module id="vz-projector-legend">
<template>
<style include="vz-projector-styles"></style>
<style>
.item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 10px;
}

.shape {
  width: 10px;
  height: 10px;
  margin-right: 10px;
  margin-top: 5px;
  border-radius: 50%;
}

.label {
  flex-grow: 1;
}

.gradient {
  width: 100%;
  height: 10px;
}

.gradient-boundaries {
  display: flex;
  justify-content: space-between;
}
</style>

<template is="dom-repeat" items="[[renderInfo.items]]">
  <div class="item">
    <div class="shape" style="background-color: [[item.color]];"></div>
    <div class="label">[[item.label]]</div>
    <div class="info" style="color: [[item.color]];">[[item.count]]</div>
  </div>
</template>

<template is="dom-if" if="[[renderInfo.thresholds]]">
  <svg class="gradient">
    <defs>
      <lineargradient id="gradient" x1="0%" y1="100%" x2="100%" y2="100%"></lineargradient>
    </defs>
    <rect height="10" style="fill: url('#gradient');"></rect>
  </svg>
  <div class="gradient-boundaries">
    <div>[[renderInfo.thresholds.0.value]]</div>
    <div>[[_getLastThreshold(renderInfo.thresholds)]]</div>
  </div>
</template>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-legend.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.LegendPolymer=a.PolymerElement({is:"vz-projector-legend",properties:{renderInfo:{type:Object,observer:"_renderInfoChanged"}}});var b=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}zc(d,c);d.prototype._renderInfoChanged=function(){var e=this;null!=this.renderInfo&&this.renderInfo.thresholds&&this.async(function(){return e.setupLinearGradient()})};d.prototype._getLastThreshold=function(){if(null!=this.renderInfo&&null!=this.renderInfo.thresholds)return this.renderInfo.thresholds[this.renderInfo.thresholds.length-
1].value};d.prototype.getOffset=function(e){var g=this.renderInfo.thresholds[0].value;return(100*(e-g)/(this.renderInfo.thresholds[this.renderInfo.thresholds.length-1].value-g)).toFixed(2)+"%"};d.prototype.setupLinearGradient=function(){var e=this,g=this.querySelector("#gradient"),h=this.querySelector("svg.gradient").clientWidth;this.querySelector("svg.gradient rect").style.width=h+"px";g.innerHTML="";this.renderInfo.thresholds.forEach(function(k){var l=document.createElementNS("http://www.w3.org/2000/svg",
"stop");l.setAttribute("offset",e.getOffset(k.value));l.setAttribute("stop-color",k.color)})};return d}(a.LegendPolymer);a.Legend=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>


<dom-module id="vz-projector-data-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
.container {
  padding: 5px 20px 20px 20px;
}

input[type=file] {
  display: none;
}

.file-name {
  margin-right: 10px;
}

.dirs {
  color: rgba(0, 0, 0, 0.7);
  font-size: 12px;
}

.dirs table tr {
  vertical-align: top;
}

.dirs table tr td {
  padding-bottom: 10px;
}

paper-item {
  --paper-item-disabled: {
    border-bottom: 1px solid black;
    justify-content: center;
    font-size: 12px;
    line-height: normal;
    min-height: 0px;
  };
}

.item-details {
  margin-left: 5px;
  color: gray;
  font-size: 12px;
}

paper-input {
  font-size: 15px;
  --paper-input-container: {
    padding: 5px 0;
  };
  --paper-input-container-label-floating: {
    white-space: normal;
    line-height: normal;
  };
}

paper-dropdown-menu {
  width: 100%;
  --paper-input-container: {
    padding: 5px 0;
  };
  --paper-input-container-input: {
    font-size: 15px;
  };
  --paper-input-container-label-floating: {
    white-space: normal;
    line-height: normal;
  };
}

paper-dropdown-menu paper-item {
  justify-content: space-between;
}

.title {
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  color: black;
  display: flex;
  font-weight: 500;
  height: 59px;
  padding-left: 20px;
}

#normalize-data-checkbox {
  margin: 10px 0;
}

#projector-config-template {
  --paper-input-container-input: {
    line-height: 13px;
    font-family: monospace;
    font-size: 12px;
  };
}

#generate-share-url {
  padding: 16px;
  margin-left: 24px;
}

#projector-share-button-container {
  margin: 10px 0;
}

.metadata-editor, .supervise-settings, .colorlabel-container {
  display: flex;
}

#labelby {
  width: 100px;
  margin-right: 10px;
}

#colorby {
  width: calc(100% - 110px);
}

.supervise-settings paper-dropdown-menu {
  width: 100px;
  margin-right: 10px;
}

.supervise-settings paper-input {
  width: calc(100% - 110px);
}

.metadata-editor paper-dropdown-menu {
  width: 100px;
  margin-right: 10px;
}

.metadata-editor paper-input {
  width: calc(100% - 110px);
}

.config-checkbox {
  display: inline-block;
  font-size: 11px;
  margin-left: 10px;
}

.projector-config-options {
  margin-top: 12px;
}

.projector-config-dialog-container {
  padding: 24px;
}

.code {
  background-color: #f7f7f7;
  display: table;
  font-family: monospace;
  margin-top: 7px;
  padding: 15px;
}

.delimiter {
  color: #B71C1C;
}

.button-container {
  flex: 1 100%;
  margin-right: 5px;
}

.button-container paper-button {
  min-width: 50px;
  width: 100%;
}

#label-button {
  margin-right: 0px;
}

.upload-step {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.upload-step paper-button {
  margin-left: 30px;
}

.step-label {
  color: rgb(38, 180, 226);
}

.scrollable-container {
  margin-top: 0;
  min-width: 400px;
}

#projectorConfigDialog p {
  margin: 8px 0 8px;
}

.data-step {
  margin-top: 40px;
}

.data-step-contents {
  display: table;
  width: 100%;
}

.data-step-contents-contents {
  display: table-cell;
  margin-top: 6px;
}

.data-step-contents-upload {
  display: table-cell;
  text-align: right;
  vertical-align: bottom;
}

#demo-data-buttons-container {
  display: none;
  margin-top: 10px;
}

</style>
<div class="title">DATA</div>
<div class="container">
  
  <template is="dom-if" if="[[_hasChoices(runNames)]]">
    <paper-dropdown-menu no-animations label="[[_getNumRunsLabel(runNames)]] found">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedRun}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[runNames]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <template is="dom-if" if="[[tensorNames]]">
    
    <paper-dropdown-menu no-animations label="[[_getNumTensorsLabel(tensorNames)]] found">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedTensor}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[tensorNames]]">
          <paper-item value="[[item.name]]" label="[[item.name]]">
            [[item.name]]
            <span class="item-details">
              [[item.shape.0]]x[[item.shape.1]]
            </span>
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <div hidden$="[[!_hasChoices(colorOptions)]]">
    <div class="colorlabel-container">
      
      <paper-dropdown-menu id="labelby" no-animations label="Label by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedLabelOption}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[labelOptions]]">
            <paper-item value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      
      <paper-dropdown-menu id="colorby" no-animations label="Color by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedColorOptionName}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[colorOptions]]">
            <paper-item class$="[[getSeparatorClass(item.isSeparator)]]" value="[[item.name]]" label="[[item.name]]" disabled="[[item.isSeparator]]">
              [[item.name]]
              <span class="item-details">[[item.desc]]</span>
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
    </div>
    <div hidden$="[[!showForceCategoricalColorsCheckbox]]">
      <paper-checkbox id="force-categorical-checkbox">Use categorical coloring</paper-checkbox>
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        For metadata fields that have many unique values we use a gradient color map
        by default. This checkbox allows you to force categorical coloring by a given
        metadata field.
      </paper-tooltip>
    </div>
    <template dom-if="[[colorLegendRenderInfo]]">
      <vz-projector-legend render-info="[[colorLegendRenderInfo]]"></vz-projector-legend>
    </template>
  </div>
  <template is="dom-if" if="[[_hasChoice(labelOptions)]]">
    
    <div hidden$="[[!showSuperviseSettings]]" class="supervise-settings">
      <paper-dropdown-menu no-animations label="Supervise with">
        <paper-listbox attr-for-selected="value" class="dropdown-content" on-selected-item-changed="superviseColumnChanged" selected="{{superviseColumn}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[metadataFields]]">
            <paper-item value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <paper-input value="{{superviseInput}}" label="{{superviseInputLabel}}" on-change="superviseInputChange" on-input="superviseInputTyping">
      </paper-input>
    </div>
    
    <div class="metadata-editor">
      <paper-dropdown-menu no-animations label="Edit by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" slot="dropdown-content" on-selected-item-changed="metadataEditorColumnChange" selected="{{metadataEditorColumn}}">
          <template is="dom-repeat" items="[[metadataFields]]">
            <paper-item value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <paper-input value="{{metadataEditorInput}}" label="{{metadataEditorInputLabel}}" on-input="metadataEditorInputChange" on-keydown="metadataEditorInputKeydown">
      </paper-input>
    </div>
  </template>
  <div id="demo-data-buttons-container">
    <span class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Load data from your computer
      </paper-tooltip>
      <paper-button id="upload" class="ink-button" onclick="dataDialog.open()">Load</paper-button>
    </span>
    <span id="publish-container" class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Publish your embedding visualization and data
      </paper-tooltip>
      <paper-button id="host-embedding" class="ink-button" onclick="projectorConfigDialog.open()">Publish</paper-button>
    </span>
    <span class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Download the metadata with applied modifications
      </paper-tooltip>
      <paper-button class="ink-button" on-click="downloadMetadataClicked">Download</paper-button>
      <a href="#" id="downloadMetadataLink" hidden></a>
    </span>
    <span id="label-button" class="button-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Label selected metadata
      </paper-tooltip>
      <paper-button class="ink-button" on-click="metadataEditorButtonClicked" disabled="[[metadataEditorButtonDisabled]]">Label</paper-button>
    </span>
  </div>
  <div>
    <paper-dialog id="dataDialog" with-backdrop>
      <h2>Load data from your computer</h2>
      <paper-dialog-scrollable class="scrollable-container">
        <div class="data-step" id="upload-tensors-step-container">
          <div class="upload-step">
            <div>
                <b><span class="step-label">Step 1:</span> Load a TSV file of vectors.</b>
            </div>
          </div>
          <div class="data-step-contents">
            <div class="data-step-contents-contents">
              Example of 3 vectors with dimension 4:
              <div class="code">
                0.1<span class="delimiter">\t</span>0.2<span class="delimiter">\t</span>0.5<span class="delimiter">\t</span>0.9<br>
                0.2<span class="delimiter">\t</span>0.1<span class="delimiter">\t</span>5.0<span class="delimiter">\t</span>0.2<br>
                0.4<span class="delimiter">\t</span>0.1<span class="delimiter">\t</span>7.0<span class="delimiter">\t</span>0.8
              </div>
            </div>
            <div class="data-step-contents-upload">
              <paper-button id="upload-tensors" title="Choose a TSV tensor file">Choose file</paper-button>
              <input type="file" id="file" name="file">
            </div>
          </div>
        </div>
        <div class="data-step">
          <div class="upload-step">
            <div>
                <span class="step-label" id="upload-metadata-label"><b>Step 2</b> (optional):</span> <b>Load a TSV file of metadata.</b>
            </div>
          </div>
          <div class="data-step-contents">
            <div class="data-step-contents-contents">
              Example of 3 data points and 2 columns.<br>
              <i>Note: If there is more than one column, the first row will be parsed as column labels.</i>
              <div class="code">
                <b>Pokémon<span class="delimiter">\t</span>Species</b><br>
                Wartortle<span class="delimiter">\t</span>Turtle<br>
                Venusaur<span class="delimiter">\t</span>Seed<br>
                Charmeleon<span class="delimiter">\t</span>Flame
              </div>
            </div>
            <div class="data-step-contents-upload">
              <paper-button id="upload-metadata" title="Choose a TSV metadata file" class="ink-button">Choose file</paper-button>
              <input type="file" id="file-metadata" name="file-metadata">
            </div>
          </div>
        </div>
      </paper-dialog-scrollable>
      <div class="dismiss-dialog-note">Click outside to dismiss.</div>
    </paper-dialog>
    <paper-dialog id="projectorConfigDialog" with-backdrop>
      <h2>Publish your embedding visualization and data</h2>
      <paper-dialog-scrollable class="scrollable-container">
        <div>
          <p>
            If you'd like to share your visualization with the world, follow these simple steps.
            See <a target="_blank" href="https://www.tensorflow.org/get_started/embedding_viz">this tutorial</a> for more.
          
          <h4><span class="step-label">Step 1:</span> Make data public</h4>
          <p>
            Host tensors, metadata, sprite image, and bookmarks TSV files <i>publicly</i> on the web.
          
          <p>
            One option is using a <a target="_blank" href="https://gist.github.com/">github gist</a>.
            If you choose this approach, make sure to link directly to the raw file.
          
        </div>
        <div>
          <h4><span class="step-label">Step 2:</span> Projector config</h4>
          <div class="projector-config-options">
            <i>Optional:</i>
            <div class="config-checkbox">
              <paper-checkbox id="config-metadata-checkbox" checked>Metadata</paper-checkbox>
            </div>
            <div class="config-checkbox">
              <paper-checkbox id="config-sprite-checkbox">Sprite</paper-checkbox>
            </div>
            <div class="config-checkbox">
              <paper-checkbox id="config-bookmarks-checkbox">Bookmarks</paper-checkbox>
            </div>
          </div>
        </div>
        <paper-textarea id="projector-config-template" label="template_projector_config.json"></paper-textarea>
        <div>
          <h4><span class="step-label">Step 3:</span> Host projector config</h4>
          After you have hosted the projector config JSON file you built above, paste the URL to the config below.
        </div>
        <paper-input id="projector-config-url" label="Path to projector config"></paper-input>
        <paper-input id="projector-share-url" label="Your shareable URL" readonly></paper-input>
        <div id="projector-share-button-container">
          <a target="_blank" id="projector-share-url-link">
            <paper-button title="Test your shareable URL" class="ink-button">Test your shareable URL</paper-button>
          </a>
        </div>
      </paper-dialog-scrollable>
      <div class="dismiss-dialog-note">Click outside to dismiss.</div>
    </paper-dialog>
  </div>
  <paper-checkbox id="normalize-data-checkbox" checked="{{normalizeData}}">
    Sphereize data
    <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
    <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
      The data is normalized by shifting each point by the centroid and making
      it unit norm.
    </paper-tooltip>
  </paper-checkbox>
  <div class="dirs">
    <table>
      <tr>
        <td>Checkpoint:</td>
        <td><span id="checkpoint-file"></span></td>
      </tr>
      <tr>
        <td>Metadata:</td>
        <td><span id="metadata-file"></span></td>
      </tr>
    </table>
  </div>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-data-panel.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.DataPanelPolymer=a.PolymerElement({is:"vz-projector-data-panel",properties:{selectedTensor:{type:String,observer:"_selectedTensorChanged"},selectedRun:String,selectedColorOptionName:{type:String,notify:!0,observer:"_selectedColorOptionNameChanged"},selectedLabelOption:{type:String,notify:!0,observer:"_selectedLabelOptionChanged"},normalizeData:Boolean,showForceCategoricalColorsCheckbox:Boolean,metadataEditorInput:{type:String},metadataEditorInputLabel:{type:String,value:"Tag selection as"},
metadataEditorInputChange:{type:Object},metadataEditorColumn:{type:String},metadataEditorColumnChange:{type:Object},metadataEditorButtonClicked:{type:Object},metadataEditorButtonDisabled:{type:Boolean},downloadMetadataClicked:{type:Boolean},superviseInput:{type:String},superviseInputTyping:{type:Object},superviseInputChange:{type:Object},superviseInputLabel:{type:String,value:"Ignored label"},superviseColumn:{type:String},superviseColumnChanged:{type:Object},showSuperviseSettings:{type:Boolean,value:!1}},
observers:["_generateUiForNewCheckpointForRun(selectedRun)"]});var b=function(c){function d(){var e=null!==c&&c.apply(this,arguments)||this;e.forceCategoricalColoring=!1;return e}zc(d,c);d.prototype.ready=function(){this.normalizeData=!0;this.superviseInputSelected=""};d.prototype.initialize=function(e,g){var h=this;this.projector=e;this.dataProvider=g;this.setupUploadButtons();this.querySelector("#normalize-data-checkbox").addEventListener("change",function(){h.projector.setNormalizeData(h.normalizeData)});
var k=this.querySelector("#force-categorical-checkbox");k.addEventListener("change",function(){h.setForceCategoricalColoring(k.checked)});this.dataProvider.retrieveRuns(function(l){h.runNames=l;0<h.runNames.length&&(h.selectedRun!=l[0]?h.selectedRun=l[0]:h._generateUiForNewCheckpointForRun(h.selectedRun))})};d.prototype.setForceCategoricalColoring=function(e){this.forceCategoricalColoring=e;this.querySelector("#force-categorical-checkbox").checked=this.forceCategoricalColoring;this.updateMetadataUI(this.spriteAndMetadata.stats,
this.metadataFile);this._selectedColorOptionNameChanged()};d.prototype.getSeparatorClass=function(e){return e?"separator":null};d.prototype.metadataChanged=function(e,g){var h=this;this.spriteAndMetadata=e;null!=g&&(this.metadataFile=g);this.updateMetadataUI(this.spriteAndMetadata.stats,this.metadataFile);if(null==this.selectedColorOptionName||0===this.colorOptions.filter(function(l){return l.name===h.selectedColorOptionName}).length)this.selectedColorOptionName=this.colorOptions[0].name;var k=-1;
this.metadataFields=e.stats.map(function(l,m){l.isNumeric||-1!==k||(k=m);return l.name});if(null==this.metadataEditorColumn||0===this.metadataFields.filter(function(l){return l===h.metadataEditorColumn}).length)this.metadataEditorColumn=this.metadataFields[Math.max(0,k)];if(null==this.superviseColumn||0===this.metadataFields.filter(function(l){return l===h.superviseColumn}).length)this.superviseColumn=this.metadataFields[Math.max(0,k)],this.superviseInput="";this.superviseInputChange()};d.prototype.projectionChanged=
function(e){if(e)switch(e.projectionType){case "tsne":this.set("showSuperviseSettings",!0);break;default:this.set("showSuperviseSettings",!1)}};d.prototype.onProjectorSelectionChanged=function(e,g){this.selectedPointIndices=e;this.neighborsOfFirstPoint=g;this.metadataEditorInputChange()};d.prototype.addWordBreaks=function(e){return null==e?"":e.replace(/([\/=-_,])/g,"$1\x3cwbr\x3e")};d.prototype.updateMetadataUI=function(e,g){var h=this,k=this.querySelector("#metadata-file");k.innerHTML=this.addWordBreaks(g);
k.title=g;var l=-1;this.labelOptions=e.map(function(m,n){m.isNumeric||-1!==l||(l=n);return m.name});if(null==this.selectedLabelOption||0===this.labelOptions.filter(function(m){return m===h.selectedLabelOption}).length)this.selectedLabelOption=this.labelOptions[Math.max(0,l)];if(null==this.metadataEditorColumn||0===this.labelOptions.filter(function(m){return m===h.metadataEditorColumn}).length)this.metadataEditorColumn=this.labelOptions[Math.max(0,l)];g=[{name:"No color map"}];e=e.filter(function(m){return!m.tooManyUniqueValues||
m.isNumeric}).map(function(m){if(h.forceCategoricalColoring||!m.tooManyUniqueValues){var n=d3.scaleOrdinal(d3.schemeCategory10);var q=n.range();var p=q.map(function(v,u){return q[3*u%q.length]});var t=m.uniqueEntries;n.range(p).domain(t.map(function(v){return v.label}));p=m.uniqueEntries.length;p=p+" "+(p>q.length?" non-unique":"")+" colors"}else{var r=[{color:"#ffffdd",value:m.min},{color:"#1f2d86",value:m.max}];n=d3.scaleLinear().domain(r.map(function(v){return v.value})).range(r.map(function(v){return v.color}));
p="gradient"}return{name:m.name,desc:p,map:n,items:t,thresholds:r,tooManyUniqueValues:m.tooManyUniqueValues}});0<e.length&&g.push({name:"Metadata",isSeparator:!0});this.colorOptions=g.concat(e)};d.prototype.metadataEditorContext=function(e){this.metadataEditorButtonDisabled=!e;this.projector&&this.projector.metadataEditorContext(e,this.metadataEditorColumn)};d.prototype.metadataEditorInputChange=function(){var e=this.metadataEditorColumn,g=this.metadataEditorInput,h=this.selectedPointIndices.length+
this.neighborsOfFirstPoint.length;0<h?null!=g&&""!==g.trim()?this.spriteAndMetadata.stats.filter(function(k){return k.name===e})[0].isNumeric&&isNaN(+g)?(this.metadataEditorInputLabel="Label must be numeric",this.metadataEditorContext(!1)):(0===this.projector.dataSet.points.filter(function(k){return k.metadata[e].toString()===g.trim()}).length?this.metadataEditorInputLabel="Tag "+h+" with new label":this.metadataEditorInputLabel="Tag "+h+" points as",this.metadataEditorContext(!0)):(this.metadataEditorInputLabel=
"Tag selection as",this.metadataEditorContext(!1)):(this.metadataEditorContext(!1),null!=g&&""!==g.trim()?this.metadataEditorInputLabel="Select points to tag":this.metadataEditorInputLabel="Tag selection as")};d.prototype.metadataEditorInputKeydown=function(e){13===e.keyCode&&this.metadataEditorButtonClicked();e.stopPropagation()};d.prototype.metadataEditorColumnChange=function(){this.metadataEditorInputChange()};d.prototype.metadataEditorButtonClicked=function(){if(!this.metadataEditorButtonDisabled){var e=
this.metadataEditorInput.trim(),g=this.selectedPointIndices.length+this.neighborsOfFirstPoint.length;this.projector.metadataEdit(this.metadataEditorColumn,e);this.projector.metadataEditorContext(!0,this.metadataEditorColumn);this.metadataEditorInputLabel=g+" labeled as '"+e+"'"}};d.prototype.downloadMetadataClicked=function(){if(this.projector&&this.projector.dataSet&&this.projector.dataSet.spriteAndMetadataInfo){var e=this.projector.dataSet.spriteAndMetadataInfo.stats.map(function(h){return h.name}).join("\t");
this.projector.dataSet.spriteAndMetadataInfo.pointsInfo.forEach(function(h){var k=[],l;for(l in h)k.push(h[l]);e+="\n"+k.join("\t")});var g=new Blob([e],{type:"text/plain"});this.$.downloadMetadataLink.download="metadata-edited.tsv";this.$.downloadMetadataLink.href=window.URL.createObjectURL(g);this.$.downloadMetadataLink.click()}};d.prototype.superviseInputTyping=function(){var e=this,g=this.superviseInput.trim();if(null==g||""===g.trim())this.superviseInputLabel=""===this.superviseInputSelected?
"No ignored label":"Supervising without '"+this.superviseInputSelected+"'";else if(this.projector&&this.projector.dataSet){var h=this.projector.dataSet.points.filter(function(k){return k.metadata[e.superviseColumn].toString().trim()===g}).length;0===h?this.superviseInputLabel="Label not found":this.projector.dataSet.superviseInput!=g&&(this.superviseInputLabel="Supervise without '"+g+"' ["+h+" points]")}};d.prototype.superviseInputChange=function(){var e=this,g=this.superviseInput.trim();if(null==
g||""===g.trim())this.superviseInputSelected="",this.superviseInputLabel="No ignored label",this.setSupervision(this.superviseColumn,"");else if(this.projector&&this.projector.dataSet){var h=this.projector.dataSet.points.filter(function(k){return k.metadata[e.superviseColumn].toString().trim()===g}).length;0===h?this.superviseInputLabel="Supervising without '"+this.superviseInputSelected+"'":(this.superviseInputSelected=g,this.superviseInputLabel="Supervising without '"+g+"' ["+h+" points]",this.setSupervision(this.superviseColumn,
g))}};d.prototype.superviseColumnChanged=function(){this.superviseInput="";this.superviseInputChange()};d.prototype.setSupervision=function(e,g){this.projector&&this.projector.dataSet&&this.projector.dataSet.setSupervision(e,g)};d.prototype.setNormalizeData=function(e){this.normalizeData=e};d.prototype._selectedTensorChanged=function(){var e=this;this.projector.updateDataSet(null,null,null);null!=this.selectedTensor&&(this.dataProvider.retrieveTensor(this.selectedRun,this.selectedTensor,function(g){var h=
e.getEmbeddingInfoByName(e.selectedTensor).metadataPath;e.dataProvider.retrieveSpriteAndMetadata(e.selectedRun,e.selectedTensor,function(k){e.projector.updateDataSet(g,k,h)})}),this.projector.setSelectedTensor(this.selectedRun,this.getEmbeddingInfoByName(this.selectedTensor)))};d.prototype._generateUiForNewCheckpointForRun=function(e){var g=this;this.dataProvider.retrieveProjectorConfig(e,function(h){g.projectorConfig=h;h=g.projectorConfig.embeddings.map(function(m){return m.tensorName}).filter(function(m){m=
g.getEmbeddingInfoByName(m).tensorShape;return 2===m.length&&1<m[0]&&1<m[1]}).sort(function(m,n){var q=g.getEmbeddingInfoByName(m),p=g.getEmbeddingInfoByName(n);if(a.util.xor(!!q.metadataPath,!!p.metadataPath))return q.metadataPath?-1:1;var t=a.util.tensorIsGenerated(n);if(a.util.xor(a.util.tensorIsGenerated(m),t))return t?-1:1;q=q.tensorShape[0];p=p.tensorShape[0];return q!==p?p-q:m<=n?-1:1});g.tensorNames=h.map(function(m){return{name:m,shape:g.getEmbeddingInfoByName(m).tensorShape}});var k=g.addWordBreaks(g.projectorConfig.modelCheckpointPath),
l=g.querySelector("#checkpoint-file");l.innerHTML=k;l.title=g.projectorConfig.modelCheckpointPath;h="demo"===g.projector.servingMode?g.projectorConfig.embeddings[0].tensorName:h[0];g.selectedTensor===h?g._selectedTensorChanged():g.selectedTensor=h})};d.prototype._selectedLabelOptionChanged=function(){this.projector.setSelectedLabelOption(this.selectedLabelOption)};d.prototype._selectedColorOptionNameChanged=function(){for(var e,g=0;g<this.colorOptions.length;g++)if(this.colorOptions[g].name===this.selectedColorOptionName){e=
this.colorOptions[g];break}e&&(this.showForceCategoricalColorsCheckbox=!!e.tooManyUniqueValues,this.colorLegendRenderInfo=null==e.map?null:e.items?{items:e.items.map(function(h){return{color:e.map(h.label),label:h.label,count:h.count}}),thresholds:null}:{items:null,thresholds:e.thresholds},this.projector.setSelectedColorOption(e))};d.prototype.tensorWasReadFromFile=function(e,g){var h=this;a.parseRawTensors(e,function(k){var l=h.querySelector("#checkpoint-file");l.innerText=g;l.title=g;h.projector.updateDataSet(k)})};
d.prototype.metadataWasReadFromFile=function(e,g){var h=this;a.parseRawMetadata(e,function(k){h.projector.updateDataSet(h.projector.dataSet,k,g)})};d.prototype.getEmbeddingInfoByName=function(e){for(var g=0;g<this.projectorConfig.embeddings.length;g++){var h=this.projectorConfig.embeddings[g];if(h.tensorName===e)return h}};d.prototype.setupUploadButtons=function(){var e=this,g=this.querySelector("#file");g.onchange=function(){var v=g.files[0];g.value="";var u=new FileReader;u.onload=function(){e.tensorWasReadFromFile(u.result,
v.name)};u.readAsArrayBuffer(v)};this.querySelector("#upload-tensors").onclick=function(){g.click()};var h=this.querySelector("#file-metadata");h.onchange=function(){var v=h.files[0];h.value="";var u=new FileReader;u.onload=function(){e.metadataWasReadFromFile(u.result,v.name)};u.readAsArrayBuffer(v)};this.querySelector("#upload-metadata").onclick=function(){h.click()};"demo"!==this.projector.servingMode&&(this.$$("#publish-container").style.display="none",this.$$("#upload-tensors-step-container").style.display=
"none",this.$$("#upload-metadata-label").style.display="none");this.$$("#demo-data-buttons-container").style.display="flex";var k=this.$$("#projector-config-template"),l={embeddings:[{tensorName:"My tensor",tensorShape:[1E3,50],tensorPath:"https://raw.githubusercontent.com/.../tensors.tsv",metadataPath:"https://raw.githubusercontent.com/.../optional.metadata.tsv"}]};this.setProjectorConfigTemplateJson(k,l);var m=this.$$("#config-sprite-checkbox");m.onchange=function(){m.checked?l.embeddings[0].sprite=
{imagePath:"https://github.com/.../optional.sprite.png",singleImageDim:[32,32]}:delete l.embeddings[0].sprite;e.setProjectorConfigTemplateJson(k,l)};var n=this.$$("#config-bookmarks-checkbox");n.onchange=function(){n.checked?l.embeddings[0].bookmarksPath="https://raw.githubusercontent.com/.../bookmarks.txt":delete l.embeddings[0].bookmarksPath;e.setProjectorConfigTemplateJson(k,l)};var q=this.$$("#config-metadata-checkbox");q.onchange=function(){q.checked?l.embeddings[0].metadataPath="https://raw.githubusercontent.com/.../optional.metadata.tsv":
delete l.embeddings[0].metadataPath;e.setProjectorConfigTemplateJson(k,l)};var p=this.$$("#projector-config-url"),t=this.$$("#projector-share-url"),r=this.$$("#projector-share-url-link");p.onchange=function(){var v=location.protocol+"//"+location.host+location.pathname+"?config\x3d"+p.value;t.value=v;r.href=v}};d.prototype.setProjectorConfigTemplateJson=function(e,g){e.value=JSON.stringify(g,null,2)};d.prototype._getNumTensorsLabel=function(){return 1===this.tensorNames.length?"1 tensor":this.tensorNames.length+
" tensors"};d.prototype._getNumRunsLabel=function(){return 1===this.runNames.length?"1 run":this.runNames.length+" runs"};d.prototype._hasChoice=function(e){return 0<e.length};d.prototype._hasChoices=function(e){return 1<e.length};return d}(a.DataPanelPolymer);a.DataPanel=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>








<dom-module id="vz-projector-input">
<template>
<style include="vz-projector-styles"></style>
<style>
.info {
  color: rgba(0, 0, 0, 0.5);
  display: block;
  font-size: 11px;
}

.toggle {
  font-size: 12px;
  height: 21px;
  margin: 0px;
  min-width: 0px;
  min-height: 0px;
  padding: 0;
  width: 17px;
}

.toggle[active] {
  background-color: #880E4F;
  color: white;
}
</style>

<paper-input label="[[label]]">
  <div class="slash" prefix slot="prefix">/</div>
  <div class="slash" suffix slot="suffix">/</div>
  <div suffix slot="suffix">
    <paper-button id="regex" toggles class="toggle">.*</paper-button>
  </div>
</paper-input>
<paper-tooltip for="regex" position="bottom" animation-delay="0" fit-to-visible-bounds>
  Enable/disable regex mode.
</paper-tooltip>
<span class="info">[[message]]</span>


</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-input.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.ProjectorInputPolymer=a.PolymerElement({is:"vz-projector-input",properties:{label:String,message:String}});var b=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}zc(d,c);d.prototype.registerInputChangedListener=function(e){this.textChangedListeners.push(e)};d.prototype.ready=function(){var e=this;this.inRegexMode=!1;this.textChangedListeners=[];this.paperInput=this.querySelector("paper-input");this.inRegexModeButton=this.querySelector("paper-button");this.paperInput.setAttribute("error-message",
"Invalid regex");this.paperInput.addEventListener("input",function(){e.onTextChanged()});this.paperInput.addEventListener("keydown",function(g){g.stopPropagation()});this.inRegexModeButton.addEventListener("click",function(){return e.onClickRegexModeButton()});this.updateRegexModeDisplaySlashes();this.onTextChanged()};d.prototype.onClickRegexModeButton=function(){this.inRegexMode=this.inRegexModeButton.active;this.updateRegexModeDisplaySlashes();this.onTextChanged()};d.prototype.notifyInputChanged=
function(e,g){this.textChangedListeners.forEach(function(h){return h(e,g)})};d.prototype.onTextChanged=function(){try{this.inRegexMode&&new RegExp(this.paperInput.value)}catch(e){this.paperInput.setAttribute("invalid","true");this.message="";this.notifyInputChanged(null,!0);return}this.paperInput.removeAttribute("invalid");this.notifyInputChanged(this.paperInput.value,this.inRegexMode)};d.prototype.updateRegexModeDisplaySlashes=function(){for(var e=this.paperInput.querySelectorAll(".slash"),g=this.inRegexMode?
"":"none",h=0;h<e.length;h++)e[h].style.display=g};d.prototype.getValue=function(){return this.paperInput.value};d.prototype.getInRegexMode=function(){return this.inRegexMode};d.prototype.set=function(e,g){this.inRegexModeButton.active=g;this.paperInput.value=e;this.onClickRegexModeButton()};return d}(a.ProjectorInputPolymer);a.ProjectorInput=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>











<script>//~~WEBPATH~~/iron-range-behavior/iron-range-behavior.html.js
Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(a){return(this._clampValue(a)-this.min)/(this.max-this.min)},_clampValue:function(a){return Math.min(this.max,Math.max(this.min,this._calcStep(a)))},_calcStep:function(a){a=parseFloat(a);
if(!this.step)return a;a=Math.round((a-this.min)/this.step);return 1>this.step?a/(1/this.step)+this.min:a*this.step+this.min},_validateValue:function(){var a=this._clampValue(this.value);this.value=this.oldValue=isNaN(a)?this.oldValue:a;return this.value!==a},_update:function(){this._validateValue();this._setRatio(100*this._calcRatio(this.value))}};
</script>










<dom-module id="paper-progress">
  <template>
    <style>
      :host {
        display: block;
        width: 200px;
        position: relative;
        overflow: hidden;
      }

      :host([hidden]), [hidden] {
        display: none !important;
      }

      #progressContainer {
        @apply --paper-progress-container;
        position: relative;
      }

      #progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after {
        height: var(--paper-progress-height, 4px);
      }

      #primaryProgress,
      #secondaryProgress,
      .indeterminate::after {
        @apply --layout-fit;
      }

      #progressContainer,
      .indeterminate::after {
        background: var(--paper-progress-container-color, var(--google-grey-300));
      }

      :host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress {
        -webkit-transition-property: -webkit-transform;
        transition-property: transform;

        /* Duration */
        -webkit-transition-duration: var(--paper-progress-transition-duration, 0.08s);
        transition-duration: var(--paper-progress-transition-duration, 0.08s);

        /* Timing function */
        -webkit-transition-timing-function: var(--paper-progress-transition-timing-function, ease);
        transition-timing-function: var(--paper-progress-transition-timing-function, ease);

        /* Delay */
        -webkit-transition-delay: var(--paper-progress-transition-delay, 0s);
        transition-delay: var(--paper-progress-transition-delay, 0s);
      }

      #primaryProgress,
      #secondaryProgress {
        @apply --layout-fit;
        -webkit-transform-origin: left center;
        transform-origin: left center;
        -webkit-transform: scaleX(0);
        transform: scaleX(0);
        will-change: transform;
      }

      #primaryProgress {
        background: var(--paper-progress-active-color, var(--google-green-500));
      }

      #secondaryProgress {
        background: var(--paper-progress-secondary-color, var(--google-green-100));
      }

      :host([disabled]) #primaryProgress {
        background: var(--paper-progress-disabled-active-color, var(--google-grey-500));
      }

      :host([disabled]) #secondaryProgress {
        background: var(--paper-progress-disabled-secondary-color, var(--google-grey-300));
      }

      :host(:not([disabled])) #primaryProgress.indeterminate {
        -webkit-transform-origin: right center;
        transform-origin: right center;
        -webkit-animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      :host(:not([disabled])) #primaryProgress.indeterminate::after {
        content: "";
        -webkit-transform-origin: center center;
        transform-origin: center center;

        -webkit-animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      @-webkit-keyframes indeterminate-bar {
        0% {
          -webkit-transform: scaleX(1) translateX(-100%);
        }
        50% {
          -webkit-transform: scaleX(1) translateX(0%);
        }
        75% {
          -webkit-transform: scaleX(1) translateX(0%);
          -webkit-animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          -webkit-transform: scaleX(0) translateX(0%);
        }
      }

      @-webkit-keyframes indeterminate-splitter {
        0% {
          -webkit-transform: scaleX(.75) translateX(-125%);
        }
        30% {
          -webkit-transform: scaleX(.75) translateX(-125%);
          -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
        100% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
      }

      @keyframes indeterminate-bar {
        0% {
          transform: scaleX(1) translateX(-100%);
        }
        50% {
          transform: scaleX(1) translateX(0%);
        }
        75% {
          transform: scaleX(1) translateX(0%);
          animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          transform: scaleX(0) translateX(0%);
        }
      }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.75) translateX(-125%);
        }
        30% {
          transform: scaleX(.75) translateX(-125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.75) translateX(125%);
        }
        100% {
          transform: scaleX(.75) translateX(125%);
        }
      }
    </style>

    <div id="progressContainer">
      <div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div>
      <div id="primaryProgress"></div>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-progress/paper-progress.html.js
Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max, indeterminate)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(a){this.toggleClass("indeterminate",
a,this.$.primaryProgress)},_transformProgress:function(a,b){a.style.transform=a.style.webkitTransform="scaleX("+b/100+")"},_mainRatioChanged:function(a){this._transformProgress(this.$.primaryProgress,a)},_progressChanged:function(a,b,c,d,e){a=this._clampValue(a);b=this._clampValue(b);var g=100*this._calcRatio(a),h=100*this._calcRatio(b);this._setSecondaryRatio(g);this._transformProgress(this.$.secondaryProgress,g);this._transformProgress(this.$.primaryProgress,h);this.secondaryProgress=a;e?this.removeAttribute("aria-valuenow"):
this.setAttribute("aria-valuenow",b);this.setAttribute("aria-valuemin",c);this.setAttribute("aria-valuemax",d)},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false")},_hideSecondaryProgress:function(a){return 0===a}});
</script>





<dom-module id="paper-slider">
  <template strip-whitespace>
    <style>
      :host {
        @apply --layout;
        @apply --layout-justified;
        @apply --layout-center;
        width: 200px;
        cursor: default;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        --paper-progress-active-color: var(--paper-slider-active-color, var(--google-blue-700));
        --paper-progress-secondary-color: var(--paper-slider-secondary-color, var(--google-blue-300));
        --paper-progress-disabled-active-color: var(--paper-slider-disabled-active-color, var(--paper-grey-400));
        --paper-progress-disabled-secondary-color: var(--paper-slider-disabled-secondary-color, var(--paper-grey-400));
        --calculated-paper-slider-height: var(--paper-slider-height, 2px);
      }

      /* focus shows the ripple */
      :host(:focus) {
        outline: none;
      }

      /**
       * NOTE(keanulee): Though :host-context is not universally supported, some pages
       * still rely on paper-slider being flipped when dir="rtl" is set on body. For full
       * compatibility, dir="rtl" must be explicitly set on paper-slider.
       */
      :dir(rtl) #sliderContainer {
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }

      /**
       * NOTE(keanulee): This is separate from the rule above because :host-context may
       * not be recognized.
       */
      :host([dir="rtl"]) #sliderContainer {
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }

      /**
       * NOTE(keanulee): Needed to override the :host-context rule (where supported)
       * to support LTR sliders in RTL pages.
       */
      :host([dir="ltr"]) #sliderContainer {
        -webkit-transform: scaleX(1);
        transform: scaleX(1);
      }

      #sliderContainer {
        position: relative;
        width: 100%;
        height: calc(30px + var(--calculated-paper-slider-height));
        margin-left: calc(15px + var(--calculated-paper-slider-height)/2);
        margin-right: calc(15px + var(--calculated-paper-slider-height)/2);
      }

      #sliderContainer:focus {
        outline: 0;
      }

      #sliderContainer.editable {
        margin-top: 12px;
        margin-bottom: 12px;
      }

      .bar-container {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        overflow: hidden;
      }

      .ring > .bar-container {
        left: calc(5px + var(--calculated-paper-slider-height)/2);
        transition: left 0.18s ease;
      }

      .ring.expand.dragging > .bar-container {
        transition: none;
      }

      .ring.expand:not(.pin) > .bar-container {
        left: calc(8px + var(--calculated-paper-slider-height)/2);
      }

      #sliderBar {
        padding: 15px 0;
        width: 100%;
        background-color: var(--paper-slider-bar-color, transparent);
        --paper-progress-container-color: var(--paper-slider-container-color, var(--paper-grey-400));
        --paper-progress-height: var(--calculated-paper-slider-height);
      }

      .slider-markers {
        position: absolute;
        /* slider-knob is 30px + the slider-height so that the markers should start at a offset of 15px*/
        top: 15px;
        height: var(--calculated-paper-slider-height);
        left: 0;
        right: -1px;
        box-sizing: border-box;
        pointer-events: none;
        @apply --layout-horizontal;
      }

      .slider-marker {
        @apply --layout-flex;
      }
      .slider-markers::after,
      .slider-marker::after {
        content: "";
        display: block;
        margin-left: -1px;
        width: 2px;
        height: var(--calculated-paper-slider-height);
        border-radius: 50%;
        background-color: var(--paper-slider-markers-color, #000);
      }

      .slider-knob {
        position: absolute;
        left: 0;
        top: 0;
        margin-left: calc(-15px - var(--calculated-paper-slider-height)/2);
        width: calc(30px + var(--calculated-paper-slider-height));
        height: calc(30px + var(--calculated-paper-slider-height));
      }

      .transiting > .slider-knob {
        transition: left 0.08s ease;
      }

      .slider-knob:focus {
        outline: none;
      }

      .slider-knob.dragging {
        transition: none;
      }

      .snaps > .slider-knob.dragging {
        transition: -webkit-transform 0.08s ease;
        transition: transform 0.08s ease;
      }

      .slider-knob-inner {
        margin: 10px;
        width: calc(100% - 20px);
        height: calc(100% - 20px);
        background-color: var(--paper-slider-knob-color, var(--google-blue-700));
        border: 2px solid var(--paper-slider-knob-color, var(--google-blue-700));
        border-radius: 50%;

        -moz-box-sizing: border-box;
        box-sizing: border-box;

        transition-property: -webkit-transform, background-color, border;
        transition-property: transform, background-color, border;
        transition-duration: 0.18s;
        transition-timing-function: ease;
      }

      .expand:not(.pin) > .slider-knob > .slider-knob-inner {
        -webkit-transform: scale(1.5);
        transform: scale(1.5);
      }

      .ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));
      }

      .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-color, var(--google-blue-700));
      }

      .pin > .slider-knob > .slider-knob-inner::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -13px;
        width: 26px;
        height: 26px;
        border-radius: 50% 50% 50% 0;

        -webkit-transform: rotate(-45deg) scale(0) translate(0);
        transform: rotate(-45deg) scale(0) translate(0);
      }

      .slider-knob-inner::before,
      .slider-knob-inner::after {
        transition: -webkit-transform .18s ease, background-color .18s ease;
        transition: transform .18s ease, background-color .18s ease;
      }

      .pin.ring > .slider-knob > .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-start-color, var(--paper-grey-400));
      }

      .pin.expand > .slider-knob > .slider-knob-inner::before {
        -webkit-transform: rotate(-45deg) scale(1) translate(17px, -17px);
        transform: rotate(-45deg) scale(1) translate(17px, -17px);
      }

      .pin > .slider-knob > .slider-knob-inner::after {
        content: attr(value);
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -16px;
        width: 32px;
        height: 26px;
        text-align: center;
        color: var(--paper-slider-font-color, #fff);
        font-size: 10px;

        -webkit-transform: scale(0) translate(0);
        transform: scale(0) translate(0);
      }

      .pin.expand > .slider-knob > .slider-knob-inner::after {
        -webkit-transform: scale(1) translate(0, -17px);
        transform: scale(1) translate(0, -17px);
      }

      /* paper-input */
      .slider-input {
        width: 50px;
        overflow: hidden;
        --paper-input-container-input: {
          text-align: center;
          @apply --paper-slider-input-container-input;
        };
        @apply --paper-slider-input;
      }

      /* disabled state */
      #sliderContainer.disabled {
        pointer-events: none;
      }

      .disabled > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-disabled-knob-color, var(--paper-grey-400));
        border: 2px solid var(--paper-slider-disabled-knob-color, var(--paper-grey-400));
        -webkit-transform: scale3d(0.75, 0.75, 1);
        transform: scale3d(0.75, 0.75, 1);
      }

      .disabled.ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));
      }

      paper-ripple {
        color: var(--paper-slider-knob-color, var(--google-blue-700));
      }
    </style>

    <div id="sliderContainer" class$="[[_getClassNames(disabled, pin, snaps, immediateValue, min, expand, dragging, transiting, editable)]]">
      <div class="bar-container">
        <paper-progress disabled$="[[disabled]]" id="sliderBar" aria-hidden="true" min="[[min]]" max="[[max]]" step="[[step]]" value="[[immediateValue]]" secondary-progress="[[secondaryProgress]]" on-down="_bardown" on-up="_resetKnob" on-track="_bartrack" on-tap="_barclick">
        </paper-progress>
      </div>

      <template is="dom-if" if="[[snaps]]">
        <div class="slider-markers">
          <template is="dom-repeat" items="[[markers]]">
            <div class="slider-marker"></div>
          </template>
        </div>
      </template>

      <div id="sliderKnob" class="slider-knob" on-down="_knobdown" on-up="_resetKnob" on-track="_onTrack" on-transitionend="_knobTransitionEnd">
          <div class="slider-knob-inner" value$="[[immediateValue]]"></div>
      </div>
    </div>

    <template is="dom-if" if="[[editable]]">
      <paper-input id="input" type="number" step="[[step]]" min="[[min]]" max="[[max]]" class="slider-input" disabled$="[[disabled]]" value="[[immediateValue]]" on-change="_changeValue" on-keydown="_inputKeyDown" no-label-float>
      </paper-input>
    </template>
  </template>

  <script>//~~WEBPATH~~/paper-slider/paper-slider.html.js
Polymer({is:"paper-slider",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronFormElementBehavior,Polymer.PaperInkyFocusBehavior,Polymer.IronRangeBehavior],properties:{value:{type:Number,value:0},snaps:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},secondaryProgress:{type:Number,value:0,notify:!0,observer:"_secondaryProgressChanged"},editable:{type:Boolean,value:!1},immediateValue:{type:Number,value:0,readOnly:!0,notify:!0},maxMarkers:{type:Number,value:0,notify:!0},expand:{type:Boolean,
value:!1,readOnly:!0},ignoreBarTouch:{type:Boolean,value:!1},dragging:{type:Boolean,value:!1,readOnly:!0,notify:!0},transiting:{type:Boolean,value:!1,readOnly:!0},markers:{type:Array,readOnly:!0,value:function(){return[]}}},observers:["_updateKnob(value, min, max, snaps, step)","_valueChanged(value)","_immediateValueChanged(immediateValue)","_updateMarkers(maxMarkers, min, max, snaps)"],hostAttributes:{role:"slider",tabindex:0},keyBindings:{left:"_leftKey",right:"_rightKey","down pagedown home":"_decrementKey",
"up pageup end":"_incrementKey"},ready:function(){this.ignoreBarTouch&&Polymer.Gestures.setTouchAction(this.$.sliderBar,"auto")},increment:function(){this.value=this._clampValue(this.value+this.step)},decrement:function(){this.value=this._clampValue(this.value-this.step)},_updateKnob:function(a,b,c){this.setAttribute("aria-valuemin",b);this.setAttribute("aria-valuemax",c);this.setAttribute("aria-valuenow",a);this._positionKnob(100*this._calcRatio(a))},_valueChanged:function(){this.fire("value-change",
{composed:!0})},_immediateValueChanged:function(){this.dragging?this.fire("immediate-value-change",{composed:!0}):this.value=this.immediateValue},_secondaryProgressChanged:function(){this.secondaryProgress=this._clampValue(this.secondaryProgress)},_expandKnob:function(){this._setExpand(!0)},_resetKnob:function(){this.cancelDebouncer("expandKnob");this._setExpand(!1)},_positionKnob:function(a){this._setImmediateValue(this._calcStep(this._calcKnobPosition(a)));this._setRatio(100*this._calcRatio(this.immediateValue));
this.$.sliderKnob.style.left=this.ratio+"%";this.dragging&&(this._knobstartx=this.ratio*this._w/100,this.translate3d(0,0,0,this.$.sliderKnob))},_calcKnobPosition:function(a){return(this.max-this.min)*a/100+this.min},_onTrack:function(a){a.stopPropagation();switch(a.detail.state){case "start":this._trackStart(a);break;case "track":this._trackX(a);break;case "end":this._trackEnd()}},_trackStart:function(){this._setTransiting(!1);this._w=this.$.sliderBar.offsetWidth;this._knobstartx=this._startx=this._x=
this.ratio*this._w/100;this._minx=-this._startx;this._maxx=this._w-this._startx;this.$.sliderKnob.classList.add("dragging");this._setDragging(!0)},_trackX:function(a){this.dragging||this._trackStart(a);this._x=this._startx+Math.min(this._maxx,Math.max(this._minx,a.detail.dx*(this._isRTL?-1:1)));this._setImmediateValue(this._calcStep(this._calcKnobPosition(this._x/this._w*100)));this.translate3d(this._calcRatio(this.immediateValue)*this._w-this._knobstartx+"px",0,0,this.$.sliderKnob)},_trackEnd:function(){var a=
this.$.sliderKnob.style;this.$.sliderKnob.classList.remove("dragging");this._setDragging(!1);this._resetKnob();this.value=this.immediateValue;a.transform=a.webkitTransform="";this.fire("change",{composed:!0})},_knobdown:function(a){this._expandKnob();a.preventDefault();this.focus()},_bartrack:function(a){this._allowBarEvent(a)&&this._onTrack(a)},_barclick:function(a){this._w=this.$.sliderBar.offsetWidth;var b=this.$.sliderBar.getBoundingClientRect();b=(a.detail.x-b.left)/this._w*100;this._isRTL&&
(b=100-b);var c=this.ratio;this._setTransiting(!0);this._positionKnob(b);c===this.ratio&&this._setTransiting(!1);this.async(function(){this.fire("change",{composed:!0})});a.preventDefault();this.focus()},_bardown:function(a){this._allowBarEvent(a)&&(this.debounce("expandKnob",this._expandKnob,60),this._barclick(a))},_knobTransitionEnd:function(a){a.target===this.$.sliderKnob&&this._setTransiting(!1)},_updateMarkers:function(a,b,c,d){d||this._setMarkers([]);b=Math.round((c-b)/this.step);b>a&&(b=a);
if(0>b||!isFinite(b))b=0;this._setMarkers(Array(b))},_mergeClasses:function(a){return Object.keys(a).filter(function(b){return a[b]}).join(" ")},_getClassNames:function(){return this._mergeClasses({disabled:this.disabled,pin:this.pin,snaps:this.snaps,ring:this.immediateValue<=this.min,expand:this.expand,dragging:this.dragging,transiting:this.transiting,editable:this.editable})},_allowBarEvent:function(a){return!this.ignoreBarTouch||a.detail.sourceEvent instanceof MouseEvent},get _isRTL(){void 0===
this.__isRTL&&(this.__isRTL="rtl"===window.getComputedStyle(this).direction);return this.__isRTL},_leftKey:function(a){this._isRTL?this._incrementKey(a):this._decrementKey(a)},_rightKey:function(a){this._isRTL?this._decrementKey(a):this._incrementKey(a)},_incrementKey:function(a){this.disabled||("end"===a.detail.key?this.value=this.max:this.increment(),this.fire("change"),a.preventDefault())},_decrementKey:function(a){this.disabled||("home"===a.detail.key?this.value=this.min:this.decrement(),this.fire("change"),
a.preventDefault())},_changeValue:function(a){this.value=a.target.value;this.fire("change",{composed:!0})},_inputKeyDown:function(a){a.stopPropagation()},_createRipple:function(){this._rippleContainer=this.$.sliderKnob;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)},_focusedChanged:function(a){a&&this.ensureRipple();this.hasRipple()&&(this._ripple.style.display=a?"":"none",this._ripple.holdDown=a)}});
</script>
</dom-module>







<dom-module id="vz-projector-inspector-panel">
<style include="vz-projector-styles"></style>
<style>
:host {
   display: flex;
   flex-direction: column;
   /* Account for the bookmark pane at the bottom */
   height: calc(100% - 55px);
}

.container {
  display: block;
  padding: 10px 20px 0 20px;
}

.buttons {
  display: flex;
  height: 60px;
}

.button {
  margin-right: 10px;
  border: none;
  border-radius: 7px;
  font-size: 13px;
  padding: 10px;
  background: #e3e3e3;
}

.button:last-child {
  margin-right: 0;
}

.nn, .metadata-info {
  display: flex;
  flex-direction: column;
}

.nn > *, .metadata-info > * {
  padding: 0 20px;
}

.nn-list, .metadata-list {
  overflow-y: auto;
}

.nn-list .neighbor, .metadata-list .metadata {
  font-size: 12px;
  margin-bottom: 8px;
}

.nn-list .label-and-value, .metadata-list .label-and-value {
  display: flex;
  justify-content: space-between;
}

.label {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.nn-list .value, .metadata-list .value {
  color: #666;
  float: right;
  font-weight: 300;
  margin-left: 8px;
}

.nn-list .bar, .metadata-list .bar {
  position: relative;
  border-top: 1px solid rgba(0, 0, 0, 0.15);
  margin: 2px 0;
}

.nn-list .bar .fill, .metadata-list .bar .fill {
  position: absolute;
  top: -1px;
  border-top: 1px solid white;
}

.nn-list .tick, .metadata-list .tick {
  position: absolute;
  top: 0px;
  height: 3px;
  border-left: 1px solid rgba(0, 0, 0, 0.15);
}

.nn-list .neighbor-link:hover, .metadata-list .metadata-link:hover {
  cursor: pointer;
}

.search-by {
  display: flex;
}

.search-by vz-projector-input {
  width: 100%;
}

.search-by paper-dropdown-menu {
  margin-left: 10px;
  width: 100px;
}

.distance .options {
  float: right;
}

.options a {
  color: #727272;
  font-size: 13px;
  margin-left: 12px;
  text-decoration: none;
}

.options a.selected {
  color: #009EFE;
}

.neighbors {
  margin-bottom: 30px;
}

.neighbors-options {
  margin-top: 6px;
}

.neighbors-options .option-label, .distance .option-label {
  color: #727272;
  margin-right: 2px;
  width: auto;
}

.num-neighbors-container {
  display: inline-block;
}

.nn-slider {
  --paper-slider-input: {
    width: 64px;
  };
  --paper-input-container-input: {
    font-size: 14px;
  };
}

.euclidean {
  margin-right: 10px;
}

.matches-list {
  padding: 0 20px;
}

.matches-list .row {
  border-bottom: 1px solid #ddd;
  cursor: pointer;
  display: flex;
  font-size: 12px;
  margin: 5px 0;
  padding: 4px 0;
}

.results {
  display: flex;
  flex-direction: column;
}
</style>
<template>
<div class="container">
  <div class="buttons">
    <button class="button reset-filter">Show All Data</button>
    <button class="button set-filter">Isolate selection</button>
    <button class="button clear-selection">Clear selection</button>
  </div>
  <div class="search-by">
    <vz-projector-input id="search-box" label="Search"></vz-projector-input>
    <paper-dropdown-menu no-animations label="by">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedMetadataField}}" slot="dropdown-content">
        <template is="dom-repeat" items="[[metadataFields]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </div>
</div>
<div class="results">
  <div class="nn" style="display: none">
    <div class="neighbors">
      <div class="neighbors-options">
        <div class="slider num-nn">
          <span class="option-label">neighbors</span>
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
            The number of neighbors (in the original space) to show when clicking on a point.
          </paper-tooltip>
          <paper-slider class="nn-slider" pin min="5" max="999" editable value="{{numNN}}" on-change="updateNumNN"></paper-slider>
        </div>
      </div>
      <div class="distance">
        <span class="option-label">distance</span>
        <div class="options">
          <a class="selected cosine" href="javascript:void(0);">COSINE</a>
          <a class="euclidean" href="javascript:void(0);">EUCLIDEAN</a>
        </div>
      </div>
    </div>
    <p>Nearest points in the original space:
    <div class="nn-list"></div>
  </div>
  <div class="metadata-info" style="display: none">
    <div class="neighbors-options">
      <div class="slider num-nn">
        <span class="option-label">neighbors</span>
        <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
        <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
          The number of neighbors (in the selected space) to show when clicking on a point.
        </paper-tooltip>
        <paper-slider class="nn-slider" pin min="5" max="999" editable value="{{numNN}}" on-change="updateNumNN"></paper-slider>
      </div>
    </div>
    <p>{{metadataColumn}} labels (click to apply):
    <div class="metadata-list"></div>
  </div>
  <div class="matches-list" style="display: none">
    <div class="list"></div>
    <div class="limit-msg">Showing only the first 100 results...</div>
  </div>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-inspector-panel.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.InspectorPanelPolymer=a.PolymerElement({is:"vz-projector-inspector-panel",properties:{selectedMetadataField:String,metadataFields:Array,metadataColumn:String,numNN:{type:Number,value:100},updateNumNN:Object}});var b=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}zc(d,c);d.prototype.ready=function(){this.resetFilterButton=this.querySelector(".reset-filter");this.setFilterButton=this.querySelector(".set-filter");this.clearSelectionButton=this.querySelector(".clear-selection");
this.limitMessage=this.querySelector(".limit-msg");this.searchBox=this.querySelector("#search-box");this.displayContexts=[];this.scopeSubtree(this,!0)};d.prototype.initialize=function(e,g){var h=this;this.projector=e;this.projectorEventContext=g;this.setupUI(e);g.registerSelectionChangedListener(function(k,l){return h.updateInspectorPane(k,l)})};d.prototype.updateInspectorPane=function(e,g){this.neighborsOfFirstPoint=g;this.selectedPointIndices=e;this.updateFilterButtons(e.length+g.length);this.updateNeighborsList(g);
0===g.length?this.updateSearchResults(e):this.updateSearchResults([])};d.prototype.enableResetFilterButton=function(e){this.resetFilterButton.disabled=!e};d.prototype.restoreUIFromBookmark=function(e){this.enableResetFilterButton(null!=e.filteredPoints)};d.prototype.metadataChanged=function(e){var g=this,h=-1;this.metadataFields=e.stats.map(function(k,l){k.isNumeric||-1!==h||(h=l);return k.name});if(null==this.selectedMetadataField||0===this.metadataFields.filter(function(k){return k===g.selectedMetadataField}).length)this.selectedMetadataField=
this.metadataFields[Math.max(0,h)];this.updateInspectorPane(this.selectedPointIndices,this.neighborsOfFirstPoint)};d.prototype.datasetChanged=function(){this.enableResetFilterButton(!1)};d.prototype.metadataEditorContext=function(e,g){var h=this;if(this.projector&&this.projector.dataSet){var k=this.projector.dataSet.spriteAndMetadataInfo.stats.filter(function(n){return n.name===g});if(!e||0===k.length||k[0].tooManyUniqueValues)this.removeContext(".metadata-info");else{this.metadataColumn=g;this.addContext(".metadata-info");
var l=this.querySelector(".metadata-list");l.innerHTML="";e=k[0].uniqueEntries.sort(function(n,q){return n.count-q.count});var m=e[e.length-1].count;e.forEach(function(n){var q=document.createElement("div");q.className="metadata";var p=document.createElement("a");p.className="metadata-link";p.title=n.label;var t=document.createElement("div");t.className="label-and-value";var r=document.createElement("div");r.className="label";r.style.color=a.dist2color(h.distFunc,m,n.count);r.innerText=n.label;var v=
document.createElement("div");v.className="value";v.innerText=n.count.toString();t.appendChild(r);t.appendChild(v);r=document.createElement("div");r.className="bar";v=document.createElement("div");v.className="fill";v.style.borderTopColor=a.dist2color(h.distFunc,m,n.count);v.style.width=100*a.normalizeDist(h.distFunc,m,n.count)+"%";r.appendChild(v);for(v=1;4>v;v++){var u=document.createElement("div");u.className="tick";u.style.left=100*v/4+"%";r.appendChild(u)}p.appendChild(t);p.appendChild(r);q.appendChild(p);
l.appendChild(q);p.onclick=function(){h.projector.metadataEdit(g,n.label)}})}}};d.prototype.addContext=function(e){var g=this;-1===this.displayContexts.indexOf(e)&&this.displayContexts.push(e);this.displayContexts.forEach(function(h){g.querySelector(h).style.display="none"});this.querySelector(e).style.display=null};d.prototype.removeContext=function(e){this.displayContexts=this.displayContexts.filter(function(g){return g!==e});this.querySelector(e).style.display="none";0<this.displayContexts.length&&
(this.querySelector(this.displayContexts[this.displayContexts.length-1]).style.display=null)};d.prototype.updateSearchResults=function(e){var g=this,h=this.querySelector(".matches-list").querySelector(".list");h.innerHTML="";if(0===e.length)this.removeContext(".matches-list");else{this.addContext(".matches-list");this.limitMessage.style.display=100>=e.length?"none":null;e=e.slice(0,100);for(var k=function(n){var q=e[n];n=document.createElement("div");n.className="row";var p=l.getLabelFromIndex(q),
t=document.createElement("a");t.className="label";t.title=p;t.innerText=p;t.onmouseenter=function(){g.projectorEventContext.notifyHoverOverPoint(q)};t.onmouseleave=function(){g.projectorEventContext.notifyHoverOverPoint(null)};t.onclick=function(){g.projectorEventContext.notifySelectionChanged([q])};n.appendChild(t);h.appendChild(n)},l=this,m=0;m<e.length;m++)k(m)}};d.prototype.getLabelFromIndex=function(e){return this.projector.dataSet.points[e].metadata[this.selectedMetadataField].toString()};d.prototype.updateNeighborsList=
function(e){var g=this,h=this.querySelector(".nn-list");h.innerHTML="";if(0===e.length)this.removeContext(".nn");else{this.addContext(".nn");this.searchBox.message="";for(var k=0<e.length?e[0].dist:0,l=function(q){var p=e[q];q=document.createElement("div");q.className="neighbor";var t=document.createElement("a");t.className="neighbor-link";t.title=m.getLabelFromIndex(p.index);var r=document.createElement("div");r.className="label-and-value";var v=document.createElement("div");v.className="label";
v.style.color=a.dist2color(m.distFunc,p.dist,k);v.innerText=m.getLabelFromIndex(p.index);var u=document.createElement("div");u.className="value";u.innerText=p.dist.toFixed(3);r.appendChild(v);r.appendChild(u);v=document.createElement("div");v.className="bar";u=document.createElement("div");u.className="fill";u.style.borderTopColor=a.dist2color(m.distFunc,p.dist,k);u.style.width=100*a.normalizeDist(m.distFunc,p.dist,k)+"%";v.appendChild(u);for(u=1;4>u;u++){var w=document.createElement("div");w.className=
"tick";w.style.left=100*u/4+"%";v.appendChild(w)}t.appendChild(r);t.appendChild(v);q.appendChild(t);h.appendChild(q);t.onmouseenter=function(){g.projectorEventContext.notifyHoverOverPoint(p.index)};t.onmouseleave=function(){g.projectorEventContext.notifyHoverOverPoint(null)};t.onclick=function(){g.projectorEventContext.notifySelectionChanged([p.index])}},m=this,n=0;n<e.length;n++)l(n)}};d.prototype.updateFilterButtons=function(e){1<e?(this.setFilterButton.innerText="Isolate "+e+" points",this.setFilterButton.disabled=
null,this.clearSelectionButton.disabled=null):(this.setFilterButton.disabled=!0,this.clearSelectionButton.disabled=!0)};d.prototype.setupUI=function(e){var g=this;this.distFunc=a.vector.cosDist;var h=this.querySelector(".distance a.euclidean");h.onclick=function(){for(var l=g.querySelectorAll(".distance a"),m=0;m<l.length;m++)a.util.classed(l[m],"selected",!1);a.util.classed(h,"selected",!0);g.distFunc=a.vector.dist;g.projectorEventContext.notifyDistanceMetricChanged(g.distFunc);l=e.dataSet.findNeighbors(g.selectedPointIndices[0],
g.distFunc,g.numNN);g.updateNeighborsList(l)};var k=this.querySelector(".distance a.cosine");k.onclick=function(){for(var l=g.querySelectorAll(".distance a"),m=0;m<l.length;m++)a.util.classed(l[m],"selected",!1);a.util.classed(k,"selected",!0);g.distFunc=a.vector.cosDist;g.projectorEventContext.notifyDistanceMetricChanged(g.distFunc);l=e.dataSet.findNeighbors(g.selectedPointIndices[0],g.distFunc,g.numNN);g.updateNeighborsList(l)};this.searchBox.registerInputChangedListener(function(l,m){null==l||
""===l.trim()?(g.searchBox.message="",g.projectorEventContext.notifySelectionChanged([])):(l=e.dataSet.query(l,m,g.selectedMetadataField),g.searchBox.message=0===l.length?"0 matches.":l.length+" matches.",g.projectorEventContext.notifySelectionChanged(l))});this.setFilterButton.onclick=function(){var l=g.selectedPointIndices.concat(g.neighborsOfFirstPoint.map(function(m){return m.index}));e.filterDataset(l);g.enableResetFilterButton(!0);g.updateFilterButtons(0)};this.resetFilterButton.onclick=function(){e.resetFilterDataset();
g.enableResetFilterButton(!1)};this.clearSelectionButton.onclick=function(){e.adjustSelectionAndHover([])};this.enableResetFilterButton(!1)};d.prototype.updateNumNN=function(){null!=this.selectedPointIndices&&this.projectorEventContext.notifySelectionChanged([this.selectedPointIndices[0]])};return d}(a.InspectorPanelPolymer);a.InspectorPanel=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>






<dom-module id="vz-projector-metadata-card">
<template>
<style>
#metadata-card {
  background-color: rgba(255,255,255,0.9);
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
      0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  width: 270px;
}

#header {
  background: #e9e9e9;
}

#icon-container {
  position: absolute;
  right: 0;
  top: 4px;
}

#metadata-label {
  font-weight: 400;
  font-size: 14px;
  line-height: 24px;
  padding: 12px 12px 8px;
  width: 230px;
  overflow-wrap: break-word;
}

#metadata-table {
  display: table;
  padding: 8px 12px 4px;
}

.metadata-row {
  display: table-row;
}

.metadata-key {
  font-weight: bold;
}

.metadata-key, .metadata-value {
  display: table-cell;
  font-size: 12px;
  padding: 3px 3px;
}
    
.metadata-value {
  overflow-wrap: break-word;
}
</style>

<template is="dom-if" if="[[hasMetadata]]">
  <div id="metadata-card">
    <div id="icon-container">
      <paper-icon-button icon="[[collapseIcon]]" on-tap="_toggleMetadataContainer">
      </paper-icon-button>
    </div>
    <div id="header">
      <div id="metadata-label">[[label]]</div>
    </div>
    <iron-collapse id="metadata-container" opened>
      <div id="metadata-table">
        <template is="dom-repeat" items="[[metadata]]">
          <div class="metadata-row">
            <div class="metadata-key">[[item.key]]</div>
            <div class="metadata-value">[[item.value]]</div>
          </div>
        </template>
      </div>
    </iron-collapse>
  </div>
</template>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-metadata-card.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.MetadataCardPolymer=a.PolymerElement({is:"vz-projector-metadata-card",properties:{hasMetadata:{type:Boolean,value:!1},isCollapsed:{type:Boolean,value:!1},collapseIcon:{type:String,value:"expand-less"},metadata:{type:Array},label:String}});var b=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}zc(d,c);d.prototype._toggleMetadataContainer=function(){this.$$("#metadata-container").toggle();this.isCollapsed=!this.isCollapsed;this.set("collapseIcon",this.isCollapsed?
"expand-more":"expand-less")};d.prototype.updateMetadata=function(e){this.pointMetadata=e;this.hasMetadata=null!=e;if(e){var g=[],h;for(h in e)e.hasOwnProperty(h)&&g.push({key:h,value:e[h]});this.metadata=g;this.label=""+this.pointMetadata[this.labelOption]}};d.prototype.setLabelOption=function(e){this.labelOption=e;this.pointMetadata&&(this.label=""+this.pointMetadata[this.labelOption])};return d}(a.MetadataCardPolymer);a.MetadataCard=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>



















<dom-module id="vz-projector-projections-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
:host {
  transition: height 0.2s;
}

.ink-button, ::shadow .ink-button {
  border: none;
  border-radius: 2px;
  font-size: 13px;
  padding: 10px;
  min-width: 88px;
  flex-shrink: 0;
  background: #e3e3e3;
}

.ink-panel-buttons {
  margin-bottom: 10px;
}

.two-way-toggle {
  display: flex;
  flex-direction: row;
}

.two-way-toggle span {
  padding-right: 7px;
}

.has-border {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.toggle {
  min-width: 0px;
  font-size: 12px;
  width: 17px;
  min-height: 0px;
  height: 21px;
  padding: 0;
  margin: 0px;
}

.toggle[active] {
  background-color: #880E4F;
  color: white;
}

.two-columns {
  display:flex;
  justify-content: space-between;
}

.two-columns > :first-child {
  margin-right: 15px;
}

.two-columns > div {
  width: 50%;
}

.dropdown-item {
  justify-content: space-between;
  min-height: 35px;
}

.tsne-supervise-factor {
  margin-bottom: -8px;
}

#z-container {
  display: flex;
  align-items: center;
  width: 50%;
}

#z-checkbox {
  margin: 27px 0 0 5px;
  width: 18px;
}

#z-dropdown {
  flex-grow: 1;
}

.notice {
  color: #880E4F;
}

.container {
  padding: 20px;
}

.book-icon {
  height: 20px;
  color: rgba(0, 0, 0, 0.7);
}

.item-details {
  color: gray;
  font-size: 12px;
  margin-left: 5px;
}

.pca-dropdown {
  width: 100%;
}

.pca-dropdown paper-listbox {
  width: 135px;
}

.dropdown-item.header {
  border-bottom: 1px solid #aaa;
  color: #333;
  font-weight: bold;
}

#total-variance {
  color: rgba(0, 0, 0, 0.7);
}
</style>
<div id="main">
  <div class="ink-panel-header">
    <div class="ink-tab-group">

      <div data-tab="umap" id="umap-tab" class="ink-tab projection-tab">UMAP</div>
      <paper-tooltip for="umap-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        uniform manifold approximation and projection
      </paper-tooltip>      

      <div data-tab="tsne" id="tsne-tab" class="ink-tab projection-tab">t-SNE</div>
      <paper-tooltip for="tsne-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        t-distributed stochastic neighbor embedding
      </paper-tooltip>

      <div data-tab="pca" id="pca-tab" class="ink-tab projection-tab">PCA</div>
      <paper-tooltip for="pca-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        Principal component analysis
      </paper-tooltip>

      <div data-tab="custom" id="custom-tab" class="ink-tab projection-tab" title="Linear projection of two custom vectors">Custom</div>
      <paper-tooltip for="custom-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        Search for two vectors upon which to project all points.
      </paper-tooltip>

    </div>
  </div>
  <div class="container">
     
     <div data-panel="umap" class="ink-panel-content">
      <div class="slider">
        <label>Dimension</label>
        <div class="two-way-toggle">
          <span>2D</span>
          <paper-toggle-button id="umap-toggle" checked="{{umapIs3d}}">3D</paper-toggle-button>
        </div>
      </div>
      <div class="slider umap-neighbors">
        <label>
          Neighbors
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The number of nearest neighbors used to compute the fuzzy simplicial
            set, which is used to approximate the overall shape of the manifold.
            The default value is 15.
          </paper-tooltip>
        </label>
        <paper-slider id="umap-neighbors-slider" value="{{umapNeighbors}}" pin min="5" max="50"></paper-slider>
        <span>[[umapNeighbors]]</span>
      </div>
      <p>
        <button id="run-umap" class="ink-button" title="Run UMAP" on-tap="runUmap">Run</button>
      
      <p id="umap-sampling" class="notice">
        For faster results, the data will be sampled down to [[getUmapSampleSizeText()]] points.
      
      <p>
        <iron-icon icon="book" class="book-icon"></iron-icon>
        <a target="_blank" rel="noopener" href="https://umap-learn.readthedocs.io/en/latest/how_umap_works.html">
          Learn more about UMAP.
        </a>
      
    </div>
    
    <div data-panel="tsne" class="ink-panel-content">
      <div class="slider">
        <label>Dimension</label>
        <div class="two-way-toggle">
          <span>2D</span>
          <paper-toggle-button id="tsne-toggle" checked="{{tSNEis3d}}">3D</paper-toggle-button>
        </div>
      </div>
      <div class="slider tsne-perplexity">
        <label>
          Perplexity
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The most appropriate perplexity value depends on the density of the
            data. Loosely speaking, a larger / denser dataset
            requires a larger perplexity. Typical values for perplexity range
            between 5 and 50.
          </paper-tooltip>
        </label>
        <paper-slider id="perplexity-slider" pin min="2" max="100" value="30"></paper-slider>
        <span></span>
      </div>
      <div class="slider tsne-learning-rate">
        <label>
          Learning rate
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The ideal learning rate often depends on the size of the data,
            with smaller datasets requiring smaller learning rates.
          </paper-tooltip>
        </label>
        <paper-slider id="learning-rate-slider" snaps min="-3" max="2" step="1" value="1" max-markers="6">
        </paper-slider>
        <span></span>
      </div>
      <div class="slider tsne-supervise-factor">
        <label>
          Supervise
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The label importance used for supervision, from 0 (disabled) to 100
            (full importance).
          </paper-tooltip>
        </label>
        <paper-slider id="supervise-factor-slider" min="0" max="100" pin value="{{superviseFactor}}">
        </paper-slider>
        <span></span>
      </div>
      <p>
        <button class="run-tsne ink-button" title="Re-run t-SNE">Run</button>
        <button class="pause-tsne ink-button" title="Pause t-SNE">Pause</button>
        <button class="perturb-tsne ink-button" title="Perturb t-SNE">Perturb</button>
      
      <p>Iteration: <span class="run-tsne-iter">0</span>
      <p id="tsne-sampling" class="notice">
        For faster results, the data will be sampled down to [[getTsneSampleSizeText()]] points.
      
      <p>
        <iron-icon icon="book" class="book-icon"></iron-icon>
        <a target="_blank" href="http://distill.pub/2016/misread-tsne/">
          How to use t-SNE effectively.
        </a>
      
    </div>
    
    <div data-panel="pca" class="ink-panel-content">
      <div class="two-columns">
        <div> 
          <paper-dropdown-menu class="pca-dropdown" vertical-align="bottom" no-animations label="X">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaX}}" slot="dropdown-content">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-dropdown-menu class="pca-dropdown" no-animations vertical-align="bottom" label="Z" disabled="[[!hasPcaZ]]" id="z-dropdown">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaZ}}" slot="dropdown-content">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div> 
          <paper-dropdown-menu class="pca-dropdown" vertical-align="bottom" no-animations label="Y">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaY}}" slot="dropdown-content">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-checkbox id="z-checkbox" checked="{{pcaIs3d}}"></paper-checkbox>
        </div>
      </div>
      <p id="pca-sampling" class="notice">
        PCA is approximate.
        <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      
      <div id="total-variance">Total variance</div>
      <paper-tooltip for="pca-sampling" position="top" animation-delay="0" fit-to-visible-bounds>
        For fast results, the data was sampled to [[getPcaSampleSizeText()]] points and randomly projected down to [[getPcaSampledDimText()]] dimensions.
      </paper-tooltip>
    </div>
    
    <div data-panel="custom" class="ink-panel-content">
      <paper-dropdown-menu style="width: 100%" no-animations label="Search by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{customSelectedSearchByMetadataOption}}" slot="dropdown-content">
          <template is="dom-repeat" items="[[searchByMetadataOptions]]">
            <paper-item class="dropdown-item" value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <div class="two-columns">
        <vz-projector-input id="xLeft" label="Left"></vz-projector-input>
        <vz-projector-input id="xRight" label="Right"></vz-projector-input>
      </div>
      <div class="two-columns">
        <vz-projector-input id="yUp" label="Up"></vz-projector-input>
        <vz-projector-input id="yDown" label="Down"></vz-projector-input>
      </div>
    </div>
  </div>
</div>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-projections-panel.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.ProjectionsPanelPolymer=a.PolymerElement({is:"vz-projector-projections-panel",properties:{pcaIs3d:{type:Boolean,value:!0,observer:"_pcaDimensionToggleObserver"},tSNEis3d:{type:Boolean,value:!0,observer:"_tsneDimensionToggleObserver"},superviseFactor:{type:Number,value:0},umapIs3d:{type:Boolean,value:!0,observer:"_umapDimensionToggleObserver"},umapNeighbors:{type:Number,value:15},pcaComponents:Array,pcaX:{type:Number,value:0,observer:"showPCAIfEnabled"},pcaY:{type:Number,value:1,observer:"showPCAIfEnabled"},
pcaZ:{type:Number,value:2,observer:"showPCAIfEnabled"},customSelectedSearchByMetadataOption:{type:String,observer:"_customSelectedSearchByMetadataOptionChanged"}}});var b=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}zc(d,c);d.prototype.initialize=function(e){this.polymerChangesTriggerReprojection=!0;this.projector=e;this.perplexity=30;this.learningRate=10;this.centroidValues={xLeft:null,xRight:null,yUp:null,yDown:null};this.clearCentroids();this.setupUIControls()};d.prototype.ready=
function(){this.zDropdown=this.querySelector("#z-dropdown");this.runTsneButton=this.querySelector(".run-tsne");this.pauseTsneButton=this.querySelector(".pause-tsne");this.perturbTsneButton=this.querySelector(".perturb-tsne");this.perplexitySlider=this.querySelector("#perplexity-slider");this.learningRateInput=this.querySelector("#learning-rate-slider");this.superviseFactorInput=this.querySelector("#supervise-factor-slider");this.iterationLabelTsne=this.querySelector(".run-tsne-iter");this.runUmapButton=
this.querySelector("#run-umap")};d.prototype.disablePolymerChangesTriggerReprojection=function(){this.polymerChangesTriggerReprojection=!1};d.prototype.enablePolymerChangesTriggerReprojection=function(){this.polymerChangesTriggerReprojection=!0};d.prototype.updateTSNEPerplexityFromSliderChange=function(){this.perplexitySlider&&(this.perplexity=+this.perplexitySlider.value);this.querySelector(".tsne-perplexity span").innerText=""+this.perplexity};d.prototype.updateTSNELearningRateFromUIChange=function(){this.learningRateInput&&
(this.learningRate=Math.pow(10,+this.learningRateInput.value));this.querySelector(".tsne-learning-rate span").innerText=""+this.learningRate};d.prototype.updateTSNESuperviseFactorFromUIChange=function(){this.querySelector(".tsne-supervise-factor span").innerText=""+this.superviseFactor;this.dataSet&&this.dataSet.setSuperviseFactor(this.superviseFactor)};d.prototype.setupUIControls=function(){for(var e=this,g=this,h=this.querySelectorAll(".ink-tab"),k=0;k<h.length;k++)h[k].addEventListener("click",
function(){var l=this.getAttribute("data-tab");g.showTab(l)});this.runTsneButton.addEventListener("click",function(){e.dataSet.hasTSNERun?e.dataSet.stopTSNE():e.runTSNE()});this.pauseTsneButton.addEventListener("click",function(){e.dataSet.tSNEShouldPause?(e.dataSet.tSNEShouldPause=!1,e.pauseTsneButton.innerText="Pause"):(e.dataSet.tSNEShouldPause=!0,e.pauseTsneButton.innerText="Resume")});this.perturbTsneButton.addEventListener("mousedown",function(){e.dataSet&&e.projector&&(e.dataSet.perturbTsne(),
e.projector.notifyProjectionPositionsUpdated(),e.perturbInterval=setInterval(function(){e.dataSet.perturbTsne();e.projector.notifyProjectionPositionsUpdated()},100))});this.perturbTsneButton.addEventListener("mouseup",function(){clearInterval(e.perturbInterval)});this.perplexitySlider.value=this.perplexity.toString();this.perplexitySlider.addEventListener("change",function(){return e.updateTSNEPerplexityFromSliderChange()});this.updateTSNEPerplexityFromSliderChange();this.learningRateInput.addEventListener("change",
function(){return e.updateTSNELearningRateFromUIChange()});this.updateTSNELearningRateFromUIChange();this.superviseFactorInput.addEventListener("change",function(){return e.updateTSNESuperviseFactorFromUIChange()});this.updateTSNESuperviseFactorFromUIChange();this.setupCustomProjectionInputFields();h=this.querySelectorAll("paper-dropdown-menu paper-input input");for(k=0;k<h.length;k++)h[k].style.fontSize="14px"};d.prototype.restoreUIFromBookmark=function(e){this.disablePolymerChangesTriggerReprojection();
this.pcaX=e.pcaComponentDimensions[0];this.pcaY=e.pcaComponentDimensions[1];3===e.pcaComponentDimensions.length&&(this.pcaZ=e.pcaComponentDimensions[2]);this.pcaIs3d=3===e.pcaComponentDimensions.length;this.perplexitySlider&&(this.perplexitySlider.value=e.tSNEPerplexity.toString());this.learningRateInput&&(this.learningRateInput.value=e.tSNELearningRate.toString());this.tSNEis3d=e.tSNEis3d;this.umapIs3d=e.umapIs3d;this.umapNeighbors=e.umapNeighbors;this.customSelectedSearchByMetadataOption=e.customSelectedSearchByMetadataOption;
this.customProjectionXLeftInput&&this.customProjectionXLeftInput.set(e.customXLeftText,e.customXLeftRegex);this.customProjectionXRightInput&&this.customProjectionXRightInput.set(e.customXRightText,e.customXRightRegex);this.customProjectionYUpInput&&this.customProjectionYUpInput.set(e.customYUpText,e.customYUpRegex);this.customProjectionYDownInput&&this.customProjectionYDownInput.set(e.customYDownText,e.customYDownRegex);this.computeAllCentroids();this.setZDropdownEnabled(this.pcaIs3d);this.updateTSNEPerplexityFromSliderChange();
this.updateTSNELearningRateFromUIChange();this.iterationLabelTsne&&(this.iterationLabelTsne.innerText=e.tSNEIteration.toString());null!=e.selectedProjection&&this.showTab(e.selectedProjection);this.enablePolymerChangesTriggerReprojection()};d.prototype.populateBookmarkFromUI=function(e){this.disablePolymerChangesTriggerReprojection();e.pcaComponentDimensions=[this.pcaX,this.pcaY];this.pcaIs3d&&e.pcaComponentDimensions.push(this.pcaZ);null!=this.perplexitySlider&&(e.tSNEPerplexity=+this.perplexitySlider.value);
null!=this.learningRateInput&&(e.tSNELearningRate=+this.learningRateInput.value);e.tSNEis3d=this.tSNEis3d;e.umapIs3d=this.umapIs3d;e.customSelectedSearchByMetadataOption=this.customSelectedSearchByMetadataOption;null!=this.customProjectionXLeftInput&&(e.customXLeftText=this.customProjectionXLeftInput.getValue(),e.customXLeftRegex=this.customProjectionXLeftInput.getInRegexMode());null!=this.customProjectionXRightInput&&(e.customXRightText=this.customProjectionXRightInput.getValue(),e.customXRightRegex=
this.customProjectionXRightInput.getInRegexMode());null!=this.customProjectionYUpInput&&(e.customYUpText=this.customProjectionYUpInput.getValue(),e.customYUpRegex=this.customProjectionYUpInput.getInRegexMode());null!=this.customProjectionYDownInput&&(e.customYDownText=this.customProjectionYDownInput.getValue(),e.customYDownRegex=this.customProjectionYDownInput.getInRegexMode());this.enablePolymerChangesTriggerReprojection()};d.prototype.setZDropdownEnabled=function(e){this.zDropdown&&(e?this.zDropdown.removeAttribute("disabled"):
this.zDropdown.setAttribute("disabled","true"))};d.prototype.dataSetUpdated=function(e,g,h){this.dataSet=e;this.originalDataSet=g;this.dim=h;g=null==e?0:e.points.length;this.perplexitySlider.value=Math.max(5,Math.ceil(Math.sqrt(g)/4)).toString();this.updateTSNEPerplexityFromSliderChange();this.clearCentroids();this.querySelector("#tsne-sampling").style.display=g>a.TSNE_SAMPLE_SIZE?null:"none";e=null==e?!1:e.dim[0]>a.PCA_SAMPLE_DIM||e.dim[1]>a.PCA_SAMPLE_DIM;this.querySelector("#pca-sampling").style.display=
e?null:"none";this.showTab("pca")};d.prototype._pcaDimensionToggleObserver=function(){this.setZDropdownEnabled(this.pcaIs3d);this.beginProjection(this.currentProjection)};d.prototype._tsneDimensionToggleObserver=function(){this.beginProjection(this.currentProjection)};d.prototype._umapDimensionToggleObserver=function(){this.beginProjection(this.currentProjection)};d.prototype.metadataChanged=function(e){var g=-1;this.searchByMetadataOptions=e.stats.map(function(h,k){h.isNumeric||-1!==g||(g=k);return h.name});
this.customSelectedSearchByMetadataOption=this.searchByMetadataOptions[Math.max(0,g)]};d.prototype.showTab=function(e){var g=this;this.currentProjection=e;for(var h=this.querySelector('.ink-tab[data-tab\x3d"'+e+'"]'),k=this.querySelectorAll(".ink-tab"),l=0;l<k.length;l++)a.util.classed(k[l],"active",!1);a.util.classed(h,"active",!0);h=this.querySelectorAll(".ink-panel-content");for(l=0;l<h.length;l++)a.util.classed(h[l],"active",!1);a.util.classed(this.querySelector('.ink-panel-content[data-panel\x3d"'+
e+'"]'),"active",!0);if(null!=this.$){var m=this.$.main;requestAnimationFrame(function(){g.style.height=m.clientHeight+"px"})}this.beginProjection(e)};d.prototype.beginProjection=function(e){!1!==this.polymerChangesTriggerReprojection&&("pca"===e?(null!=this.dataSet&&this.dataSet.stopTSNE(),this.showPCA()):"tsne"===e?this.showTSNE():"umap"===e?this.showUmap():"custom"===e&&(null!=this.dataSet&&this.dataSet.stopTSNE(),this.computeAllCentroids(),this.reprojectCustom()))};d.prototype.showTSNE=function(){var e=
this.dataSet;if(null!=e){var g=a.getProjectionComponents("tsne",[0,1,this.tSNEis3d?2:null]);e=new a.Projection("tsne",g,this.tSNEis3d?3:2,e);this.projector.setProjection(e);this.dataSet.hasTSNERun?this.projector.notifyProjectionPositionsUpdated():this.runTSNE()}};d.prototype.runTSNE=function(){var e=this,g=!1;this.runTsneButton.innerText="Stop";this.runTsneButton.disabled=!0;this.pauseTsneButton.innerText="Pause";this.pauseTsneButton.disabled=!0;this.perturbTsneButton.disabled=!1;this.dataSet.projectTSNE(this.perplexity,
this.learningRate,this.tSNEis3d?3:2,function(h){null!=h?(e.runTsneButton.disabled=!1,e.pauseTsneButton.disabled=!1,e.iterationLabelTsne.innerText=""+h,e.projector.notifyProjectionPositionsUpdated(),!g&&e.dataSet.projections.tsne&&(e.projector.onProjectionChanged(),g=!0)):(e.runTsneButton.innerText="Re-run",e.runTsneButton.disabled=!1,e.pauseTsneButton.innerText="Pause",e.pauseTsneButton.disabled=!0,e.perturbTsneButton.disabled=!0,e.projector.onProjectionChanged())})};d.prototype.showUmap=function(){var e=
this.dataSet;if(null!=e){var g=a.getProjectionComponents("umap",[0,1,this.umapIs3d?2:null]);e=new a.Projection("umap",g,this.umapIs3d?3:2,e);this.projector.setProjection(e);this.dataSet.hasUmapRun?this.projector.notifyProjectionPositionsUpdated():this.runUmap()}};d.prototype.runUmap=function(){var e=this,g=!1;this.runUmapButton.disabled=!0;this.dataSet.projectUmap(this.umapIs3d?3:2,this.umapNeighbors,function(h){null!=h?(e.runUmapButton.disabled=!1,e.projector.notifyProjectionPositionsUpdated(),!g&&
e.dataSet.projections.umap&&(e.projector.onProjectionChanged(),g=!0)):(e.runUmapButton.innerText="Re-run",e.runUmapButton.disabled=!1,e.projector.onProjectionChanged())})};d.prototype.showPCAIfEnabled=function(){this.polymerChangesTriggerReprojection&&this.showPCA()};d.prototype.updateTotalVarianceMessage=function(){var e=this.dataSet.fracVariancesExplained,g=e[this.pcaX]+e[this.pcaY];this.pcaIs3d&&(g+=e[this.pcaZ]);e="Total variance described: "+((100*g).toFixed(1)+"%.");this.querySelector("#total-variance").innerHTML=
e};d.prototype.showPCA=function(){var e=this;null!=this.dataSet&&this.dataSet.projectPCA().then(function(){var g=a.getProjectionComponents("pca",[e.pcaX,e.pcaY,e.pcaZ]);g=new a.Projection("pca",g,e.pcaIs3d?3:2,e.dataSet);e.projector.setProjection(g);g=Math.min(10,e.dataSet.dim[1]);e.updateTotalVarianceMessage();e.pcaComponents=a.util.range(g).map(function(h){return{id:h,componentNumber:h+1,percVariance:(100*e.dataSet.fracVariancesExplained[h]).toFixed(1)}})})};d.prototype.reprojectCustom=function(){if(null!=
this.centroids&&null!=this.centroids.xLeft&&null!=this.centroids.xRight&&null!=this.centroids.yUp&&null!=this.centroids.yDown){var e=a.vector.sub(this.centroids.xRight,this.centroids.xLeft);this.dataSet.projectLinear(e,"linear-x");e=a.vector.sub(this.centroids.yUp,this.centroids.yDown);this.dataSet.projectLinear(e,"linear-y");e=a.getProjectionComponents("custom",["x","y"]);e=new a.Projection("custom",e,2,this.dataSet);this.projector.setProjection(e)}};d.prototype.clearCentroids=function(){this.centroids=
{xLeft:null,xRight:null,yUp:null,yDown:null};this.allCentroid=null};d.prototype._customSelectedSearchByMetadataOptionChanged=function(){!1!==this.polymerChangesTriggerReprojection&&"custom"===this.currentProjection&&(this.computeAllCentroids(),this.reprojectCustom())};d.prototype.setupCustomProjectionInputFields=function(){this.customProjectionXLeftInput=this.setupCustomProjectionInputField("xLeft");this.customProjectionXRightInput=this.setupCustomProjectionInputField("xRight");this.customProjectionYUpInput=
this.setupCustomProjectionInputField("yUp");this.customProjectionYDownInput=this.setupCustomProjectionInputField("yDown")};d.prototype.computeAllCentroids=function(){this.computeCentroid("xLeft");this.computeCentroid("xRight");this.computeCentroid("yUp");this.computeCentroid("yDown")};d.prototype.computeCentroid=function(e){var g=this.querySelector("#"+e);if(null!=g){var h=g.getValue();if(null!=h){var k=this.getCentroid(h,g.getInRegexMode());0===k.numMatches?(g.message="0 matches. Using a random vector.",
k.centroid=a.vector.rn(this.dim)):g.message=k.numMatches+" matches.";this.centroids[e]=k.centroid;this.centroidValues[e]=h}}};d.prototype.setupCustomProjectionInputField=function(e){var g=this,h=this.querySelector("#"+e);h.registerInputChangedListener(function(){g.polymerChangesTriggerReprojection&&(g.computeCentroid(e),g.reprojectCustom())});return h};d.prototype.getCentroid=function(e,g){var h=this;if(null==e||""===e)return{numMatches:0};e=this.originalDataSet.query(e,g,this.customSelectedSearchByMetadataOption);
return{centroid:a.vector.centroid(e,function(k){return h.originalDataSet.points[k].vector}),numMatches:e.length}};d.prototype.getPcaSampledDimText=function(){return a.PCA_SAMPLE_DIM.toLocaleString()};d.prototype.getPcaSampleSizeText=function(){return a.PCA_SAMPLE_SIZE.toLocaleString()};d.prototype.getTsneSampleSizeText=function(){return a.TSNE_SAMPLE_SIZE.toLocaleString()};d.prototype.getUmapSampleSizeText=function(){return a.UMAP_SAMPLE_SIZE.toLocaleString()};return d}(a.ProjectionsPanelPolymer);
a.ProjectionsPanel=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>


<dom-module id="vz-projector">
<template>
<style include="vz-projector-styles"></style>
<style>
:host {
  display: flex;
  width: 100%;
  height: 100%;
}

#container {
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.hidden {
  display: none !important;
}

/* Main */

#main {
  position: relative;
  flex-grow: 2;
}

#main .stage {
  position: relative;
  flex-grow: 2;
}

#scatter {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

#selector {
  display: none;
  height: 100%;
  position: absolute;
  width: 100%;
}

#left-pane {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-width: 312px;
  width: 312px;
  border-right: 1px solid rgba(0, 0, 0, 0.1);
  background: #fafafa;
}

#right-pane {
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  background: #fafafa;
  display: flex;
  height: 100%;
  min-width: 300px;
  width: 300px;
}

.file-name {
  margin-right: 5px;
}

.control input[type=text]:focus {
  outline: none;
  border-bottom: 1px solid rgba(0, 0, 0, 1);
}

.control {
  display: inline-block;
  width: 45%;
  vertical-align: top;
  margin-right: 10px;
  overflow-x: hidden;
}

.control.last {
  margin-right: 0;
}

#notification-dialog {
  width: 400px;
  padding-bottom: 20px;
}

#notification-dialog paper-button {
  background: none;
  text-transform: uppercase;
}

#notification-dialog .progress {
  --paper-spinner-color: #880E4F;
  --paper-spinner-stroke-width: 2px;
}

#notify-msgs {
  text-align: center;
  display: block;
}

.notify-msg {
  font-weight: 500;
  margin: 0;
  padding: 0;
}

.notify-msg.error {
  text-align: left;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

.origin text {
  font-size: 12px;
  font-weight: 500;
}

.origin line {
  stroke: black;
  stroke-opacity: 0.2;
}

/* Ink Framework */

/* - Buttons */
.ink-button, ::shadow .ink-button {
  border: none;
  border-radius: 2px;
  font-size: 13px;
  padding: 10px;
  min-width: 100px;
  flex-shrink: 0;
  background: #e3e3e3;
}

.status-bar-panel {
  display: flex;
  align-items: center;
}

.status-bar-entry {
  border-left: 1px solid rgba(0, 0, 0, 0.5);
  margin-left: 5px;
  padding-left: 5px;
}

/* - Menubar */

.ink-panel-menubar {
  align-items: center;
  position: relative;
  height: 60px;
  border-bottom: solid 1px #eee;
  padding: 0 24px;
  display: flex;
}

.ink-panel-menubar .ink-fabs {
  position: absolute;
  right: 12px;
  top: 40px;
  z-index: 1;
}

#bookmark-panel {
  bottom: 0;
  position: absolute;
  width: 300px;
}
#bookmark-panel-container {
  bottom: 60px;
  position: absolute;
}

.ink-fab {
  margin-left: 8px;
  border: 1px solid rgba(0, 0, 0, 0.02);
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

#metadata-card {
  position: absolute;
  right: 5px;
  top: 25px;
}

#help-3d-icon {
  position: absolute;
  top: 20px;
  left: 20px;
}

#help3dDialog .main {
  margin: 0;
  padding: 20px;
}

#help3dDialog h3 {
  margin-top: 20px;
  margin-bottom: 5px;
}

#help3dDialog h3:first-child {
  margin-top: 0;
}

#data-panel {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  overflow-y: auto;
}

#toast {
  display: flex;
  align-items: center;
  --paper-toast-color: #eeff41;
}
</style>
<paper-dialog id="notification-dialog" modal>
  <h2 id="notification-title"></h2>
  <paper-dialog-scrollable>
    <div id="notify-msgs"></div>
  </paper-dialog-scrollable>
  <div style="text-align: center;"><paper-spinner-lite active class="progress"></paper-spinner-lite></div>
  <div class="buttons">
    <paper-button class="close-button" dialog-confirm autofocus>Close</paper-button>
  </div>
</paper-dialog>
<div id="container">
  <div id="left-pane" class="ink-panel">
    <vz-projector-data-panel id="data-panel"></vz-projector-data-panel>
    <vz-projector-projections-panel id="projections-panel"></vz-projector-projections-panel>
  </div>
  <div id="main" class="ink-panel">
    <div class="ink-panel-menubar">
      <paper-icon-button id="selectMode" alt="Bounding box selection" toggles icon="image:photo-size-select-small"></paper-icon-button>
      <paper-tooltip for="selectMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Bounding box selection</paper-tooltip>

      <paper-icon-button id="editMode" alt="Edit current selection" toggles icon="image:exposure"></paper-icon-button>
      <paper-tooltip for="editMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Edit current selection</paper-tooltip>

      <paper-icon-button id="nightDayMode" alt="Enable/disable night mode" toggles icon="image:brightness-2"></paper-icon-button>
      <paper-tooltip for="nightDayMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Enable/disable night mode</paper-tooltip>

      <paper-icon-button id="labels3DMode" alt="Enable/disable 3D labels mode" toggles icon="font-download"></paper-icon-button>
      <paper-tooltip for="labels3DMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Enable/disable 3D labels mode</paper-tooltip>
      <div class="status-bar-panel">
        <div class="status-bar-entry">Points: <span class="numDataPoints">Loading...</span></div>
        <div class="status-bar-entry">Dimension: <span class="dim">Loading...</span></div>
        <div id="status-bar" class="status-bar-entry" style="display: none;"></div>
      </div>
      <div class="ink-fabs">
        <paper-icon-button id="reset-zoom" class="ink-fab" alt="Reset zoom to fit all points" icon="home"></paper-icon-button>
        <paper-tooltip for="reset-zoom" position="left" animation-delay="0">Reset zoom to fit all points</paper-tooltip>
      </div>
    </div>
    <div class="stage">
      <div id="scatter">
        <svg id="selector"></svg>
      </div>
      <vz-projector-metadata-card id="metadata-card"></vz-projector-metadata-card>
      <paper-icon-button raised onclick="help3dDialog.open()" icon="help-outline" id="help-3d-icon"></paper-icon-button>
      <paper-tooltip animation-delay="0" for="help-3d-icon">Help with interaction controls.</paper-tooltip>
      <paper-dialog id="help3dDialog" with-backdrop>
        <div class="main" dialog-confirm autofocus>
          <h3>3D controls</h3>
            <b>Rotate</b> Mouse left click.<br>
            <b>Pan</b> Mouse right click.<br>
            <b>Zoom</b> Mouse wheel.<br>
            Holding <b>ctrl</b> reverses the mouse clicks.
          <h3>2D controls</h3>
            <b>Pan</b> Mouse left click.<br>
            <b>Zoom</b> Mouse wheel.
          <div class="dismiss-dialog-note"> Click anywhere to dismiss.</div>
        </div>
      </paper-dialog>
    </div>
  </div>
  <div id="right-pane" class="ink-panel">
    <div class="ink-panel-content active">
      <vz-projector-inspector-panel id="inspector-panel"></vz-projector-inspector-panel>
    </div>
    <div id="bookmark-panel-container">
      <vz-projector-bookmark-panel id="bookmark-panel"></vz-projector-bookmark-panel>
    </div>
  </div>
</div>
<paper-toast id="toast" always-on-top></paper-toast>

</template> 
<script>//~~WEBPATH~~/vz-projector/vz-projector.js
zc=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
(function(a){a.ProjectorPolymer=a.PolymerElement({is:"vz-projector",properties:{routePrefix:String,dataProto:{type:String,observer:"_dataProtoChanged"},servingMode:String,projectorConfigJsonPath:String,pageViewLogging:Boolean,eventLogging:Boolean}});var b=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}zc(d,c);d.prototype.ready=function(){a.logging.setDomContainer(this);this.analyticsLogger=new a.AnalyticsLogger(this.pageViewLogging,this.eventLogging);this.analyticsLogger.logPageView();
a.util.hasWebGLSupport()?(this.selectionChangedListeners=[],this.hoverListeners=[],this.projectionChangedListeners=[],this.distanceMetricChangedListeners=[],this.selectedPointIndices=[],this.neighborsOfFirstPoint=[],this.editMode=!1,this.dataPanel=this.$["data-panel"],this.inspectorPanel=this.$["inspector-panel"],this.inspectorPanel.initialize(this,this),this.projectionsPanel=this.$["projections-panel"],this.projectionsPanel.initialize(this),this.bookmarkPanel=this.$["bookmark-panel"],this.bookmarkPanel.initialize(this,
this),this.metadataCard=this.$["metadata-card"],this.statusBar=this.querySelector("#status-bar"),this.scopeSubtree(this.$$("#notification-dialog"),!0),this.setupUIControls(),this.initializeDataProvider()):(this.analyticsLogger.logWebGLDisabled(),a.logging.setErrorMessage("Your browser or device does not have WebGL enabled. Please enable hardware acceleration, or use a browser that supports WebGL."))};d.prototype.setSelectedLabelOption=function(e){this.selectedLabelOption=e;this.metadataCard.setLabelOption(this.selectedLabelOption);
this.projectorScatterPlotAdapter.setLabelPointAccessor(e);this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.projectorScatterPlotAdapter.render()};d.prototype.setSelectedColorOption=function(e){this.selectedColorOption=e;this.projectorScatterPlotAdapter.setLegendPointColorer(this.getLegendPointColorer(e));this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.projectorScatterPlotAdapter.render()};d.prototype.setNormalizeData=function(e){this.normalizeData=e;this.setCurrentDataSet(this.originalDataSet.getSubset())};
d.prototype.updateDataSet=function(e,g,h){this.dataSetFilterIndices=null;this.originalDataSet=e;if(null!=e){this.normalizeData=50<=this.originalDataSet.dim[1];g=g||{};if(null==g.pointsInfo){var k=this.makeDefaultPointsInfoAndStats(e.points),l=k[1];g.pointsInfo=k[0];g.stats=l}if(!e.mergeMetadata(g))return}null!=this.projectorScatterPlotAdapter&&(null==e?(this.projectorScatterPlotAdapter.setLabelPointAccessor(null),this.setProjection(null)):(this.projectorScatterPlotAdapter.updateScatterPlotPositions(),
this.projectorScatterPlotAdapter.updateScatterPlotAttributes(),this.projectorScatterPlotAdapter.resize(),this.projectorScatterPlotAdapter.render()));null!=e?(this.dataPanel.setNormalizeData(this.normalizeData),this.setCurrentDataSet(e.getSubset()),this.projectorScatterPlotAdapter.setLabelPointAccessor(this.selectedLabelOption),this.inspectorPanel.datasetChanged(),this.inspectorPanel.metadataChanged(g),this.projectionsPanel.metadataChanged(g),this.dataPanel.metadataChanged(g,h)):this.setCurrentDataSet(null)};
d.prototype.metadataEdit=function(e,g){var h=this;this.selectedPointIndices.forEach(function(k){return h.dataSet.points[k].metadata[e]=g});this.neighborsOfFirstPoint.forEach(function(k){return h.dataSet.points[k.index].metadata[e]=g});this.dataSet.spriteAndMetadataInfo.stats=a.analyzeMetadata(this.dataSet.spriteAndMetadataInfo.stats.map(function(k){return k.name}),this.dataSet.points.map(function(k){return k.metadata}));this.metadataChanged(this.dataSet.spriteAndMetadataInfo);this.metadataEditorContext(!0,
e)};d.prototype.metadataChanged=function(e,g){null!=g&&(this.metadataFile=g);this.dataSet.spriteAndMetadataInfo=e;this.projectionsPanel.metadataChanged(e);this.inspectorPanel.metadataChanged(e);this.dataPanel.metadataChanged(e,this.metadataFile);0<this.selectedPointIndices.length?this.metadataCard.updateMetadata(this.dataSet.points[this.selectedPointIndices[0]].metadata):this.metadataCard.updateMetadata(null);this.setSelectedLabelOption(this.selectedLabelOption)};d.prototype.metadataEditorContext=
function(e,g){this.inspectorPanel&&this.inspectorPanel.metadataEditorContext(e,g)};d.prototype.setSelectedTensor=function(e,g){this.bookmarkPanel.setSelectedTensor(e,g,this.dataProvider)};d.prototype.registerSelectionChangedListener=function(e){this.selectionChangedListeners.push(e)};d.prototype.filterDataset=function(e){var g=this.selectedPointIndices.length;null==this.dataSetBeforeFilter&&(this.dataSetBeforeFilter=this.dataSet);this.setCurrentDataSet(this.dataSet.getSubset(e));this.dataSetFilterIndices=
e;this.projectorScatterPlotAdapter.updateScatterPlotPositions();this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.adjustSelectionAndHover(a.util.range(g))};d.prototype.resetFilterDataset=function(){var e=this,g=this.selectedPointIndices.map(function(h){return e.dataSet.points[h].index});this.setCurrentDataSet(this.dataSetBeforeFilter);null!=this.projection&&(this.projection.dataSet=this.dataSetBeforeFilter);this.dataSetBeforeFilter=null;this.projectorScatterPlotAdapter.updateScatterPlotPositions();
this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.dataSetFilterIndices=[];this.adjustSelectionAndHover(g)};d.prototype.notifySelectionChanged=function(e){var g=this,h=[];if(this.editMode&&0<e.length)if(1===this.selectedPointIndices.length){var k=this.dataSet.points[this.selectedPointIndices[0]].vector;h=this.neighborsOfFirstPoint.filter(function(m){return 0==e.filter(function(n){return n==m.index}).length});e.forEach(function(m){if(m!=g.selectedPointIndices[0]&&0==g.neighborsOfFirstPoint.filter(function(p){return p.index==
m}).length){for(var n=g.inspectorPanel.distFunc(k,g.dataSet.points[m].vector),q=0;q<h.length&&h[q].dist<n;)q+=1;h.splice(q,0,{index:m,dist:n})}})}else{var l=this.selectedPointIndices.filter(function(m){return 0==e.filter(function(n){return n==m}).length});e.forEach(function(m){0==g.selectedPointIndices.filter(function(n){return n==m}).length&&l.push(m)});this.selectedPointIndices=l;0<this.selectedPointIndices.length?this.metadataCard.updateMetadata(this.dataSet.points[this.selectedPointIndices[0]].metadata):
this.metadataCard.updateMetadata(null)}else this.selectedPointIndices=e,1===e.length?(h=this.dataSet.findNeighbors(e[0],this.inspectorPanel.distFunc,this.inspectorPanel.numNN),this.metadataCard.updateMetadata(this.dataSet.points[e[0]].metadata)):this.metadataCard.updateMetadata(null);this.selectionChangedListeners.forEach(function(m){return m(g.selectedPointIndices,h)})};d.prototype.registerHoverListener=function(e){this.hoverListeners.push(e)};d.prototype.notifyHoverOverPoint=function(e){this.hoverListeners.forEach(function(g){return g(e)})};
d.prototype.registerProjectionChangedListener=function(e){this.projectionChangedListeners.push(e)};d.prototype.notifyProjectionChanged=function(e){this.projectionChangedListeners.forEach(function(g){return g(e)})};d.prototype.registerDistanceMetricChangedListener=function(e){this.distanceMetricChangedListeners.push(e)};d.prototype.notifyDistanceMetricChanged=function(e){this.distanceMetricChangedListeners.forEach(function(g){return g(e)})};d.prototype._dataProtoChanged=function(e){e=e?JSON.parse(e):
null;this.initializeDataProvider(e)};d.prototype.makeDefaultPointsInfoAndStats=function(e){var g=[];e.forEach(function(h){var k={};k.__index__=h.index;g.push(k)});return[g,[{name:"__index__",isNumeric:!1,tooManyUniqueValues:!0,min:0,max:g.length-1}]]};d.prototype.initializeDataProvider=function(e){if("demo"===this.servingMode)e=a.util.getURLParams(),this.dataProvider=new a.DemoDataProvider("config"in e?e.config:this.projectorConfigJsonPath);else if("server"===this.servingMode){if(!this.routePrefix)throw"route-prefix is a required parameter";
this.dataProvider=new a.ServerDataProvider(this.routePrefix)}else if("proto"===this.servingMode&&null!=e)this.dataProvider=new a.ProtoDataProvider(e);else return;this.dataPanel.initialize(this,this.dataProvider)};d.prototype.getLegendPointColorer=function(e){var g=this;return null==e||null==e.map?null:function(h,k){h=h.points[k].metadata[g.selectedColorOption.name];return null==h?"black":e.map(h)}};d.prototype.get3DLabelModeButton=function(){return this.querySelector("#labels3DMode")};d.prototype.get3DLabelMode=
function(){return this.get3DLabelModeButton().active};d.prototype.adjustSelectionAndHover=function(e){this.notifySelectionChanged(e);this.notifyHoverOverPoint(void 0);this.setMouseMode(a.MouseMode.CAMERA_AND_CLICK_SELECT)};d.prototype.setMouseMode=function(e){this.querySelector("#selectMode").active=e===a.MouseMode.AREA_SELECT;this.projectorScatterPlotAdapter.scatterPlot.setMouseMode(e)};d.prototype.setCurrentDataSet=function(e){this.adjustSelectionAndHover([]);null!=this.dataSet&&this.dataSet.stopTSNE();
null!=e&&this.normalizeData&&e.normalize();this.dim=null==e?0:e.dim[1];this.querySelector("span.numDataPoints").innerText=null==e?"0":""+e.dim[0];this.querySelector("span.dim").innerText=null==e?"0":""+e.dim[1];this.dataSet=e;this.projectionsPanel.dataSetUpdated(this.dataSet,this.originalDataSet,this.dim);this.projectorScatterPlotAdapter.setDataSet(this.dataSet);this.projectorScatterPlotAdapter.scatterPlot.setCameraParametersForNextCameraCreation(null,!0)};d.prototype.setupUIControls=function(){var e=
this;this.querySelector("#reset-zoom").addEventListener("click",function(){e.projectorScatterPlotAdapter.scatterPlot.resetZoom();e.projectorScatterPlotAdapter.scatterPlot.startOrbitAnimation()});var g=this.querySelector("#selectMode");g.addEventListener("click",function(){e.setMouseMode(g.active?a.MouseMode.AREA_SELECT:a.MouseMode.CAMERA_AND_CLICK_SELECT)});var h=this.querySelector("#nightDayMode");h.addEventListener("click",function(){e.projectorScatterPlotAdapter.scatterPlot.setDayNightMode(h.active)});
var k=this.querySelector("#editMode");k.addEventListener("click",function(){e.editMode=k.active});this.get3DLabelModeButton().addEventListener("click",function(){e.projectorScatterPlotAdapter.set3DLabelMode(e.get3DLabelMode())});window.addEventListener("resize",function(){e.parentNode.style.height=document.body.clientHeight+"px";e.projectorScatterPlotAdapter.resize()});this.projectorScatterPlotAdapter=new a.ProjectorScatterPlotAdapter(this.getScatterContainer(),this);this.projectorScatterPlotAdapter.setLabelPointAccessor(this.selectedLabelOption);
this.projectorScatterPlotAdapter.scatterPlot.onCameraMove(function(){return e.bookmarkPanel.clearStateSelection()});this.registerHoverListener(function(l){return e.onHover(l)});this.registerProjectionChangedListener(function(l){return e.onProjectionChanged(l)});this.registerSelectionChangedListener(function(l,m){return e.onSelectionChanged(l,m)})};d.prototype.onHover=function(e){this.hoverPointIndex=e;var g=null;null!=e&&(e=this.dataSet.points[e],e.metadata[this.selectedLabelOption]&&(g=e.metadata[this.selectedLabelOption].toString()));
0===this.selectedPointIndices.length&&(this.statusBar.style.display=g?null:"none",this.statusBar.innerText=g)};d.prototype.getScatterContainer=function(){return this.querySelector("#scatter")};d.prototype.onSelectionChanged=function(e,g){this.selectedPointIndices=e;this.neighborsOfFirstPoint=g;this.dataPanel.onProjectorSelectionChanged(e,g);e=this.selectedPointIndices.length+g.length;this.statusBar.innerText="Selected "+e+" points";this.statusBar.style.display=0<e?null:"none"};d.prototype.onProjectionChanged=
function(e){this.dataPanel.projectionChanged(e)};d.prototype.setProjection=function(e){this.projection=e;null!=e&&this.analyticsLogger.logProjectionChanged(e.projectionType);this.notifyProjectionChanged(e)};d.prototype.notifyProjectionPositionsUpdated=function(){this.projectorScatterPlotAdapter.notifyProjectionPositionsUpdated()};d.prototype.getCurrentState=function(){var e=new a.State;e.projections=[];for(var g=0;g<this.dataSet.points.length;g++){for(var h=this.dataSet.points[g],k={},l=Object.keys(h.projections),
m=0;m<l.length;++m)k[l[m]]=h.projections[l[m]];e.projections.push(k)}e.selectedProjection=this.projection.projectionType;e.dataSetDimensions=this.dataSet.dim;e.tSNEIteration=this.dataSet.tSNEIteration;e.selectedPoints=this.selectedPointIndices;e.filteredPoints=this.dataSetFilterIndices;this.projectorScatterPlotAdapter.populateBookmarkFromUI(e);e.selectedColorOptionName=this.dataPanel.selectedColorOptionName;e.forceCategoricalColoring=this.dataPanel.forceCategoricalColoring;e.selectedLabelOption=this.selectedLabelOption;
this.projectionsPanel.populateBookmarkFromUI(e);return e};d.prototype.loadState=function(e){this.setProjection(null);this.projectionsPanel.disablePolymerChangesTriggerReprojection();null!=this.dataSetBeforeFilter&&this.resetFilterDataset();null!=e.filteredPoints&&this.filterDataset(e.filteredPoints);this.projectionsPanel.enablePolymerChangesTriggerReprojection();for(var g=0;g<e.projections.length;g++)for(var h=this.dataSet.points[g],k=e.projections[g],l=Object.keys(k),m=0;m<l.length;++m)h.projections[l[m]]=
k[l[m]];this.dataSet.hasTSNERun="tsne"===e.selectedProjection;this.dataSet.tSNEIteration=e.tSNEIteration;this.projectionsPanel.restoreUIFromBookmark(e);this.inspectorPanel.restoreUIFromBookmark(e);this.dataPanel.selectedColorOptionName=e.selectedColorOptionName;this.dataPanel.setForceCategoricalColoring(!!e.forceCategoricalColoring);this.selectedLabelOption=e.selectedLabelOption;this.projectorScatterPlotAdapter.restoreUIFromBookmark(e);g=a.stateGetAccessorDimensions(e);h=a.getProjectionComponents(e.selectedProjection,
g);k=new a.Projection(e.selectedProjection,h,g.length,this.dataSet);this.setProjection(k);this.notifySelectionChanged(e.selectedPoints)};return d}(a.ProjectorPolymer);a.Projector=b;document.registerElement(b.prototype.is,b)})(wc||(wc={}));
</script>
</dom-module>


<dom-module id="vz-projector-app">
<template>
<style include="vz-projector-styles"></style>
<style>
#appbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  height: 60px;
  color: white;
  background: #560731;
}

#appbar .logo {
  font-size: 18px;
  font-weight: 300;
}

.icons {
  display: flex;
}

.icons a {
  color: white;
}

vz-projector {
  height: calc(100% - 60px);
}

#container {
  height: 100%;
}
</style>

<div id="container">
  <div id="appbar">
    <div>Embedding Projector</div>
    <div class="icons">
      <a title="Documentation" target="_blank" href="[[documentationLink]]">
        <paper-icon-button icon="help-outline"></paper-icon-button>
        <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
          Open documentation
        </paper-tooltip>
      </a>
      <a title="Report bug" target="_blank" href="[[bugReportLink]]">
        <paper-icon-button icon="bug-report"></paper-icon-button>
        <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
          Report a bug
        </paper-tooltip>
      </a>
    </div>
  </div>
  <vz-projector route-prefix="[[routePrefix]]" serving-mode="[[servingMode]]" projector-config-json-path="[[projectorConfigJsonPath]]" page-view-logging="[[pageViewLogging]]" event-logging="[[eventLogging]]">
  </vz-projector>
</div>
</template>


<script>//~~WEBPATH~~/vz-projector/vz-projector-app.html.js
Polymer({is:"vz-projector-app",properties:{pageViewLogging:{type:Boolean,value:!1},eventLogging:{type:Boolean,value:!1}}});</script>
</dom-module>

  
  
  

  <title>Embedding projector - visualization of high-dimensional data</title>
  <style include="vz-projector-styles"></style>
  <style>
    html {
      width: 100%;
      height: 100%;
    }

    body {
      font-family: "Roboto", "Helvetica", "Arial", sans-serif;
      margin: 0;
      width: 100%;
      height: 100%;
    }
  </style>

<body>
  <vz-projector-app documentation-link="https://www.tensorflow.org/get_started/embedding_viz" bug-report-link="https://github.com/tensorflow/tensorflow/issues" serving-mode="demo" projector-config-json-path="oss_data/oss_demo_projector_config.json" page-view-logging>
  </vz-projector-app>


