!Flow
pods:
  encoder-modality-1:
    uses_before: '- !FilterQL | {lookups: {modality__eq: modality1}, traversal_paths: [c]}'
    uses: yaml/encoder-modality1.yml
    read_only: true
  encoder-modality-2:
    uses_before: '- !FilterQL | {lookups: {modality__eq: modality2}, traversal_paths: [c]}'
    uses: yaml/encoder-modality2.yml
    read_only: true
    needs: gateway
  multimodal-encoder:
    uses_before: _merge_all
    uses: yaml/multimodal-encoder.yml
    read_only: true
    needs: [encoder-modality-1, encoder-modality-2]
