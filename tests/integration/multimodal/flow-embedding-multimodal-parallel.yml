jtype: Flow
version: '1'
with:
  restful: $RESTFUL
pods:
  - name: encoder_modality_1
    uses_before: '- jtype: FilterQL | {lookups: {modality__in: [modality1]}, traversal_paths: [c]}'
    uses: yaml/encoder-modality1.yml
    read_only: true
  - name: encoder_modality_2
    uses_before: '- jtype: FilterQL | {lookups: {modality__in: [modality2]}, traversal_paths: [c]}'
    uses: yaml/encoder-modality2.yml
    read_only: true
    needs: gateway
  - name: multimodal_encoder
    uses_before: _merge_chunks
    uses: yaml/embedding-multimodal-encoder.yml
    read_only: true
    needs: [encoder_modality_1, encoder_modality_2]
