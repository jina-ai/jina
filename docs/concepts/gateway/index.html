<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta property="og:title" content=" Gateway" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.jina.ai/concepts/gateway/" />
<meta property="og:site_name" content="Jina 3.14.2 Documentation" />
<meta property="og:description" content="Every Flow has a Gateway component that receives requests over the network, allowing clients to send data to the Flow for processing. The Gateway is the first destination of a client request and its final destination, meaning that all incoming requests are routed to the Gateway and the Gateway is..." />
<meta property="og:image" content="https://docs.jina.ai/_images/multi-protocol-flow.png" />
<meta property="og:image:alt" content="Jina 3.14.2 Documentation" />
<meta name="description" content="Every Flow has a Gateway component that receives requests over the network, allowing clients to send data to the Flow for processing. The Gateway is the first destination of a client request and its final destination, meaning that all incoming requests are routed to the Gateway and the Gateway is..." />
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description" content="Build multimodal AI services via cloud native technologies · Neural Search · Generative AI · Cloud Native · MLOps">
<meta property="og:description" content="Build multimodal AI services via cloud native technologies · Neural Search · Generative AI · Cloud Native · MLOps">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
</script>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    
<link rel="index" title="Index" href="../../genindex/" /><link rel="search" title="Search" href="../../search/" /><link rel="next" title="Health Check" href="health-check/" /><link rel="prev" title="YAML specification" href="../flow/yaml-spec/" />
        <link rel="canonical" href="https://docs.jina.ai/concepts/gateway/index.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><!-- Generated with Sphinx 5.3.0 and Furo 2023.03.23 -->
        <title>Gateway - Jina 3.14.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/docbot.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
    <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
    <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
    <header class="mobile-header">
        <div class="header-left">
            <label class="nav-overlay-icon" for="__navigation">
                <div class="visually-hidden">Toggle site navigation sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-menu"></use>
                    </svg>
                </i>
            </label>
        </div>
        <div class="header-center">
            <a href="../../">
                <div class="brand">Jina 3.14.2 documentation</div>
            </a>
        </div>
        <div class="header-right">
            <div class="theme-toggle-container theme-toggle-header">
                <button class="theme-toggle">
                    <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                    <svg class="theme-icon-when-auto">
                        <use href="#svg-sun-half"></use>
                    </svg>
                    <svg class="theme-icon-when-dark">
                        <use href="#svg-moon"></use>
                    </svg>
                    <svg class="theme-icon-when-light">
                        <use href="#svg-sun"></use>
                    </svg>
                </button>
            </div>
            <label class="toc-overlay-icon toc-header-icon" for="__toc">
                <div class="visually-hidden">Toggle table of contents sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-toc"></use>
                    </svg>
                </i>
            </label>
        </div>
    </header>
    <aside class="sidebar-drawer">
        <div class="sidebar-container">
            
            <div class="sidebar-sticky"><a class="sidebar-brand" href="../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/logo-light.svg" alt="Light Logo" />
    <img class="sidebar-logo only-dark" src="../../_static/logo-dark.svg" alt="Dark Logo" />
  </div>
  
  
</a>
<script>
  function setPrefix(prefix){
    window.location.href = prefix
  }
</script>
<script defer>
  fetch(`https://${window.location.host}/_versions.json`)
  .then((resp) => resp.json())
  .then((data) => {
    var versionSelector = document.getElementsByClassName("version-select")[0];
    var currentPrefix = window.location.href.toString().split(window.location.host)[1].split('/')[1];

    for(var i = 0; i < data.length; i++){
      var option = document.createElement("option");
      option.innerHTML = data[i].version;
      option.value = "/" + data[i].version;
      versionSelector.appendChild(option);
      if(currentPrefix === data[i].version){
        versionSelector.selectedIndex = i + 1;
      }
    }
  })
  .catch((err) => console.log(err));
</script>
<div class="sd-d-flex-row sd-align-major-spaced">
  <a class="github-button" href="https://github.com/jina-ai/jina" data-icon="octicon-star" data-show-count="true" aria-label="Star jina-ai/jina on GitHub" style="opacity: 0;">Star</a>
  <select onChange="setPrefix(this.value)" class="version-select">
    <option value="/">latest</option>
  </select>
</div><form class="sidebar-search-container" method="get" action="../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
    <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../get-started/install/"><svg aria-hidden="true" class="sd-octicon sd-octicon-desktop-download" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M4.927 5.427l2.896 2.896a.25.25 0 00.354 0l2.896-2.896A.25.25 0 0010.896 5H8.75V.75a.75.75 0 10-1.5 0V5H5.104a.25.25 0 00-.177.427z"></path><path d="M1.573 2.573a.25.25 0 00-.073.177v7.5a.25.25 0 00.25.25h12.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-3a.75.75 0 110-1.5h3A1.75 1.75 0 0116 2.75v7.5A1.75 1.75 0 0114.25 12h-3.727c.099 1.041.52 1.872 1.292 2.757A.75.75 0 0111.25 16h-6.5a.75.75 0 01-.565-1.243c.772-.885 1.192-1.716 1.292-2.757H1.75A1.75 1.75 0 010 10.25v-7.5A1.75 1.75 0 011.75 1h3a.75.75 0 010 1.5h-3a.25.25 0 00-.177.073zM6.982 12a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5H6.982z"></path></svg> Install</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/install/docker/">Via Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/install/apple-silicon-m1-m2/">On Apple Silicon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/install/windows/">On Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/install/troubleshooting/">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/create-app/"><span class="fas fa-folder-plus"></span> Create First Project</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../preliminaries/"><span class="fas fa-egg"></span> Preliminaries</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../preliminaries/coding-in-python-yaml/">Coding in Python/YAML</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../executor/"><span class="fas fa-gears"></span> Executor</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../executor/create/">Create</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/add-endpoints/">Add Endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/serve/">Serve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/dynamic-batching/">Dynamic Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/health-check/">Health Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/hot-reload/">Hot Reload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/file-structure/">File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/containerize/">Containerize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/instrumentation/">Instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/executor-in-flow/">Executors in Flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/docarray-v2/">(Beta) DocArray v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executor/yaml-spec/"><svg aria-hidden="true" class="sd-octicon sd-octicon-file-code" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z" fill-rule="evenodd"></path></svg> YAML specification</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../flow/"><span class="fas fa-network-wired"></span> Flow</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../flow/basics/">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/add-executors/">Add Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/add-conditioning/">Add Conditioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/scale-out/">Scale Out</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/hot-reload/">Hot Reload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/handle-exceptions/">Handle Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/readiness/">Readiness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/health-check/">Health Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/instrumentation/">Instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/troubleshooting-on-multiprocess/">Troubleshooting on Multiprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flow/yaml-spec/"><svg aria-hidden="true" class="sd-octicon sd-octicon-file-code" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z" fill-rule="evenodd"></path></svg> YAML specification</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#"><span class="fas fa-door-open"></span> Gateway</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="health-check/">Health Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="rate-limit/">Rate Limit</a></li>
<li class="toctree-l2"><a class="reference internal" href="customize-http-endpoints/">Customize HTTP endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="customization/">Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml-spec/"><svg aria-hidden="true" class="sd-octicon sd-octicon-file-code" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z" fill-rule="evenodd"></path></svg> YAML specification</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../client/"><span class="fas fa-laptop-code"></span> Client</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../client/send-receive-data/">Send &amp; Receive Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/send-parameters/">Send Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/send-graphql-mutation/">Send GraphQL Mutation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/transient-errors/">Transient Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/callbacks/">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/rate-limit/">Rate Limit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/instrumentation/">Instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/third-party-clients/">Third-party clients</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud Native</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cloud-nativeness/k8s/"><span class="fas fa-dharmachakra"></span> Kubernetes Support</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-nativeness/kubernetes/">Deploy on Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud-nativeness/docker-compose/"><span class="fab fa-docker"></span> Docker Compose Support</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cloud-nativeness/opentelemetry/"><svg aria-hidden="true" class="sd-octicon sd-octicon-telescope-fill" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M8.531 10.21a.75.75 0 01.944.253l2.644 3.864a.75.75 0 11-1.238.847L9 12.424v2.826a.75.75 0 01-1.5 0v-2.826l-1.881 2.75a.75.75 0 01-1.238-.848l2.048-2.992a.75.75 0 01.293-.252l1.81-.871zM11.905.42a1.5 1.5 0 012.144.49l1.692 2.93a1.5 1.5 0 01-.649 2.102L2.895 11.815a1.5 1.5 0 01-1.95-.602l-.68-1.176a1.5 1.5 0 01.455-1.99L11.905.422zM3.279 8.119l.835 1.445 1.355-.653-.947-1.64-1.243.848zm7.728-1.874L9.6 3.808l1.243-.848 1.52 2.631-1.356.653z" fill-rule="evenodd"></path></svg> OpenTelemetry Support</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-nativeness/opentelemetry-migration/">Migrate from Prometheus/Grafana to OpenTelemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-nativeness/monitoring/">Prometheus/Grafana Support (Legacy)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../jina-ai-cloud/"><svg aria-hidden="true" class="sd-octicon sd-octicon-beaker" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M5 5.782V2.5h-.25a.75.75 0 010-1.5h6.5a.75.75 0 010 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 01-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 019.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 01-.633 1.153H3.233a.75.75 0 01-.633-1.153z" fill-rule="evenodd"></path></svg> Jina AI Cloud</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../jina-ai-cloud/login/">Login &amp; Token Management</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../executor/hub/">Executor Hub</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../executor/hub/hub-portal/">Portal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../executor/hub/create-hub-executor/">Create</a></li>
<li class="toctree-l3"><a class="reference internal" href="../executor/hub/push-executor/">Publish</a></li>
<li class="toctree-l3"><a class="reference internal" href="../executor/hub/use-hub-executor/">Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../executor/hub/sandbox/">Sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../executor/hub/debug-executor/">Debug</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../jcloud/">Jina AI Cloud Hosting</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../jcloud/configuration/"><svg aria-hidden="true" class="sd-octicon sd-octicon-file-code" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z" fill-rule="evenodd"></path></svg> Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api-rst/"><span class="fab fa-python"></span> Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/"><svg aria-hidden="true" class="sd-octicon sd-octicon-terminal" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0114.25 15H1.75A1.75 1.75 0 010 13.25V2.75zm1.75-.25a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V2.75a.25.25 0 00-.25-.25H1.75zM7.25 8a.75.75 0 01-.22.53l-2.25 2.25a.75.75 0 11-1.06-1.06L5.44 8 3.72 6.28a.75.75 0 111.06-1.06l2.25 2.25c.141.14.22.331.22.53zm1.5 1.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z" fill-rule="evenodd"></path></svg> Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yaml-spec/"><svg aria-hidden="true" class="sd-octicon sd-octicon-file-code" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z" fill-rule="evenodd"></path></svg> YAML Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../envs/"><svg aria-hidden="true" class="sd-octicon sd-octicon-list-unordered" height="1.0em" version="1.1" viewbox="0 0 16 16" width="1.0em"><path d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z" fill-rule="evenodd"></path></svg> Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry/"><span class="fas fa-tower-cell"></span> Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proto/docs/">Protocol Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-reference/clean-code/"><span class="fas fa-broom"></span> Clean &amp; Efficient Code</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Legacy Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/migrate/">Migrate Jina 2 to Jina 3</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs2.jina.ai/">Jina 2 Documentation</a></li>
</ul>

    <p class="caption" role="heading"><span class="caption-text">Ecosystem</span></p>
    <ul>
        <li class="toctree-l1">
            <a class="reference internal" href="#">
                <img class="sidebar-ecosys-logo only-light-line" src="../../_static/search-light.svg">
                <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/search-dark.svg">
                Jina</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://cloud.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../_static/hub-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/hub-dark.svg">
            Jina Hub</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://finetuner.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../_static/finetuner-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/finetuner-dark.svg">
            Finetuner</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://docarray.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../_static/docarray-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/docarray-dark.svg">
            DocArray</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://clip-as-service.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../_static/cas-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/cas-dark.svg">
            CLIP-as-service</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jcloud">
            <img class="sidebar-ecosys-logo only-light-line" src="../../_static/JCloud-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/JCloud-dark.svg">
            JCloud</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://now.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../_static/now-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../_static/now-dark.svg">
            NOW</a></li>
    </ul>
</div>

</div>

            </div>
            
        </div>
    </aside>
    <div class="main">
        <div class="content">
            <div class="article-container">
                <a href="#" class="back-to-top muted-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
                    </svg>
                    <span>Back to top</span>
                </a>
                <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
                        <button class="theme-toggle">
                            <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                            <svg class="theme-icon-when-auto">
                                <use href="#svg-sun-half"></use>
                            </svg>
                            <svg class="theme-icon-when-dark">
                                <use href="#svg-moon"></use>
                            </svg>
                            <svg class="theme-icon-when-light">
                                <use href="#svg-sun"></use>
                            </svg>
                        </button>
                    </div>
                    <label class="toc-overlay-icon toc-content-icon"
                           for="__toc">
                        <div class="visually-hidden">Toggle table of contents sidebar</div>
                        <i class="icon">
                            <svg>
                                <use href="#svg-toc"></use>
                            </svg>
                        </i>
                    </label>
                </div>
                <article role="main">
                    <section id="gateway">
<span id="id1"></span><h1><span class="fas fa-door-open"></span> Gateway<a class="headerlink" href="#gateway" title="Permalink to this heading">#</a></h1>
<p>Every <code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code> has a Gateway component that receives requests over the network, allowing clients to send data
to the Flow for processing.</p>
<p>The Gateway is the first destination of a client request and its final destination, meaning that all incoming requests
are routed to the Gateway and the Gateway is responsible for handling and responding to those requests. The Gateway
supports multiple protocols and endpoints, such as gRPC, HTTP, WebSocket, and GraphQL, allowing clients to communicate
with the Flow using the protocol of their choice.</p>
<p>In most cases, the Gateway is automatically configured when you initialize a Flow object, so you do not need to
configure it yourself.</p>
<p>However, you can always explicitly configure the Gateway in Python using the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">config_gateway()</span></code> method, or in YAML. The full YAML specification for configuring the Gateway can be
<a class="reference internal" href="yaml-spec/#gateway-yaml-spec"><span class="std std-ref">found here</span></a>.</p>
<section id="set-protocol-in-python">
<span id="flow-protocol"></span><h2>Set protocol in Python<a class="headerlink" href="#set-protocol-in-python" title="Permalink to this heading">#</a></h2>
<p>You can use three different protocols to serve the <code class="docutils literal notranslate"><span class="pre">Flow</span></code>: gRPC, HTTP and WebSocket.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">gRPC</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">docarray</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">DocumentArray</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">requests</span>


<span class="k">class</span> <span class="nc">FooExecutor</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
    <span class="nd">@requests</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">DocumentArray</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">docs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;foo was called&#39;</span><span class="p">))</span>


<span class="hll"><span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;grpc&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="n">FooExecutor</span><span class="p">)</span>
</span><span class="k">with</span> <span class="n">f</span><span class="p">:</span>
<span class="hll">    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span>
</span>    <span class="n">docs</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">docs</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;foo was called&#39;]
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">HTTP</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">docarray</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">DocumentArray</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">requests</span>


<span class="k">class</span> <span class="nc">FooExecutor</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
    <span class="nd">@requests</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">DocumentArray</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">docs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;foo was called&#39;</span><span class="p">))</span>


<span class="hll"><span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="n">FooExecutor</span><span class="p">)</span>
</span><span class="k">with</span> <span class="n">f</span><span class="p">:</span>
<span class="hll">    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;http&#39;</span><span class="p">)</span>
</span>    <span class="n">docs</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">docs</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;foo was called&#39;]
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--3" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--3">WebSocket</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">docarray</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">DocumentArray</span>
<span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">Executor</span><span class="p">,</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">requests</span>


<span class="k">class</span> <span class="nc">FooExecutor</span><span class="p">(</span><span class="n">Executor</span><span class="p">):</span>
    <span class="nd">@requests</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">DocumentArray</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">docs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;foo was called&#39;</span><span class="p">))</span>


<span class="hll"><span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;websocket&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="n">FooExecutor</span><span class="p">)</span>
</span><span class="k">with</span> <span class="n">f</span><span class="p">:</span>
<span class="hll">    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;websocket&#39;</span><span class="p">)</span>
</span>    <span class="n">docs</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">docs</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;foo was called&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="set-protocol-in-yaml">
<h2>Set protocol in YAML<a class="headerlink" href="#set-protocol-in-yaml" title="Permalink to this heading">#</a></h2>
<p>To configure the protocol in a YAML file:</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">gRPC</label><div class="tab-content docutils">
<p>Note that gRPC is the default protocol, so you can just omit it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">gateway</span><span class="p">:</span>
<span class="w">  </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;grpc&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">HTTP</label><div class="tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">gateway</span><span class="p">:</span>
<span class="w">  </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;http&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--3" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--3">WebSocket</label><div class="tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">gateway</span><span class="p">:</span>
<span class="w">  </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;websocket&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="enable-multiple-protocols">
<h2>Enable multiple protocols<a class="headerlink" href="#enable-multiple-protocols" title="Permalink to this heading">#</a></h2>
<p>You can enable multiple protocols on the Gateway. This allows polyglot clients connect to your Flow with different
protocols.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">Python</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>
<span class="hll"><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;grpc&#39;</span><span class="p">,</span> <span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="s1">&#39;websocket&#39;</span><span class="p">])</span>
</span><span class="k">with</span> <span class="n">flow</span><span class="p">:</span>
    <span class="n">flow</span><span class="o">.</span><span class="n">block</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">YAML</label><div class="tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">gateway</span><span class="p">:</span>
<span class="w">  </span><span class="nt">protocol</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;grpc&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;http&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;websocket&#39;</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/multi-protocol-flow.png"><img alt="../../_images/multi-protocol-flow.png" src="../../_images/multi-protocol-flow.png" style="width: 70%;" /></a>
</figure>
<div class="important admonition">
<p class="admonition-title">Important</p>
<p>In case you want to serve a Flow using multiple protocols, make sure to specify as much ports as protocols used.</p>
</div>
</section>
<section id="enable-tls-for-client-traffics">
<span id="flow-tls"></span><span id="custom-http"></span><h2>Enable TLS for client traffics<a class="headerlink" href="#enable-tls-for-client-traffics" title="Permalink to this heading">#</a></h2>
<p>You can enable TLS encryption between your Gateway and Clients, for any of the protocols supported by Jina (HTTP, gRPC,
and WebSocket).</p>
<div class="caution admonition">
<p class="admonition-title">Caution</p>
<p>Enabling TLS will encrypt the data that is transferred between the Flow and the Client.
Data that is passed between the microservices configured by the Flow, such as Executors, will <strong>not</strong> be encrypted.</p>
</div>
<p>To enable TLS encryption, you need to pass a valid <em>keyfile</em> and <em>certfile</em> to the Flow, using
the <code class="docutils literal notranslate"><span class="pre">ssl_keyfile</span></code> <code class="docutils literal notranslate"><span class="pre">ssl_certfile</span></code>
parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span>
    <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span>
    <span class="n">ssl_certfile</span><span class="o">=</span><span class="s1">&#39;path/to/certfile.crt&#39;</span><span class="p">,</span>
    <span class="n">ssl_keyfile</span><span class="o">=</span><span class="s1">&#39;path/to/keyfile.crt&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If both of these are provided, the Flow will automatically configure itself to use TLS encryption for its communication
with any Client.</p>
</section>
<section id="enable-in-flow-compression">
<span id="server-compress"></span><h2>Enable in-Flow compression<a class="headerlink" href="#enable-in-flow-compression" title="Permalink to this heading">#</a></h2>
<p>The communication between <code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code>s inside a <code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code> is done via gRPC. To optimize the
performance and the bandwidth of these connections, you can
enable <a class="reference external" href="https://grpc.github.io/grpc/python/grpc.html#compression">compression</a> by specifying <code class="docutils literal notranslate"><span class="pre">compression</span></code> argument to
the Gateway.</p>
<p>The supported methods are: none, <code class="docutils literal notranslate"><span class="pre">gzip</span></code> and <code class="docutils literal notranslate"><span class="pre">deflate</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this setting is only effective the internal communication of the Flow.
One can also specify the compression between client and gateway <a class="reference internal" href="../client/#client-compress"><span class="std std-ref">as described here</span></a>.</p>
</section>
<section id="get-environment-information">
<h2>Get environment information<a class="headerlink" href="#get-environment-information" title="Permalink to this heading">#</a></h2>
<p>Gateway provides an endpoint that exposes environment information where it runs.</p>
<p>It is a dict-like structure with the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jina</span></code>: A dictionary containing information about the system and the versions of several packages including jina
package itself</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">envs</span></code>: A dictionary containing all the values if set of the <a class="reference internal" href="../../envs/#jina-env-vars"><span class="std std-ref">environment variables used in Jina</span></a></p></li>
</ul>
<section id="use-grpc">
<h3>Use gRPC<a class="headerlink" href="#use-grpc" title="Permalink to this heading">#</a></h3>
<p>To see how this works, first instantiate a Flow with an Executor exposed to a specific port and block it for serving:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="k">with</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">protocol</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;grpc&#39;</span><span class="p">],</span> <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">block</span><span class="p">()</span>
</pre></div>
</div>
<p>Then, you can use <a class="reference external" href="https://github.com/fullstorydev/grpcurl">grpcurl</a>  sending status check request to the Gateway.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>fullstorydev/grpcurl:latest
docker<span class="w"> </span>run<span class="w"> </span>--network<span class="o">=</span><span class="s1">&#39;host&#39;</span><span class="w"> </span>fullstorydev/grpcurl<span class="w"> </span>-plaintext<span class="w"> </span><span class="m">127</span>.0.0.1:12345<span class="w"> </span>jina.JinaInfoRPC/_status
</pre></div>
</div>
<p>The error-free output below signifies a correctly running Gateway:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jina&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ci-vendor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;docarray&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;grpcio&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jina&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jina-proto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jina-vcs-tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;platform&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;platform-release&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;platform-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;proto-backend&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;protobuf&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;python&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;pyyaml&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;session-id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uptime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;envs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;JINA_AUTH_TOKEN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DEFAULT_HOST&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DEFAULT_TIMEOUT_CTRL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DEPLOYMENT_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DISABLE_HEALTHCHECK_LOGS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DISABLE_UVLOOP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_EARLY_STOP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_FULL_CLI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_GATEWAY_IMAGE&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_GRPC_RECV_BYTES&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_GRPC_SEND_BYTES&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_HUBBLE_REGISTRY&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_HUB_NO_IMAGE_REBUILD&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOCKS_ROOT&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOG_CONFIG&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOG_LEVEL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOG_NO_COLOR&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_MP_START_METHOD&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_RANDOM_PORT_MAX&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_RANDOM_PORT_MIN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also use it to check Executor status, as Executor’s communication protocol is gRPC.</p>
</div>
</section>
<section id="configure-gateway-grpc-options">
<span id="gateway-grpc-server-options"></span><h3>Configure Gateway gRPC options<a class="headerlink" href="#configure-gateway-grpc-options" title="Permalink to this heading">#</a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Gateway</span></code> supports the <code class="docutils literal notranslate"><span class="pre">grpc_server_options</span></code> parameter which allows more customization of the <strong>gRPC</strong>
server. The <code class="docutils literal notranslate"><span class="pre">grpc_server_options</span></code> parameter accepts a dictionary of <strong>gRPC</strong> configuration options which will be
used to overwrite the default options. The <strong>gRPC</strong> channel used for server to server communication can also be
customized using the <code class="docutils literal notranslate"><span class="pre">grpc_channel_options</span></code> parameter.</p>
<p>The default <strong>gRPC</strong> options are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39;grpc.max_send_message_length&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;grpc.max_receive_message_length&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;grpc.keepalive_time_ms&#39;</span><span class="p">,</span> <span class="mi">9999</span><span class="p">),</span>
<span class="c1"># send keepalive ping every 9 second, default is 2 hours.</span>
<span class="p">(</span><span class="s1">&#39;grpc.keepalive_timeout_ms&#39;</span><span class="p">,</span> <span class="mi">4999</span><span class="p">),</span>
<span class="c1"># keepalive ping time out after 4 seconds, default is 20 seconds</span>
<span class="p">(</span><span class="s1">&#39;grpc.keepalive_permit_without_calls&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
<span class="c1"># allow keepalive pings when there&#39;s no gRPC calls</span>
<span class="p">(</span><span class="s1">&#39;grpc.http1.max_pings_without_data&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="c1"># allow unlimited amount of keepalive pings without data</span>
<span class="p">(</span><span class="s1">&#39;grpc.http1.min_time_between_pings_ms&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
<span class="c1"># allow grpc pings from client every 9 seconds</span>
<span class="p">(</span><span class="s1">&#39;grpc.http1.min_ping_interval_without_data_ms&#39;</span><span class="p">,</span> <span class="mi">5000</span><span class="p">),</span>
<span class="c1"># allow grpc pings from client without data every 4 seconds</span>
</pre></div>
</div>
<p>Refer to the <a class="reference external" href="https://grpc.github.io/grpc/python/glossary.html#term-channel_arguments">channel_arguments</a> section for
the full list of available <strong>gRPC</strong> options.</p>
<div class="seealso admonition hint">
<p class="admonition-title">Hint</p>
<p>Refer to the <a class="reference internal" href="../client/send-receive-data/#client-grpc-channel-options"><span class="std std-ref">Configure gRPC Client options</span></a> section for configuring the <code class="docutils literal notranslate"><span class="pre">Client</span></code> <strong>gRPC</strong> channel options.
Refer to the <span class="xref std std-ref">Configure Executor gRPC options</span> section for configuring the <code class="docutils literal notranslate"><span class="pre">Executor</span></code> <strong>gRPC</strong> options.</p>
</div>
</section>
<section id="use-http-websocket">
<h3>Use HTTP/WebSocket<a class="headerlink" href="#use-http-websocket" title="Permalink to this heading">#</a></h3>
<p>When using HTTP or WebSocket as the Gateway protocol, you can use curl to target the <code class="docutils literal notranslate"><span class="pre">/status</span></code> endpoint and get the Jina
info.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>http://localhost:12345/status
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jina&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;jina&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;docarray&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jina-proto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jina-vcs-tag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;protobuf&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;proto-backend&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;grpcio&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;pyyaml&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;python&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;platform&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;platform-release&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;platform-version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;session-id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uptime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;######&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ci-vendor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;envs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;JINA_AUTH_TOKEN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DEFAULT_HOST&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DEFAULT_TIMEOUT_CTRL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DEPLOYMENT_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DISABLE_UVLOOP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_EARLY_STOP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_FULL_CLI&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_GATEWAY_IMAGE&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_GRPC_RECV_BYTES&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_GRPC_SEND_BYTES&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_HUBBLE_REGISTRY&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_HUB_NO_IMAGE_REBUILD&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOG_CONFIG&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOG_LEVEL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOG_NO_COLOR&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_MP_START_METHOD&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_RANDOM_PORT_MAX&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_RANDOM_PORT_MIN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_DISABLE_HEALTHCHECK_LOGS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;JINA_LOCKS_ROOT&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;(unset)&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="custom-logging-configuration">
<span id="gateway-logging-configuration"></span><h2>Custom logging configuration<a class="headerlink" href="#custom-logging-configuration" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference internal" href="../flow/basics/#logging-configuration"><span class="std std-ref">Custom logging configuration</span></a> section describes customizing the logging configuration for all entities of the <code class="docutils literal notranslate"><span class="pre">Flow</span></code>.
The <code class="docutils literal notranslate"><span class="pre">Gateway</span></code> logging can also be individually configured using a custom <code class="docutils literal notranslate"><span class="pre">logging.json.yml</span></code> file as in the below example. The custom logging file
<code class="docutils literal notranslate"><span class="pre">logging.json.yml</span></code> is described in more detail in the <a class="reference internal" href="../flow/basics/#logging-configuration"><span class="std std-ref">Custom logging configuration</span></a> section.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">Python</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">config_gateway</span><span class="p">(</span><span class="n">log_config</span><span class="o">=</span><span class="s1">&#39;./logging.json.yml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">YAML</label><div class="tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Flow</span>
<span class="nt">gateway</span><span class="p">:</span>
<span class="w">  </span><span class="nt">log_config</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;./logging.json.yml&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../client/#client"><span class="std std-ref">Access the Flow with the Client</span></a></p></li>
<li><p><a class="reference internal" href="../../cloud-nativeness/kubernetes/#kubernetes"><span class="std std-ref">Deployment with Kubernetes</span></a></p></li>
<li><p><a class="reference internal" href="../../cloud-nativeness/docker-compose/#docker-compose"><span class="std std-ref">Deployment with Docker Compose</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
</section>
</section>

                </article>
            </div>
            <footer>
                
                <div class="related-pages">
                    <a class="next-page" href="health-check/">
                        <div class="page-info">
                            <div class="context">
                                <span>Next</span>
                            </div>
                            <div class="title">Health Check</div>
                        </div>
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                    </a>
                    <a class="prev-page" href="../flow/yaml-spec/">
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                        <div class="page-info">
                            <div class="context">
                                <span>Previous</span>
                            </div>
                            
                            <div class="title"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-file-code" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z"></path></svg> YAML specification</div>
                            
                        </div>
                    </a>
                </div>
                <div class="bottom-of-page">
                    <div class="left-details">
                        <div class="copyright">
                            Copyright &#169; Jina AI Limited. All rights reserved.
                        </div><div class="last-updated">
                            Last updated on Mar 24, 2023</div>
                    </div>
                    <div class="right-details">
                        <div class="social-btns">
                            <a class='social-btn' href="https://github.com/jina-ai/jina" aria-label="GitHub"
                               target="_blank" rel="noreferrer"> <i class="fab fa-github"></i></a>
                            <a class='social-btn' href="https://slack.jina.ai" aria-label="Slack" target="_blank"
                               rel="noreferrer"> <i class="fab fa-slack"></i></a>
                            <a class='social-btn' href="https://youtube.com/c/jina-ai" aria-label="YouTube"
                               target="_blank" rel="noreferrer"> <i class="fab fa-youtube"></i></a>
                            <a class='social-btn' href="https://twitter.com/JinaAI_" aria-label="Twitter"
                               target="_blank" rel="noreferrer"> <i class="fab fa-twitter"></i></a>
                            <a class='social-btn' href="https://www.linkedin.com/company/jinaai/" aria-label="LinkedIn"
                               target="_blank" rel="noreferrer"> <i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                
            </footer>
        </div>
        <aside class="toc-drawer">
            
            
            <div class="toc-sticky toc-scroll">
                <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
                </div>
                <div class="toc-tree-container">
                    <div class="toc-tree">
                        <ul>
<li><a class="reference internal" href="#"><span class="fas fa-door-open"></span> Gateway</a><ul>
<li><a class="reference internal" href="#set-protocol-in-python">Set protocol in Python</a></li>
<li><a class="reference internal" href="#set-protocol-in-yaml">Set protocol in YAML</a></li>
<li><a class="reference internal" href="#enable-multiple-protocols">Enable multiple protocols</a></li>
<li><a class="reference internal" href="#enable-tls-for-client-traffics">Enable TLS for client traffics</a></li>
<li><a class="reference internal" href="#enable-in-flow-compression">Enable in-Flow compression</a></li>
<li><a class="reference internal" href="#get-environment-information">Get environment information</a><ul>
<li><a class="reference internal" href="#use-grpc">Use gRPC</a></li>
<li><a class="reference internal" href="#configure-gateway-grpc-options">Configure Gateway gRPC options</a></li>
<li><a class="reference internal" href="#use-http-websocket">Use HTTP/WebSocket</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-logging-configuration">Custom logging configuration</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

                    </div>
                </div>
            </div>
            
            
        </aside>
    </div>
</div>
<img referrerpolicy="no-referrer-when-downgrade"
     src="https://static.scarf.sh/a.png?x-pxid=2823e771-0e1e-4320-8fde-48bc48e53262"/><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    </body>
</html>